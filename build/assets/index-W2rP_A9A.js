const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StoryConfig-DbpdX8vt.js","assets/user-BBNaTgZy.js","assets/refresh-cw-CsxKXGEf.js","assets/arrow-right-7eUXvB6i.js","assets/grid-3x3-DKWlmmJu.js","assets/StoryViewer-B6i1i-xm.js","assets/PaymentModal-DNwPN9aS.js","assets/lock-CYEKKvdY.js","assets/PhotoshootGallery-ZyKwmsdl.js","assets/arrow-left-CNZyOFWW.js","assets/image-B4TWdGcZ.js","assets/Pricing-Dsoj3tg6.js","assets/building-2-CofFS5Zn.js","assets/Login-BGWOqODC.js","assets/mail-DiHIOrF_.js","assets/Signup-CHyMzVpJ.js","assets/Dashboard-CfI-gWH3.js","assets/InfoPage-DiiLNDg_.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Xv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Mf={exports:{}},Ka={},Lf={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function hw(){if(Wg)return xe;Wg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.iterator;function I(q){return q===null||typeof q!="object"?null:(q=T&&q[T]||q["@@iterator"],typeof q=="function"?q:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,B={};function O(q,J,ye){this.props=q,this.context=J,this.refs=B,this.updater=ye||A}O.prototype.isReactComponent={},O.prototype.setState=function(q,J){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,J,"setState")},O.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function Q(){}Q.prototype=O.prototype;function X(q,J,ye){this.props=q,this.context=J,this.refs=B,this.updater=ye||A}var K=X.prototype=new Q;K.constructor=X,b(K,O.prototype),K.isPureReactComponent=!0;var ee=Array.isArray,le=Object.prototype.hasOwnProperty,oe={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function P(q,J,ye){var Pe,Ne={},Le=null,Ge=null;if(J!=null)for(Pe in J.ref!==void 0&&(Ge=J.ref),J.key!==void 0&&(Le=""+J.key),J)le.call(J,Pe)&&!M.hasOwnProperty(Pe)&&(Ne[Pe]=J[Pe]);var He=arguments.length-2;if(He===1)Ne.children=ye;else if(1<He){for(var Ye=Array(He),Rt=0;Rt<He;Rt++)Ye[Rt]=arguments[Rt+2];Ne.children=Ye}if(q&&q.defaultProps)for(Pe in He=q.defaultProps,He)Ne[Pe]===void 0&&(Ne[Pe]=He[Pe]);return{$$typeof:n,type:q,key:Le,ref:Ge,props:Ne,_owner:oe.current}}function R(q,J){return{$$typeof:n,type:q.type,key:J,ref:q.ref,props:q.props,_owner:q._owner}}function k(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function V(q){var J={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ye){return J[ye]})}var F=/\/+/g;function D(q,J){return typeof q=="object"&&q!==null&&q.key!=null?V(""+q.key):J.toString(36)}function nt(q,J,ye,Pe,Ne){var Le=typeof q;(Le==="undefined"||Le==="boolean")&&(q=null);var Ge=!1;if(q===null)Ge=!0;else switch(Le){case"string":case"number":Ge=!0;break;case"object":switch(q.$$typeof){case n:case e:Ge=!0}}if(Ge)return Ge=q,Ne=Ne(Ge),q=Pe===""?"."+D(Ge,0):Pe,ee(Ne)?(ye="",q!=null&&(ye=q.replace(F,"$&/")+"/"),nt(Ne,J,ye,"",function(Rt){return Rt})):Ne!=null&&(k(Ne)&&(Ne=R(Ne,ye+(!Ne.key||Ge&&Ge.key===Ne.key?"":(""+Ne.key).replace(F,"$&/")+"/")+q)),J.push(Ne)),1;if(Ge=0,Pe=Pe===""?".":Pe+":",ee(q))for(var He=0;He<q.length;He++){Le=q[He];var Ye=Pe+D(Le,He);Ge+=nt(Le,J,ye,Ye,Ne)}else if(Ye=I(q),typeof Ye=="function")for(q=Ye.call(q),He=0;!(Le=q.next()).done;)Le=Le.value,Ye=Pe+D(Le,He++),Ge+=nt(Le,J,ye,Ye,Ne);else if(Le==="object")throw J=String(q),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Ge}function Et(q,J,ye){if(q==null)return q;var Pe=[],Ne=0;return nt(q,Pe,"","",function(Le){return J.call(ye,Le,Ne++)}),Pe}function Je(q){if(q._status===-1){var J=q._result;J=J(),J.then(function(ye){(q._status===0||q._status===-1)&&(q._status=1,q._result=ye)},function(ye){(q._status===0||q._status===-1)&&(q._status=2,q._result=ye)}),q._status===-1&&(q._status=0,q._result=J)}if(q._status===1)return q._result.default;throw q._result}var be={current:null},se={transition:null},ve={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:se,ReactCurrentOwner:oe};function ce(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:Et,forEach:function(q,J,ye){Et(q,function(){J.apply(this,arguments)},ye)},count:function(q){var J=0;return Et(q,function(){J++}),J},toArray:function(q){return Et(q,function(J){return J})||[]},only:function(q){if(!k(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},xe.Component=O,xe.Fragment=t,xe.Profiler=i,xe.PureComponent=X,xe.StrictMode=r,xe.Suspense=p,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,xe.act=ce,xe.cloneElement=function(q,J,ye){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var Pe=b({},q.props),Ne=q.key,Le=q.ref,Ge=q._owner;if(J!=null){if(J.ref!==void 0&&(Le=J.ref,Ge=oe.current),J.key!==void 0&&(Ne=""+J.key),q.type&&q.type.defaultProps)var He=q.type.defaultProps;for(Ye in J)le.call(J,Ye)&&!M.hasOwnProperty(Ye)&&(Pe[Ye]=J[Ye]===void 0&&He!==void 0?He[Ye]:J[Ye])}var Ye=arguments.length-2;if(Ye===1)Pe.children=ye;else if(1<Ye){He=Array(Ye);for(var Rt=0;Rt<Ye;Rt++)He[Rt]=arguments[Rt+2];Pe.children=He}return{$$typeof:n,type:q.type,key:Ne,ref:Le,props:Pe,_owner:Ge}},xe.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:a,_context:q},q.Consumer=q},xe.createElement=P,xe.createFactory=function(q){var J=P.bind(null,q);return J.type=q,J},xe.createRef=function(){return{current:null}},xe.forwardRef=function(q){return{$$typeof:d,render:q}},xe.isValidElement=k,xe.lazy=function(q){return{$$typeof:y,_payload:{_status:-1,_result:q},_init:Je}},xe.memo=function(q,J){return{$$typeof:m,type:q,compare:J===void 0?null:J}},xe.startTransition=function(q){var J=se.transition;se.transition={};try{q()}finally{se.transition=J}},xe.unstable_act=ce,xe.useCallback=function(q,J){return be.current.useCallback(q,J)},xe.useContext=function(q){return be.current.useContext(q)},xe.useDebugValue=function(){},xe.useDeferredValue=function(q){return be.current.useDeferredValue(q)},xe.useEffect=function(q,J){return be.current.useEffect(q,J)},xe.useId=function(){return be.current.useId()},xe.useImperativeHandle=function(q,J,ye){return be.current.useImperativeHandle(q,J,ye)},xe.useInsertionEffect=function(q,J){return be.current.useInsertionEffect(q,J)},xe.useLayoutEffect=function(q,J){return be.current.useLayoutEffect(q,J)},xe.useMemo=function(q,J){return be.current.useMemo(q,J)},xe.useReducer=function(q,J,ye){return be.current.useReducer(q,J,ye)},xe.useRef=function(q){return be.current.useRef(q)},xe.useState=function(q){return be.current.useState(q)},xe.useSyncExternalStore=function(q,J,ye){return be.current.useSyncExternalStore(q,J,ye)},xe.useTransition=function(){return be.current.useTransition()},xe.version="18.3.1",xe}var Kg;function Mh(){return Kg||(Kg=1,Lf.exports=hw()),Lf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function pw(){if(Jg)return Ka;Jg=1;var n=Mh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,p,m){var y,T={},I=null,A=null;m!==void 0&&(I=""+m),p.key!==void 0&&(I=""+p.key),p.ref!==void 0&&(A=p.ref);for(y in p)r.call(p,y)&&!a.hasOwnProperty(y)&&(T[y]=p[y]);if(d&&d.defaultProps)for(y in p=d.defaultProps,p)T[y]===void 0&&(T[y]=p[y]);return{$$typeof:e,type:d,key:I,ref:A,props:T,_owner:i.current}}return Ka.Fragment=t,Ka.jsx=l,Ka.jsxs=l,Ka}var Yg;function mw(){return Yg||(Yg=1,Mf.exports=pw()),Mf.exports}var N=mw(),We=Mh();const gw=Xv(We);var Ku={},Vf={exports:{}},cn={},Uf={exports:{}},Ff={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function yw(){return Qg||(Qg=1,(function(n){function e(se,ve){var ce=se.length;se.push(ve);e:for(;0<ce;){var q=ce-1>>>1,J=se[q];if(0<i(J,ve))se[q]=ve,se[ce]=J,ce=q;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var ve=se[0],ce=se.pop();if(ce!==ve){se[0]=ce;e:for(var q=0,J=se.length,ye=J>>>1;q<ye;){var Pe=2*(q+1)-1,Ne=se[Pe],Le=Pe+1,Ge=se[Le];if(0>i(Ne,ce))Le<J&&0>i(Ge,Ne)?(se[q]=Ge,se[Le]=ce,q=Le):(se[q]=Ne,se[Pe]=ce,q=Pe);else if(Le<J&&0>i(Ge,ce))se[q]=Ge,se[Le]=ce,q=Le;else break e}}return ve}function i(se,ve){var ce=se.sortIndex-ve.sortIndex;return ce!==0?ce:se.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();n.unstable_now=function(){return l.now()-d}}var p=[],m=[],y=1,T=null,I=3,A=!1,b=!1,B=!1,O=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(se){for(var ve=t(m);ve!==null;){if(ve.callback===null)r(m);else if(ve.startTime<=se)r(m),ve.sortIndex=ve.expirationTime,e(p,ve);else break;ve=t(m)}}function ee(se){if(B=!1,K(se),!b)if(t(p)!==null)b=!0,Je(le);else{var ve=t(m);ve!==null&&be(ee,ve.startTime-se)}}function le(se,ve){b=!1,B&&(B=!1,Q(P),P=-1),A=!0;var ce=I;try{for(K(ve),T=t(p);T!==null&&(!(T.expirationTime>ve)||se&&!V());){var q=T.callback;if(typeof q=="function"){T.callback=null,I=T.priorityLevel;var J=q(T.expirationTime<=ve);ve=n.unstable_now(),typeof J=="function"?T.callback=J:T===t(p)&&r(p),K(ve)}else r(p);T=t(p)}if(T!==null)var ye=!0;else{var Pe=t(m);Pe!==null&&be(ee,Pe.startTime-ve),ye=!1}return ye}finally{T=null,I=ce,A=!1}}var oe=!1,M=null,P=-1,R=5,k=-1;function V(){return!(n.unstable_now()-k<R)}function F(){if(M!==null){var se=n.unstable_now();k=se;var ve=!0;try{ve=M(!0,se)}finally{ve?D():(oe=!1,M=null)}}else oe=!1}var D;if(typeof X=="function")D=function(){X(F)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,Et=nt.port2;nt.port1.onmessage=F,D=function(){Et.postMessage(null)}}else D=function(){O(F,0)};function Je(se){M=se,oe||(oe=!0,D())}function be(se,ve){P=O(function(){se(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){b||A||(b=!0,Je(le))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(se){switch(I){case 1:case 2:case 3:var ve=3;break;default:ve=I}var ce=I;I=ve;try{return se()}finally{I=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,ve){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ce=I;I=se;try{return ve()}finally{I=ce}},n.unstable_scheduleCallback=function(se,ve,ce){var q=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?q+ce:q):ce=q,se){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ce+J,se={id:y++,callback:ve,priorityLevel:se,startTime:ce,expirationTime:J,sortIndex:-1},ce>q?(se.sortIndex=ce,e(m,se),t(p)===null&&se===t(m)&&(B?(Q(P),P=-1):B=!0,be(ee,ce-q))):(se.sortIndex=J,e(p,se),b||A||(b=!0,Je(le))),se},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(se){var ve=I;return function(){var ce=I;I=ve;try{return se.apply(this,arguments)}finally{I=ce}}}})(Ff)),Ff}var Xg;function _w(){return Xg||(Xg=1,Uf.exports=yw()),Uf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function vw(){if(Zg)return cn;Zg=1;var n=Mh(),e=_w();function t(o){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+o,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(o,s){l(o,s),l(o+"Capture",s)}function l(o,s){for(i[o]=s,o=0;o<s.length;o++)r.add(s[o])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},T={};function I(o){return p.call(T,o)?!0:p.call(y,o)?!1:m.test(o)?T[o]=!0:(y[o]=!0,!1)}function A(o,s,u,g){if(u!==null&&u.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return g?!1:u!==null?!u.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,s,u,g){if(s===null||typeof s>"u"||A(o,s,u,g))return!0;if(g)return!1;if(u!==null)switch(u.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(o,s,u,g,_,E,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=g,this.attributeNamespace=_,this.mustUseProperty=u,this.propertyName=o,this.type=s,this.sanitizeURL=E,this.removeEmptyString=S}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){O[o]=new B(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var s=o[0];O[s]=new B(s,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){O[o]=new B(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){O[o]=new B(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){O[o]=new B(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){O[o]=new B(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){O[o]=new B(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){O[o]=new B(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){O[o]=new B(o,5,!1,o.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function X(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var s=o.replace(Q,X);O[s]=new B(s,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var s=o.replace(Q,X);O[s]=new B(s,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var s=o.replace(Q,X);O[s]=new B(s,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){O[o]=new B(o,1,!1,o.toLowerCase(),null,!1,!1)}),O.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){O[o]=new B(o,1,!1,o.toLowerCase(),null,!0,!0)});function K(o,s,u,g){var _=O.hasOwnProperty(s)?O[s]:null;(_!==null?_.type!==0:g||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(b(s,u,_,g)&&(u=null),g||_===null?I(s)&&(u===null?o.removeAttribute(s):o.setAttribute(s,""+u)):_.mustUseProperty?o[_.propertyName]=u===null?_.type===3?!1:"":u:(s=_.attributeName,g=_.attributeNamespace,u===null?o.removeAttribute(s):(_=_.type,u=_===3||_===4&&u===!0?"":""+u,g?o.setAttributeNS(g,s,u):o.setAttribute(s,u))))}var ee=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),oe=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),V=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),nt=Symbol.for("react.suspense_list"),Et=Symbol.for("react.memo"),Je=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),se=Symbol.iterator;function ve(o){return o===null||typeof o!="object"?null:(o=se&&o[se]||o["@@iterator"],typeof o=="function"?o:null)}var ce=Object.assign,q;function J(o){if(q===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);q=s&&s[1]||""}return`
`+q+o}var ye=!1;function Pe(o,s){if(!o||ye)return"";ye=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var g=$}Reflect.construct(o,[],s)}else{try{s.call()}catch($){g=$}o.call(s.prototype)}else{try{throw Error()}catch($){g=$}o()}}catch($){if($&&g&&typeof $.stack=="string"){for(var _=$.stack.split(`
`),E=g.stack.split(`
`),S=_.length-1,x=E.length-1;1<=S&&0<=x&&_[S]!==E[x];)x--;for(;1<=S&&0<=x;S--,x--)if(_[S]!==E[x]){if(S!==1||x!==1)do if(S--,x--,0>x||_[S]!==E[x]){var L=`
`+_[S].replace(" at new "," at ");return o.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",o.displayName)),L}while(1<=S&&0<=x);break}}}finally{ye=!1,Error.prepareStackTrace=u}return(o=o?o.displayName||o.name:"")?J(o):""}function Ne(o){switch(o.tag){case 5:return J(o.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return o=Pe(o.type,!1),o;case 11:return o=Pe(o.type.render,!1),o;case 1:return o=Pe(o.type,!0),o;default:return""}}function Le(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case M:return"Fragment";case oe:return"Portal";case R:return"Profiler";case P:return"StrictMode";case D:return"Suspense";case nt:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case V:return(o.displayName||"Context")+".Consumer";case k:return(o._context.displayName||"Context")+".Provider";case F:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Et:return s=o.displayName||null,s!==null?s:Le(o.type)||"Memo";case Je:s=o._payload,o=o._init;try{return Le(o(s))}catch{}}return null}function Ge(o){var s=o.type;switch(o.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=s.render,o=o.displayName||o.name||"",s.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(s);case 8:return s===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function He(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ye(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Rt(o){var s=Ye(o)?"checked":"value",u=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),g=""+o[s];if(!o.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var _=u.get,E=u.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return _.call(this)},set:function(S){g=""+S,E.call(this,S)}}),Object.defineProperty(o,s,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(S){g=""+S},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function yr(o){o._valueTracker||(o._valueTracker=Rt(o))}function ko(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var u=s.getValue(),g="";return o&&(g=Ye(o)?o.checked?"true":"false":o.value),o=g,o!==u?(s.setValue(o),!0):!1}function Yr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Oi(o,s){var u=s.checked;return ce({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??o._wrapperState.initialChecked})}function Do(o,s){var u=s.defaultValue==null?"":s.defaultValue,g=s.checked!=null?s.checked:s.defaultChecked;u=He(s.value!=null?s.value:u),o._wrapperState={initialChecked:g,initialValue:u,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function js(o,s){s=s.checked,s!=null&&K(o,"checked",s,!1)}function ea(o,s){js(o,s);var u=He(s.value),g=s.type;if(u!=null)g==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+u):o.value!==""+u&&(o.value=""+u);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}s.hasOwnProperty("value")?Mo(o,s.type,u):s.hasOwnProperty("defaultValue")&&Mo(o,s.type,He(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(o.defaultChecked=!!s.defaultChecked)}function Dl(o,s,u){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var g=s.type;if(!(g!=="submit"&&g!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+o._wrapperState.initialValue,u||s===o.value||(o.value=s),o.defaultValue=s}u=o.name,u!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,u!==""&&(o.name=u)}function Mo(o,s,u){(s!=="number"||Yr(o.ownerDocument)!==o)&&(u==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+u&&(o.defaultValue=""+u))}var _r=Array.isArray;function vr(o,s,u,g){if(o=o.options,s){s={};for(var _=0;_<u.length;_++)s["$"+u[_]]=!0;for(u=0;u<o.length;u++)_=s.hasOwnProperty("$"+o[u].value),o[u].selected!==_&&(o[u].selected=_),_&&g&&(o[u].defaultSelected=!0)}else{for(u=""+He(u),s=null,_=0;_<o.length;_++){if(o[_].value===u){o[_].selected=!0,g&&(o[_].defaultSelected=!0);return}s!==null||o[_].disabled||(s=o[_])}s!==null&&(s.selected=!0)}}function ta(o,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},s,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Lo(o,s){var u=s.value;if(u==null){if(u=s.children,s=s.defaultValue,u!=null){if(s!=null)throw Error(t(92));if(_r(u)){if(1<u.length)throw Error(t(93));u=u[0]}s=u}s==null&&(s=""),u=s}o._wrapperState={initialValue:He(u)}}function Vo(o,s){var u=He(s.value),g=He(s.defaultValue);u!=null&&(u=""+u,u!==o.value&&(o.value=u),s.defaultValue==null&&o.defaultValue!==u&&(o.defaultValue=u)),g!=null&&(o.defaultValue=""+g)}function na(o){var s=o.textContent;s===o._wrapperState.initialValue&&s!==""&&s!==null&&(o.value=s)}function Tt(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(o,s){return o==null||o==="http://www.w3.org/1999/xhtml"?Tt(s):o==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Er,ra=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,u,g,_){MSApp.execUnsafeLocalFunction(function(){return o(s,u,g,_)})}:o})(function(o,s){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=s;else{for(Er=Er||document.createElement("div"),Er.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Er.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;s.firstChild;)o.appendChild(s.firstChild)}});function Qr(o,s){if(s){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=s;return}}o.textContent=s}var Bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qi=["Webkit","ms","Moz","O"];Object.keys(Bi).forEach(function(o){qi.forEach(function(s){s=s+o.charAt(0).toUpperCase()+o.substring(1),Bi[s]=Bi[o]})});function ia(o,s,u){return s==null||typeof s=="boolean"||s===""?"":u||typeof s!="number"||s===0||Bi.hasOwnProperty(o)&&Bi[o]?(""+s).trim():s+"px"}function oa(o,s){o=o.style;for(var u in s)if(s.hasOwnProperty(u)){var g=u.indexOf("--")===0,_=ia(u,s[u],g);u==="float"&&(u="cssFloat"),g?o.setProperty(u,_):o[u]=_}}var sa=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aa(o,s){if(s){if(sa[o]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function la(o,s){if(o.indexOf("-")===-1)return typeof s.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gi=null;function Uo(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Fo=null,vn=null,er=null;function bo(o){if(o=Da(o)){if(typeof Fo!="function")throw Error(t(280));var s=o.stateNode;s&&(s=lu(s),Fo(o.stateNode,o.type,s))}}function tr(o){vn?er?er.push(o):er=[o]:vn=o}function ua(){if(vn){var o=vn,s=er;if(er=vn=null,bo(o),s)for(o=0;o<s.length;o++)bo(s[o])}}function Hi(o,s){return o(s)}function ca(){}var Tr=!1;function da(o,s,u){if(Tr)return o(s,u);Tr=!0;try{return Hi(o,s,u)}finally{Tr=!1,(vn!==null||er!==null)&&(ca(),ua())}}function ft(o,s){var u=o.stateNode;if(u===null)return null;var g=lu(u);if(g===null)return null;u=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(t(231,s,typeof u));return u}var Oo=!1;if(d)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){Oo=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{Oo=!1}function zi(o,s,u,g,_,E,S,x,L){var $=Array.prototype.slice.call(arguments,3);try{s.apply(u,$)}catch(j){this.onError(j)}}var $i=!1,Bo=null,Ln=!1,fa=null,sd={onError:function(o){$i=!0,Bo=o}};function qo(o,s,u,g,_,E,S,x,L){$i=!1,Bo=null,zi.apply(sd,arguments)}function Ml(o,s,u,g,_,E,S,x,L){if(qo.apply(this,arguments),$i){if($i){var $=Bo;$i=!1,Bo=null}else throw Error(t(198));Ln||(Ln=!0,fa=$)}}function Vn(o){var s=o,u=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(u=s.return),o=s.return;while(o)}return s.tag===3?u:null}function Wi(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function Un(o){if(Vn(o)!==o)throw Error(t(188))}function Ll(o){var s=o.alternate;if(!s){if(s=Vn(o),s===null)throw Error(t(188));return s!==o?null:o}for(var u=o,g=s;;){var _=u.return;if(_===null)break;var E=_.alternate;if(E===null){if(g=_.return,g!==null){u=g;continue}break}if(_.child===E.child){for(E=_.child;E;){if(E===u)return Un(_),o;if(E===g)return Un(_),s;E=E.sibling}throw Error(t(188))}if(u.return!==g.return)u=_,g=E;else{for(var S=!1,x=_.child;x;){if(x===u){S=!0,u=_,g=E;break}if(x===g){S=!0,g=_,u=E;break}x=x.sibling}if(!S){for(x=E.child;x;){if(x===u){S=!0,u=E,g=_;break}if(x===g){S=!0,g=E,u=_;break}x=x.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==g)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?o:s}function ha(o){return o=Ll(o),o!==null?Go(o):null}function Go(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var s=Go(o);if(s!==null)return s;o=o.sibling}return null}var Ho=e.unstable_scheduleCallback,pa=e.unstable_cancelCallback,Vl=e.unstable_shouldYield,ad=e.unstable_requestPaint,Qe=e.unstable_now,Ul=e.unstable_getCurrentPriorityLevel,Ki=e.unstable_ImmediatePriority,Xr=e.unstable_UserBlockingPriority,En=e.unstable_NormalPriority,ma=e.unstable_LowPriority,Fl=e.unstable_IdlePriority,Ji=null,dn=null;function bl(o){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Ji,o,void 0,(o.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:Bl,ga=Math.log,Ol=Math.LN2;function Bl(o){return o>>>=0,o===0?32:31-(ga(o)/Ol|0)|0}var zo=64,$o=4194304;function Zr(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Yi(o,s){var u=o.pendingLanes;if(u===0)return 0;var g=0,_=o.suspendedLanes,E=o.pingedLanes,S=u&268435455;if(S!==0){var x=S&~_;x!==0?g=Zr(x):(E&=S,E!==0&&(g=Zr(E)))}else S=u&~_,S!==0?g=Zr(S):E!==0&&(g=Zr(E));if(g===0)return 0;if(s!==0&&s!==g&&(s&_)===0&&(_=g&-g,E=s&-s,_>=E||_===16&&(E&4194240)!==0))return s;if((g&4)!==0&&(g|=u&16),s=o.entangledLanes,s!==0)for(o=o.entanglements,s&=g;0<s;)u=31-Qt(s),_=1<<u,g|=o[u],s&=~_;return g}function ld(o,s){switch(o){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ir(o,s){for(var u=o.suspendedLanes,g=o.pingedLanes,_=o.expirationTimes,E=o.pendingLanes;0<E;){var S=31-Qt(E),x=1<<S,L=_[S];L===-1?((x&u)===0||(x&g)!==0)&&(_[S]=ld(x,s)):L<=s&&(o.expiredLanes|=x),E&=~x}}function fn(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Qi(){var o=zo;return zo<<=1,(zo&4194240)===0&&(zo=64),o}function jr(o){for(var s=[],u=0;31>u;u++)s.push(o);return s}function ei(o,s,u){o.pendingLanes|=s,s!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,s=31-Qt(s),o[s]=u}function Ke(o,s){var u=o.pendingLanes&~s;o.pendingLanes=s,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=s,o.mutableReadLanes&=s,o.entangledLanes&=s,s=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<u;){var _=31-Qt(u),E=1<<_;s[_]=0,g[_]=-1,o[_]=-1,u&=~E}}function ti(o,s){var u=o.entangledLanes|=s;for(o=o.entanglements;u;){var g=31-Qt(u),_=1<<g;_&s|o[g]&s&&(o[g]|=s),u&=~_}}var De=0;function ni(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var ql,Wo,Gl,Hl,zl,ya=!1,nr=[],Mt=null,Fn=null,bn=null,ri=new Map,Tn=new Map,rr=[],ud="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $l(o,s){switch(o){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":ri.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tn.delete(s.pointerId)}}function nn(o,s,u,g,_,E){return o===null||o.nativeEvent!==E?(o={blockedOn:s,domEventName:u,eventSystemFlags:g,nativeEvent:E,targetContainers:[_]},s!==null&&(s=Da(s),s!==null&&Wo(s)),o):(o.eventSystemFlags|=g,s=o.targetContainers,_!==null&&s.indexOf(_)===-1&&s.push(_),o)}function cd(o,s,u,g,_){switch(s){case"focusin":return Mt=nn(Mt,o,s,u,g,_),!0;case"dragenter":return Fn=nn(Fn,o,s,u,g,_),!0;case"mouseover":return bn=nn(bn,o,s,u,g,_),!0;case"pointerover":var E=_.pointerId;return ri.set(E,nn(ri.get(E)||null,o,s,u,g,_)),!0;case"gotpointercapture":return E=_.pointerId,Tn.set(E,nn(Tn.get(E)||null,o,s,u,g,_)),!0}return!1}function Wl(o){var s=to(o.target);if(s!==null){var u=Vn(s);if(u!==null){if(s=u.tag,s===13){if(s=Wi(u),s!==null){o.blockedOn=s,zl(o.priority,function(){Gl(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function wr(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var u=Ko(o.domEventName,o.eventSystemFlags,s[0],o.nativeEvent);if(u===null){u=o.nativeEvent;var g=new u.constructor(u.type,u);Gi=g,u.target.dispatchEvent(g),Gi=null}else return s=Da(u),s!==null&&Wo(s),o.blockedOn=u,!1;s.shift()}return!0}function Xi(o,s,u){wr(o)&&u.delete(s)}function Kl(){ya=!1,Mt!==null&&wr(Mt)&&(Mt=null),Fn!==null&&wr(Fn)&&(Fn=null),bn!==null&&wr(bn)&&(bn=null),ri.forEach(Xi),Tn.forEach(Xi)}function On(o,s){o.blockedOn===s&&(o.blockedOn=null,ya||(ya=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Kl)))}function Bn(o){function s(_){return On(_,o)}if(0<nr.length){On(nr[0],o);for(var u=1;u<nr.length;u++){var g=nr[u];g.blockedOn===o&&(g.blockedOn=null)}}for(Mt!==null&&On(Mt,o),Fn!==null&&On(Fn,o),bn!==null&&On(bn,o),ri.forEach(s),Tn.forEach(s),u=0;u<rr.length;u++)g=rr[u],g.blockedOn===o&&(g.blockedOn=null);for(;0<rr.length&&(u=rr[0],u.blockedOn===null);)Wl(u),u.blockedOn===null&&rr.shift()}var Sr=ee.ReactCurrentBatchConfig,ii=!0;function rt(o,s,u,g){var _=De,E=Sr.transition;Sr.transition=null;try{De=1,_a(o,s,u,g)}finally{De=_,Sr.transition=E}}function dd(o,s,u,g){var _=De,E=Sr.transition;Sr.transition=null;try{De=4,_a(o,s,u,g)}finally{De=_,Sr.transition=E}}function _a(o,s,u,g){if(ii){var _=Ko(o,s,u,g);if(_===null)Id(o,s,g,Zi,u),$l(o,g);else if(cd(_,o,s,u,g))g.stopPropagation();else if($l(o,g),s&4&&-1<ud.indexOf(o)){for(;_!==null;){var E=Da(_);if(E!==null&&ql(E),E=Ko(o,s,u,g),E===null&&Id(o,s,g,Zi,u),E===_)break;_=E}_!==null&&g.stopPropagation()}else Id(o,s,g,null,u)}}var Zi=null;function Ko(o,s,u,g){if(Zi=null,o=Uo(g),o=to(o),o!==null)if(s=Vn(o),s===null)o=null;else if(u=s.tag,u===13){if(o=Wi(s),o!==null)return o;o=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null);return Zi=o,null}function va(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ul()){case Ki:return 1;case Xr:return 4;case En:case ma:return 16;case Fl:return 536870912;default:return 16}default:return 16}}var hn=null,Jo=null,rn=null;function Ea(){if(rn)return rn;var o,s=Jo,u=s.length,g,_="value"in hn?hn.value:hn.textContent,E=_.length;for(o=0;o<u&&s[o]===_[o];o++);var S=u-o;for(g=1;g<=S&&s[u-g]===_[E-g];g++);return rn=_.slice(o,1<g?1-g:void 0)}function Yo(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function ir(){return!0}function Ta(){return!1}function Lt(o){function s(u,g,_,E,S){this._reactName=u,this._targetInst=_,this.type=g,this.nativeEvent=E,this.target=S,this.currentTarget=null;for(var x in o)o.hasOwnProperty(x)&&(u=o[x],this[x]=u?u(E):E[x]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ir:Ta,this.isPropagationStopped=Ta,this}return ce(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ir)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ir)},persist:function(){},isPersistent:ir}),s}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qo=Lt(qn),or=ce({},qn,{view:0,detail:0}),fd=Lt(or),Xo,Cr,oi,ji=ce({},or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sr,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==oi&&(oi&&o.type==="mousemove"?(Xo=o.screenX-oi.screenX,Cr=o.screenY-oi.screenY):Cr=Xo=0,oi=o),Xo)},movementY:function(o){return"movementY"in o?o.movementY:Cr}}),Zo=Lt(ji),Ia=ce({},ji,{dataTransfer:0}),Jl=Lt(Ia),jo=ce({},or,{relatedTarget:0}),es=Lt(jo),Yl=ce({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ar=Lt(Yl),Ql=ce({},qn,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Xl=Lt(Ql),Zl=ce({},qn,{data:0}),wa=Lt(Zl),ts={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eu(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=jl[o])?!!s[o]:!1}function sr(){return eu}var f=ce({},or,{key:function(o){if(o.key){var s=ts[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=Yo(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Xt[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sr,charCode:function(o){return o.type==="keypress"?Yo(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Yo(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),v=Lt(f),w=ce({},ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C=Lt(w),G=ce({},or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sr}),W=Lt(G),ie=ce({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=Lt(ie),wt=ce({},ji,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Ve=Lt(wt),Pt=[9,13,27,32],mt=d&&"CompositionEvent"in window,In=null;d&&"documentMode"in document&&(In=document.documentMode);var pn=d&&"TextEvent"in window&&!In,eo=d&&(!mt||In&&8<In&&11>=In),ns=" ",Bp=!1;function qp(o,s){switch(o){case"keyup":return Pt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gp(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var rs=!1;function c0(o,s){switch(o){case"compositionend":return Gp(s);case"keypress":return s.which!==32?null:(Bp=!0,ns);case"textInput":return o=s.data,o===ns&&Bp?null:o;default:return null}}function d0(o,s){if(rs)return o==="compositionend"||!mt&&qp(o,s)?(o=Ea(),rn=Jo=hn=null,rs=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return eo&&s.locale!=="ko"?null:s.data;default:return null}}var f0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hp(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!f0[o.type]:s==="textarea"}function zp(o,s,u,g){tr(g),s=ou(s,"onChange"),0<s.length&&(u=new Qo("onChange","change",null,u,g),o.push({event:u,listeners:s}))}var Sa=null,Ca=null;function h0(o){lm(o,0)}function tu(o){var s=ls(o);if(ko(s))return o}function p0(o,s){if(o==="change")return s}var $p=!1;if(d){var hd;if(d){var pd="oninput"in document;if(!pd){var Wp=document.createElement("div");Wp.setAttribute("oninput","return;"),pd=typeof Wp.oninput=="function"}hd=pd}else hd=!1;$p=hd&&(!document.documentMode||9<document.documentMode)}function Kp(){Sa&&(Sa.detachEvent("onpropertychange",Jp),Ca=Sa=null)}function Jp(o){if(o.propertyName==="value"&&tu(Ca)){var s=[];zp(s,Ca,o,Uo(o)),da(h0,s)}}function m0(o,s,u){o==="focusin"?(Kp(),Sa=s,Ca=u,Sa.attachEvent("onpropertychange",Jp)):o==="focusout"&&Kp()}function g0(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return tu(Ca)}function y0(o,s){if(o==="click")return tu(s)}function _0(o,s){if(o==="input"||o==="change")return tu(s)}function v0(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var Gn=typeof Object.is=="function"?Object.is:v0;function Aa(o,s){if(Gn(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var u=Object.keys(o),g=Object.keys(s);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var _=u[g];if(!p.call(s,_)||!Gn(o[_],s[_]))return!1}return!0}function Yp(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Qp(o,s){var u=Yp(o);o=0;for(var g;u;){if(u.nodeType===3){if(g=o+u.textContent.length,o<=s&&g>=s)return{node:u,offset:s-o};o=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Yp(u)}}function Xp(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?Xp(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function Zp(){for(var o=window,s=Yr();s instanceof o.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)o=s.contentWindow;else break;s=Yr(o.document)}return s}function md(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}function E0(o){var s=Zp(),u=o.focusedElem,g=o.selectionRange;if(s!==u&&u&&u.ownerDocument&&Xp(u.ownerDocument.documentElement,u)){if(g!==null&&md(u)){if(s=g.start,o=g.end,o===void 0&&(o=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(o,u.value.length);else if(o=(s=u.ownerDocument||document)&&s.defaultView||window,o.getSelection){o=o.getSelection();var _=u.textContent.length,E=Math.min(g.start,_);g=g.end===void 0?E:Math.min(g.end,_),!o.extend&&E>g&&(_=g,g=E,E=_),_=Qp(u,E);var S=Qp(u,g);_&&S&&(o.rangeCount!==1||o.anchorNode!==_.node||o.anchorOffset!==_.offset||o.focusNode!==S.node||o.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(_.node,_.offset),o.removeAllRanges(),E>g?(o.addRange(s),o.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),o.addRange(s)))}}for(s=[],o=u;o=o.parentNode;)o.nodeType===1&&s.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)o=s[u],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var T0=d&&"documentMode"in document&&11>=document.documentMode,is=null,gd=null,Ra=null,yd=!1;function jp(o,s,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;yd||is==null||is!==Yr(g)||(g=is,"selectionStart"in g&&md(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Ra&&Aa(Ra,g)||(Ra=g,g=ou(gd,"onSelect"),0<g.length&&(s=new Qo("onSelect","select",null,s,u),o.push({event:s,listeners:g}),s.target=is)))}function nu(o,s){var u={};return u[o.toLowerCase()]=s.toLowerCase(),u["Webkit"+o]="webkit"+s,u["Moz"+o]="moz"+s,u}var os={animationend:nu("Animation","AnimationEnd"),animationiteration:nu("Animation","AnimationIteration"),animationstart:nu("Animation","AnimationStart"),transitionend:nu("Transition","TransitionEnd")},_d={},em={};d&&(em=document.createElement("div").style,"AnimationEvent"in window||(delete os.animationend.animation,delete os.animationiteration.animation,delete os.animationstart.animation),"TransitionEvent"in window||delete os.transitionend.transition);function ru(o){if(_d[o])return _d[o];if(!os[o])return o;var s=os[o],u;for(u in s)if(s.hasOwnProperty(u)&&u in em)return _d[o]=s[u];return o}var tm=ru("animationend"),nm=ru("animationiteration"),rm=ru("animationstart"),im=ru("transitionend"),om=new Map,sm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(o,s){om.set(o,s),a(s,[o])}for(var vd=0;vd<sm.length;vd++){var Ed=sm[vd],I0=Ed.toLowerCase(),w0=Ed[0].toUpperCase()+Ed.slice(1);si(I0,"on"+w0)}si(tm,"onAnimationEnd"),si(nm,"onAnimationIteration"),si(rm,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(im,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function am(o,s,u){var g=o.type||"unknown-event";o.currentTarget=u,Ml(g,s,void 0,o),o.currentTarget=null}function lm(o,s){s=(s&4)!==0;for(var u=0;u<o.length;u++){var g=o[u],_=g.event;g=g.listeners;e:{var E=void 0;if(s)for(var S=g.length-1;0<=S;S--){var x=g[S],L=x.instance,$=x.currentTarget;if(x=x.listener,L!==E&&_.isPropagationStopped())break e;am(_,x,$),E=L}else for(S=0;S<g.length;S++){if(x=g[S],L=x.instance,$=x.currentTarget,x=x.listener,L!==E&&_.isPropagationStopped())break e;am(_,x,$),E=L}}}if(Ln)throw o=fa,Ln=!1,fa=null,o}function Ze(o,s){var u=s[Pd];u===void 0&&(u=s[Pd]=new Set);var g=o+"__bubble";u.has(g)||(um(s,o,2,!1),u.add(g))}function Td(o,s,u){var g=0;s&&(g|=4),um(u,o,g,s)}var iu="_reactListening"+Math.random().toString(36).slice(2);function Na(o){if(!o[iu]){o[iu]=!0,r.forEach(function(u){u!=="selectionchange"&&(S0.has(u)||Td(u,!1,o),Td(u,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[iu]||(s[iu]=!0,Td("selectionchange",!1,s))}}function um(o,s,u,g){switch(va(s)){case 1:var _=rt;break;case 4:_=dd;break;default:_=_a}u=_.bind(null,s,u,o),_=void 0,!Oo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(_=!0),g?_!==void 0?o.addEventListener(s,u,{capture:!0,passive:_}):o.addEventListener(s,u,!0):_!==void 0?o.addEventListener(s,u,{passive:_}):o.addEventListener(s,u,!1)}function Id(o,s,u,g,_){var E=g;if((s&1)===0&&(s&2)===0&&g!==null)e:for(;;){if(g===null)return;var S=g.tag;if(S===3||S===4){var x=g.stateNode.containerInfo;if(x===_||x.nodeType===8&&x.parentNode===_)break;if(S===4)for(S=g.return;S!==null;){var L=S.tag;if((L===3||L===4)&&(L=S.stateNode.containerInfo,L===_||L.nodeType===8&&L.parentNode===_))return;S=S.return}for(;x!==null;){if(S=to(x),S===null)return;if(L=S.tag,L===5||L===6){g=E=S;continue e}x=x.parentNode}}g=g.return}da(function(){var $=E,j=Uo(u),ne=[];e:{var Z=om.get(o);if(Z!==void 0){var ue=Qo,he=o;switch(o){case"keypress":if(Yo(u)===0)break e;case"keydown":case"keyup":ue=v;break;case"focusin":he="focus",ue=es;break;case"focusout":he="blur",ue=es;break;case"beforeblur":case"afterblur":ue=es;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Jl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=W;break;case tm:case nm:case rm:ue=Ar;break;case im:ue=ze;break;case"scroll":ue=fd;break;case"wheel":ue=Ve;break;case"copy":case"cut":case"paste":ue=Xl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=C}var pe=(s&4)!==0,ht=!pe&&o==="scroll",H=pe?Z!==null?Z+"Capture":null:Z;pe=[];for(var U=$,z;U!==null;){z=U;var re=z.stateNode;if(z.tag===5&&re!==null&&(z=re,H!==null&&(re=ft(U,H),re!=null&&pe.push(xa(U,re,z)))),ht)break;U=U.return}0<pe.length&&(Z=new ue(Z,he,null,u,j),ne.push({event:Z,listeners:pe}))}}if((s&7)===0){e:{if(Z=o==="mouseover"||o==="pointerover",ue=o==="mouseout"||o==="pointerout",Z&&u!==Gi&&(he=u.relatedTarget||u.fromElement)&&(to(he)||he[Rr]))break e;if((ue||Z)&&(Z=j.window===j?j:(Z=j.ownerDocument)?Z.defaultView||Z.parentWindow:window,ue?(he=u.relatedTarget||u.toElement,ue=$,he=he?to(he):null,he!==null&&(ht=Vn(he),he!==ht||he.tag!==5&&he.tag!==6)&&(he=null)):(ue=null,he=$),ue!==he)){if(pe=Zo,re="onMouseLeave",H="onMouseEnter",U="mouse",(o==="pointerout"||o==="pointerover")&&(pe=C,re="onPointerLeave",H="onPointerEnter",U="pointer"),ht=ue==null?Z:ls(ue),z=he==null?Z:ls(he),Z=new pe(re,U+"leave",ue,u,j),Z.target=ht,Z.relatedTarget=z,re=null,to(j)===$&&(pe=new pe(H,U+"enter",he,u,j),pe.target=z,pe.relatedTarget=ht,re=pe),ht=re,ue&&he)t:{for(pe=ue,H=he,U=0,z=pe;z;z=ss(z))U++;for(z=0,re=H;re;re=ss(re))z++;for(;0<U-z;)pe=ss(pe),U--;for(;0<z-U;)H=ss(H),z--;for(;U--;){if(pe===H||H!==null&&pe===H.alternate)break t;pe=ss(pe),H=ss(H)}pe=null}else pe=null;ue!==null&&cm(ne,Z,ue,pe,!1),he!==null&&ht!==null&&cm(ne,ht,he,pe,!0)}}e:{if(Z=$?ls($):window,ue=Z.nodeName&&Z.nodeName.toLowerCase(),ue==="select"||ue==="input"&&Z.type==="file")var ge=p0;else if(Hp(Z))if($p)ge=_0;else{ge=g0;var Ee=m0}else(ue=Z.nodeName)&&ue.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(ge=y0);if(ge&&(ge=ge(o,$))){zp(ne,ge,u,j);break e}Ee&&Ee(o,Z,$),o==="focusout"&&(Ee=Z._wrapperState)&&Ee.controlled&&Z.type==="number"&&Mo(Z,"number",Z.value)}switch(Ee=$?ls($):window,o){case"focusin":(Hp(Ee)||Ee.contentEditable==="true")&&(is=Ee,gd=$,Ra=null);break;case"focusout":Ra=gd=is=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,jp(ne,u,j);break;case"selectionchange":if(T0)break;case"keydown":case"keyup":jp(ne,u,j)}var Te;if(mt)e:{switch(o){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else rs?qp(o,u)&&(we="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(we="onCompositionStart");we&&(eo&&u.locale!=="ko"&&(rs||we!=="onCompositionStart"?we==="onCompositionEnd"&&rs&&(Te=Ea()):(hn=j,Jo="value"in hn?hn.value:hn.textContent,rs=!0)),Ee=ou($,we),0<Ee.length&&(we=new wa(we,o,null,u,j),ne.push({event:we,listeners:Ee}),Te?we.data=Te:(Te=Gp(u),Te!==null&&(we.data=Te)))),(Te=pn?c0(o,u):d0(o,u))&&($=ou($,"onBeforeInput"),0<$.length&&(j=new wa("onBeforeInput","beforeinput",null,u,j),ne.push({event:j,listeners:$}),j.data=Te))}lm(ne,s)})}function xa(o,s,u){return{instance:o,listener:s,currentTarget:u}}function ou(o,s){for(var u=s+"Capture",g=[];o!==null;){var _=o,E=_.stateNode;_.tag===5&&E!==null&&(_=E,E=ft(o,u),E!=null&&g.unshift(xa(o,E,_)),E=ft(o,s),E!=null&&g.push(xa(o,E,_))),o=o.return}return g}function ss(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function cm(o,s,u,g,_){for(var E=s._reactName,S=[];u!==null&&u!==g;){var x=u,L=x.alternate,$=x.stateNode;if(L!==null&&L===g)break;x.tag===5&&$!==null&&(x=$,_?(L=ft(u,E),L!=null&&S.unshift(xa(u,L,x))):_||(L=ft(u,E),L!=null&&S.push(xa(u,L,x)))),u=u.return}S.length!==0&&o.push({event:s,listeners:S})}var C0=/\r\n?/g,A0=/\u0000|\uFFFD/g;function dm(o){return(typeof o=="string"?o:""+o).replace(C0,`
`).replace(A0,"")}function su(o,s,u){if(s=dm(s),dm(o)!==s&&u)throw Error(t(425))}function au(){}var wd=null,Sd=null;function Cd(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ad=typeof setTimeout=="function"?setTimeout:void 0,R0=typeof clearTimeout=="function"?clearTimeout:void 0,fm=typeof Promise=="function"?Promise:void 0,P0=typeof queueMicrotask=="function"?queueMicrotask:typeof fm<"u"?function(o){return fm.resolve(null).then(o).catch(N0)}:Ad;function N0(o){setTimeout(function(){throw o})}function Rd(o,s){var u=s,g=0;do{var _=u.nextSibling;if(o.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"){if(g===0){o.removeChild(_),Bn(s);return}g--}else u!=="$"&&u!=="$?"&&u!=="$!"||g++;u=_}while(u);Bn(s)}function ai(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return o}function hm(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return o;s--}else u==="/$"&&s++}o=o.previousSibling}return null}var as=Math.random().toString(36).slice(2),ar="__reactFiber$"+as,ka="__reactProps$"+as,Rr="__reactContainer$"+as,Pd="__reactEvents$"+as,x0="__reactListeners$"+as,k0="__reactHandles$"+as;function to(o){var s=o[ar];if(s)return s;for(var u=o.parentNode;u;){if(s=u[Rr]||u[ar]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(o=hm(o);o!==null;){if(u=o[ar])return u;o=hm(o)}return s}o=u,u=o.parentNode}return null}function Da(o){return o=o[ar]||o[Rr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ls(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function lu(o){return o[ka]||null}var Nd=[],us=-1;function li(o){return{current:o}}function je(o){0>us||(o.current=Nd[us],Nd[us]=null,us--)}function Xe(o,s){us++,Nd[us]=o.current,o.current=s}var ui={},qt=li(ui),on=li(!1),no=ui;function cs(o,s){var u=o.type.contextTypes;if(!u)return ui;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===s)return g.__reactInternalMemoizedMaskedChildContext;var _={},E;for(E in u)_[E]=s[E];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=s,o.__reactInternalMemoizedMaskedChildContext=_),_}function sn(o){return o=o.childContextTypes,o!=null}function uu(){je(on),je(qt)}function pm(o,s,u){if(qt.current!==ui)throw Error(t(168));Xe(qt,s),Xe(on,u)}function mm(o,s,u){var g=o.stateNode;if(s=s.childContextTypes,typeof g.getChildContext!="function")return u;g=g.getChildContext();for(var _ in g)if(!(_ in s))throw Error(t(108,Ge(o)||"Unknown",_));return ce({},u,g)}function cu(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ui,no=qt.current,Xe(qt,o),Xe(on,on.current),!0}function gm(o,s,u){var g=o.stateNode;if(!g)throw Error(t(169));u?(o=mm(o,s,no),g.__reactInternalMemoizedMergedChildContext=o,je(on),je(qt),Xe(qt,o)):je(on),Xe(on,u)}var Pr=null,du=!1,xd=!1;function ym(o){Pr===null?Pr=[o]:Pr.push(o)}function D0(o){du=!0,ym(o)}function ci(){if(!xd&&Pr!==null){xd=!0;var o=0,s=De;try{var u=Pr;for(De=1;o<u.length;o++){var g=u[o];do g=g(!0);while(g!==null)}Pr=null,du=!1}catch(_){throw Pr!==null&&(Pr=Pr.slice(o+1)),Ho(Ki,ci),_}finally{De=s,xd=!1}}return null}var ds=[],fs=0,fu=null,hu=0,wn=[],Sn=0,ro=null,Nr=1,xr="";function io(o,s){ds[fs++]=hu,ds[fs++]=fu,fu=o,hu=s}function _m(o,s,u){wn[Sn++]=Nr,wn[Sn++]=xr,wn[Sn++]=ro,ro=o;var g=Nr;o=xr;var _=32-Qt(g)-1;g&=~(1<<_),u+=1;var E=32-Qt(s)+_;if(30<E){var S=_-_%5;E=(g&(1<<S)-1).toString(32),g>>=S,_-=S,Nr=1<<32-Qt(s)+_|u<<_|g,xr=E+o}else Nr=1<<E|u<<_|g,xr=o}function kd(o){o.return!==null&&(io(o,1),_m(o,1,0))}function Dd(o){for(;o===fu;)fu=ds[--fs],ds[fs]=null,hu=ds[--fs],ds[fs]=null;for(;o===ro;)ro=wn[--Sn],wn[Sn]=null,xr=wn[--Sn],wn[Sn]=null,Nr=wn[--Sn],wn[Sn]=null}var mn=null,gn=null,it=!1,Hn=null;function vm(o,s){var u=Pn(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=o,s=o.deletions,s===null?(o.deletions=[u],o.flags|=16):s.push(u)}function Em(o,s){switch(o.tag){case 5:var u=o.type;return s=s.nodeType!==1||u.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(o.stateNode=s,mn=o,gn=ai(s.firstChild),!0):!1;case 6:return s=o.pendingProps===""||s.nodeType!==3?null:s,s!==null?(o.stateNode=s,mn=o,gn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(u=ro!==null?{id:Nr,overflow:xr}:null,o.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=Pn(18,null,null,0),u.stateNode=s,u.return=o,o.child=u,mn=o,gn=null,!0):!1;default:return!1}}function Md(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Ld(o){if(it){var s=gn;if(s){var u=s;if(!Em(o,s)){if(Md(o))throw Error(t(418));s=ai(u.nextSibling);var g=mn;s&&Em(o,s)?vm(g,u):(o.flags=o.flags&-4097|2,it=!1,mn=o)}}else{if(Md(o))throw Error(t(418));o.flags=o.flags&-4097|2,it=!1,mn=o}}}function Tm(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;mn=o}function pu(o){if(o!==mn)return!1;if(!it)return Tm(o),it=!0,!1;var s;if((s=o.tag!==3)&&!(s=o.tag!==5)&&(s=o.type,s=s!=="head"&&s!=="body"&&!Cd(o.type,o.memoizedProps)),s&&(s=gn)){if(Md(o))throw Im(),Error(t(418));for(;s;)vm(o,s),s=ai(s.nextSibling)}if(Tm(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8){var u=o.data;if(u==="/$"){if(s===0){gn=ai(o.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++}o=o.nextSibling}gn=null}}else gn=mn?ai(o.stateNode.nextSibling):null;return!0}function Im(){for(var o=gn;o;)o=ai(o.nextSibling)}function hs(){gn=mn=null,it=!1}function Vd(o){Hn===null?Hn=[o]:Hn.push(o)}var M0=ee.ReactCurrentBatchConfig;function Ma(o,s,u){if(o=u.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var g=u.stateNode}if(!g)throw Error(t(147,o));var _=g,E=""+o;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===E?s.ref:(s=function(S){var x=_.refs;S===null?delete x[E]:x[E]=S},s._stringRef=E,s)}if(typeof o!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,o))}return o}function mu(o,s){throw o=Object.prototype.toString.call(s),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o))}function wm(o){var s=o._init;return s(o._payload)}function Sm(o){function s(H,U){if(o){var z=H.deletions;z===null?(H.deletions=[U],H.flags|=16):z.push(U)}}function u(H,U){if(!o)return null;for(;U!==null;)s(H,U),U=U.sibling;return null}function g(H,U){for(H=new Map;U!==null;)U.key!==null?H.set(U.key,U):H.set(U.index,U),U=U.sibling;return H}function _(H,U){return H=_i(H,U),H.index=0,H.sibling=null,H}function E(H,U,z){return H.index=z,o?(z=H.alternate,z!==null?(z=z.index,z<U?(H.flags|=2,U):z):(H.flags|=2,U)):(H.flags|=1048576,U)}function S(H){return o&&H.alternate===null&&(H.flags|=2),H}function x(H,U,z,re){return U===null||U.tag!==6?(U=Rf(z,H.mode,re),U.return=H,U):(U=_(U,z),U.return=H,U)}function L(H,U,z,re){var ge=z.type;return ge===M?j(H,U,z.props.children,re,z.key):U!==null&&(U.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Je&&wm(ge)===U.type)?(re=_(U,z.props),re.ref=Ma(H,U,z),re.return=H,re):(re=Ou(z.type,z.key,z.props,null,H.mode,re),re.ref=Ma(H,U,z),re.return=H,re)}function $(H,U,z,re){return U===null||U.tag!==4||U.stateNode.containerInfo!==z.containerInfo||U.stateNode.implementation!==z.implementation?(U=Pf(z,H.mode,re),U.return=H,U):(U=_(U,z.children||[]),U.return=H,U)}function j(H,U,z,re,ge){return U===null||U.tag!==7?(U=ho(z,H.mode,re,ge),U.return=H,U):(U=_(U,z),U.return=H,U)}function ne(H,U,z){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Rf(""+U,H.mode,z),U.return=H,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case le:return z=Ou(U.type,U.key,U.props,null,H.mode,z),z.ref=Ma(H,null,U),z.return=H,z;case oe:return U=Pf(U,H.mode,z),U.return=H,U;case Je:var re=U._init;return ne(H,re(U._payload),z)}if(_r(U)||ve(U))return U=ho(U,H.mode,z,null),U.return=H,U;mu(H,U)}return null}function Z(H,U,z,re){var ge=U!==null?U.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ge!==null?null:x(H,U,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case le:return z.key===ge?L(H,U,z,re):null;case oe:return z.key===ge?$(H,U,z,re):null;case Je:return ge=z._init,Z(H,U,ge(z._payload),re)}if(_r(z)||ve(z))return ge!==null?null:j(H,U,z,re,null);mu(H,z)}return null}function ue(H,U,z,re,ge){if(typeof re=="string"&&re!==""||typeof re=="number")return H=H.get(z)||null,x(U,H,""+re,ge);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case le:return H=H.get(re.key===null?z:re.key)||null,L(U,H,re,ge);case oe:return H=H.get(re.key===null?z:re.key)||null,$(U,H,re,ge);case Je:var Ee=re._init;return ue(H,U,z,Ee(re._payload),ge)}if(_r(re)||ve(re))return H=H.get(z)||null,j(U,H,re,ge,null);mu(U,re)}return null}function he(H,U,z,re){for(var ge=null,Ee=null,Te=U,we=U=0,kt=null;Te!==null&&we<z.length;we++){Te.index>we?(kt=Te,Te=null):kt=Te.sibling;var Oe=Z(H,Te,z[we],re);if(Oe===null){Te===null&&(Te=kt);break}o&&Te&&Oe.alternate===null&&s(H,Te),U=E(Oe,U,we),Ee===null?ge=Oe:Ee.sibling=Oe,Ee=Oe,Te=kt}if(we===z.length)return u(H,Te),it&&io(H,we),ge;if(Te===null){for(;we<z.length;we++)Te=ne(H,z[we],re),Te!==null&&(U=E(Te,U,we),Ee===null?ge=Te:Ee.sibling=Te,Ee=Te);return it&&io(H,we),ge}for(Te=g(H,Te);we<z.length;we++)kt=ue(Te,H,we,z[we],re),kt!==null&&(o&&kt.alternate!==null&&Te.delete(kt.key===null?we:kt.key),U=E(kt,U,we),Ee===null?ge=kt:Ee.sibling=kt,Ee=kt);return o&&Te.forEach(function(vi){return s(H,vi)}),it&&io(H,we),ge}function pe(H,U,z,re){var ge=ve(z);if(typeof ge!="function")throw Error(t(150));if(z=ge.call(z),z==null)throw Error(t(151));for(var Ee=ge=null,Te=U,we=U=0,kt=null,Oe=z.next();Te!==null&&!Oe.done;we++,Oe=z.next()){Te.index>we?(kt=Te,Te=null):kt=Te.sibling;var vi=Z(H,Te,Oe.value,re);if(vi===null){Te===null&&(Te=kt);break}o&&Te&&vi.alternate===null&&s(H,Te),U=E(vi,U,we),Ee===null?ge=vi:Ee.sibling=vi,Ee=vi,Te=kt}if(Oe.done)return u(H,Te),it&&io(H,we),ge;if(Te===null){for(;!Oe.done;we++,Oe=z.next())Oe=ne(H,Oe.value,re),Oe!==null&&(U=E(Oe,U,we),Ee===null?ge=Oe:Ee.sibling=Oe,Ee=Oe);return it&&io(H,we),ge}for(Te=g(H,Te);!Oe.done;we++,Oe=z.next())Oe=ue(Te,H,we,Oe.value,re),Oe!==null&&(o&&Oe.alternate!==null&&Te.delete(Oe.key===null?we:Oe.key),U=E(Oe,U,we),Ee===null?ge=Oe:Ee.sibling=Oe,Ee=Oe);return o&&Te.forEach(function(fw){return s(H,fw)}),it&&io(H,we),ge}function ht(H,U,z,re){if(typeof z=="object"&&z!==null&&z.type===M&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case le:e:{for(var ge=z.key,Ee=U;Ee!==null;){if(Ee.key===ge){if(ge=z.type,ge===M){if(Ee.tag===7){u(H,Ee.sibling),U=_(Ee,z.props.children),U.return=H,H=U;break e}}else if(Ee.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Je&&wm(ge)===Ee.type){u(H,Ee.sibling),U=_(Ee,z.props),U.ref=Ma(H,Ee,z),U.return=H,H=U;break e}u(H,Ee);break}else s(H,Ee);Ee=Ee.sibling}z.type===M?(U=ho(z.props.children,H.mode,re,z.key),U.return=H,H=U):(re=Ou(z.type,z.key,z.props,null,H.mode,re),re.ref=Ma(H,U,z),re.return=H,H=re)}return S(H);case oe:e:{for(Ee=z.key;U!==null;){if(U.key===Ee)if(U.tag===4&&U.stateNode.containerInfo===z.containerInfo&&U.stateNode.implementation===z.implementation){u(H,U.sibling),U=_(U,z.children||[]),U.return=H,H=U;break e}else{u(H,U);break}else s(H,U);U=U.sibling}U=Pf(z,H.mode,re),U.return=H,H=U}return S(H);case Je:return Ee=z._init,ht(H,U,Ee(z._payload),re)}if(_r(z))return he(H,U,z,re);if(ve(z))return pe(H,U,z,re);mu(H,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,U!==null&&U.tag===6?(u(H,U.sibling),U=_(U,z),U.return=H,H=U):(u(H,U),U=Rf(z,H.mode,re),U.return=H,H=U),S(H)):u(H,U)}return ht}var ps=Sm(!0),Cm=Sm(!1),gu=li(null),yu=null,ms=null,Ud=null;function Fd(){Ud=ms=yu=null}function bd(o){var s=gu.current;je(gu),o._currentValue=s}function Od(o,s,u){for(;o!==null;){var g=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),o===u)break;o=o.return}}function gs(o,s){yu=o,Ud=ms=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&s)!==0&&(an=!0),o.firstContext=null)}function Cn(o){var s=o._currentValue;if(Ud!==o)if(o={context:o,memoizedValue:s,next:null},ms===null){if(yu===null)throw Error(t(308));ms=o,yu.dependencies={lanes:0,firstContext:o}}else ms=ms.next=o;return s}var oo=null;function Bd(o){oo===null?oo=[o]:oo.push(o)}function Am(o,s,u,g){var _=s.interleaved;return _===null?(u.next=u,Bd(s)):(u.next=_.next,_.next=u),s.interleaved=u,kr(o,g)}function kr(o,s){o.lanes|=s;var u=o.alternate;for(u!==null&&(u.lanes|=s),u=o,o=o.return;o!==null;)o.childLanes|=s,u=o.alternate,u!==null&&(u.childLanes|=s),u=o,o=o.return;return u.tag===3?u.stateNode:null}var di=!1;function qd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rm(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Dr(o,s){return{eventTime:o,lane:s,tag:0,payload:null,callback:null,next:null}}function fi(o,s,u){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Fe&2)!==0){var _=g.pending;return _===null?s.next=s:(s.next=_.next,_.next=s),g.pending=s,kr(o,u)}return _=g.interleaved,_===null?(s.next=s,Bd(g)):(s.next=_.next,_.next=s),g.interleaved=s,kr(o,u)}function _u(o,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var g=s.lanes;g&=o.pendingLanes,u|=g,s.lanes=u,ti(o,u)}}function Pm(o,s){var u=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var _=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};E===null?_=E=S:E=E.next=S,u=u.next}while(u!==null);E===null?_=E=s:E=E.next=s}else _=E=s;u={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:E,shared:g.shared,effects:g.effects},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=s:o.next=s,u.lastBaseUpdate=s}function vu(o,s,u,g){var _=o.updateQueue;di=!1;var E=_.firstBaseUpdate,S=_.lastBaseUpdate,x=_.shared.pending;if(x!==null){_.shared.pending=null;var L=x,$=L.next;L.next=null,S===null?E=$:S.next=$,S=L;var j=o.alternate;j!==null&&(j=j.updateQueue,x=j.lastBaseUpdate,x!==S&&(x===null?j.firstBaseUpdate=$:x.next=$,j.lastBaseUpdate=L))}if(E!==null){var ne=_.baseState;S=0,j=$=L=null,x=E;do{var Z=x.lane,ue=x.eventTime;if((g&Z)===Z){j!==null&&(j=j.next={eventTime:ue,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var he=o,pe=x;switch(Z=s,ue=u,pe.tag){case 1:if(he=pe.payload,typeof he=="function"){ne=he.call(ue,ne,Z);break e}ne=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=pe.payload,Z=typeof he=="function"?he.call(ue,ne,Z):he,Z==null)break e;ne=ce({},ne,Z);break e;case 2:di=!0}}x.callback!==null&&x.lane!==0&&(o.flags|=64,Z=_.effects,Z===null?_.effects=[x]:Z.push(x))}else ue={eventTime:ue,lane:Z,tag:x.tag,payload:x.payload,callback:x.callback,next:null},j===null?($=j=ue,L=ne):j=j.next=ue,S|=Z;if(x=x.next,x===null){if(x=_.shared.pending,x===null)break;Z=x,x=Z.next,Z.next=null,_.lastBaseUpdate=Z,_.shared.pending=null}}while(!0);if(j===null&&(L=ne),_.baseState=L,_.firstBaseUpdate=$,_.lastBaseUpdate=j,s=_.shared.interleaved,s!==null){_=s;do S|=_.lane,_=_.next;while(_!==s)}else E===null&&(_.shared.lanes=0);lo|=S,o.lanes=S,o.memoizedState=ne}}function Nm(o,s,u){if(o=s.effects,s.effects=null,o!==null)for(s=0;s<o.length;s++){var g=o[s],_=g.callback;if(_!==null){if(g.callback=null,g=u,typeof _!="function")throw Error(t(191,_));_.call(g)}}}var La={},lr=li(La),Va=li(La),Ua=li(La);function so(o){if(o===La)throw Error(t(174));return o}function Gd(o,s){switch(Xe(Ua,s),Xe(Va,o),Xe(lr,La),o=s.nodeType,o){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:It(null,"");break;default:o=o===8?s.parentNode:s,s=o.namespaceURI||null,o=o.tagName,s=It(s,o)}je(lr),Xe(lr,s)}function ys(){je(lr),je(Va),je(Ua)}function xm(o){so(Ua.current);var s=so(lr.current),u=It(s,o.type);s!==u&&(Xe(Va,o),Xe(lr,u))}function Hd(o){Va.current===o&&(je(lr),je(Va))}var ot=li(0);function Eu(o){for(var s=o;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var zd=[];function $d(){for(var o=0;o<zd.length;o++)zd[o]._workInProgressVersionPrimary=null;zd.length=0}var Tu=ee.ReactCurrentDispatcher,Wd=ee.ReactCurrentBatchConfig,ao=0,st=null,St=null,Nt=null,Iu=!1,Fa=!1,ba=0,L0=0;function Gt(){throw Error(t(321))}function Kd(o,s){if(s===null)return!1;for(var u=0;u<s.length&&u<o.length;u++)if(!Gn(o[u],s[u]))return!1;return!0}function Jd(o,s,u,g,_,E){if(ao=E,st=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Tu.current=o===null||o.memoizedState===null?b0:O0,o=u(g,_),Fa){E=0;do{if(Fa=!1,ba=0,25<=E)throw Error(t(301));E+=1,Nt=St=null,s.updateQueue=null,Tu.current=B0,o=u(g,_)}while(Fa)}if(Tu.current=Cu,s=St!==null&&St.next!==null,ao=0,Nt=St=st=null,Iu=!1,s)throw Error(t(300));return o}function Yd(){var o=ba!==0;return ba=0,o}function ur(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?st.memoizedState=Nt=o:Nt=Nt.next=o,Nt}function An(){if(St===null){var o=st.alternate;o=o!==null?o.memoizedState:null}else o=St.next;var s=Nt===null?st.memoizedState:Nt.next;if(s!==null)Nt=s,St=o;else{if(o===null)throw Error(t(310));St=o,o={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Nt===null?st.memoizedState=Nt=o:Nt=Nt.next=o}return Nt}function Oa(o,s){return typeof s=="function"?s(o):s}function Qd(o){var s=An(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=o;var g=St,_=g.baseQueue,E=u.pending;if(E!==null){if(_!==null){var S=_.next;_.next=E.next,E.next=S}g.baseQueue=_=E,u.pending=null}if(_!==null){E=_.next,g=g.baseState;var x=S=null,L=null,$=E;do{var j=$.lane;if((ao&j)===j)L!==null&&(L=L.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),g=$.hasEagerState?$.eagerState:o(g,$.action);else{var ne={lane:j,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};L===null?(x=L=ne,S=g):L=L.next=ne,st.lanes|=j,lo|=j}$=$.next}while($!==null&&$!==E);L===null?S=g:L.next=x,Gn(g,s.memoizedState)||(an=!0),s.memoizedState=g,s.baseState=S,s.baseQueue=L,u.lastRenderedState=g}if(o=u.interleaved,o!==null){_=o;do E=_.lane,st.lanes|=E,lo|=E,_=_.next;while(_!==o)}else _===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function Xd(o){var s=An(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=o;var g=u.dispatch,_=u.pending,E=s.memoizedState;if(_!==null){u.pending=null;var S=_=_.next;do E=o(E,S.action),S=S.next;while(S!==_);Gn(E,s.memoizedState)||(an=!0),s.memoizedState=E,s.baseQueue===null&&(s.baseState=E),u.lastRenderedState=E}return[E,g]}function km(){}function Dm(o,s){var u=st,g=An(),_=s(),E=!Gn(g.memoizedState,_);if(E&&(g.memoizedState=_,an=!0),g=g.queue,Zd(Vm.bind(null,u,g,o),[o]),g.getSnapshot!==s||E||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,Ba(9,Lm.bind(null,u,g,_,s),void 0,null),xt===null)throw Error(t(349));(ao&30)!==0||Mm(u,s,_)}return _}function Mm(o,s,u){o.flags|=16384,o={getSnapshot:s,value:u},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.stores=[o]):(u=s.stores,u===null?s.stores=[o]:u.push(o))}function Lm(o,s,u,g){s.value=u,s.getSnapshot=g,Um(s)&&Fm(o)}function Vm(o,s,u){return u(function(){Um(s)&&Fm(o)})}function Um(o){var s=o.getSnapshot;o=o.value;try{var u=s();return!Gn(o,u)}catch{return!0}}function Fm(o){var s=kr(o,1);s!==null&&Kn(s,o,1,-1)}function bm(o){var s=ur();return typeof o=="function"&&(o=o()),s.memoizedState=s.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:o},s.queue=o,o=o.dispatch=F0.bind(null,st,o),[s.memoizedState,o]}function Ba(o,s,u,g){return o={tag:o,create:s,destroy:u,deps:g,next:null},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.lastEffect=o.next=o):(u=s.lastEffect,u===null?s.lastEffect=o.next=o:(g=u.next,u.next=o,o.next=g,s.lastEffect=o)),o}function Om(){return An().memoizedState}function wu(o,s,u,g){var _=ur();st.flags|=o,_.memoizedState=Ba(1|s,u,void 0,g===void 0?null:g)}function Su(o,s,u,g){var _=An();g=g===void 0?null:g;var E=void 0;if(St!==null){var S=St.memoizedState;if(E=S.destroy,g!==null&&Kd(g,S.deps)){_.memoizedState=Ba(s,u,E,g);return}}st.flags|=o,_.memoizedState=Ba(1|s,u,E,g)}function Bm(o,s){return wu(8390656,8,o,s)}function Zd(o,s){return Su(2048,8,o,s)}function qm(o,s){return Su(4,2,o,s)}function Gm(o,s){return Su(4,4,o,s)}function Hm(o,s){if(typeof s=="function")return o=o(),s(o),function(){s(null)};if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function zm(o,s,u){return u=u!=null?u.concat([o]):null,Su(4,4,Hm.bind(null,s,o),u)}function jd(){}function $m(o,s){var u=An();s=s===void 0?null:s;var g=u.memoizedState;return g!==null&&s!==null&&Kd(s,g[1])?g[0]:(u.memoizedState=[o,s],o)}function Wm(o,s){var u=An();s=s===void 0?null:s;var g=u.memoizedState;return g!==null&&s!==null&&Kd(s,g[1])?g[0]:(o=o(),u.memoizedState=[o,s],o)}function Km(o,s,u){return(ao&21)===0?(o.baseState&&(o.baseState=!1,an=!0),o.memoizedState=u):(Gn(u,s)||(u=Qi(),st.lanes|=u,lo|=u,o.baseState=!0),s)}function V0(o,s){var u=De;De=u!==0&&4>u?u:4,o(!0);var g=Wd.transition;Wd.transition={};try{o(!1),s()}finally{De=u,Wd.transition=g}}function Jm(){return An().memoizedState}function U0(o,s,u){var g=gi(o);if(u={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null},Ym(o))Qm(s,u);else if(u=Am(o,s,u,g),u!==null){var _=jt();Kn(u,o,g,_),Xm(u,s,g)}}function F0(o,s,u){var g=gi(o),_={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ym(o))Qm(s,_);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=s.lastRenderedReducer,E!==null))try{var S=s.lastRenderedState,x=E(S,u);if(_.hasEagerState=!0,_.eagerState=x,Gn(x,S)){var L=s.interleaved;L===null?(_.next=_,Bd(s)):(_.next=L.next,L.next=_),s.interleaved=_;return}}catch{}finally{}u=Am(o,s,_,g),u!==null&&(_=jt(),Kn(u,o,g,_),Xm(u,s,g))}}function Ym(o){var s=o.alternate;return o===st||s!==null&&s===st}function Qm(o,s){Fa=Iu=!0;var u=o.pending;u===null?s.next=s:(s.next=u.next,u.next=s),o.pending=s}function Xm(o,s,u){if((u&4194240)!==0){var g=s.lanes;g&=o.pendingLanes,u|=g,s.lanes=u,ti(o,u)}}var Cu={readContext:Cn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},b0={readContext:Cn,useCallback:function(o,s){return ur().memoizedState=[o,s===void 0?null:s],o},useContext:Cn,useEffect:Bm,useImperativeHandle:function(o,s,u){return u=u!=null?u.concat([o]):null,wu(4194308,4,Hm.bind(null,s,o),u)},useLayoutEffect:function(o,s){return wu(4194308,4,o,s)},useInsertionEffect:function(o,s){return wu(4,2,o,s)},useMemo:function(o,s){var u=ur();return s=s===void 0?null:s,o=o(),u.memoizedState=[o,s],o},useReducer:function(o,s,u){var g=ur();return s=u!==void 0?u(s):s,g.memoizedState=g.baseState=s,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:s},g.queue=o,o=o.dispatch=U0.bind(null,st,o),[g.memoizedState,o]},useRef:function(o){var s=ur();return o={current:o},s.memoizedState=o},useState:bm,useDebugValue:jd,useDeferredValue:function(o){return ur().memoizedState=o},useTransition:function(){var o=bm(!1),s=o[0];return o=V0.bind(null,o[1]),ur().memoizedState=o,[s,o]},useMutableSource:function(){},useSyncExternalStore:function(o,s,u){var g=st,_=ur();if(it){if(u===void 0)throw Error(t(407));u=u()}else{if(u=s(),xt===null)throw Error(t(349));(ao&30)!==0||Mm(g,s,u)}_.memoizedState=u;var E={value:u,getSnapshot:s};return _.queue=E,Bm(Vm.bind(null,g,E,o),[o]),g.flags|=2048,Ba(9,Lm.bind(null,g,E,u,s),void 0,null),u},useId:function(){var o=ur(),s=xt.identifierPrefix;if(it){var u=xr,g=Nr;u=(g&~(1<<32-Qt(g)-1)).toString(32)+u,s=":"+s+"R"+u,u=ba++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=L0++,s=":"+s+"r"+u.toString(32)+":";return o.memoizedState=s},unstable_isNewReconciler:!1},O0={readContext:Cn,useCallback:$m,useContext:Cn,useEffect:Zd,useImperativeHandle:zm,useInsertionEffect:qm,useLayoutEffect:Gm,useMemo:Wm,useReducer:Qd,useRef:Om,useState:function(){return Qd(Oa)},useDebugValue:jd,useDeferredValue:function(o){var s=An();return Km(s,St.memoizedState,o)},useTransition:function(){var o=Qd(Oa)[0],s=An().memoizedState;return[o,s]},useMutableSource:km,useSyncExternalStore:Dm,useId:Jm,unstable_isNewReconciler:!1},B0={readContext:Cn,useCallback:$m,useContext:Cn,useEffect:Zd,useImperativeHandle:zm,useInsertionEffect:qm,useLayoutEffect:Gm,useMemo:Wm,useReducer:Xd,useRef:Om,useState:function(){return Xd(Oa)},useDebugValue:jd,useDeferredValue:function(o){var s=An();return St===null?s.memoizedState=o:Km(s,St.memoizedState,o)},useTransition:function(){var o=Xd(Oa)[0],s=An().memoizedState;return[o,s]},useMutableSource:km,useSyncExternalStore:Dm,useId:Jm,unstable_isNewReconciler:!1};function zn(o,s){if(o&&o.defaultProps){s=ce({},s),o=o.defaultProps;for(var u in o)s[u]===void 0&&(s[u]=o[u]);return s}return s}function ef(o,s,u,g){s=o.memoizedState,u=u(g,s),u=u==null?s:ce({},s,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var Au={isMounted:function(o){return(o=o._reactInternals)?Vn(o)===o:!1},enqueueSetState:function(o,s,u){o=o._reactInternals;var g=jt(),_=gi(o),E=Dr(g,_);E.payload=s,u!=null&&(E.callback=u),s=fi(o,E,_),s!==null&&(Kn(s,o,_,g),_u(s,o,_))},enqueueReplaceState:function(o,s,u){o=o._reactInternals;var g=jt(),_=gi(o),E=Dr(g,_);E.tag=1,E.payload=s,u!=null&&(E.callback=u),s=fi(o,E,_),s!==null&&(Kn(s,o,_,g),_u(s,o,_))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var u=jt(),g=gi(o),_=Dr(u,g);_.tag=2,s!=null&&(_.callback=s),s=fi(o,_,g),s!==null&&(Kn(s,o,g,u),_u(s,o,g))}};function Zm(o,s,u,g,_,E,S){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,E,S):s.prototype&&s.prototype.isPureReactComponent?!Aa(u,g)||!Aa(_,E):!0}function jm(o,s,u){var g=!1,_=ui,E=s.contextType;return typeof E=="object"&&E!==null?E=Cn(E):(_=sn(s)?no:qt.current,g=s.contextTypes,E=(g=g!=null)?cs(o,_):ui),s=new s(u,E),o.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Au,o.stateNode=s,s._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=_,o.__reactInternalMemoizedMaskedChildContext=E),s}function eg(o,s,u,g){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,g),s.state!==o&&Au.enqueueReplaceState(s,s.state,null)}function tf(o,s,u,g){var _=o.stateNode;_.props=u,_.state=o.memoizedState,_.refs={},qd(o);var E=s.contextType;typeof E=="object"&&E!==null?_.context=Cn(E):(E=sn(s)?no:qt.current,_.context=cs(o,E)),_.state=o.memoizedState,E=s.getDerivedStateFromProps,typeof E=="function"&&(ef(o,s,E,u),_.state=o.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(s=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),s!==_.state&&Au.enqueueReplaceState(_,_.state,null),vu(o,u,_,g),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308)}function _s(o,s){try{var u="",g=s;do u+=Ne(g),g=g.return;while(g);var _=u}catch(E){_=`
Error generating stack: `+E.message+`
`+E.stack}return{value:o,source:s,stack:_,digest:null}}function nf(o,s,u){return{value:o,source:null,stack:u??null,digest:s??null}}function rf(o,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var q0=typeof WeakMap=="function"?WeakMap:Map;function tg(o,s,u){u=Dr(-1,u),u.tag=3,u.payload={element:null};var g=s.value;return u.callback=function(){Mu||(Mu=!0,vf=g),rf(o,s)},u}function ng(o,s,u){u=Dr(-1,u),u.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var _=s.value;u.payload=function(){return g(_)},u.callback=function(){rf(o,s)}}var E=o.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(u.callback=function(){rf(o,s),typeof g!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),u}function rg(o,s,u){var g=o.pingCache;if(g===null){g=o.pingCache=new q0;var _=new Set;g.set(s,_)}else _=g.get(s),_===void 0&&(_=new Set,g.set(s,_));_.has(u)||(_.add(u),o=tw.bind(null,o,s,u),s.then(o,o))}function ig(o){do{var s;if((s=o.tag===13)&&(s=o.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return o;o=o.return}while(o!==null);return null}function og(o,s,u,g,_){return(o.mode&1)===0?(o===s?o.flags|=65536:(o.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=Dr(-1,1),s.tag=2,fi(u,s,1))),u.lanes|=1),o):(o.flags|=65536,o.lanes=_,o)}var G0=ee.ReactCurrentOwner,an=!1;function Zt(o,s,u,g){s.child=o===null?Cm(s,null,u,g):ps(s,o.child,u,g)}function sg(o,s,u,g,_){u=u.render;var E=s.ref;return gs(s,_),g=Jd(o,s,u,g,E,_),u=Yd(),o!==null&&!an?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~_,Mr(o,s,_)):(it&&u&&kd(s),s.flags|=1,Zt(o,s,g,_),s.child)}function ag(o,s,u,g,_){if(o===null){var E=u.type;return typeof E=="function"&&!Af(E)&&E.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=E,lg(o,s,E,g,_)):(o=Ou(u.type,null,g,s,s.mode,_),o.ref=s.ref,o.return=s,s.child=o)}if(E=o.child,(o.lanes&_)===0){var S=E.memoizedProps;if(u=u.compare,u=u!==null?u:Aa,u(S,g)&&o.ref===s.ref)return Mr(o,s,_)}return s.flags|=1,o=_i(E,g),o.ref=s.ref,o.return=s,s.child=o}function lg(o,s,u,g,_){if(o!==null){var E=o.memoizedProps;if(Aa(E,g)&&o.ref===s.ref)if(an=!1,s.pendingProps=g=E,(o.lanes&_)!==0)(o.flags&131072)!==0&&(an=!0);else return s.lanes=o.lanes,Mr(o,s,_)}return of(o,s,u,g,_)}function ug(o,s,u){var g=s.pendingProps,_=g.children,E=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Es,yn),yn|=u;else{if((u&1073741824)===0)return o=E!==null?E.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:o,cachePool:null,transitions:null},s.updateQueue=null,Xe(Es,yn),yn|=o,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=E!==null?E.baseLanes:u,Xe(Es,yn),yn|=g}else E!==null?(g=E.baseLanes|u,s.memoizedState=null):g=u,Xe(Es,yn),yn|=g;return Zt(o,s,_,u),s.child}function cg(o,s){var u=s.ref;(o===null&&u!==null||o!==null&&o.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function of(o,s,u,g,_){var E=sn(u)?no:qt.current;return E=cs(s,E),gs(s,_),u=Jd(o,s,u,g,E,_),g=Yd(),o!==null&&!an?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~_,Mr(o,s,_)):(it&&g&&kd(s),s.flags|=1,Zt(o,s,u,_),s.child)}function dg(o,s,u,g,_){if(sn(u)){var E=!0;cu(s)}else E=!1;if(gs(s,_),s.stateNode===null)Pu(o,s),jm(s,u,g),tf(s,u,g,_),g=!0;else if(o===null){var S=s.stateNode,x=s.memoizedProps;S.props=x;var L=S.context,$=u.contextType;typeof $=="object"&&$!==null?$=Cn($):($=sn(u)?no:qt.current,$=cs(s,$));var j=u.getDerivedStateFromProps,ne=typeof j=="function"||typeof S.getSnapshotBeforeUpdate=="function";ne||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(x!==g||L!==$)&&eg(s,S,g,$),di=!1;var Z=s.memoizedState;S.state=Z,vu(s,g,S,_),L=s.memoizedState,x!==g||Z!==L||on.current||di?(typeof j=="function"&&(ef(s,u,j,g),L=s.memoizedState),(x=di||Zm(s,u,x,g,Z,L,$))?(ne||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=L),S.props=g,S.state=L,S.context=$,g=x):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{S=s.stateNode,Rm(o,s),x=s.memoizedProps,$=s.type===s.elementType?x:zn(s.type,x),S.props=$,ne=s.pendingProps,Z=S.context,L=u.contextType,typeof L=="object"&&L!==null?L=Cn(L):(L=sn(u)?no:qt.current,L=cs(s,L));var ue=u.getDerivedStateFromProps;(j=typeof ue=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(x!==ne||Z!==L)&&eg(s,S,g,L),di=!1,Z=s.memoizedState,S.state=Z,vu(s,g,S,_);var he=s.memoizedState;x!==ne||Z!==he||on.current||di?(typeof ue=="function"&&(ef(s,u,ue,g),he=s.memoizedState),($=di||Zm(s,u,$,g,Z,he,L)||!1)?(j||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(g,he,L),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(g,he,L)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||x===o.memoizedProps&&Z===o.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===o.memoizedProps&&Z===o.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=he),S.props=g,S.state=he,S.context=L,g=$):(typeof S.componentDidUpdate!="function"||x===o.memoizedProps&&Z===o.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===o.memoizedProps&&Z===o.memoizedState||(s.flags|=1024),g=!1)}return sf(o,s,u,g,E,_)}function sf(o,s,u,g,_,E){cg(o,s);var S=(s.flags&128)!==0;if(!g&&!S)return _&&gm(s,u,!1),Mr(o,s,E);g=s.stateNode,G0.current=s;var x=S&&typeof u.getDerivedStateFromError!="function"?null:g.render();return s.flags|=1,o!==null&&S?(s.child=ps(s,o.child,null,E),s.child=ps(s,null,x,E)):Zt(o,s,x,E),s.memoizedState=g.state,_&&gm(s,u,!0),s.child}function fg(o){var s=o.stateNode;s.pendingContext?pm(o,s.pendingContext,s.pendingContext!==s.context):s.context&&pm(o,s.context,!1),Gd(o,s.containerInfo)}function hg(o,s,u,g,_){return hs(),Vd(_),s.flags|=256,Zt(o,s,u,g),s.child}var af={dehydrated:null,treeContext:null,retryLane:0};function lf(o){return{baseLanes:o,cachePool:null,transitions:null}}function pg(o,s,u){var g=s.pendingProps,_=ot.current,E=!1,S=(s.flags&128)!==0,x;if((x=S)||(x=o!==null&&o.memoizedState===null?!1:(_&2)!==0),x?(E=!0,s.flags&=-129):(o===null||o.memoizedState!==null)&&(_|=1),Xe(ot,_&1),o===null)return Ld(s),o=s.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((s.mode&1)===0?s.lanes=1:o.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(S=g.children,o=g.fallback,E?(g=s.mode,E=s.child,S={mode:"hidden",children:S},(g&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=S):E=Bu(S,g,0,null),o=ho(o,g,u,null),E.return=s,o.return=s,E.sibling=o,s.child=E,s.child.memoizedState=lf(u),s.memoizedState=af,o):uf(s,S));if(_=o.memoizedState,_!==null&&(x=_.dehydrated,x!==null))return H0(o,s,S,g,x,_,u);if(E){E=g.fallback,S=s.mode,_=o.child,x=_.sibling;var L={mode:"hidden",children:g.children};return(S&1)===0&&s.child!==_?(g=s.child,g.childLanes=0,g.pendingProps=L,s.deletions=null):(g=_i(_,L),g.subtreeFlags=_.subtreeFlags&14680064),x!==null?E=_i(x,E):(E=ho(E,S,u,null),E.flags|=2),E.return=s,g.return=s,g.sibling=E,s.child=g,g=E,E=s.child,S=o.child.memoizedState,S=S===null?lf(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},E.memoizedState=S,E.childLanes=o.childLanes&~u,s.memoizedState=af,g}return E=o.child,o=E.sibling,g=_i(E,{mode:"visible",children:g.children}),(s.mode&1)===0&&(g.lanes=u),g.return=s,g.sibling=null,o!==null&&(u=s.deletions,u===null?(s.deletions=[o],s.flags|=16):u.push(o)),s.child=g,s.memoizedState=null,g}function uf(o,s){return s=Bu({mode:"visible",children:s},o.mode,0,null),s.return=o,o.child=s}function Ru(o,s,u,g){return g!==null&&Vd(g),ps(s,o.child,null,u),o=uf(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function H0(o,s,u,g,_,E,S){if(u)return s.flags&256?(s.flags&=-257,g=nf(Error(t(422))),Ru(o,s,S,g)):s.memoizedState!==null?(s.child=o.child,s.flags|=128,null):(E=g.fallback,_=s.mode,g=Bu({mode:"visible",children:g.children},_,0,null),E=ho(E,_,S,null),E.flags|=2,g.return=s,E.return=s,g.sibling=E,s.child=g,(s.mode&1)!==0&&ps(s,o.child,null,S),s.child.memoizedState=lf(S),s.memoizedState=af,E);if((s.mode&1)===0)return Ru(o,s,S,null);if(_.data==="$!"){if(g=_.nextSibling&&_.nextSibling.dataset,g)var x=g.dgst;return g=x,E=Error(t(419)),g=nf(E,g,void 0),Ru(o,s,S,g)}if(x=(S&o.childLanes)!==0,an||x){if(g=xt,g!==null){switch(S&-S){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(g.suspendedLanes|S))!==0?0:_,_!==0&&_!==E.retryLane&&(E.retryLane=_,kr(o,_),Kn(g,o,_,-1))}return Cf(),g=nf(Error(t(421))),Ru(o,s,S,g)}return _.data==="$?"?(s.flags|=128,s.child=o.child,s=nw.bind(null,o),_._reactRetry=s,null):(o=E.treeContext,gn=ai(_.nextSibling),mn=s,it=!0,Hn=null,o!==null&&(wn[Sn++]=Nr,wn[Sn++]=xr,wn[Sn++]=ro,Nr=o.id,xr=o.overflow,ro=s),s=uf(s,g.children),s.flags|=4096,s)}function mg(o,s,u){o.lanes|=s;var g=o.alternate;g!==null&&(g.lanes|=s),Od(o.return,s,u)}function cf(o,s,u,g,_){var E=o.memoizedState;E===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:_}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=g,E.tail=u,E.tailMode=_)}function gg(o,s,u){var g=s.pendingProps,_=g.revealOrder,E=g.tail;if(Zt(o,s,g.children,u),g=ot.current,(g&2)!==0)g=g&1|2,s.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&mg(o,u,s);else if(o.tag===19)mg(o,u,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(Xe(ot,g),(s.mode&1)===0)s.memoizedState=null;else switch(_){case"forwards":for(u=s.child,_=null;u!==null;)o=u.alternate,o!==null&&Eu(o)===null&&(_=u),u=u.sibling;u=_,u===null?(_=s.child,s.child=null):(_=u.sibling,u.sibling=null),cf(s,!1,_,u,E);break;case"backwards":for(u=null,_=s.child,s.child=null;_!==null;){if(o=_.alternate,o!==null&&Eu(o)===null){s.child=_;break}o=_.sibling,_.sibling=u,u=_,_=o}cf(s,!0,u,null,E);break;case"together":cf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Pu(o,s){(s.mode&1)===0&&o!==null&&(o.alternate=null,s.alternate=null,s.flags|=2)}function Mr(o,s,u){if(o!==null&&(s.dependencies=o.dependencies),lo|=s.lanes,(u&s.childLanes)===0)return null;if(o!==null&&s.child!==o.child)throw Error(t(153));if(s.child!==null){for(o=s.child,u=_i(o,o.pendingProps),s.child=u,u.return=s;o.sibling!==null;)o=o.sibling,u=u.sibling=_i(o,o.pendingProps),u.return=s;u.sibling=null}return s.child}function z0(o,s,u){switch(s.tag){case 3:fg(s),hs();break;case 5:xm(s);break;case 1:sn(s.type)&&cu(s);break;case 4:Gd(s,s.stateNode.containerInfo);break;case 10:var g=s.type._context,_=s.memoizedProps.value;Xe(gu,g._currentValue),g._currentValue=_;break;case 13:if(g=s.memoizedState,g!==null)return g.dehydrated!==null?(Xe(ot,ot.current&1),s.flags|=128,null):(u&s.child.childLanes)!==0?pg(o,s,u):(Xe(ot,ot.current&1),o=Mr(o,s,u),o!==null?o.sibling:null);Xe(ot,ot.current&1);break;case 19:if(g=(u&s.childLanes)!==0,(o.flags&128)!==0){if(g)return gg(o,s,u);s.flags|=128}if(_=s.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Xe(ot,ot.current),g)break;return null;case 22:case 23:return s.lanes=0,ug(o,s,u)}return Mr(o,s,u)}var yg,df,_g,vg;yg=function(o,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)o.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},df=function(){},_g=function(o,s,u,g){var _=o.memoizedProps;if(_!==g){o=s.stateNode,so(lr.current);var E=null;switch(u){case"input":_=Oi(o,_),g=Oi(o,g),E=[];break;case"select":_=ce({},_,{value:void 0}),g=ce({},g,{value:void 0}),E=[];break;case"textarea":_=ta(o,_),g=ta(o,g),E=[];break;default:typeof _.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=au)}aa(u,g);var S;u=null;for($ in _)if(!g.hasOwnProperty($)&&_.hasOwnProperty($)&&_[$]!=null)if($==="style"){var x=_[$];for(S in x)x.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(i.hasOwnProperty($)?E||(E=[]):(E=E||[]).push($,null));for($ in g){var L=g[$];if(x=_!=null?_[$]:void 0,g.hasOwnProperty($)&&L!==x&&(L!=null||x!=null))if($==="style")if(x){for(S in x)!x.hasOwnProperty(S)||L&&L.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in L)L.hasOwnProperty(S)&&x[S]!==L[S]&&(u||(u={}),u[S]=L[S])}else u||(E||(E=[]),E.push($,u)),u=L;else $==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,x=x?x.__html:void 0,L!=null&&x!==L&&(E=E||[]).push($,L)):$==="children"?typeof L!="string"&&typeof L!="number"||(E=E||[]).push($,""+L):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(i.hasOwnProperty($)?(L!=null&&$==="onScroll"&&Ze("scroll",o),E||x===L||(E=[])):(E=E||[]).push($,L))}u&&(E=E||[]).push("style",u);var $=E;(s.updateQueue=$)&&(s.flags|=4)}},vg=function(o,s,u,g){u!==g&&(s.flags|=4)};function qa(o,s){if(!it)switch(o.tailMode){case"hidden":s=o.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Ht(o){var s=o.alternate!==null&&o.alternate.child===o.child,u=0,g=0;if(s)for(var _=o.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags&14680064,g|=_.flags&14680064,_.return=o,_=_.sibling;else for(_=o.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=o,_=_.sibling;return o.subtreeFlags|=g,o.childLanes=u,s}function $0(o,s,u){var g=s.pendingProps;switch(Dd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(s),null;case 1:return sn(s.type)&&uu(),Ht(s),null;case 3:return g=s.stateNode,ys(),je(on),je(qt),$d(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(pu(s)?s.flags|=4:o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Hn!==null&&(If(Hn),Hn=null))),df(o,s),Ht(s),null;case 5:Hd(s);var _=so(Ua.current);if(u=s.type,o!==null&&s.stateNode!=null)_g(o,s,u,g,_),o.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!g){if(s.stateNode===null)throw Error(t(166));return Ht(s),null}if(o=so(lr.current),pu(s)){g=s.stateNode,u=s.type;var E=s.memoizedProps;switch(g[ar]=s,g[ka]=E,o=(s.mode&1)!==0,u){case"dialog":Ze("cancel",g),Ze("close",g);break;case"iframe":case"object":case"embed":Ze("load",g);break;case"video":case"audio":for(_=0;_<Pa.length;_++)Ze(Pa[_],g);break;case"source":Ze("error",g);break;case"img":case"image":case"link":Ze("error",g),Ze("load",g);break;case"details":Ze("toggle",g);break;case"input":Do(g,E),Ze("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!E.multiple},Ze("invalid",g);break;case"textarea":Lo(g,E),Ze("invalid",g)}aa(u,E),_=null;for(var S in E)if(E.hasOwnProperty(S)){var x=E[S];S==="children"?typeof x=="string"?g.textContent!==x&&(E.suppressHydrationWarning!==!0&&su(g.textContent,x,o),_=["children",x]):typeof x=="number"&&g.textContent!==""+x&&(E.suppressHydrationWarning!==!0&&su(g.textContent,x,o),_=["children",""+x]):i.hasOwnProperty(S)&&x!=null&&S==="onScroll"&&Ze("scroll",g)}switch(u){case"input":yr(g),Dl(g,E,!0);break;case"textarea":yr(g),na(g);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(g.onclick=au)}g=_,s.updateQueue=g,g!==null&&(s.flags|=4)}else{S=_.nodeType===9?_:_.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Tt(u)),o==="http://www.w3.org/1999/xhtml"?u==="script"?(o=S.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=S.createElement(u,{is:g.is}):(o=S.createElement(u),u==="select"&&(S=o,g.multiple?S.multiple=!0:g.size&&(S.size=g.size))):o=S.createElementNS(o,u),o[ar]=s,o[ka]=g,yg(o,s,!1,!1),s.stateNode=o;e:{switch(S=la(u,g),u){case"dialog":Ze("cancel",o),Ze("close",o),_=g;break;case"iframe":case"object":case"embed":Ze("load",o),_=g;break;case"video":case"audio":for(_=0;_<Pa.length;_++)Ze(Pa[_],o);_=g;break;case"source":Ze("error",o),_=g;break;case"img":case"image":case"link":Ze("error",o),Ze("load",o),_=g;break;case"details":Ze("toggle",o),_=g;break;case"input":Do(o,g),_=Oi(o,g),Ze("invalid",o);break;case"option":_=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},_=ce({},g,{value:void 0}),Ze("invalid",o);break;case"textarea":Lo(o,g),_=ta(o,g),Ze("invalid",o);break;default:_=g}aa(u,_),x=_;for(E in x)if(x.hasOwnProperty(E)){var L=x[E];E==="style"?oa(o,L):E==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&ra(o,L)):E==="children"?typeof L=="string"?(u!=="textarea"||L!=="")&&Qr(o,L):typeof L=="number"&&Qr(o,""+L):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?L!=null&&E==="onScroll"&&Ze("scroll",o):L!=null&&K(o,E,L,S))}switch(u){case"input":yr(o),Dl(o,g,!1);break;case"textarea":yr(o),na(o);break;case"option":g.value!=null&&o.setAttribute("value",""+He(g.value));break;case"select":o.multiple=!!g.multiple,E=g.value,E!=null?vr(o,!!g.multiple,E,!1):g.defaultValue!=null&&vr(o,!!g.multiple,g.defaultValue,!0);break;default:typeof _.onClick=="function"&&(o.onclick=au)}switch(u){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ht(s),null;case 6:if(o&&s.stateNode!=null)vg(o,s,o.memoizedProps,g);else{if(typeof g!="string"&&s.stateNode===null)throw Error(t(166));if(u=so(Ua.current),so(lr.current),pu(s)){if(g=s.stateNode,u=s.memoizedProps,g[ar]=s,(E=g.nodeValue!==u)&&(o=mn,o!==null))switch(o.tag){case 3:su(g.nodeValue,u,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&su(g.nodeValue,u,(o.mode&1)!==0)}E&&(s.flags|=4)}else g=(u.nodeType===9?u:u.ownerDocument).createTextNode(g),g[ar]=s,s.stateNode=g}return Ht(s),null;case 13:if(je(ot),g=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(it&&gn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Im(),hs(),s.flags|=98560,E=!1;else if(E=pu(s),g!==null&&g.dehydrated!==null){if(o===null){if(!E)throw Error(t(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(t(317));E[ar]=s}else hs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ht(s),E=!1}else Hn!==null&&(If(Hn),Hn=null),E=!0;if(!E)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=u,s):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(s.child.flags|=8192,(s.mode&1)!==0&&(o===null||(ot.current&1)!==0?Ct===0&&(Ct=3):Cf())),s.updateQueue!==null&&(s.flags|=4),Ht(s),null);case 4:return ys(),df(o,s),o===null&&Na(s.stateNode.containerInfo),Ht(s),null;case 10:return bd(s.type._context),Ht(s),null;case 17:return sn(s.type)&&uu(),Ht(s),null;case 19:if(je(ot),E=s.memoizedState,E===null)return Ht(s),null;if(g=(s.flags&128)!==0,S=E.rendering,S===null)if(g)qa(E,!1);else{if(Ct!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(S=Eu(o),S!==null){for(s.flags|=128,qa(E,!1),g=S.updateQueue,g!==null&&(s.updateQueue=g,s.flags|=4),s.subtreeFlags=0,g=u,u=s.child;u!==null;)E=u,o=g,E.flags&=14680066,S=E.alternate,S===null?(E.childLanes=0,E.lanes=o,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=S.childLanes,E.lanes=S.lanes,E.child=S.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=S.memoizedProps,E.memoizedState=S.memoizedState,E.updateQueue=S.updateQueue,E.type=S.type,o=S.dependencies,E.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),u=u.sibling;return Xe(ot,ot.current&1|2),s.child}o=o.sibling}E.tail!==null&&Qe()>Ts&&(s.flags|=128,g=!0,qa(E,!1),s.lanes=4194304)}else{if(!g)if(o=Eu(S),o!==null){if(s.flags|=128,g=!0,u=o.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),qa(E,!0),E.tail===null&&E.tailMode==="hidden"&&!S.alternate&&!it)return Ht(s),null}else 2*Qe()-E.renderingStartTime>Ts&&u!==1073741824&&(s.flags|=128,g=!0,qa(E,!1),s.lanes=4194304);E.isBackwards?(S.sibling=s.child,s.child=S):(u=E.last,u!==null?u.sibling=S:s.child=S,E.last=S)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=Qe(),s.sibling=null,u=ot.current,Xe(ot,g?u&1|2:u&1),s):(Ht(s),null);case 22:case 23:return Sf(),g=s.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(s.flags|=8192),g&&(s.mode&1)!==0?(yn&1073741824)!==0&&(Ht(s),s.subtreeFlags&6&&(s.flags|=8192)):Ht(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function W0(o,s){switch(Dd(s),s.tag){case 1:return sn(s.type)&&uu(),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return ys(),je(on),je(qt),$d(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 5:return Hd(s),null;case 13:if(je(ot),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(t(340));hs()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return je(ot),null;case 4:return ys(),null;case 10:return bd(s.type._context),null;case 22:case 23:return Sf(),null;case 24:return null;default:return null}}var Nu=!1,zt=!1,K0=typeof WeakSet=="function"?WeakSet:Set,de=null;function vs(o,s){var u=o.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(g){lt(o,s,g)}else u.current=null}function ff(o,s,u){try{u()}catch(g){lt(o,s,g)}}var Eg=!1;function J0(o,s){if(wd=ii,o=Zp(),md(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var _=g.anchorOffset,E=g.focusNode;g=g.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var S=0,x=-1,L=-1,$=0,j=0,ne=o,Z=null;t:for(;;){for(var ue;ne!==u||_!==0&&ne.nodeType!==3||(x=S+_),ne!==E||g!==0&&ne.nodeType!==3||(L=S+g),ne.nodeType===3&&(S+=ne.nodeValue.length),(ue=ne.firstChild)!==null;)Z=ne,ne=ue;for(;;){if(ne===o)break t;if(Z===u&&++$===_&&(x=S),Z===E&&++j===g&&(L=S),(ue=ne.nextSibling)!==null)break;ne=Z,Z=ne.parentNode}ne=ue}u=x===-1||L===-1?null:{start:x,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(Sd={focusedElem:o,selectionRange:u},ii=!1,de=s;de!==null;)if(s=de,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,de=o;else for(;de!==null;){s=de;try{var he=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var pe=he.memoizedProps,ht=he.memoizedState,H=s.stateNode,U=H.getSnapshotBeforeUpdate(s.elementType===s.type?pe:zn(s.type,pe),ht);H.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){lt(s,s.return,re)}if(o=s.sibling,o!==null){o.return=s.return,de=o;break}de=s.return}return he=Eg,Eg=!1,he}function Ga(o,s,u){var g=s.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var _=g=g.next;do{if((_.tag&o)===o){var E=_.destroy;_.destroy=void 0,E!==void 0&&ff(s,u,E)}_=_.next}while(_!==g)}}function xu(o,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&o)===o){var g=u.create;u.destroy=g()}u=u.next}while(u!==s)}}function hf(o){var s=o.ref;if(s!==null){var u=o.stateNode;switch(o.tag){case 5:o=u;break;default:o=u}typeof s=="function"?s(o):s.current=o}}function Tg(o){var s=o.alternate;s!==null&&(o.alternate=null,Tg(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&(delete s[ar],delete s[ka],delete s[Pd],delete s[x0],delete s[k0])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Ig(o){return o.tag===5||o.tag===3||o.tag===4}function wg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Ig(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function pf(o,s,u){var g=o.tag;if(g===5||g===6)o=o.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(o,s):u.insertBefore(o,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(o,u)):(s=u,s.appendChild(o)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=au));else if(g!==4&&(o=o.child,o!==null))for(pf(o,s,u),o=o.sibling;o!==null;)pf(o,s,u),o=o.sibling}function mf(o,s,u){var g=o.tag;if(g===5||g===6)o=o.stateNode,s?u.insertBefore(o,s):u.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(mf(o,s,u),o=o.sibling;o!==null;)mf(o,s,u),o=o.sibling}var Vt=null,$n=!1;function hi(o,s,u){for(u=u.child;u!==null;)Sg(o,s,u),u=u.sibling}function Sg(o,s,u){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Ji,u)}catch{}switch(u.tag){case 5:zt||vs(u,s);case 6:var g=Vt,_=$n;Vt=null,hi(o,s,u),Vt=g,$n=_,Vt!==null&&($n?(o=Vt,u=u.stateNode,o.nodeType===8?o.parentNode.removeChild(u):o.removeChild(u)):Vt.removeChild(u.stateNode));break;case 18:Vt!==null&&($n?(o=Vt,u=u.stateNode,o.nodeType===8?Rd(o.parentNode,u):o.nodeType===1&&Rd(o,u),Bn(o)):Rd(Vt,u.stateNode));break;case 4:g=Vt,_=$n,Vt=u.stateNode.containerInfo,$n=!0,hi(o,s,u),Vt=g,$n=_;break;case 0:case 11:case 14:case 15:if(!zt&&(g=u.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){_=g=g.next;do{var E=_,S=E.destroy;E=E.tag,S!==void 0&&((E&2)!==0||(E&4)!==0)&&ff(u,s,S),_=_.next}while(_!==g)}hi(o,s,u);break;case 1:if(!zt&&(vs(u,s),g=u.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=u.memoizedProps,g.state=u.memoizedState,g.componentWillUnmount()}catch(x){lt(u,s,x)}hi(o,s,u);break;case 21:hi(o,s,u);break;case 22:u.mode&1?(zt=(g=zt)||u.memoizedState!==null,hi(o,s,u),zt=g):hi(o,s,u);break;default:hi(o,s,u)}}function Cg(o){var s=o.updateQueue;if(s!==null){o.updateQueue=null;var u=o.stateNode;u===null&&(u=o.stateNode=new K0),s.forEach(function(g){var _=rw.bind(null,o,g);u.has(g)||(u.add(g),g.then(_,_))})}}function Wn(o,s){var u=s.deletions;if(u!==null)for(var g=0;g<u.length;g++){var _=u[g];try{var E=o,S=s,x=S;e:for(;x!==null;){switch(x.tag){case 5:Vt=x.stateNode,$n=!1;break e;case 3:Vt=x.stateNode.containerInfo,$n=!0;break e;case 4:Vt=x.stateNode.containerInfo,$n=!0;break e}x=x.return}if(Vt===null)throw Error(t(160));Sg(E,S,_),Vt=null,$n=!1;var L=_.alternate;L!==null&&(L.return=null),_.return=null}catch($){lt(_,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Ag(s,o),s=s.sibling}function Ag(o,s){var u=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Wn(s,o),cr(o),g&4){try{Ga(3,o,o.return),xu(3,o)}catch(pe){lt(o,o.return,pe)}try{Ga(5,o,o.return)}catch(pe){lt(o,o.return,pe)}}break;case 1:Wn(s,o),cr(o),g&512&&u!==null&&vs(u,u.return);break;case 5:if(Wn(s,o),cr(o),g&512&&u!==null&&vs(u,u.return),o.flags&32){var _=o.stateNode;try{Qr(_,"")}catch(pe){lt(o,o.return,pe)}}if(g&4&&(_=o.stateNode,_!=null)){var E=o.memoizedProps,S=u!==null?u.memoizedProps:E,x=o.type,L=o.updateQueue;if(o.updateQueue=null,L!==null)try{x==="input"&&E.type==="radio"&&E.name!=null&&js(_,E),la(x,S);var $=la(x,E);for(S=0;S<L.length;S+=2){var j=L[S],ne=L[S+1];j==="style"?oa(_,ne):j==="dangerouslySetInnerHTML"?ra(_,ne):j==="children"?Qr(_,ne):K(_,j,ne,$)}switch(x){case"input":ea(_,E);break;case"textarea":Vo(_,E);break;case"select":var Z=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!E.multiple;var ue=E.value;ue!=null?vr(_,!!E.multiple,ue,!1):Z!==!!E.multiple&&(E.defaultValue!=null?vr(_,!!E.multiple,E.defaultValue,!0):vr(_,!!E.multiple,E.multiple?[]:"",!1))}_[ka]=E}catch(pe){lt(o,o.return,pe)}}break;case 6:if(Wn(s,o),cr(o),g&4){if(o.stateNode===null)throw Error(t(162));_=o.stateNode,E=o.memoizedProps;try{_.nodeValue=E}catch(pe){lt(o,o.return,pe)}}break;case 3:if(Wn(s,o),cr(o),g&4&&u!==null&&u.memoizedState.isDehydrated)try{Bn(s.containerInfo)}catch(pe){lt(o,o.return,pe)}break;case 4:Wn(s,o),cr(o);break;case 13:Wn(s,o),cr(o),_=o.child,_.flags&8192&&(E=_.memoizedState!==null,_.stateNode.isHidden=E,!E||_.alternate!==null&&_.alternate.memoizedState!==null||(_f=Qe())),g&4&&Cg(o);break;case 22:if(j=u!==null&&u.memoizedState!==null,o.mode&1?(zt=($=zt)||j,Wn(s,o),zt=$):Wn(s,o),cr(o),g&8192){if($=o.memoizedState!==null,(o.stateNode.isHidden=$)&&!j&&(o.mode&1)!==0)for(de=o,j=o.child;j!==null;){for(ne=de=j;de!==null;){switch(Z=de,ue=Z.child,Z.tag){case 0:case 11:case 14:case 15:Ga(4,Z,Z.return);break;case 1:vs(Z,Z.return);var he=Z.stateNode;if(typeof he.componentWillUnmount=="function"){g=Z,u=Z.return;try{s=g,he.props=s.memoizedProps,he.state=s.memoizedState,he.componentWillUnmount()}catch(pe){lt(g,u,pe)}}break;case 5:vs(Z,Z.return);break;case 22:if(Z.memoizedState!==null){Ng(ne);continue}}ue!==null?(ue.return=Z,de=ue):Ng(ne)}j=j.sibling}e:for(j=null,ne=o;;){if(ne.tag===5){if(j===null){j=ne;try{_=ne.stateNode,$?(E=_.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(x=ne.stateNode,L=ne.memoizedProps.style,S=L!=null&&L.hasOwnProperty("display")?L.display:null,x.style.display=ia("display",S))}catch(pe){lt(o,o.return,pe)}}}else if(ne.tag===6){if(j===null)try{ne.stateNode.nodeValue=$?"":ne.memoizedProps}catch(pe){lt(o,o.return,pe)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===o)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===o)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===o)break e;j===ne&&(j=null),ne=ne.return}j===ne&&(j=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:Wn(s,o),cr(o),g&4&&Cg(o);break;case 21:break;default:Wn(s,o),cr(o)}}function cr(o){var s=o.flags;if(s&2){try{e:{for(var u=o.return;u!==null;){if(Ig(u)){var g=u;break e}u=u.return}throw Error(t(160))}switch(g.tag){case 5:var _=g.stateNode;g.flags&32&&(Qr(_,""),g.flags&=-33);var E=wg(o);mf(o,E,_);break;case 3:case 4:var S=g.stateNode.containerInfo,x=wg(o);pf(o,x,S);break;default:throw Error(t(161))}}catch(L){lt(o,o.return,L)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function Y0(o,s,u){de=o,Rg(o)}function Rg(o,s,u){for(var g=(o.mode&1)!==0;de!==null;){var _=de,E=_.child;if(_.tag===22&&g){var S=_.memoizedState!==null||Nu;if(!S){var x=_.alternate,L=x!==null&&x.memoizedState!==null||zt;x=Nu;var $=zt;if(Nu=S,(zt=L)&&!$)for(de=_;de!==null;)S=de,L=S.child,S.tag===22&&S.memoizedState!==null?xg(_):L!==null?(L.return=S,de=L):xg(_);for(;E!==null;)de=E,Rg(E),E=E.sibling;de=_,Nu=x,zt=$}Pg(o)}else(_.subtreeFlags&8772)!==0&&E!==null?(E.return=_,de=E):Pg(o)}}function Pg(o){for(;de!==null;){var s=de;if((s.flags&8772)!==0){var u=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:zt||xu(5,s);break;case 1:var g=s.stateNode;if(s.flags&4&&!zt)if(u===null)g.componentDidMount();else{var _=s.elementType===s.type?u.memoizedProps:zn(s.type,u.memoizedProps);g.componentDidUpdate(_,u.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var E=s.updateQueue;E!==null&&Nm(s,E,g);break;case 3:var S=s.updateQueue;if(S!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=s.child.stateNode;break;case 1:u=s.child.stateNode}Nm(s,S,u)}break;case 5:var x=s.stateNode;if(u===null&&s.flags&4){u=x;var L=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&u.focus();break;case"img":L.src&&(u.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var j=$.memoizedState;if(j!==null){var ne=j.dehydrated;ne!==null&&Bn(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||s.flags&512&&hf(s)}catch(Z){lt(s,s.return,Z)}}if(s===o){de=null;break}if(u=s.sibling,u!==null){u.return=s.return,de=u;break}de=s.return}}function Ng(o){for(;de!==null;){var s=de;if(s===o){de=null;break}var u=s.sibling;if(u!==null){u.return=s.return,de=u;break}de=s.return}}function xg(o){for(;de!==null;){var s=de;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{xu(4,s)}catch(L){lt(s,u,L)}break;case 1:var g=s.stateNode;if(typeof g.componentDidMount=="function"){var _=s.return;try{g.componentDidMount()}catch(L){lt(s,_,L)}}var E=s.return;try{hf(s)}catch(L){lt(s,E,L)}break;case 5:var S=s.return;try{hf(s)}catch(L){lt(s,S,L)}}}catch(L){lt(s,s.return,L)}if(s===o){de=null;break}var x=s.sibling;if(x!==null){x.return=s.return,de=x;break}de=s.return}}var Q0=Math.ceil,ku=ee.ReactCurrentDispatcher,gf=ee.ReactCurrentOwner,Rn=ee.ReactCurrentBatchConfig,Fe=0,xt=null,gt=null,Ut=0,yn=0,Es=li(0),Ct=0,Ha=null,lo=0,Du=0,yf=0,za=null,ln=null,_f=0,Ts=1/0,Lr=null,Mu=!1,vf=null,pi=null,Lu=!1,mi=null,Vu=0,$a=0,Ef=null,Uu=-1,Fu=0;function jt(){return(Fe&6)!==0?Qe():Uu!==-1?Uu:Uu=Qe()}function gi(o){return(o.mode&1)===0?1:(Fe&2)!==0&&Ut!==0?Ut&-Ut:M0.transition!==null?(Fu===0&&(Fu=Qi()),Fu):(o=De,o!==0||(o=window.event,o=o===void 0?16:va(o.type)),o)}function Kn(o,s,u,g){if(50<$a)throw $a=0,Ef=null,Error(t(185));ei(o,u,g),((Fe&2)===0||o!==xt)&&(o===xt&&((Fe&2)===0&&(Du|=u),Ct===4&&yi(o,Ut)),un(o,g),u===1&&Fe===0&&(s.mode&1)===0&&(Ts=Qe()+500,du&&ci()))}function un(o,s){var u=o.callbackNode;Ir(o,s);var g=Yi(o,o===xt?Ut:0);if(g===0)u!==null&&pa(u),o.callbackNode=null,o.callbackPriority=0;else if(s=g&-g,o.callbackPriority!==s){if(u!=null&&pa(u),s===1)o.tag===0?D0(Dg.bind(null,o)):ym(Dg.bind(null,o)),P0(function(){(Fe&6)===0&&ci()}),u=null;else{switch(ni(g)){case 1:u=Ki;break;case 4:u=Xr;break;case 16:u=En;break;case 536870912:u=Fl;break;default:u=En}u=Bg(u,kg.bind(null,o))}o.callbackPriority=s,o.callbackNode=u}}function kg(o,s){if(Uu=-1,Fu=0,(Fe&6)!==0)throw Error(t(327));var u=o.callbackNode;if(Is()&&o.callbackNode!==u)return null;var g=Yi(o,o===xt?Ut:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||s)s=bu(o,g);else{s=g;var _=Fe;Fe|=2;var E=Lg();(xt!==o||Ut!==s)&&(Lr=null,Ts=Qe()+500,co(o,s));do try{j0();break}catch(x){Mg(o,x)}while(!0);Fd(),ku.current=E,Fe=_,gt!==null?s=0:(xt=null,Ut=0,s=Ct)}if(s!==0){if(s===2&&(_=fn(o),_!==0&&(g=_,s=Tf(o,_))),s===1)throw u=Ha,co(o,0),yi(o,g),un(o,Qe()),u;if(s===6)yi(o,g);else{if(_=o.current.alternate,(g&30)===0&&!X0(_)&&(s=bu(o,g),s===2&&(E=fn(o),E!==0&&(g=E,s=Tf(o,E))),s===1))throw u=Ha,co(o,0),yi(o,g),un(o,Qe()),u;switch(o.finishedWork=_,o.finishedLanes=g,s){case 0:case 1:throw Error(t(345));case 2:fo(o,ln,Lr);break;case 3:if(yi(o,g),(g&130023424)===g&&(s=_f+500-Qe(),10<s)){if(Yi(o,0)!==0)break;if(_=o.suspendedLanes,(_&g)!==g){jt(),o.pingedLanes|=o.suspendedLanes&_;break}o.timeoutHandle=Ad(fo.bind(null,o,ln,Lr),s);break}fo(o,ln,Lr);break;case 4:if(yi(o,g),(g&4194240)===g)break;for(s=o.eventTimes,_=-1;0<g;){var S=31-Qt(g);E=1<<S,S=s[S],S>_&&(_=S),g&=~E}if(g=_,g=Qe()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Q0(g/1960))-g,10<g){o.timeoutHandle=Ad(fo.bind(null,o,ln,Lr),g);break}fo(o,ln,Lr);break;case 5:fo(o,ln,Lr);break;default:throw Error(t(329))}}}return un(o,Qe()),o.callbackNode===u?kg.bind(null,o):null}function Tf(o,s){var u=za;return o.current.memoizedState.isDehydrated&&(co(o,s).flags|=256),o=bu(o,s),o!==2&&(s=ln,ln=u,s!==null&&If(s)),o}function If(o){ln===null?ln=o:ln.push.apply(ln,o)}function X0(o){for(var s=o;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var g=0;g<u.length;g++){var _=u[g],E=_.getSnapshot;_=_.value;try{if(!Gn(E(),_))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yi(o,s){for(s&=~yf,s&=~Du,o.suspendedLanes|=s,o.pingedLanes&=~s,o=o.expirationTimes;0<s;){var u=31-Qt(s),g=1<<u;o[u]=-1,s&=~g}}function Dg(o){if((Fe&6)!==0)throw Error(t(327));Is();var s=Yi(o,0);if((s&1)===0)return un(o,Qe()),null;var u=bu(o,s);if(o.tag!==0&&u===2){var g=fn(o);g!==0&&(s=g,u=Tf(o,g))}if(u===1)throw u=Ha,co(o,0),yi(o,s),un(o,Qe()),u;if(u===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=s,fo(o,ln,Lr),un(o,Qe()),null}function wf(o,s){var u=Fe;Fe|=1;try{return o(s)}finally{Fe=u,Fe===0&&(Ts=Qe()+500,du&&ci())}}function uo(o){mi!==null&&mi.tag===0&&(Fe&6)===0&&Is();var s=Fe;Fe|=1;var u=Rn.transition,g=De;try{if(Rn.transition=null,De=1,o)return o()}finally{De=g,Rn.transition=u,Fe=s,(Fe&6)===0&&ci()}}function Sf(){yn=Es.current,je(Es)}function co(o,s){o.finishedWork=null,o.finishedLanes=0;var u=o.timeoutHandle;if(u!==-1&&(o.timeoutHandle=-1,R0(u)),gt!==null)for(u=gt.return;u!==null;){var g=u;switch(Dd(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&uu();break;case 3:ys(),je(on),je(qt),$d();break;case 5:Hd(g);break;case 4:ys();break;case 13:je(ot);break;case 19:je(ot);break;case 10:bd(g.type._context);break;case 22:case 23:Sf()}u=u.return}if(xt=o,gt=o=_i(o.current,null),Ut=yn=s,Ct=0,Ha=null,yf=Du=lo=0,ln=za=null,oo!==null){for(s=0;s<oo.length;s++)if(u=oo[s],g=u.interleaved,g!==null){u.interleaved=null;var _=g.next,E=u.pending;if(E!==null){var S=E.next;E.next=_,g.next=S}u.pending=g}oo=null}return o}function Mg(o,s){do{var u=gt;try{if(Fd(),Tu.current=Cu,Iu){for(var g=st.memoizedState;g!==null;){var _=g.queue;_!==null&&(_.pending=null),g=g.next}Iu=!1}if(ao=0,Nt=St=st=null,Fa=!1,ba=0,gf.current=null,u===null||u.return===null){Ct=1,Ha=s,gt=null;break}e:{var E=o,S=u.return,x=u,L=s;if(s=Ut,x.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var $=L,j=x,ne=j.tag;if((j.mode&1)===0&&(ne===0||ne===11||ne===15)){var Z=j.alternate;Z?(j.updateQueue=Z.updateQueue,j.memoizedState=Z.memoizedState,j.lanes=Z.lanes):(j.updateQueue=null,j.memoizedState=null)}var ue=ig(S);if(ue!==null){ue.flags&=-257,og(ue,S,x,E,s),ue.mode&1&&rg(E,$,s),s=ue,L=$;var he=s.updateQueue;if(he===null){var pe=new Set;pe.add(L),s.updateQueue=pe}else he.add(L);break e}else{if((s&1)===0){rg(E,$,s),Cf();break e}L=Error(t(426))}}else if(it&&x.mode&1){var ht=ig(S);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),og(ht,S,x,E,s),Vd(_s(L,x));break e}}E=L=_s(L,x),Ct!==4&&(Ct=2),za===null?za=[E]:za.push(E),E=S;do{switch(E.tag){case 3:E.flags|=65536,s&=-s,E.lanes|=s;var H=tg(E,L,s);Pm(E,H);break e;case 1:x=L;var U=E.type,z=E.stateNode;if((E.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(pi===null||!pi.has(z)))){E.flags|=65536,s&=-s,E.lanes|=s;var re=ng(E,x,s);Pm(E,re);break e}}E=E.return}while(E!==null)}Ug(u)}catch(ge){s=ge,gt===u&&u!==null&&(gt=u=u.return);continue}break}while(!0)}function Lg(){var o=ku.current;return ku.current=Cu,o===null?Cu:o}function Cf(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),xt===null||(lo&268435455)===0&&(Du&268435455)===0||yi(xt,Ut)}function bu(o,s){var u=Fe;Fe|=2;var g=Lg();(xt!==o||Ut!==s)&&(Lr=null,co(o,s));do try{Z0();break}catch(_){Mg(o,_)}while(!0);if(Fd(),Fe=u,ku.current=g,gt!==null)throw Error(t(261));return xt=null,Ut=0,Ct}function Z0(){for(;gt!==null;)Vg(gt)}function j0(){for(;gt!==null&&!Vl();)Vg(gt)}function Vg(o){var s=Og(o.alternate,o,yn);o.memoizedProps=o.pendingProps,s===null?Ug(o):gt=s,gf.current=null}function Ug(o){var s=o;do{var u=s.alternate;if(o=s.return,(s.flags&32768)===0){if(u=$0(u,s,yn),u!==null){gt=u;return}}else{if(u=W0(u,s),u!==null){u.flags&=32767,gt=u;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Ct=6,gt=null;return}}if(s=s.sibling,s!==null){gt=s;return}gt=s=o}while(s!==null);Ct===0&&(Ct=5)}function fo(o,s,u){var g=De,_=Rn.transition;try{Rn.transition=null,De=1,ew(o,s,u,g)}finally{Rn.transition=_,De=g}return null}function ew(o,s,u,g){do Is();while(mi!==null);if((Fe&6)!==0)throw Error(t(327));u=o.finishedWork;var _=o.finishedLanes;if(u===null)return null;if(o.finishedWork=null,o.finishedLanes=0,u===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var E=u.lanes|u.childLanes;if(Ke(o,E),o===xt&&(gt=xt=null,Ut=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Lu||(Lu=!0,Bg(En,function(){return Is(),null})),E=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||E){E=Rn.transition,Rn.transition=null;var S=De;De=1;var x=Fe;Fe|=4,gf.current=null,J0(o,u),Ag(u,o),E0(Sd),ii=!!wd,Sd=wd=null,o.current=u,Y0(u),ad(),Fe=x,De=S,Rn.transition=E}else o.current=u;if(Lu&&(Lu=!1,mi=o,Vu=_),E=o.pendingLanes,E===0&&(pi=null),bl(u.stateNode),un(o,Qe()),s!==null)for(g=o.onRecoverableError,u=0;u<s.length;u++)_=s[u],g(_.value,{componentStack:_.stack,digest:_.digest});if(Mu)throw Mu=!1,o=vf,vf=null,o;return(Vu&1)!==0&&o.tag!==0&&Is(),E=o.pendingLanes,(E&1)!==0?o===Ef?$a++:($a=0,Ef=o):$a=0,ci(),null}function Is(){if(mi!==null){var o=ni(Vu),s=Rn.transition,u=De;try{if(Rn.transition=null,De=16>o?16:o,mi===null)var g=!1;else{if(o=mi,mi=null,Vu=0,(Fe&6)!==0)throw Error(t(331));var _=Fe;for(Fe|=4,de=o.current;de!==null;){var E=de,S=E.child;if((de.flags&16)!==0){var x=E.deletions;if(x!==null){for(var L=0;L<x.length;L++){var $=x[L];for(de=$;de!==null;){var j=de;switch(j.tag){case 0:case 11:case 15:Ga(8,j,E)}var ne=j.child;if(ne!==null)ne.return=j,de=ne;else for(;de!==null;){j=de;var Z=j.sibling,ue=j.return;if(Tg(j),j===$){de=null;break}if(Z!==null){Z.return=ue,de=Z;break}de=ue}}}var he=E.alternate;if(he!==null){var pe=he.child;if(pe!==null){he.child=null;do{var ht=pe.sibling;pe.sibling=null,pe=ht}while(pe!==null)}}de=E}}if((E.subtreeFlags&2064)!==0&&S!==null)S.return=E,de=S;else e:for(;de!==null;){if(E=de,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Ga(9,E,E.return)}var H=E.sibling;if(H!==null){H.return=E.return,de=H;break e}de=E.return}}var U=o.current;for(de=U;de!==null;){S=de;var z=S.child;if((S.subtreeFlags&2064)!==0&&z!==null)z.return=S,de=z;else e:for(S=U;de!==null;){if(x=de,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:xu(9,x)}}catch(ge){lt(x,x.return,ge)}if(x===S){de=null;break e}var re=x.sibling;if(re!==null){re.return=x.return,de=re;break e}de=x.return}}if(Fe=_,ci(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Ji,o)}catch{}g=!0}return g}finally{De=u,Rn.transition=s}}return!1}function Fg(o,s,u){s=_s(u,s),s=tg(o,s,1),o=fi(o,s,1),s=jt(),o!==null&&(ei(o,1,s),un(o,s))}function lt(o,s,u){if(o.tag===3)Fg(o,o,u);else for(;s!==null;){if(s.tag===3){Fg(s,o,u);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(pi===null||!pi.has(g))){o=_s(u,o),o=ng(s,o,1),s=fi(s,o,1),o=jt(),s!==null&&(ei(s,1,o),un(s,o));break}}s=s.return}}function tw(o,s,u){var g=o.pingCache;g!==null&&g.delete(s),s=jt(),o.pingedLanes|=o.suspendedLanes&u,xt===o&&(Ut&u)===u&&(Ct===4||Ct===3&&(Ut&130023424)===Ut&&500>Qe()-_f?co(o,0):yf|=u),un(o,s)}function bg(o,s){s===0&&((o.mode&1)===0?s=1:(s=$o,$o<<=1,($o&130023424)===0&&($o=4194304)));var u=jt();o=kr(o,s),o!==null&&(ei(o,s,u),un(o,u))}function nw(o){var s=o.memoizedState,u=0;s!==null&&(u=s.retryLane),bg(o,u)}function rw(o,s){var u=0;switch(o.tag){case 13:var g=o.stateNode,_=o.memoizedState;_!==null&&(u=_.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(s),bg(o,u)}var Og;Og=function(o,s,u){if(o!==null)if(o.memoizedProps!==s.pendingProps||on.current)an=!0;else{if((o.lanes&u)===0&&(s.flags&128)===0)return an=!1,z0(o,s,u);an=(o.flags&131072)!==0}else an=!1,it&&(s.flags&1048576)!==0&&_m(s,hu,s.index);switch(s.lanes=0,s.tag){case 2:var g=s.type;Pu(o,s),o=s.pendingProps;var _=cs(s,qt.current);gs(s,u),_=Jd(null,s,g,o,_,u);var E=Yd();return s.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,sn(g)?(E=!0,cu(s)):E=!1,s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,qd(s),_.updater=Au,s.stateNode=_,_._reactInternals=s,tf(s,g,o,u),s=sf(null,s,g,!0,E,u)):(s.tag=0,it&&E&&kd(s),Zt(null,s,_,u),s=s.child),s;case 16:g=s.elementType;e:{switch(Pu(o,s),o=s.pendingProps,_=g._init,g=_(g._payload),s.type=g,_=s.tag=ow(g),o=zn(g,o),_){case 0:s=of(null,s,g,o,u);break e;case 1:s=dg(null,s,g,o,u);break e;case 11:s=sg(null,s,g,o,u);break e;case 14:s=ag(null,s,g,zn(g.type,o),u);break e}throw Error(t(306,g,""))}return s;case 0:return g=s.type,_=s.pendingProps,_=s.elementType===g?_:zn(g,_),of(o,s,g,_,u);case 1:return g=s.type,_=s.pendingProps,_=s.elementType===g?_:zn(g,_),dg(o,s,g,_,u);case 3:e:{if(fg(s),o===null)throw Error(t(387));g=s.pendingProps,E=s.memoizedState,_=E.element,Rm(o,s),vu(s,g,null,u);var S=s.memoizedState;if(g=S.element,E.isDehydrated)if(E={element:g,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=E,s.memoizedState=E,s.flags&256){_=_s(Error(t(423)),s),s=hg(o,s,g,u,_);break e}else if(g!==_){_=_s(Error(t(424)),s),s=hg(o,s,g,u,_);break e}else for(gn=ai(s.stateNode.containerInfo.firstChild),mn=s,it=!0,Hn=null,u=Cm(s,null,g,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(hs(),g===_){s=Mr(o,s,u);break e}Zt(o,s,g,u)}s=s.child}return s;case 5:return xm(s),o===null&&Ld(s),g=s.type,_=s.pendingProps,E=o!==null?o.memoizedProps:null,S=_.children,Cd(g,_)?S=null:E!==null&&Cd(g,E)&&(s.flags|=32),cg(o,s),Zt(o,s,S,u),s.child;case 6:return o===null&&Ld(s),null;case 13:return pg(o,s,u);case 4:return Gd(s,s.stateNode.containerInfo),g=s.pendingProps,o===null?s.child=ps(s,null,g,u):Zt(o,s,g,u),s.child;case 11:return g=s.type,_=s.pendingProps,_=s.elementType===g?_:zn(g,_),sg(o,s,g,_,u);case 7:return Zt(o,s,s.pendingProps,u),s.child;case 8:return Zt(o,s,s.pendingProps.children,u),s.child;case 12:return Zt(o,s,s.pendingProps.children,u),s.child;case 10:e:{if(g=s.type._context,_=s.pendingProps,E=s.memoizedProps,S=_.value,Xe(gu,g._currentValue),g._currentValue=S,E!==null)if(Gn(E.value,S)){if(E.children===_.children&&!on.current){s=Mr(o,s,u);break e}}else for(E=s.child,E!==null&&(E.return=s);E!==null;){var x=E.dependencies;if(x!==null){S=E.child;for(var L=x.firstContext;L!==null;){if(L.context===g){if(E.tag===1){L=Dr(-1,u&-u),L.tag=2;var $=E.updateQueue;if($!==null){$=$.shared;var j=$.pending;j===null?L.next=L:(L.next=j.next,j.next=L),$.pending=L}}E.lanes|=u,L=E.alternate,L!==null&&(L.lanes|=u),Od(E.return,u,s),x.lanes|=u;break}L=L.next}}else if(E.tag===10)S=E.type===s.type?null:E.child;else if(E.tag===18){if(S=E.return,S===null)throw Error(t(341));S.lanes|=u,x=S.alternate,x!==null&&(x.lanes|=u),Od(S,u,s),S=E.sibling}else S=E.child;if(S!==null)S.return=E;else for(S=E;S!==null;){if(S===s){S=null;break}if(E=S.sibling,E!==null){E.return=S.return,S=E;break}S=S.return}E=S}Zt(o,s,_.children,u),s=s.child}return s;case 9:return _=s.type,g=s.pendingProps.children,gs(s,u),_=Cn(_),g=g(_),s.flags|=1,Zt(o,s,g,u),s.child;case 14:return g=s.type,_=zn(g,s.pendingProps),_=zn(g.type,_),ag(o,s,g,_,u);case 15:return lg(o,s,s.type,s.pendingProps,u);case 17:return g=s.type,_=s.pendingProps,_=s.elementType===g?_:zn(g,_),Pu(o,s),s.tag=1,sn(g)?(o=!0,cu(s)):o=!1,gs(s,u),jm(s,g,_),tf(s,g,_,u),sf(null,s,g,!0,o,u);case 19:return gg(o,s,u);case 22:return ug(o,s,u)}throw Error(t(156,s.tag))};function Bg(o,s){return Ho(o,s)}function iw(o,s,u,g){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(o,s,u,g){return new iw(o,s,u,g)}function Af(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ow(o){if(typeof o=="function")return Af(o)?1:0;if(o!=null){if(o=o.$$typeof,o===F)return 11;if(o===Et)return 14}return 2}function _i(o,s){var u=o.alternate;return u===null?(u=Pn(o.tag,s,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=s,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&14680064,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,s=o.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u}function Ou(o,s,u,g,_,E){var S=2;if(g=o,typeof o=="function")Af(o)&&(S=1);else if(typeof o=="string")S=5;else e:switch(o){case M:return ho(u.children,_,E,s);case P:S=8,_|=8;break;case R:return o=Pn(12,u,s,_|2),o.elementType=R,o.lanes=E,o;case D:return o=Pn(13,u,s,_),o.elementType=D,o.lanes=E,o;case nt:return o=Pn(19,u,s,_),o.elementType=nt,o.lanes=E,o;case be:return Bu(u,_,E,s);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case k:S=10;break e;case V:S=9;break e;case F:S=11;break e;case Et:S=14;break e;case Je:S=16,g=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return s=Pn(S,u,s,_),s.elementType=o,s.type=g,s.lanes=E,s}function ho(o,s,u,g){return o=Pn(7,o,g,s),o.lanes=u,o}function Bu(o,s,u,g){return o=Pn(22,o,g,s),o.elementType=be,o.lanes=u,o.stateNode={isHidden:!1},o}function Rf(o,s,u){return o=Pn(6,o,null,s),o.lanes=u,o}function Pf(o,s,u){return s=Pn(4,o.children!==null?o.children:[],o.key,s),s.lanes=u,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}function sw(o,s,u,g,_){this.tag=s,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jr(0),this.expirationTimes=jr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.identifierPrefix=g,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Nf(o,s,u,g,_,E,S,x,L){return o=new sw(o,s,u,x,L),s===1?(s=1,E===!0&&(s|=8)):s=0,E=Pn(3,null,null,s),o.current=E,E.stateNode=o,E.memoizedState={element:g,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},qd(E),o}function aw(o,s,u){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oe,key:g==null?null:""+g,children:o,containerInfo:s,implementation:u}}function qg(o){if(!o)return ui;o=o._reactInternals;e:{if(Vn(o)!==o||o.tag!==1)throw Error(t(170));var s=o;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(sn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(o.tag===1){var u=o.type;if(sn(u))return mm(o,u,s)}return s}function Gg(o,s,u,g,_,E,S,x,L){return o=Nf(u,g,!0,o,_,E,S,x,L),o.context=qg(null),u=o.current,g=jt(),_=gi(u),E=Dr(g,_),E.callback=s??null,fi(u,E,_),o.current.lanes=_,ei(o,_,g),un(o,g),o}function qu(o,s,u,g){var _=s.current,E=jt(),S=gi(_);return u=qg(u),s.context===null?s.context=u:s.pendingContext=u,s=Dr(E,S),s.payload={element:o},g=g===void 0?null:g,g!==null&&(s.callback=g),o=fi(_,s,S),o!==null&&(Kn(o,_,S,E),_u(o,_,S)),S}function Gu(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Hg(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<s?u:s}}function xf(o,s){Hg(o,s),(o=o.alternate)&&Hg(o,s)}function lw(){return null}var zg=typeof reportError=="function"?reportError:function(o){console.error(o)};function kf(o){this._internalRoot=o}Hu.prototype.render=kf.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(t(409));qu(o,s,null,null)},Hu.prototype.unmount=kf.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;uo(function(){qu(null,o,null,null)}),s[Rr]=null}};function Hu(o){this._internalRoot=o}Hu.prototype.unstable_scheduleHydration=function(o){if(o){var s=Hl();o={blockedOn:null,target:o,priority:s};for(var u=0;u<rr.length&&s!==0&&s<rr[u].priority;u++);rr.splice(u,0,o),u===0&&Wl(o)}};function Df(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function zu(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function $g(){}function uw(o,s,u,g,_){if(_){if(typeof g=="function"){var E=g;g=function(){var $=Gu(S);E.call($)}}var S=Gg(s,g,o,0,null,!1,!1,"",$g);return o._reactRootContainer=S,o[Rr]=S.current,Na(o.nodeType===8?o.parentNode:o),uo(),S}for(;_=o.lastChild;)o.removeChild(_);if(typeof g=="function"){var x=g;g=function(){var $=Gu(L);x.call($)}}var L=Nf(o,0,!1,null,null,!1,!1,"",$g);return o._reactRootContainer=L,o[Rr]=L.current,Na(o.nodeType===8?o.parentNode:o),uo(function(){qu(s,L,u,g)}),L}function $u(o,s,u,g,_){var E=u._reactRootContainer;if(E){var S=E;if(typeof _=="function"){var x=_;_=function(){var L=Gu(S);x.call(L)}}qu(s,S,o,_)}else S=uw(u,s,o,_,g);return Gu(S)}ql=function(o){switch(o.tag){case 3:var s=o.stateNode;if(s.current.memoizedState.isDehydrated){var u=Zr(s.pendingLanes);u!==0&&(ti(s,u|1),un(s,Qe()),(Fe&6)===0&&(Ts=Qe()+500,ci()))}break;case 13:uo(function(){var g=kr(o,1);if(g!==null){var _=jt();Kn(g,o,1,_)}}),xf(o,1)}},Wo=function(o){if(o.tag===13){var s=kr(o,134217728);if(s!==null){var u=jt();Kn(s,o,134217728,u)}xf(o,134217728)}},Gl=function(o){if(o.tag===13){var s=gi(o),u=kr(o,s);if(u!==null){var g=jt();Kn(u,o,s,g)}xf(o,s)}},Hl=function(){return De},zl=function(o,s){var u=De;try{return De=o,s()}finally{De=u}},Fo=function(o,s,u){switch(s){case"input":if(ea(o,u),s=u.name,u.type==="radio"&&s!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<u.length;s++){var g=u[s];if(g!==o&&g.form===o.form){var _=lu(g);if(!_)throw Error(t(90));ko(g),ea(g,_)}}}break;case"textarea":Vo(o,u);break;case"select":s=u.value,s!=null&&vr(o,!!u.multiple,s,!1)}},Hi=wf,ca=uo;var cw={usingClientEntryPoint:!1,Events:[Da,ls,lu,tr,ua,wf]},Wa={findFiberByHostInstance:to,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dw={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ha(o),o===null?null:o.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance||lw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{Ji=Wu.inject(dw),dn=Wu}catch{}}return cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cw,cn.createPortal=function(o,s){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Df(s))throw Error(t(200));return aw(o,s,null,u)},cn.createRoot=function(o,s){if(!Df(o))throw Error(t(299));var u=!1,g="",_=zg;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=Nf(o,1,!1,null,null,u,!1,g,_),o[Rr]=s.current,Na(o.nodeType===8?o.parentNode:o),new kf(s)},cn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=ha(s),o=o===null?null:o.stateNode,o},cn.flushSync=function(o){return uo(o)},cn.hydrate=function(o,s,u){if(!zu(s))throw Error(t(200));return $u(null,o,s,!0,u)},cn.hydrateRoot=function(o,s,u){if(!Df(o))throw Error(t(405));var g=u!=null&&u.hydratedSources||null,_=!1,E="",S=zg;if(u!=null&&(u.unstable_strictMode===!0&&(_=!0),u.identifierPrefix!==void 0&&(E=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),s=Gg(s,null,o,1,u??null,_,!1,E,S),o[Rr]=s.current,Na(o),g)for(o=0;o<g.length;o++)u=g[o],_=u._getVersion,_=_(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,_]:s.mutableSourceEagerHydrationData.push(u,_);return new Hu(s)},cn.render=function(o,s,u){if(!zu(s))throw Error(t(200));return $u(null,o,s,!1,u)},cn.unmountComponentAtNode=function(o){if(!zu(o))throw Error(t(40));return o._reactRootContainer?(uo(function(){$u(null,null,o,!1,function(){o._reactRootContainer=null,o[Rr]=null})}),!0):!1},cn.unstable_batchedUpdates=wf,cn.unstable_renderSubtreeIntoContainer=function(o,s,u,g){if(!zu(u))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return $u(o,s,u,!1,g)},cn.version="18.3.1-next-f1338f8080-20240426",cn}var jg;function Ew(){if(jg)return Vf.exports;jg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vf.exports=vw(),Vf.exports}var ey;function Tw(){if(ey)return Ku;ey=1;var n=Ew();return Ku.createRoot=n.createRoot,Ku.hydrateRoot=n.hydrateRoot,Ku}var Iw=Tw();const ww=Xv(Iw),Sw="modulepreload",Cw=function(n){return"/"+n},ty={},Vi=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=l(t.map(m=>{if(m=Cw(m),m in ty)return;ty[m]=!0;const y=m.endsWith(".css"),T=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${T}`))return;const I=document.createElement("link");if(I.rel=y?"stylesheet":Sw,y||(I.as="script"),I.crossOrigin="",I.href=m,p&&I.setAttribute("nonce",p),document.head.appendChild(I),y)return new Promise((A,b)=>{I.addEventListener("load",A),I.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},Aw={"Fantasy & Magic":["Space Explorer","Dragon Rider","Fairy Princess","Wizard Apprentice","Mermaid/Merman","Unicorn Keeper","Forest Elf","Royal Knight","Cloud Walker","Time Traveler"],Professions:["Astronaut","Doctor","Firefighter","Pilot","Chef","Scientist","Veterinarian","Detective","Construction Builder","Teacher","Artist","Musician","F1 Driver"],"Sports & Action":["Cricket Captain","Football Star","Gymnast","Ninja Warrior","Super Hero","Archer","Scuba Diver","Mountain Climber","Skateboarder","Karate Master"],"History & Culture":["Maharaja/Maharani","Viking Warrior","Egyptian Pharaoh","Samurai","Cowboy/Cowgirl","Pirate Captain","Greek God/Goddess","Explorer"],"Nature & Animals":["Jungle King/Queen","Dinosaur Tamer","Wolf Pack Leader","Eagle Flyer","Ocean Guardian","Safari Ranger","Butterfly Whisperer"]};var Xa=(n=>(n.SQUARE="Square (1:1)",n.A4_PORTRAIT="A4 Portrait",n.A4_LANDSCAPE="A4 Landscape",n.MOBILE_STORY="Mobile Story (9:16)",n))(Xa||{}),Re=(n=>(n[n.LANDING=0]="LANDING",n[n.LOGIN=1]="LOGIN",n[n.SIGNUP=2]="SIGNUP",n[n.DASHBOARD=3]="DASHBOARD",n[n.CONFIG=4]="CONFIG",n[n.STORY_VIEW=5]="STORY_VIEW",n[n.PHOTOSHOOT_GALLERY=6]="PHOTOSHOOT_GALLERY",n[n.PRICING=7]="PRICING",n[n.INFO_PAGE=8]="INFO_PAGE",n))(Re||{});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zv=(...n)=>n.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=We.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...d},p)=>We.createElement("svg",{ref:p,...Pw,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Zv("lucide",i),...d},[...l.map(([m,y])=>We.createElement(m,y)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=(n,e)=>{const t=We.forwardRef(({className:r,...i},a)=>We.createElement(Nw,{ref:a,iconNode:e,className:Zv(`lucide-${Rw(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=ct("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=ct("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=ct("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=ct("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=ct("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=ct("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=ct("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=ct("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=ct("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=ct("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=ct("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=ct("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=ct("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=ct("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=ct("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=ct("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=ct("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=ct("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=ct("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=ct("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=ct("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=ct("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var ay={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Kw=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],l=n[t++],d=n[t++],p=((i&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},eE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],l=i+1<n.length,d=l?n[i+1]:0,p=i+2<n.length,m=p?n[i+2]:0,y=a>>2,T=(a&3)<<4|d>>4;let I=(d&15)<<2|m>>6,A=m&63;p||(A=64,l||(I=64)),r.push(t[y],t[T],t[I],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(jv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Kw(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const m=i<n.length?t[n.charAt(i)]:64;++i;const T=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||d==null||m==null||T==null)throw new Jw;const I=a<<2|d>>4;if(r.push(I),m!==64){const A=d<<4&240|m>>2;if(r.push(A),T!==64){const b=m<<6&192|T;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Jw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yw=function(n){const e=jv(n);return eE.encodeByteArray(e,!0)},hc=function(n){return Yw(n).replace(/\./g,"")},tE=function(n){try{return eE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=()=>Qw().__FIREBASE_DEFAULTS__,Zw=()=>{if(typeof process>"u"||typeof ay>"u")return;const n=ay.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jw=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&tE(n[1]);return e&&JSON.parse(e)},Uc=()=>{try{return Xw()||Zw()||jw()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},nE=n=>{var e,t;return(t=(e=Uc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},rE=n=>{const e=nE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},iE=()=>{var n;return(n=Uc())===null||n===void 0?void 0:n.config},oE=n=>{var e;return(e=Uc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[hc(JSON.stringify(t)),hc(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function nS(){var n;const e=(n=Uc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function oS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sS(){const n=Yt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function aS(){return!nS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lS(){try{return typeof indexedDB=="object"}catch{return!1}}function uS(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="FirebaseError";class gr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=cS,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vl.prototype.create)}}class vl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?dS(a,r):"Error",d=`${this.serviceName}: ${l} (${i}).`;return new gr(i,d,r)}}function dS(n,e){return n.replace(fS,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const fS=/\{\$([^}]+)}/g;function hS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function pc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],l=e[i];if(ly(a)&&ly(l)){if(!pc(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function ly(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Za(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function ja(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function pS(n,e){const t=new mS(n,e);return t.subscribe.bind(t)}class mS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");gS(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=bf),i.error===void 0&&(i.error=bf),i.complete===void 0&&(i.complete=bf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function bf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(n){return n&&n._delegate?n._delegate:n}class xi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new eS;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vS(e))try{this.getOrInitializeService({instanceIdentifier:po})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=po){return this.instances.has(e)}getOptions(e=po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&l.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_S(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=po){return this.component?this.component.multipleInstances?e:po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _S(n){return n===po?void 0:n}function vS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const TS={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},IS=Me.INFO,wS={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},SS=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=wS[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lh{constructor(e){this.name=e,this._logLevel=IS,this._logHandler=SS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const CS=(n,e)=>e.some(t=>n instanceof t);let uy,cy;function AS(){return uy||(uy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RS(){return cy||(cy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aE=new WeakMap,Xf=new WeakMap,lE=new WeakMap,Of=new WeakMap,Vh=new WeakMap;function PS(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Ai(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&aE.set(t,n)}).catch(()=>{}),Vh.set(e,n),e}function NS(n){if(Xf.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Xf.set(n,e)}let Zf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Xf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||lE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ai(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xS(n){Zf=n(Zf)}function kS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Bf(this),e,...t);return lE.set(r,e.sort?e.sort():[e]),Ai(r)}:RS().includes(n)?function(...e){return n.apply(Bf(this),e),Ai(aE.get(this))}:function(...e){return Ai(n.apply(Bf(this),e))}}function DS(n){return typeof n=="function"?kS(n):(n instanceof IDBTransaction&&NS(n),CS(n,AS())?new Proxy(n,Zf):n)}function Ai(n){if(n instanceof IDBRequest)return PS(n);if(Of.has(n))return Of.get(n);const e=DS(n);return e!==n&&(Of.set(n,e),Vh.set(e,n)),e}const Bf=n=>Vh.get(n);function MS(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),d=Ai(l);return r&&l.addEventListener("upgradeneeded",p=>{r(Ai(l.result),p.oldVersion,p.newVersion,Ai(l.transaction),p)}),t&&l.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),i&&p.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const LS=["get","getKey","getAll","getAllKeys","count"],VS=["put","add","delete","clear"],qf=new Map;function dy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qf.get(e))return qf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=VS.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||LS.includes(t)))return;const a=async function(l,...d){const p=this.transaction(l,i?"readwrite":"readonly");let m=p.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),i&&p.done]))[0]};return qf.set(e,a),a}xS(n=>({...n,get:(e,t,r)=>dy(e,t)||n.get(e,t,r),has:(e,t)=>!!dy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(FS(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function FS(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jf="@firebase/app",fy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new Lh("@firebase/app"),bS="@firebase/app-compat",OS="@firebase/analytics-compat",BS="@firebase/analytics",qS="@firebase/app-check-compat",GS="@firebase/app-check",HS="@firebase/auth",zS="@firebase/auth-compat",$S="@firebase/database",WS="@firebase/data-connect",KS="@firebase/database-compat",JS="@firebase/functions",YS="@firebase/functions-compat",QS="@firebase/installations",XS="@firebase/installations-compat",ZS="@firebase/messaging",jS="@firebase/messaging-compat",eC="@firebase/performance",tC="@firebase/performance-compat",nC="@firebase/remote-config",rC="@firebase/remote-config-compat",iC="@firebase/storage",oC="@firebase/storage-compat",sC="@firebase/firestore",aC="@firebase/vertexai-preview",lC="@firebase/firestore-compat",uC="firebase",cC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh="[DEFAULT]",dC={[jf]:"fire-core",[bS]:"fire-core-compat",[BS]:"fire-analytics",[OS]:"fire-analytics-compat",[GS]:"fire-app-check",[qS]:"fire-app-check-compat",[HS]:"fire-auth",[zS]:"fire-auth-compat",[$S]:"fire-rtdb",[WS]:"fire-data-connect",[KS]:"fire-rtdb-compat",[JS]:"fire-fn",[YS]:"fire-fn-compat",[QS]:"fire-iid",[XS]:"fire-iid-compat",[ZS]:"fire-fcm",[jS]:"fire-fcm-compat",[eC]:"fire-perf",[tC]:"fire-perf-compat",[nC]:"fire-rc",[rC]:"fire-rc-compat",[iC]:"fire-gcs",[oC]:"fire-gcs-compat",[sC]:"fire-fst",[lC]:"fire-fst-compat",[aC]:"fire-vertex","fire-js":"fire-js",[uC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Map,fC=new Map,th=new Map;function hy(n,e){try{n.container.addComponent(e)}catch(t){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vo(n){const e=n.name;if(th.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;th.set(e,n);for(const t of mc.values())hy(t,n);for(const t of fC.values())hy(t,n);return!0}function Fc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Jn(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ri=new vl("app","Firebase",hC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=cC;function uE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:eh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ri.create("bad-app-name",{appName:String(i)});if(t||(t=iE()),!t)throw Ri.create("no-options");const a=mc.get(i);if(a){if(pc(t,a.options)&&pc(r,a.config))return a;throw Ri.create("duplicate-app",{appName:i})}const l=new ES(i);for(const p of th.values())l.addComponent(p);const d=new pC(t,r,l);return mc.set(i,d),d}function Uh(n=eh){const e=mc.get(n);if(!e&&n===eh&&iE())return uE();if(!e)throw Ri.create("no-app",{appName:n});return e}function dr(n,e,t){var r;let i=(r=dC[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${i}" with version "${e}":`];a&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(d.join(" "));return}vo(new xi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="firebase-heartbeat-database",gC=1,cl="firebase-heartbeat-store";let Gf=null;function cE(){return Gf||(Gf=MS(mC,gC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ri.create("idb-open",{originalErrorMessage:n.message})})),Gf}async function yC(n){try{const t=(await cE()).transaction(cl),r=await t.objectStore(cl).get(dE(n));return await t.done,r}catch(e){if(e instanceof gr)qr.warn(e.message);else{const t=Ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qr.warn(t.message)}}}async function py(n,e){try{const r=(await cE()).transaction(cl,"readwrite");await r.objectStore(cl).put(e,dE(n)),await r.done}catch(t){if(t instanceof gr)qr.warn(t.message);else{const r=Ri.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});qr.warn(r.message)}}}function dE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=1024,vC=720*60*60*1e3;class EC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new IC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=my();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const d=new Date(l.date).valueOf();return Date.now()-d<=vC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=my(),{heartbeatsToSend:r,unsentEntries:i}=TC(this._heartbeatsCache.heartbeats),a=hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return qr.warn(t),""}}}function my(){return new Date().toISOString().substring(0,10)}function TC(n,e=_C){const t=[];let r=n.slice();for(const i of n){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),gy(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),gy(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class IC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lS()?uS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return py(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return py(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function gy(n){return hc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(n){vo(new xi("platform-logger",e=>new US(e),"PRIVATE")),vo(new xi("heartbeat",e=>new EC(e),"PRIVATE")),dr(jf,fy,n),dr(jf,fy,"esm2017"),dr("fire-js","")}wC("");function Fh(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function fE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SC=fE,hE=new vl("auth","Firebase",fE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=new Lh("@firebase/auth");function CC(n,...e){gc.logLevel<=Me.WARN&&gc.warn(`Auth (${Ao}): ${n}`,...e)}function nc(n,...e){gc.logLevel<=Me.ERROR&&gc.error(`Auth (${Ao}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(n,...e){throw Oh(n,...e)}function Xn(n,...e){return Oh(n,...e)}function bh(n,e,t){const r=Object.assign(Object.assign({},SC()),{[e]:t});return new vl("auth","Firebase",r).create(e,{appName:n.name})}function Or(n){return bh(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function AC(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dn(n,"argument-error"),bh(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Oh(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return hE.create(n,...e)}function Ie(n,e,...t){if(!n)throw Oh(e,...t)}function Ur(n){const e="INTERNAL ASSERTION FAILED: "+n;throw nc(e),new Error(e)}function Gr(n,e){n||Ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function RC(){return yy()==="http:"||yy()==="https:"}function yy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RC()||iS()||"connection"in navigator)?navigator.onLine:!0}function NC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gr(t>e,"Short delay should be less than long delay!"),this.isMobile=tS()||oS()}get(){return PC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(n,e){Gr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new Tl(3e4,6e4);function Ui(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Wr(n,e,t,r,i={}){return mE(n,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const d=El(Object.assign({key:n.config.apiKey},l)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},a);return rS()||(m.referrerPolicy="no-referrer"),pE.fetch()(gE(n,n.config.apiHost,t,d),m)})}async function mE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},xC),e);try{const i=new MC(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Ju(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ju(n,"credential-already-in-use",l);if(p==="EMAIL_EXISTS")throw Ju(n,"email-already-in-use",l);if(p==="USER_DISABLED")throw Ju(n,"user-disabled",l);const y=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw bh(n,y,m);Dn(n,y)}}catch(i){if(i instanceof gr)throw i;Dn(n,"network-request-failed",{message:String(i)})}}async function Il(n,e,t,r,i={}){const a=await Wr(n,e,t,r,i);return"mfaPendingCredential"in a&&Dn(n,"multi-factor-auth-required",{_serverResponse:a}),a}function gE(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Bh(n.config,i):`${n.config.apiScheme}://${i}`}function DC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class MC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Xn(this.auth,"network-request-failed")),kC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ju(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Xn(n,e,r);return i.customData._tokenResponse=t,i}function _y(n){return n!==void 0&&n.enterprise!==void 0}class LC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return DC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function VC(n,e){return Wr(n,"GET","/v2/recaptchaConfig",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(n,e){return Wr(n,"POST","/v1/accounts:delete",e)}async function yE(n,e){return Wr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FC(n,e=!1){const t=vt(n),r=await t.getIdToken(e),i=qh(r);Ie(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:rl(Hf(i.auth_time)),issuedAtTime:rl(Hf(i.iat)),expirationTime:rl(Hf(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Hf(n){return Number(n)*1e3}function qh(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return nc("JWT malformed, contained fewer than 3 sections"),null;try{const i=tE(t);return i?JSON.parse(i):(nc("Failed to decode base64 JWT payload"),null)}catch(i){return nc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function vy(n){const e=qh(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Us(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof gr&&bC(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function bC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rl(this.lastLoginAt),this.creationTime=rl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Us(n,yE(t,{idToken:r}));Ie(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?_E(a.providerUserInfo):[],d=qC(n.providerData,l),p=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),y=p?m:!1,T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new rh(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(n,T)}async function BC(n){const e=vt(n);await yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qC(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function _E(n){return n.map(e=>{var{providerId:t}=e,r=Fh(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(n,e){const t=await mE(n,{},async()=>{const r=El({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,l=gE(n,i,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",pE.fetch()(l,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function HC(n,e){return Wr(n,"POST","/v2/accounts:revokeToken",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=vy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await GC(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,l=new Ns;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Ie(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ns,this.toJSON())}_performRefresh(){return Ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Fr{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=Fh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new rh(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Us(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return FC(this,e)}reload(){return BC(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await yc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(Or(this.auth));const e=await this.getIdToken();return await Us(this,UC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,l,d,p,m,y;const T=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(i=t.email)!==null&&i!==void 0?i:void 0,A=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,b=(l=t.photoURL)!==null&&l!==void 0?l:void 0,B=(d=t.tenantId)!==null&&d!==void 0?d:void 0,O=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,Q=(m=t.createdAt)!==null&&m!==void 0?m:void 0,X=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:K,emailVerified:ee,isAnonymous:le,providerData:oe,stsTokenManager:M}=t;Ie(K&&M,e,"internal-error");const P=Ns.fromJSON(this.name,M);Ie(typeof K=="string",e,"internal-error"),Ei(T,e.name),Ei(I,e.name),Ie(typeof ee=="boolean",e,"internal-error"),Ie(typeof le=="boolean",e,"internal-error"),Ei(A,e.name),Ei(b,e.name),Ei(B,e.name),Ei(O,e.name),Ei(Q,e.name),Ei(X,e.name);const R=new Fr({uid:K,auth:e,email:I,emailVerified:ee,displayName:T,isAnonymous:le,photoURL:b,phoneNumber:A,tenantId:B,stsTokenManager:P,createdAt:Q,lastLoginAt:X});return oe&&Array.isArray(oe)&&(R.providerData=oe.map(k=>Object.assign({},k))),O&&(R._redirectEventId=O),R}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ns;i.updateFromServerResponse(t);const a=new Fr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await yc(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ie(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?_E(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),d=new Ns;d.updateFromIdToken(r);const p=new Fr({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:l}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new rh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=new Map;function br(n){Gr(n instanceof Function,"Expected a class definition");let e=Ey.get(n);return e?(Gr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ey.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vE.type="NONE";const Ty=vE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(n,e,t){return`firebase:${n}:${e}:${t}`}class xs{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=rc(this.userKey,i.apiKey,a),this.fullPersistenceKey=rc("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new xs(br(Ty),e,r);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||br(Ty);const l=rc(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const y=await m._get(l);if(y){const T=Fr._fromJSON(e,y);m!==a&&(d=T),a=m;break}}catch{}const p=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new xs(a,e,r):(a=p[0],d&&await a._set(l,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new xs(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CE(e))return"Blackberry";if(AE(e))return"Webos";if(TE(e))return"Safari";if((e.includes("chrome/")||IE(e))&&!e.includes("edge/"))return"Chrome";if(SE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EE(n=Yt()){return/firefox\//i.test(n)}function TE(n=Yt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IE(n=Yt()){return/crios\//i.test(n)}function wE(n=Yt()){return/iemobile/i.test(n)}function SE(n=Yt()){return/android/i.test(n)}function CE(n=Yt()){return/blackberry/i.test(n)}function AE(n=Yt()){return/webos/i.test(n)}function Gh(n=Yt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zC(n=Yt()){var e;return Gh(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $C(){return sS()&&document.documentMode===10}function RE(n=Yt()){return Gh(n)||SE(n)||AE(n)||CE(n)||/windows phone/i.test(n)||wE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(n,e=[]){let t;switch(n){case"Browser":t=Iy(Yt());break;case"Worker":t=`${Iy(Yt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,d)=>{try{const p=e(a);l(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC(n,e={}){return Wr(n,"GET","/v2/passwordPolicy",Ui(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=6;class YC{constructor(e){var t,r,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:JC,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,l,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(i=p.containsLowercaseLetter)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(l=p.containsNumericCharacter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wy(this),this.idTokenSubscription=new wy(this),this.beforeStateQueue=new WC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=br(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await xs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yE(this,{idToken:e}),r=await Fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!l||l===d)&&(p!=null&&p.user)&&(i=p.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(Or(this));const t=e?vt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(Or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(Or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KC(this),t=new YC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await HC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&br(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await xs.create(this,[br(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,i);return()=>{l=!0,p()}}else{const p=e.addObserver(t);return()=>{l=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&CC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Fi(n){return vt(n)}class wy{constructor(e){this.auth=e,this.observer=null,this.addObserver=pS(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XC(n){bc=n}function NE(n){return bc.loadJS(n)}function ZC(){return bc.recaptchaEnterpriseScript}function jC(){return bc.gapiScript}function eA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const tA="recaptcha-enterprise",nA="NO_RECAPTCHA";class rA{constructor(e){this.type=tA,this.auth=Fi(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,d)=>{VC(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new LC(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,l(m.siteKey)}}).catch(p=>{d(p)})})}function i(a,l,d){const p=window.grecaptcha;_y(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{l(m)}).catch(()=>{l(nA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{r(this.auth).then(d=>{if(!t&&_y(window.grecaptcha))i(d,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let p=ZC();p.length!==0&&(p+=d),NE(p).then(()=>{i(d,a,l)}).catch(m=>{l(m)})}}).catch(d=>{l(d)})})}}async function Sy(n,e,t,r=!1){const i=new rA(n);let a;try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ih(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Sy(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Sy(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(n,e){const t=Fc(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(pc(a,e??{}))return i;Dn(i,"already-initialized")}return t.initialize({options:e})}function oA(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(br);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sA(n,e,t){const r=Fi(n);Ie(r._canInitEmulator,r,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=xE(e),{host:l,port:d}=aA(e),p=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${l}${p}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),lA()}function xE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aA(n){const e=xE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Cy(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:Cy(l)}}}function Cy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function lA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,t){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}async function uA(n,e){return Wr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(n,e){return Il(n,"POST","/v1/accounts:signInWithPassword",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(n,e){return Il(n,"POST","/v1/accounts:signInWithEmailLink",Ui(n,e))}async function fA(n,e){return Il(n,"POST","/v1/accounts:signInWithEmailLink",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends Hh{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new dl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new dl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ih(e,t,"signInWithPassword",cA);case"emailLink":return dA(e,{email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ih(e,r,"signUpPassword",uA);case"emailLink":return fA(e,{idToken:t,email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ks(n,e){return Il(n,"POST","/v1/accounts:signInWithIdp",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="http://localhost";class Eo extends Hh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=Fh(t,["providerId","signInMethod"]);if(!r||!i)return null;const l=new Eo(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return ks(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ks(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ks(e,t)}buildRequest(){const e={requestUri:hA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=El(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mA(n){const e=Za(ja(n)).link,t=e?Za(ja(e)).deep_link_id:null,r=Za(ja(n)).deep_link_id;return(r?Za(ja(r)).link:null)||r||t||e||n}class zh{constructor(e){var t,r,i,a,l,d;const p=Za(ja(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,y=(r=p.oobCode)!==null&&r!==void 0?r:null,T=pA((i=p.mode)!==null&&i!==void 0?i:null);Ie(m&&y&&T,"argument-error"),this.apiKey=m,this.operation=T,this.code=y,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=p.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=mA(e);try{return new zh(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.providerId=zs.PROVIDER_ID}static credential(e,t){return dl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=zh.parseLink(t);return Ie(r,"argument-error"),dl._fromEmailAndCode(e,r.code,r.tenantId)}}zs.PROVIDER_ID="password";zs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends $h{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends wl{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ti.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eo._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Vr.credential(t,r)}catch{return null}}}Vr.GOOGLE_SIGN_IN_METHOD="google.com";Vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends wl{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends wl{constructor(){super("twitter.com")}static credential(e,t){return Eo._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return wi.credential(t,r)}catch{return null}}}wi.TWITTER_SIGN_IN_METHOD="twitter.com";wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(n,e){return Il(n,"POST","/v1/accounts:signUp",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Fr._fromIdTokenResponse(e,r,i),l=Ay(r);return new To({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Ay(r);return new To({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Ay(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends gr{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_c.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new _c(e,t,r,i)}}function kE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?_c._fromErrorAndOperation(n,a,e,r):a})}async function yA(n,e,t=!1){const r=await Us(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return To._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A(n,e,t=!1){const{auth:r}=n;if(Jn(r.app))return Promise.reject(Or(r));const i="reauthenticate";try{const a=await Us(n,kE(r,i,e,n),t);Ie(a.idToken,r,"internal-error");const l=qh(a.idToken);Ie(l,r,"internal-error");const{sub:d}=l;return Ie(n.uid===d,r,"user-mismatch"),To._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Dn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DE(n,e,t=!1){if(Jn(n.app))return Promise.reject(Or(n));const r="signIn",i=await kE(n,r,e),a=await To._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function vA(n,e){return DE(Fi(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ME(n){const e=Fi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EA(n,e,t){if(Jn(n.app))return Promise.reject(Or(n));const r=Fi(n),l=await ih(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gA).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&ME(n),p}),d=await To._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(d.user),d}function TA(n,e,t){return Jn(n.app)?Promise.reject(Or(n)):vA(vt(n),zs.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ME(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(n,e){return Wr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=vt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Us(r,IA(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const d=r.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function SA(n,e,t,r){return vt(n).onIdTokenChanged(e,t,r)}function CA(n,e,t){return vt(n).beforeAuthStateChanged(e,t)}function AA(n,e,t,r){return vt(n).onAuthStateChanged(e,t,r)}function RA(n){return vt(n).signOut()}const vc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vc,"1"),this.storage.removeItem(vc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=1e3,NA=10;class VE extends LE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,d,p)=>{this.notifyListeners(l,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);$C()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,NA):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},PA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}VE.type="LOCAL";const xA=VE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends LE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}UE.type="SESSION";const FE=UE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Oc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(l).map(async m=>m(t.origin,a)),p=await kA(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((d,p)=>{const m=Wh("",20);i.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(T){const I=T;if(I.data.eventId===m)switch(I.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(I.data.response);break;default:clearTimeout(y),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(){return window}function MA(n){fr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(){return typeof fr().WorkerGlobalScope<"u"&&typeof fr().importScripts=="function"}async function LA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VA(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function UA(){return bE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="firebaseLocalStorageDb",FA=1,Ec="firebaseLocalStorage",BE="fbase_key";class Sl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bc(n,e){return n.transaction([Ec],e?"readwrite":"readonly").objectStore(Ec)}function bA(){const n=indexedDB.deleteDatabase(OE);return new Sl(n).toPromise()}function oh(){const n=indexedDB.open(OE,FA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ec,{keyPath:BE})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ec)?e(r):(r.close(),await bA(),e(await oh()))})})}async function Ry(n,e,t){const r=Bc(n,!0).put({[BE]:e,value:t});return new Sl(r).toPromise()}async function OA(n,e){const t=Bc(n,!1).get(e),r=await new Sl(t).toPromise();return r===void 0?null:r.value}function Py(n,e){const t=Bc(n,!0).delete(e);return new Sl(t).toPromise()}const BA=800,qA=3;class qE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>qA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oc._getInstance(UA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await LA(),!this.activeServiceWorker)return;this.sender=new DA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await oh();return await Ry(e,vc,"1"),await Py(e,vc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ry(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>OA(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Py(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Bc(i,!1).getAll();return new Sl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qE.type="LOCAL";const GA=qE;new Tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(n,e){return e?br(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends Hh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ks(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ks(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ks(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function HA(n){return DE(n.auth,new Kh(n),n.bypassAuthState)}function zA(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),_A(t,new Kh(n),n.bypassAuthState)}async function $A(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),yA(t,new Kh(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HA;case"linkViaPopup":case"linkViaRedirect":return $A;case"reauthViaPopup":case"reauthViaRedirect":return zA;default:Dn(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=new Tl(2e3,1e4);async function KA(n,e,t){if(Jn(n.app))return Promise.reject(Xn(n,"operation-not-supported-in-this-environment"));const r=Fi(n);AC(n,e,$h);const i=GE(r,t);return new mo(r,"signInViaPopup",e,i).executeNotNull()}class mo extends HE{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,mo.currentPopupAction&&mo.currentPopupAction.cancel(),mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Gr(this.filter.length===1,"Popup operations only handle one event");const e=Wh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WA.get())};e()}}mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="pendingRedirect",ic=new Map;class YA extends HE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ic.get(this.auth._key());if(!e){try{const r=await QA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ic.set(this.auth._key(),e)}return this.bypassAuthState||ic.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QA(n,e){const t=jA(e),r=ZA(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function XA(n,e){ic.set(n._key(),e)}function ZA(n){return br(n._redirectPersistence)}function jA(n){return rc(JA,n.config.apiKey,n.name)}async function eR(n,e,t=!1){if(Jn(n.app))return Promise.reject(Or(n));const r=Fi(n),i=GE(r,e),l=await new YA(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=600*1e3;class nR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!zE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Xn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ny(e))}saveEventToCache(e){this.cachedEventUids.add(Ny(e)),this.lastProcessedEventTime=Date.now()}}function Ny(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function zE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(n,e={}){return Wr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sR=/^https?/;async function aR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await iR(n);for(const t of e)try{if(lR(t))return}catch{}Dn(n,"unauthorized-domain")}function lR(n){const e=nh(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!sR.test(t))return!1;if(oR.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new Tl(3e4,6e4);function xy(){const n=fr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cR(n){return new Promise((e,t)=>{var r,i,a;function l(){xy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xy(),t(Xn(n,"network-request-failed"))},timeout:uR.get()})}if(!((i=(r=fr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=fr().gapi)===null||a===void 0)&&a.load)l();else{const d=eA("iframefcb");return fr()[d]=()=>{gapi.load?l():t(Xn(n,"network-request-failed"))},NE(`${jC()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw oc=null,e})}let oc=null;function dR(n){return oc=oc||cR(n),oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new Tl(5e3,15e3),hR="__/auth/iframe",pR="emulator/auth/iframe",mR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yR(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Bh(e,pR):`https://${n.config.authDomain}/${hR}`,r={apiKey:e.apiKey,appName:n.name,v:Ao},i=gR.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${El(r).slice(1)}`}async function _R(n){const e=await dR(n),t=fr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:yR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mR,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=Xn(n,"network-request-failed"),d=fr().setTimeout(()=>{a(l)},fR.get());function p(){fr().clearTimeout(d),i(r)}r.ping(p).then(p,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ER=500,TR=600,IR="_blank",wR="http://localhost";class ky{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SR(n,e,t,r=ER,i=TR){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},vR),{width:r.toString(),height:i.toString(),top:a,left:l}),m=Yt().toLowerCase();t&&(d=IE(m)?IR:t),EE(m)&&(e=e||wR,p.scrollbars="yes");const y=Object.entries(p).reduce((I,[A,b])=>`${I}${A}=${b},`,"");if(zC(m)&&d!=="_self")return CR(e||"",d),new ky(null);const T=window.open(e||"",d,y);Ie(T,n,"popup-blocked");try{T.focus()}catch{}return new ky(T)}function CR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="__/auth/handler",RR="emulator/auth/handler",PR=encodeURIComponent("fac");async function Dy(n,e,t,r,i,a){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ao,eventId:i};if(e instanceof $h){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",hS(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,T]of Object.entries({}))l[y]=T}if(e instanceof wl){const y=e.getScopes().filter(T=>T!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const d=l;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const p=await n._getAppCheckToken(),m=p?`#${PR}=${encodeURIComponent(p)}`:"";return`${NR(n)}?${El(d).slice(1)}${m}`}function NR({config:n}){return n.emulator?Bh(n,RR):`https://${n.authDomain}/${AR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="webStorageSupport";class xR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FE,this._completeRedirectFn=eR,this._overrideRedirectResult=XA}async _openPopup(e,t,r,i){var a;Gr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await Dy(e,t,r,nh(),i);return SR(e,l,Wh())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await Dy(e,t,r,nh(),i);return MA(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Gr(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await _R(e),r=new nR(e);return t.register("authEvent",i=>(Ie(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(zf,{type:zf},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[zf];l!==void 0&&t(!!l),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return RE()||TE()||Gh()}}const kR=xR;var My="@firebase/auth",Ly="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LR(n){vo(new xi("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=r.options;Ie(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:l,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PE(n)},m=new QC(r,i,a,p);return oA(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),vo(new xi("auth-internal",e=>{const t=Fi(e.getProvider("auth").getImmediate());return(r=>new DR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(My,Ly,MR(n)),dr(My,Ly,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=300,UR=oE("authIdTokenMaxAge")||VR;let Vy=null;const FR=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>UR)return;const i=t==null?void 0:t.token;Vy!==i&&(Vy=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function bR(n=Uh()){const e=Fc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=iA(n,{popupRedirectResolver:kR,persistence:[GA,xA,FE]}),r=oE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=FR(a.toString());CA(t,l,()=>l(t.currentUser)),SA(t,d=>l(d))}}const i=nE("auth");return i&&sA(t,`http://${i}`),t}function OR(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}XC({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Xn("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",OR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LR("Browser");var BR="firebase",qR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(BR,qR,"app");var Uy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yo,$E;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,P){function R(){}R.prototype=P.prototype,M.D=P.prototype,M.prototype=new R,M.prototype.constructor=M,M.C=function(k,V,F){for(var D=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)D[nt-2]=arguments[nt];return P.prototype[V].apply(k,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,P,R){R||(R=0);var k=Array(16);if(typeof P=="string")for(var V=0;16>V;++V)k[V]=P.charCodeAt(R++)|P.charCodeAt(R++)<<8|P.charCodeAt(R++)<<16|P.charCodeAt(R++)<<24;else for(V=0;16>V;++V)k[V]=P[R++]|P[R++]<<8|P[R++]<<16|P[R++]<<24;P=M.g[0],R=M.g[1],V=M.g[2];var F=M.g[3],D=P+(F^R&(V^F))+k[0]+3614090360&4294967295;P=R+(D<<7&4294967295|D>>>25),D=F+(V^P&(R^V))+k[1]+3905402710&4294967295,F=P+(D<<12&4294967295|D>>>20),D=V+(R^F&(P^R))+k[2]+606105819&4294967295,V=F+(D<<17&4294967295|D>>>15),D=R+(P^V&(F^P))+k[3]+3250441966&4294967295,R=V+(D<<22&4294967295|D>>>10),D=P+(F^R&(V^F))+k[4]+4118548399&4294967295,P=R+(D<<7&4294967295|D>>>25),D=F+(V^P&(R^V))+k[5]+1200080426&4294967295,F=P+(D<<12&4294967295|D>>>20),D=V+(R^F&(P^R))+k[6]+2821735955&4294967295,V=F+(D<<17&4294967295|D>>>15),D=R+(P^V&(F^P))+k[7]+4249261313&4294967295,R=V+(D<<22&4294967295|D>>>10),D=P+(F^R&(V^F))+k[8]+1770035416&4294967295,P=R+(D<<7&4294967295|D>>>25),D=F+(V^P&(R^V))+k[9]+2336552879&4294967295,F=P+(D<<12&4294967295|D>>>20),D=V+(R^F&(P^R))+k[10]+4294925233&4294967295,V=F+(D<<17&4294967295|D>>>15),D=R+(P^V&(F^P))+k[11]+2304563134&4294967295,R=V+(D<<22&4294967295|D>>>10),D=P+(F^R&(V^F))+k[12]+1804603682&4294967295,P=R+(D<<7&4294967295|D>>>25),D=F+(V^P&(R^V))+k[13]+4254626195&4294967295,F=P+(D<<12&4294967295|D>>>20),D=V+(R^F&(P^R))+k[14]+2792965006&4294967295,V=F+(D<<17&4294967295|D>>>15),D=R+(P^V&(F^P))+k[15]+1236535329&4294967295,R=V+(D<<22&4294967295|D>>>10),D=P+(V^F&(R^V))+k[1]+4129170786&4294967295,P=R+(D<<5&4294967295|D>>>27),D=F+(R^V&(P^R))+k[6]+3225465664&4294967295,F=P+(D<<9&4294967295|D>>>23),D=V+(P^R&(F^P))+k[11]+643717713&4294967295,V=F+(D<<14&4294967295|D>>>18),D=R+(F^P&(V^F))+k[0]+3921069994&4294967295,R=V+(D<<20&4294967295|D>>>12),D=P+(V^F&(R^V))+k[5]+3593408605&4294967295,P=R+(D<<5&4294967295|D>>>27),D=F+(R^V&(P^R))+k[10]+38016083&4294967295,F=P+(D<<9&4294967295|D>>>23),D=V+(P^R&(F^P))+k[15]+3634488961&4294967295,V=F+(D<<14&4294967295|D>>>18),D=R+(F^P&(V^F))+k[4]+3889429448&4294967295,R=V+(D<<20&4294967295|D>>>12),D=P+(V^F&(R^V))+k[9]+568446438&4294967295,P=R+(D<<5&4294967295|D>>>27),D=F+(R^V&(P^R))+k[14]+3275163606&4294967295,F=P+(D<<9&4294967295|D>>>23),D=V+(P^R&(F^P))+k[3]+4107603335&4294967295,V=F+(D<<14&4294967295|D>>>18),D=R+(F^P&(V^F))+k[8]+1163531501&4294967295,R=V+(D<<20&4294967295|D>>>12),D=P+(V^F&(R^V))+k[13]+2850285829&4294967295,P=R+(D<<5&4294967295|D>>>27),D=F+(R^V&(P^R))+k[2]+4243563512&4294967295,F=P+(D<<9&4294967295|D>>>23),D=V+(P^R&(F^P))+k[7]+1735328473&4294967295,V=F+(D<<14&4294967295|D>>>18),D=R+(F^P&(V^F))+k[12]+2368359562&4294967295,R=V+(D<<20&4294967295|D>>>12),D=P+(R^V^F)+k[5]+4294588738&4294967295,P=R+(D<<4&4294967295|D>>>28),D=F+(P^R^V)+k[8]+2272392833&4294967295,F=P+(D<<11&4294967295|D>>>21),D=V+(F^P^R)+k[11]+1839030562&4294967295,V=F+(D<<16&4294967295|D>>>16),D=R+(V^F^P)+k[14]+4259657740&4294967295,R=V+(D<<23&4294967295|D>>>9),D=P+(R^V^F)+k[1]+2763975236&4294967295,P=R+(D<<4&4294967295|D>>>28),D=F+(P^R^V)+k[4]+1272893353&4294967295,F=P+(D<<11&4294967295|D>>>21),D=V+(F^P^R)+k[7]+4139469664&4294967295,V=F+(D<<16&4294967295|D>>>16),D=R+(V^F^P)+k[10]+3200236656&4294967295,R=V+(D<<23&4294967295|D>>>9),D=P+(R^V^F)+k[13]+681279174&4294967295,P=R+(D<<4&4294967295|D>>>28),D=F+(P^R^V)+k[0]+3936430074&4294967295,F=P+(D<<11&4294967295|D>>>21),D=V+(F^P^R)+k[3]+3572445317&4294967295,V=F+(D<<16&4294967295|D>>>16),D=R+(V^F^P)+k[6]+76029189&4294967295,R=V+(D<<23&4294967295|D>>>9),D=P+(R^V^F)+k[9]+3654602809&4294967295,P=R+(D<<4&4294967295|D>>>28),D=F+(P^R^V)+k[12]+3873151461&4294967295,F=P+(D<<11&4294967295|D>>>21),D=V+(F^P^R)+k[15]+530742520&4294967295,V=F+(D<<16&4294967295|D>>>16),D=R+(V^F^P)+k[2]+3299628645&4294967295,R=V+(D<<23&4294967295|D>>>9),D=P+(V^(R|~F))+k[0]+4096336452&4294967295,P=R+(D<<6&4294967295|D>>>26),D=F+(R^(P|~V))+k[7]+1126891415&4294967295,F=P+(D<<10&4294967295|D>>>22),D=V+(P^(F|~R))+k[14]+2878612391&4294967295,V=F+(D<<15&4294967295|D>>>17),D=R+(F^(V|~P))+k[5]+4237533241&4294967295,R=V+(D<<21&4294967295|D>>>11),D=P+(V^(R|~F))+k[12]+1700485571&4294967295,P=R+(D<<6&4294967295|D>>>26),D=F+(R^(P|~V))+k[3]+2399980690&4294967295,F=P+(D<<10&4294967295|D>>>22),D=V+(P^(F|~R))+k[10]+4293915773&4294967295,V=F+(D<<15&4294967295|D>>>17),D=R+(F^(V|~P))+k[1]+2240044497&4294967295,R=V+(D<<21&4294967295|D>>>11),D=P+(V^(R|~F))+k[8]+1873313359&4294967295,P=R+(D<<6&4294967295|D>>>26),D=F+(R^(P|~V))+k[15]+4264355552&4294967295,F=P+(D<<10&4294967295|D>>>22),D=V+(P^(F|~R))+k[6]+2734768916&4294967295,V=F+(D<<15&4294967295|D>>>17),D=R+(F^(V|~P))+k[13]+1309151649&4294967295,R=V+(D<<21&4294967295|D>>>11),D=P+(V^(R|~F))+k[4]+4149444226&4294967295,P=R+(D<<6&4294967295|D>>>26),D=F+(R^(P|~V))+k[11]+3174756917&4294967295,F=P+(D<<10&4294967295|D>>>22),D=V+(P^(F|~R))+k[2]+718787259&4294967295,V=F+(D<<15&4294967295|D>>>17),D=R+(F^(V|~P))+k[9]+3951481745&4294967295,M.g[0]=M.g[0]+P&4294967295,M.g[1]=M.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+F&4294967295}r.prototype.u=function(M,P){P===void 0&&(P=M.length);for(var R=P-this.blockSize,k=this.B,V=this.h,F=0;F<P;){if(V==0)for(;F<=R;)i(this,M,F),F+=this.blockSize;if(typeof M=="string"){for(;F<P;)if(k[V++]=M.charCodeAt(F++),V==this.blockSize){i(this,k),V=0;break}}else for(;F<P;)if(k[V++]=M[F++],V==this.blockSize){i(this,k),V=0;break}}this.h=V,this.o+=P},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var P=1;P<M.length-8;++P)M[P]=0;var R=8*this.o;for(P=M.length-8;P<M.length;++P)M[P]=R&255,R/=256;for(this.u(M),M=Array(16),P=R=0;4>P;++P)for(var k=0;32>k;k+=8)M[R++]=this.g[P]>>>k&255;return M};function a(M,P){var R=d;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=P(M)}function l(M,P){this.h=P;for(var R=[],k=!0,V=M.length-1;0<=V;V--){var F=M[V]|0;k&&F==P||(R[V]=F,k=!1)}this.g=R}var d={};function p(M){return-128<=M&&128>M?a(M,function(P){return new l([P|0],0>P?-1:0)}):new l([M|0],0>M?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return T;if(0>M)return O(m(-M));for(var P=[],R=1,k=0;M>=R;k++)P[k]=M/R|0,R*=4294967296;return new l(P,0)}function y(M,P){if(M.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M.charAt(0)=="-")return O(y(M.substring(1),P));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=m(Math.pow(P,8)),k=T,V=0;V<M.length;V+=8){var F=Math.min(8,M.length-V),D=parseInt(M.substring(V,V+F),P);8>F?(F=m(Math.pow(P,F)),k=k.j(F).add(m(D))):(k=k.j(R),k=k.add(m(D)))}return k}var T=p(0),I=p(1),A=p(16777216);n=l.prototype,n.m=function(){if(B(this))return-O(this).m();for(var M=0,P=1,R=0;R<this.g.length;R++){var k=this.i(R);M+=(0<=k?k:4294967296+k)*P,P*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(b(this))return"0";if(B(this))return"-"+O(this).toString(M);for(var P=m(Math.pow(M,6)),R=this,k="";;){var V=ee(R,P).g;R=Q(R,V.j(P));var F=((0<R.g.length?R.g[0]:R.h)>>>0).toString(M);if(R=V,b(R))return F+k;for(;6>F.length;)F="0"+F;k=F+k}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function b(M){if(M.h!=0)return!1;for(var P=0;P<M.g.length;P++)if(M.g[P]!=0)return!1;return!0}function B(M){return M.h==-1}n.l=function(M){return M=Q(this,M),B(M)?-1:b(M)?0:1};function O(M){for(var P=M.g.length,R=[],k=0;k<P;k++)R[k]=~M.g[k];return new l(R,~M.h).add(I)}n.abs=function(){return B(this)?O(this):this},n.add=function(M){for(var P=Math.max(this.g.length,M.g.length),R=[],k=0,V=0;V<=P;V++){var F=k+(this.i(V)&65535)+(M.i(V)&65535),D=(F>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);k=D>>>16,F&=65535,D&=65535,R[V]=D<<16|F}return new l(R,R[R.length-1]&-2147483648?-1:0)};function Q(M,P){return M.add(O(P))}n.j=function(M){if(b(this)||b(M))return T;if(B(this))return B(M)?O(this).j(O(M)):O(O(this).j(M));if(B(M))return O(this.j(O(M)));if(0>this.l(A)&&0>M.l(A))return m(this.m()*M.m());for(var P=this.g.length+M.g.length,R=[],k=0;k<2*P;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var V=0;V<M.g.length;V++){var F=this.i(k)>>>16,D=this.i(k)&65535,nt=M.i(V)>>>16,Et=M.i(V)&65535;R[2*k+2*V]+=D*Et,X(R,2*k+2*V),R[2*k+2*V+1]+=F*Et,X(R,2*k+2*V+1),R[2*k+2*V+1]+=D*nt,X(R,2*k+2*V+1),R[2*k+2*V+2]+=F*nt,X(R,2*k+2*V+2)}for(k=0;k<P;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=P;k<2*P;k++)R[k]=0;return new l(R,0)};function X(M,P){for(;(M[P]&65535)!=M[P];)M[P+1]+=M[P]>>>16,M[P]&=65535,P++}function K(M,P){this.g=M,this.h=P}function ee(M,P){if(b(P))throw Error("division by zero");if(b(M))return new K(T,T);if(B(M))return P=ee(O(M),P),new K(O(P.g),O(P.h));if(B(P))return P=ee(M,O(P)),new K(O(P.g),P.h);if(30<M.g.length){if(B(M)||B(P))throw Error("slowDivide_ only works with positive integers.");for(var R=I,k=P;0>=k.l(M);)R=le(R),k=le(k);var V=oe(R,1),F=oe(k,1);for(k=oe(k,2),R=oe(R,2);!b(k);){var D=F.add(k);0>=D.l(M)&&(V=V.add(R),F=D),k=oe(k,1),R=oe(R,1)}return P=Q(M,V.j(P)),new K(V,P)}for(V=T;0<=M.l(P);){for(R=Math.max(1,Math.floor(M.m()/P.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),F=m(R),D=F.j(P);B(D)||0<D.l(M);)R-=k,F=m(R),D=F.j(P);b(F)&&(F=I),V=V.add(F),M=Q(M,D)}return new K(V,M)}n.A=function(M){return ee(this,M).h},n.and=function(M){for(var P=Math.max(this.g.length,M.g.length),R=[],k=0;k<P;k++)R[k]=this.i(k)&M.i(k);return new l(R,this.h&M.h)},n.or=function(M){for(var P=Math.max(this.g.length,M.g.length),R=[],k=0;k<P;k++)R[k]=this.i(k)|M.i(k);return new l(R,this.h|M.h)},n.xor=function(M){for(var P=Math.max(this.g.length,M.g.length),R=[],k=0;k<P;k++)R[k]=this.i(k)^M.i(k);return new l(R,this.h^M.h)};function le(M){for(var P=M.g.length+1,R=[],k=0;k<P;k++)R[k]=M.i(k)<<1|M.i(k-1)>>>31;return new l(R,M.h)}function oe(M,P){var R=P>>5;P%=32;for(var k=M.g.length-R,V=[],F=0;F<k;F++)V[F]=0<P?M.i(F+R)>>>P|M.i(F+R+1)<<32-P:M.i(F+R);return new l(V,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$E=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=y,yo=l}).apply(typeof Uy<"u"?Uy:typeof self<"u"?self:typeof window<"u"?window:{});var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WE,el,KE,sc,sh,JE,YE,QE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,v,w){return f==Array.prototype||f==Object.prototype||(f[v]=w.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yu=="object"&&Yu];for(var v=0;v<f.length;++v){var w=f[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function i(f,v){if(v)e:{var w=r;f=f.split(".");for(var C=0;C<f.length-1;C++){var G=f[C];if(!(G in w))break e;w=w[G]}f=f[f.length-1],C=w[f],v=v(C),v!=C&&v!=null&&e(w,f,{configurable:!0,writable:!0,value:v})}}function a(f,v){f instanceof String&&(f+="");var w=0,C=!1,G={next:function(){if(!C&&w<f.length){var W=w++;return{value:v(W,f[W]),done:!1}}return C=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}i("Array.prototype.values",function(f){return f||function(){return a(this,function(v,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function p(f){var v=typeof f;return v=v!="object"?v:f?Array.isArray(f)?"array":v:"null",v=="array"||v=="object"&&typeof f.length=="number"}function m(f){var v=typeof f;return v=="object"&&f!=null||v=="function"}function y(f,v,w){return f.call.apply(f.bind,arguments)}function T(f,v,w){if(!f)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,C),f.apply(v,G)}}return function(){return f.apply(v,arguments)}}function I(f,v,w){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:T,I.apply(null,arguments)}function A(f,v){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),f.apply(this,C)}}function b(f,v){function w(){}w.prototype=v.prototype,f.aa=v.prototype,f.prototype=new w,f.prototype.constructor=f,f.Qb=function(C,G,W){for(var ie=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ie[ze-2]=arguments[ze];return v.prototype[G].apply(C,ie)}}function B(f){const v=f.length;if(0<v){const w=Array(v);for(let C=0;C<v;C++)w[C]=f[C];return w}return[]}function O(f,v){for(let w=1;w<arguments.length;w++){const C=arguments[w];if(p(C)){const G=f.length||0,W=C.length||0;f.length=G+W;for(let ie=0;ie<W;ie++)f[G+ie]=C[ie]}else f.push(C)}}class Q{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function X(f){return/^[\s\xa0]*$/.test(f)}function K(){var f=d.navigator;return f&&(f=f.userAgent)?f:""}function ee(f){return ee[" "](f),f}ee[" "]=function(){};var le=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function oe(f,v,w){for(const C in f)v.call(w,f[C],C,f)}function M(f,v){for(const w in f)v.call(void 0,f[w],w,f)}function P(f){const v={};for(const w in f)v[w]=f[w];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(f,v){let w,C;for(let G=1;G<arguments.length;G++){C=arguments[G];for(w in C)f[w]=C[w];for(let W=0;W<R.length;W++)w=R[W],Object.prototype.hasOwnProperty.call(C,w)&&(f[w]=C[w])}}function V(f){var v=1;f=f.split(":");const w=[];for(;0<v&&f.length;)w.push(f.shift()),v--;return f.length&&w.push(f.join(":")),w}function F(f){d.setTimeout(()=>{throw f},0)}function D(){var f=ve;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}class nt{constructor(){this.h=this.g=null}add(v,w){const C=Et.get();C.set(v,w),this.h?this.h.next=C:this.g=C,this.h=C}}var Et=new Q(()=>new Je,f=>f.reset());class Je{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let be,se=!1,ve=new nt,ce=()=>{const f=d.Promise.resolve(void 0);be=()=>{f.then(q)}};var q=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(w){F(w)}var v=Et;v.j(f),100>v.h&&(v.h++,f.next=v.g,v.g=f)}se=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Pe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const w=()=>{};d.addEventListener("test",w,v),d.removeEventListener("test",w,v)}catch{}return f})();function Ne(f,v){if(ye.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var w=this.type=f.type,C=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget){if(le){e:{try{ee(v.nodeName);var G=!0;break e}catch{}G=!1}G||(v=null)}}else w=="mouseover"?v=f.fromElement:w=="mouseout"&&(v=f.toElement);this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Le[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Ne.aa.h.call(this)}}b(Ne,ye);var Le={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ge="closure_listenable_"+(1e6*Math.random()|0),He=0;function Ye(f,v,w,C,G){this.listener=f,this.proxy=null,this.src=v,this.type=w,this.capture=!!C,this.ha=G,this.key=++He,this.da=this.fa=!1}function Rt(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function yr(f){this.src=f,this.g={},this.h=0}yr.prototype.add=function(f,v,w,C,G){var W=f.toString();f=this.g[W],f||(f=this.g[W]=[],this.h++);var ie=Yr(f,v,C,G);return-1<ie?(v=f[ie],w||(v.fa=!1)):(v=new Ye(v,this.src,W,!!C,G),v.fa=w,f.push(v)),v};function ko(f,v){var w=v.type;if(w in f.g){var C=f.g[w],G=Array.prototype.indexOf.call(C,v,void 0),W;(W=0<=G)&&Array.prototype.splice.call(C,G,1),W&&(Rt(v),f.g[w].length==0&&(delete f.g[w],f.h--))}}function Yr(f,v,w,C){for(var G=0;G<f.length;++G){var W=f[G];if(!W.da&&W.listener==v&&W.capture==!!w&&W.ha==C)return G}return-1}var Oi="closure_lm_"+(1e6*Math.random()|0),Do={};function js(f,v,w,C,G){if(Array.isArray(v)){for(var W=0;W<v.length;W++)js(f,v[W],w,C,G);return null}return w=na(w),f&&f[Ge]?f.K(v,w,m(C)?!!C.capture:!1,G):ea(f,v,w,!1,C,G)}function ea(f,v,w,C,G,W){if(!v)throw Error("Invalid event type");var ie=m(G)?!!G.capture:!!G,ze=Lo(f);if(ze||(f[Oi]=ze=new yr(f)),w=ze.add(v,w,C,ie,W),w.proxy)return w;if(C=Dl(),w.proxy=C,C.src=f,C.listener=w,f.addEventListener)Pe||(G=ie),G===void 0&&(G=!1),f.addEventListener(v.toString(),C,G);else if(f.attachEvent)f.attachEvent(vr(v.toString()),C);else if(f.addListener&&f.removeListener)f.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Dl(){function f(w){return v.call(f.src,f.listener,w)}const v=ta;return f}function Mo(f,v,w,C,G){if(Array.isArray(v))for(var W=0;W<v.length;W++)Mo(f,v[W],w,C,G);else C=m(C)?!!C.capture:!!C,w=na(w),f&&f[Ge]?(f=f.i,v=String(v).toString(),v in f.g&&(W=f.g[v],w=Yr(W,w,C,G),-1<w&&(Rt(W[w]),Array.prototype.splice.call(W,w,1),W.length==0&&(delete f.g[v],f.h--)))):f&&(f=Lo(f))&&(v=f.g[v.toString()],f=-1,v&&(f=Yr(v,w,C,G)),(w=-1<f?v[f]:null)&&_r(w))}function _r(f){if(typeof f!="number"&&f&&!f.da){var v=f.src;if(v&&v[Ge])ko(v.i,f);else{var w=f.type,C=f.proxy;v.removeEventListener?v.removeEventListener(w,C,f.capture):v.detachEvent?v.detachEvent(vr(w),C):v.addListener&&v.removeListener&&v.removeListener(C),(w=Lo(v))?(ko(w,f),w.h==0&&(w.src=null,v[Oi]=null)):Rt(f)}}}function vr(f){return f in Do?Do[f]:Do[f]="on"+f}function ta(f,v){if(f.da)f=!0;else{v=new Ne(v,this);var w=f.listener,C=f.ha||f.src;f.fa&&_r(f),f=w.call(C,v)}return f}function Lo(f){return f=f[Oi],f instanceof yr?f:null}var Vo="__closure_events_fn_"+(1e9*Math.random()>>>0);function na(f){return typeof f=="function"?f:(f[Vo]||(f[Vo]=function(v){return f.handleEvent(v)}),f[Vo])}function Tt(){J.call(this),this.i=new yr(this),this.M=this,this.F=null}b(Tt,J),Tt.prototype[Ge]=!0,Tt.prototype.removeEventListener=function(f,v,w,C){Mo(this,f,v,w,C)};function It(f,v){var w,C=f.F;if(C)for(w=[];C;C=C.F)w.push(C);if(f=f.M,C=v.type||v,typeof v=="string")v=new ye(v,f);else if(v instanceof ye)v.target=v.target||f;else{var G=v;v=new ye(C,f),k(v,G)}if(G=!0,w)for(var W=w.length-1;0<=W;W--){var ie=v.g=w[W];G=Er(ie,C,!0,v)&&G}if(ie=v.g=f,G=Er(ie,C,!0,v)&&G,G=Er(ie,C,!1,v)&&G,w)for(W=0;W<w.length;W++)ie=v.g=w[W],G=Er(ie,C,!1,v)&&G}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var f=this.i,v;for(v in f.g){for(var w=f.g[v],C=0;C<w.length;C++)Rt(w[C]);delete f.g[v],f.h--}}this.F=null},Tt.prototype.K=function(f,v,w,C){return this.i.add(String(f),v,!1,w,C)},Tt.prototype.L=function(f,v,w,C){return this.i.add(String(f),v,!0,w,C)};function Er(f,v,w,C){if(v=f.i.g[String(v)],!v)return!0;v=v.concat();for(var G=!0,W=0;W<v.length;++W){var ie=v[W];if(ie&&!ie.da&&ie.capture==w){var ze=ie.listener,wt=ie.ha||ie.src;ie.fa&&ko(f.i,ie),G=ze.call(wt,C)!==!1&&G}}return G&&!C.defaultPrevented}function ra(f,v,w){if(typeof f=="function")w&&(f=I(f,w));else if(f&&typeof f.handleEvent=="function")f=I(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:d.setTimeout(f,v||0)}function Qr(f){f.g=ra(()=>{f.g=null,f.i&&(f.i=!1,Qr(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}class Bi extends J{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Qr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(f){J.call(this),this.h=f,this.g={}}b(qi,J);var ia=[];function oa(f){oe(f.g,function(v,w){this.g.hasOwnProperty(w)&&_r(v)},f),f.g={}}qi.prototype.N=function(){qi.aa.N.call(this),oa(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sa=d.JSON.stringify,aa=d.JSON.parse,la=class{stringify(f){return d.JSON.stringify(f,void 0)}parse(f){return d.JSON.parse(f,void 0)}};function Gi(){}Gi.prototype.h=null;function Uo(f){return f.h||(f.h=f.i())}function Fo(){}var vn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function er(){ye.call(this,"d")}b(er,ye);function bo(){ye.call(this,"c")}b(bo,ye);var tr={},ua=null;function Hi(){return ua=ua||new Tt}tr.La="serverreachability";function ca(f){ye.call(this,tr.La,f)}b(ca,ye);function Tr(f){const v=Hi();It(v,new ca(v))}tr.STAT_EVENT="statevent";function da(f,v){ye.call(this,tr.STAT_EVENT,f),this.stat=v}b(da,ye);function ft(f){const v=Hi();It(v,new da(v,f))}tr.Ma="timingevent";function Oo(f,v){ye.call(this,tr.Ma,f),this.size=v}b(Oo,ye);function Mn(f,v){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){f()},v)}function zi(){this.g=!0}zi.prototype.xa=function(){this.g=!1};function $i(f,v,w,C,G,W){f.info(function(){if(f.g)if(W)for(var ie="",ze=W.split("&"),wt=0;wt<ze.length;wt++){var Ve=ze[wt].split("=");if(1<Ve.length){var Pt=Ve[0];Ve=Ve[1];var mt=Pt.split("_");ie=2<=mt.length&&mt[1]=="type"?ie+(Pt+"="+Ve+"&"):ie+(Pt+"=redacted&")}}else ie=null;else ie=W;return"XMLHTTP REQ ("+C+") [attempt "+G+"]: "+v+`
`+w+`
`+ie})}function Bo(f,v,w,C,G,W,ie){f.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+G+"]: "+v+`
`+w+`
`+W+" "+ie})}function Ln(f,v,w,C){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+sd(f,w)+(C?" "+C:"")})}function fa(f,v){f.info(function(){return"TIMEOUT: "+v})}zi.prototype.info=function(){};function sd(f,v){if(!f.g)return v;if(!v)return null;try{var w=JSON.parse(v);if(w){for(f=0;f<w.length;f++)if(Array.isArray(w[f])){var C=w[f];if(!(2>C.length)){var G=C[1];if(Array.isArray(G)&&!(1>G.length)){var W=G[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ie=1;ie<G.length;ie++)G[ie]=""}}}}return sa(w)}catch{return v}}var qo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ml={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vn;function Wi(){}b(Wi,Gi),Wi.prototype.g=function(){return new XMLHttpRequest},Wi.prototype.i=function(){return{}},Vn=new Wi;function Un(f,v,w,C){this.j=f,this.i=v,this.l=w,this.R=C||1,this.U=new qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ll}function Ll(){this.i=null,this.g="",this.h=!1}var ha={},Go={};function Ho(f,v,w){f.L=1,f.v=ti(fn(v)),f.m=w,f.P=!0,pa(f,null)}function pa(f,v){f.F=Date.now(),Qe(f),f.A=fn(f.v);var w=f.A,C=f.R;Array.isArray(C)||(C=[String(C)]),ri(w.i,"t",C),f.C=0,w=f.j.J,f.h=new Ll,f.g=Zl(f.j,w?v:null,!f.m),0<f.O&&(f.M=new Bi(I(f.Y,f,f.g),f.O)),v=f.U,w=f.g,C=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(ia[0]=G.toString()),G=ia);for(var W=0;W<G.length;W++){var ie=js(w,G[W],C||v.handleEvent,!1,v.h||v);if(!ie)break;v.g[ie.key]=ie}v=f.H?P(f.H):{},f.m?(f.u||(f.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,v)):(f.u="GET",f.g.ea(f.A,f.u,null,v)),Tr(),$i(f.i,f.u,f.A,f.l,f.R,f.m)}Un.prototype.ca=function(f){f=f.target;const v=this.M;v&&rn(f)==3?v.j():this.Y(f)},Un.prototype.Y=function(f){try{if(f==this.g)e:{const mt=rn(this.g);var v=this.g.Ba();const In=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||Ea(this.g)))){this.J||mt!=4||v==7||(v==8||0>=In?Tr(3):Tr(2)),Ki(this);var w=this.g.Z();this.X=w;t:if(Vl(this)){var C=Ea(this.g);f="";var G=C.length,W=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){En(this),Xr(this);var ie="";break t}this.h.i=new d.TextDecoder}for(v=0;v<G;v++)this.h.h=!0,f+=this.h.i.decode(C[v],{stream:!(W&&v==G-1)});C.length=0,this.h.g+=f,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=w==200,Bo(this.i,this.u,this.A,this.l,this.R,mt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,wt=this.g;if((ze=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(ze)){var Ve=ze;break t}}Ve=null}if(w=Ve)Ln(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ma(this,w);else{this.o=!1,this.s=3,ft(12),En(this),Xr(this);break e}}if(this.P){w=!0;let pn;for(;!this.J&&this.C<ie.length;)if(pn=ad(this,ie),pn==Go){mt==4&&(this.s=4,ft(14),w=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==ha){this.s=4,ft(15),Ln(this.i,this.l,ie,"[Invalid Chunk]"),w=!1;break}else Ln(this.i,this.l,pn,null),ma(this,pn);if(Vl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||ie.length!=0||this.h.h||(this.s=1,ft(16),w=!1),this.o=this.o&&w,!w)Ln(this.i,this.l,ie,"[Invalid Chunked Response]"),En(this),Xr(this);else if(0<ie.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),Ia(Pt),Pt.M=!0,ft(11))}}else Ln(this.i,this.l,ie,null),ma(this,ie);mt==4&&En(this),this.o&&!this.J&&(mt==4?es(this.j,this):(this.o=!1,Qe(this)))}else Yo(this.g),w==400&&0<ie.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),En(this),Xr(this)}}}catch{}finally{}};function Vl(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ad(f,v){var w=f.C,C=v.indexOf(`
`,w);return C==-1?Go:(w=Number(v.substring(w,C)),isNaN(w)?ha:(C+=1,C+w>v.length?Go:(v=v.slice(C,C+w),f.C=C+w,v)))}Un.prototype.cancel=function(){this.J=!0,En(this)};function Qe(f){f.S=Date.now()+f.I,Ul(f,f.I)}function Ul(f,v){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Mn(I(f.ba,f),v)}function Ki(f){f.B&&(d.clearTimeout(f.B),f.B=null)}Un.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(fa(this.i,this.A),this.L!=2&&(Tr(),ft(17)),En(this),this.s=2,Xr(this)):Ul(this,this.S-f)};function Xr(f){f.j.G==0||f.J||es(f.j,f)}function En(f){Ki(f);var v=f.M;v&&typeof v.ma=="function"&&v.ma(),f.M=null,oa(f.U),f.g&&(v=f.g,f.g=null,v.abort(),v.ma())}function ma(f,v){try{var w=f.j;if(w.G!=0&&(w.g==f||Qt(w.h,f))){if(!f.K&&Qt(w.h,f)&&w.G==3){try{var C=w.Da.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var G=C;if(G[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<f.F)jo(w),qn(w);else break e;Zo(w),ft(18)}}else w.za=G[1],0<w.za-w.T&&37500>G[2]&&w.F&&w.v==0&&!w.C&&(w.C=Mn(I(w.Za,w),6e3));if(1>=bl(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Ar(w,11)}else if((f.K||w.g==f)&&jo(w),!X(v))for(G=w.Da.g.parse(v),v=0;v<G.length;v++){let Ve=G[v];if(w.T=Ve[0],Ve=Ve[1],w.G==2)if(Ve[0]=="c"){w.K=Ve[1],w.ia=Ve[2];const Pt=Ve[3];Pt!=null&&(w.la=Pt,w.j.info("VER="+w.la));const mt=Ve[4];mt!=null&&(w.Aa=mt,w.j.info("SVER="+w.Aa));const In=Ve[5];In!=null&&typeof In=="number"&&0<In&&(C=1.5*In,w.L=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const pn=f.g;if(pn){const eo=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eo){var W=C.h;W.g||eo.indexOf("spdy")==-1&&eo.indexOf("quic")==-1&&eo.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(ga(W,W.h),W.h=null))}if(C.D){const ns=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;ns&&(C.ya=ns,Ke(C.I,C.D,ns))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-f.F,w.j.info("Handshake RTT: "+w.R+"ms")),C=w;var ie=f;if(C.qa=Xl(C,C.J?C.ia:null,C.W),ie.K){Ol(C.h,ie);var ze=ie,wt=C.L;wt&&(ze.I=wt),ze.B&&(Ki(ze),Qe(ze)),C.g=ie}else ji(C);0<w.i.length&&or(w)}else Ve[0]!="stop"&&Ve[0]!="close"||Ar(w,7);else w.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Ar(w,7):Lt(w):Ve[0]!="noop"&&w.l&&w.l.ta(Ve),w.v=0)}}Tr(4)}catch{}}var Fl=class{constructor(f,v){this.g=f,this.map=v}};function Ji(f){this.l=f||10,d.PerformanceNavigationTiming?(f=d.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dn(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function bl(f){return f.h?1:f.g?f.g.size:0}function Qt(f,v){return f.h?f.h==v:f.g?f.g.has(v):!1}function ga(f,v){f.g?f.g.add(v):f.h=v}function Ol(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}Ji.prototype.cancel=function(){if(this.i=Bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Bl(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let v=f.i;for(const w of f.g.values())v=v.concat(w.D);return v}return B(f.i)}function zo(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(p(f)){for(var v=[],w=f.length,C=0;C<w;C++)v.push(f[C]);return v}v=[],w=0;for(C in f)v[w++]=f[C];return v}function $o(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(p(f)||typeof f=="string"){var v=[];f=f.length;for(var w=0;w<f;w++)v.push(w);return v}v=[],w=0;for(const C in f)v[w++]=C;return v}}}function Zr(f,v){if(f.forEach&&typeof f.forEach=="function")f.forEach(v,void 0);else if(p(f)||typeof f=="string")Array.prototype.forEach.call(f,v,void 0);else for(var w=$o(f),C=zo(f),G=C.length,W=0;W<G;W++)v.call(void 0,C[W],w&&w[W],f)}var Yi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ld(f,v){if(f){f=f.split("&");for(var w=0;w<f.length;w++){var C=f[w].indexOf("="),G=null;if(0<=C){var W=f[w].substring(0,C);G=f[w].substring(C+1)}else W=f[w];v(W,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Ir(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ir){this.h=f.h,Qi(this,f.j),this.o=f.o,this.g=f.g,jr(this,f.s),this.l=f.l;var v=f.i,w=new nr;w.i=v.i,v.g&&(w.g=new Map(v.g),w.h=v.h),ei(this,w),this.m=f.m}else f&&(v=String(f).match(Yi))?(this.h=!1,Qi(this,v[1]||"",!0),this.o=De(v[2]||""),this.g=De(v[3]||"",!0),jr(this,v[4]),this.l=De(v[5]||"",!0),ei(this,v[6]||"",!0),this.m=De(v[7]||"")):(this.h=!1,this.i=new nr(null,this.h))}Ir.prototype.toString=function(){var f=[],v=this.j;v&&f.push(ni(v,Wo,!0),":");var w=this.g;return(w||v=="file")&&(f.push("//"),(v=this.o)&&f.push(ni(v,Wo,!0),"@"),f.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&f.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&f.push("/"),f.push(ni(w,w.charAt(0)=="/"?Hl:Gl,!0))),(w=this.i.toString())&&f.push("?",w),(w=this.m)&&f.push("#",ni(w,ya)),f.join("")};function fn(f){return new Ir(f)}function Qi(f,v,w){f.j=w?De(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function jr(f,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);f.s=v}else f.s=null}function ei(f,v,w){v instanceof nr?(f.i=v,rr(f.i,f.h)):(w||(v=ni(v,zl)),f.i=new nr(v,f.h))}function Ke(f,v,w){f.i.set(v,w)}function ti(f){return Ke(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function De(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ni(f,v,w){return typeof f=="string"?(f=encodeURI(f).replace(v,ql),w&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ql(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Wo=/[#\/\?@]/g,Gl=/[#\?:]/g,Hl=/[#\?]/g,zl=/[#\?@]/g,ya=/#/g;function nr(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function Mt(f){f.g||(f.g=new Map,f.h=0,f.i&&ld(f.i,function(v,w){f.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}n=nr.prototype,n.add=function(f,v){Mt(this),this.i=null,f=Tn(this,f);var w=this.g.get(f);return w||this.g.set(f,w=[]),w.push(v),this.h+=1,this};function Fn(f,v){Mt(f),v=Tn(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function bn(f,v){return Mt(f),v=Tn(f,v),f.g.has(v)}n.forEach=function(f,v){Mt(this),this.g.forEach(function(w,C){w.forEach(function(G){f.call(v,G,C,this)},this)},this)},n.na=function(){Mt(this);const f=Array.from(this.g.values()),v=Array.from(this.g.keys()),w=[];for(let C=0;C<v.length;C++){const G=f[C];for(let W=0;W<G.length;W++)w.push(v[C])}return w},n.V=function(f){Mt(this);let v=[];if(typeof f=="string")bn(this,f)&&(v=v.concat(this.g.get(Tn(this,f))));else{f=Array.from(this.g.values());for(let w=0;w<f.length;w++)v=v.concat(f[w])}return v},n.set=function(f,v){return Mt(this),this.i=null,f=Tn(this,f),bn(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},n.get=function(f,v){return f?(f=this.V(f),0<f.length?String(f[0]):v):v};function ri(f,v,w){Fn(f,v),0<w.length&&(f.i=null,f.g.set(Tn(f,v),B(w)),f.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(var w=0;w<v.length;w++){var C=v[w];const W=encodeURIComponent(String(C)),ie=this.V(C);for(C=0;C<ie.length;C++){var G=W;ie[C]!==""&&(G+="="+encodeURIComponent(String(ie[C]))),f.push(G)}}return this.i=f.join("&")};function Tn(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function rr(f,v){v&&!f.j&&(Mt(f),f.i=null,f.g.forEach(function(w,C){var G=C.toLowerCase();C!=G&&(Fn(this,C),ri(this,G,w))},f)),f.j=v}function ud(f,v){const w=new zi;if(d.Image){const C=new Image;C.onload=A(nn,w,"TestLoadImage: loaded",!0,v,C),C.onerror=A(nn,w,"TestLoadImage: error",!1,v,C),C.onabort=A(nn,w,"TestLoadImage: abort",!1,v,C),C.ontimeout=A(nn,w,"TestLoadImage: timeout",!1,v,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=f}else v(!1)}function $l(f,v){const w=new zi,C=new AbortController,G=setTimeout(()=>{C.abort(),nn(w,"TestPingServer: timeout",!1,v)},1e4);fetch(f,{signal:C.signal}).then(W=>{clearTimeout(G),W.ok?nn(w,"TestPingServer: ok",!0,v):nn(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),nn(w,"TestPingServer: error",!1,v)})}function nn(f,v,w,C,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),C(w)}catch{}}function cd(){this.g=new la}function Wl(f,v,w){const C=w||"";try{Zr(f,function(G,W){let ie=G;m(G)&&(ie=sa(G)),v.push(C+W+"="+encodeURIComponent(ie))})}catch(G){throw v.push(C+"type="+encodeURIComponent("_badmap")),G}}function wr(f){this.l=f.Ub||null,this.j=f.eb||!1}b(wr,Gi),wr.prototype.g=function(){return new Xi(this.l,this.j)},wr.prototype.i=(function(f){return function(){return f}})({});function Xi(f,v){Tt.call(this),this.D=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Xi,Tt),n=Xi.prototype,n.open=function(f,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=v,this.readyState=1,Bn(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(v.body=f),(this.D||d).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,On(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Bn(this)),this.g&&(this.readyState=3,Bn(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kl(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kl(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?On(this):Bn(this),this.readyState==3&&Kl(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,On(this))},n.Qa=function(f){this.g&&(this.response=f,On(this))},n.ga=function(){this.g&&On(this)};function On(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Bn(f)}n.setRequestHeader=function(f,v){this.u.append(f,v)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,f.push(w[0]+": "+w[1]),w=v.next();return f.join(`\r
`)};function Bn(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Sr(f){let v="";return oe(f,function(w,C){v+=C,v+=":",v+=w,v+=`\r
`}),v}function ii(f,v,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=Sr(w),typeof f=="string"?w!=null&&encodeURIComponent(String(w)):Ke(f,v,w))}function rt(f){Tt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(rt,Tt);var dd=/^https?$/i,_a=["POST","PUT"];n=rt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,v,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vn.g(),this.v=this.o?Uo(this.o):Uo(Vn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(W){Zi(this,W);return}if(f=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var G in C)w.set(G,C[G]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const W of C.keys())w.set(W,C.get(W));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(W=>W.toLowerCase()=="content-type"),G=d.FormData&&f instanceof d.FormData,!(0<=Array.prototype.indexOf.call(_a,v,void 0))||C||G||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ie]of w)this.g.setRequestHeader(W,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jo(this),this.u=!0,this.g.send(f),this.u=!1}catch(W){Zi(this,W)}};function Zi(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.m=5,Ko(f),hn(f)}function Ko(f){f.A||(f.A=!0,It(f,"complete"),It(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,It(this,"complete"),It(this,"abort"),hn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hn(this,!0)),rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?va(this):this.bb())},n.bb=function(){va(this)};function va(f){if(f.h&&typeof l<"u"&&(!f.v[1]||rn(f)!=4||f.Z()!=2)){if(f.u&&rn(f)==4)ra(f.Ea,0,f);else if(It(f,"readystatechange"),rn(f)==4){f.h=!1;try{const ie=f.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var C;if(C=ie===0){var G=String(f.D).match(Yi)[1]||null;!G&&d.self&&d.self.location&&(G=d.self.location.protocol.slice(0,-1)),C=!dd.test(G?G.toLowerCase():"")}w=C}if(w)It(f,"complete"),It(f,"success");else{f.m=6;try{var W=2<rn(f)?f.g.statusText:""}catch{W=""}f.l=W+" ["+f.Z()+"]",Ko(f)}}finally{hn(f)}}}}function hn(f,v){if(f.g){Jo(f);const w=f.g,C=f.v[0]?()=>{}:null;f.g=null,f.v=null,v||It(f,"ready");try{w.onreadystatechange=C}catch{}}}function Jo(f){f.I&&(d.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function rn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var v=this.g.responseText;return f&&v.indexOf(f)==0&&(v=v.substring(f.length)),aa(v)}};function Ea(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Yo(f){const v={};f=(f.g&&2<=rn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<f.length;C++){if(X(f[C]))continue;var w=V(f[C]);const G=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const W=v[G]||[];v[G]=W,W.push(w)}M(v,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ir(f,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[f]||v}function Ta(f){this.Aa=0,this.i=[],this.j=new zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ir("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ir("baseRetryDelayMs",5e3,f),this.cb=ir("retryDelaySeedMs",1e4,f),this.Wa=ir("forwardChannelMaxRetries",2,f),this.wa=ir("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Ji(f&&f.concurrentRequestLimit),this.Da=new cd,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ta.prototype,n.la=8,n.G=1,n.connect=function(f,v,w,C){ft(0),this.W=f,this.H=v||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.I=Xl(this,null,this.W),or(this)};function Lt(f){if(Qo(f),f.G==3){var v=f.U++,w=fn(f.I);if(Ke(w,"SID",f.K),Ke(w,"RID",v),Ke(w,"TYPE","terminate"),Cr(f,w),v=new Un(f,f.j,v),v.L=2,v.v=ti(fn(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(v.v.toString(),"")}catch{}!w&&d.Image&&(new Image().src=v.v,w=!0),w||(v.g=Zl(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Qe(v)}Ql(f)}function qn(f){f.g&&(Ia(f),f.g.cancel(),f.g=null)}function Qo(f){qn(f),f.u&&(d.clearTimeout(f.u),f.u=null),jo(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&d.clearTimeout(f.s),f.s=null)}function or(f){if(!dn(f.h)&&!f.s){f.s=!0;var v=f.Ga;be||ce(),se||(be(),se=!0),ve.add(v,f),f.B=0}}function fd(f,v){return bl(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=v.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Mn(I(f.Ga,f,v),Yl(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new Un(this,this.j,f);let W=this.o;if(this.S&&(W?(W=P(W),k(W,this.S)):W=this.S),this.m!==null||this.O||(G.H=W,W=null),this.P)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(v+=C,4096<v){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=oi(this,G,v),w=fn(this.I),Ke(w,"RID",f),Ke(w,"CVER",22),this.D&&Ke(w,"X-HTTP-Session-Id",this.D),Cr(this,w),W&&(this.O?v="headers="+encodeURIComponent(String(Sr(W)))+"&"+v:this.m&&ii(w,this.m,W)),ga(this.h,G),this.Ua&&Ke(w,"TYPE","init"),this.P?(Ke(w,"$req",v),Ke(w,"SID","null"),G.T=!0,Ho(G,w,null)):Ho(G,w,v),this.G=2}}else this.G==3&&(f?Xo(this,f):this.i.length==0||dn(this.h)||Xo(this))};function Xo(f,v){var w;v?w=v.l:w=f.U++;const C=fn(f.I);Ke(C,"SID",f.K),Ke(C,"RID",w),Ke(C,"AID",f.T),Cr(f,C),f.m&&f.o&&ii(C,f.m,f.o),w=new Un(f,f.j,w,f.B+1),f.m===null&&(w.H=f.o),v&&(f.i=v.D.concat(f.i)),v=oi(f,w,1e3),w.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),ga(f.h,w),Ho(w,C,v)}function Cr(f,v){f.H&&oe(f.H,function(w,C){Ke(v,C,w)}),f.l&&Zr({},function(w,C){Ke(v,C,w)})}function oi(f,v,w){w=Math.min(f.i.length,w);var C=f.l?I(f.l.Na,f.l,f):null;e:{var G=f.i;let W=-1;for(;;){const ie=["count="+w];W==-1?0<w?(W=G[0].g,ie.push("ofs="+W)):W=0:ie.push("ofs="+W);let ze=!0;for(let wt=0;wt<w;wt++){let Ve=G[wt].g;const Pt=G[wt].map;if(Ve-=W,0>Ve)W=Math.max(0,G[wt].g-100),ze=!1;else try{Wl(Pt,ie,"req"+Ve+"_")}catch{C&&C(Pt)}}if(ze){C=ie.join("&");break e}}}return f=f.i.splice(0,w),v.D=f,C}function ji(f){if(!f.g&&!f.u){f.Y=1;var v=f.Fa;be||ce(),se||(be(),se=!0),ve.add(v,f),f.v=0}}function Zo(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Mn(I(f.Fa,f),Yl(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Jl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Mn(I(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),qn(this),Jl(this))};function Ia(f){f.A!=null&&(d.clearTimeout(f.A),f.A=null)}function Jl(f){f.g=new Un(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var v=fn(f.qa);Ke(v,"RID","rpc"),Ke(v,"SID",f.K),Ke(v,"AID",f.T),Ke(v,"CI",f.F?"0":"1"),!f.F&&f.ja&&Ke(v,"TO",f.ja),Ke(v,"TYPE","xmlhttp"),Cr(f,v),f.m&&f.o&&ii(v,f.m,f.o),f.L&&(f.g.I=f.L);var w=f.g;f=f.ia,w.L=1,w.v=ti(fn(v)),w.m=null,w.P=!0,pa(w,f)}n.Za=function(){this.C!=null&&(this.C=null,qn(this),Zo(this),ft(19))};function jo(f){f.C!=null&&(d.clearTimeout(f.C),f.C=null)}function es(f,v){var w=null;if(f.g==v){jo(f),Ia(f),f.g=null;var C=2}else if(Qt(f.h,v))w=v.D,Ol(f.h,v),C=1;else return;if(f.G!=0){if(v.o)if(C==1){w=v.m?v.m.length:0,v=Date.now()-v.F;var G=f.B;C=Hi(),It(C,new Oo(C,w)),or(f)}else ji(f);else if(G=v.s,G==3||G==0&&0<v.X||!(C==1&&fd(f,v)||C==2&&Zo(f)))switch(w&&0<w.length&&(v=f.h,v.i=v.i.concat(w)),G){case 1:Ar(f,5);break;case 4:Ar(f,10);break;case 3:Ar(f,6);break;default:Ar(f,2)}}}function Yl(f,v){let w=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(w*=2),w*v}function Ar(f,v){if(f.j.info("Error code "+v),v==2){var w=I(f.fb,f),C=f.Xa;const G=!C;C=new Ir(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Qi(C,"https"),ti(C),G?ud(C.toString(),w):$l(C.toString(),w)}else ft(2);f.G=0,f.l&&f.l.sa(v),Ql(f),Qo(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Ql(f){if(f.G=0,f.ka=[],f.l){const v=Bl(f.h);(v.length!=0||f.i.length!=0)&&(O(f.ka,v),O(f.ka,f.i),f.h.i.length=0,B(f.i),f.i.length=0),f.l.ra()}}function Xl(f,v,w){var C=w instanceof Ir?fn(w):new Ir(w);if(C.g!="")v&&(C.g=v+"."+C.g),jr(C,C.s);else{var G=d.location;C=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;var W=new Ir(null);C&&Qi(W,C),v&&(W.g=v),G&&jr(W,G),w&&(W.l=w),C=W}return w=f.D,v=f.ya,w&&v&&Ke(C,w,v),Ke(C,"VER",f.la),Cr(f,C),C}function Zl(f,v,w){if(v&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=f.Ca&&!f.pa?new rt(new wr({eb:w})):new rt(f.pa),v.Ha(f.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function wa(){}n=wa.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ts(){}ts.prototype.g=function(f,v){return new Xt(f,v)};function Xt(f,v){Tt.call(this),this.g=new Ta(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(f?f["X-WebChannel-Client-Profile"]=v.va:f={"X-WebChannel-Client-Profile":v.va}),this.g.S=f,(f=v&&v.Sb)&&!X(f)&&(this.g.m=f),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!X(v)&&(this.g.D=v,f=this.h,f!==null&&v in f&&(f=this.h,v in f&&delete f[v])),this.j=new sr(this)}b(Xt,Tt),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Lt(this.g)},Xt.prototype.o=function(f){var v=this.g;if(typeof f=="string"){var w={};w.__data__=f,f=w}else this.u&&(w={},w.__data__=sa(f),f=w);v.i.push(new Fl(v.Ya++,f)),v.G==3&&or(v)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Lt(this.g),delete this.g,Xt.aa.N.call(this)};function jl(f){er.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const w in v){f=w;break e}f=void 0}(this.i=f)&&(f=this.i,v=v!==null&&f in v?v[f]:void 0),this.data=v}else this.data=f}b(jl,er);function eu(){bo.call(this),this.status=1}b(eu,bo);function sr(f){this.g=f}b(sr,wa),sr.prototype.ua=function(){It(this.g,"a")},sr.prototype.ta=function(f){It(this.g,new jl(f))},sr.prototype.sa=function(f){It(this.g,new eu)},sr.prototype.ra=function(){It(this.g,"b")},ts.prototype.createWebChannel=ts.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,QE=function(){return new ts},YE=function(){return Hi()},JE=tr,sh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qo.NO_ERROR=0,qo.TIMEOUT=8,qo.HTTP_ERROR=6,sc=qo,Ml.COMPLETE="complete",KE=Ml,Fo.EventType=vn,vn.OPEN="a",vn.CLOSE="b",vn.ERROR="c",vn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,el=Fo,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,WE=rt}).apply(typeof Yu<"u"?Yu:typeof self<"u"?self:typeof window<"u"?window:{});const Fy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $s="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=new Lh("@firebase/firestore");function Ja(){return Io.logLevel}function me(n,...e){if(Io.logLevel<=Me.DEBUG){const t=e.map(Jh);Io.debug(`Firestore (${$s}): ${n}`,...t)}}function Hr(n,...e){if(Io.logLevel<=Me.ERROR){const t=e.map(Jh);Io.error(`Firestore (${$s}): ${n}`,...t)}}function Fs(n,...e){if(Io.logLevel<=Me.WARN){const t=e.map(Jh);Io.warn(`Firestore (${$s}): ${n}`,...t)}}function Jh(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n="Unexpected state"){const e=`FIRESTORE (${$s}) INTERNAL ASSERTION FAILED: `+n;throw Hr(e),new Error(e)}function $e(n,e){n||Se()}function Ae(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends gr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wt.UNAUTHENTICATED)))}shutdown(){}}class HR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class zR{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0);let r=this.i;const i=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Pi,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await i(this.currentUser)}))},d=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Pi)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string"),new XE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Wt(e)}}class $R{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class WR{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new $R(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class KR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){$e(this.o===void 0);const r=a=>{a.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,me("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string"),this.R=t.token,new KR(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=YR(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Be(n,e){return n<e?-1:n>e?1:0}function bs(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new fe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new At(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new At(0,0))}static max(){return new Ce(new At(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(),r===void 0?r=e.length-t:r>e.length-t&&Se(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return fl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fl?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tt extends fl{construct(e,t,r){return new tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new tt(t)}static emptyPath(){return new tt([])}}const QR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends fl{construct(e,t,r){return new bt(e,t,r)}static isValidIdentifier(e){return QR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new fe(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new fe(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else d==="`"?(l=!l,i++):d!=="."||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new fe(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(tt.fromString(e))}static fromName(e){return new _e(tt.fromString(e).popFirst(5))}static empty(){return new _e(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new tt(e.slice()))}}function XR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new At(t+1,0):new At(t,r));return new ki(i,_e.empty(),e)}function ZR(n){return new ki(n.readTime,n.key,-1)}class ki{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ki(Ce.min(),_e.empty(),-1)}static max(){return new ki(Ce.max(),_e.empty(),-1)}}function jR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==eP)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,r)=>{t(e)}))}static reject(e){return new te(((t,r)=>{r(e)}))}static waitFor(e){return new te(((t,r)=>{let i=0,a=0,l=!1;e.forEach((d=>{++i,d.next((()=>{++a,l&&a===i&&t()}),(p=>r(p)))})),l=!0,a===i&&t()}))}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next((i=>i?te.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new te(((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next((y=>{l[m]=y,++d,d===a&&r(l)}),(y=>i(y)))}}))}static doWhile(e,t){return new te(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function nP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Al(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Yh.oe=-1;function qc(n){return n==null}function Tc(n){return n===0&&1/n==-1/0}function rP(n){return typeof n=="number"&&Number.isInteger(n)&&!Tc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ws(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Ft.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qu(this.root,e,this.comparator,!0)}}class Qu{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ft.RED,this.left=i??Ft.EMPTY,this.right=a??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ft(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Ft.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,t,r,i,a){return this}insert(e,t,r){return new Ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oy(this.data.getIterator())}getIteratorFrom(e){return new Oy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class Oy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new Ot(bt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bs(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new eT("Invalid base64 string: "+a):a}})(e);return new Bt(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new Bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const iP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(n){if($e(!!n),typeof n=="string"){let e=0;const t=iP.exec(n);if($e(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wo(n){return typeof n=="string"?Bt.fromBase64String(n):Bt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Xh(n){const e=n.mapValue.fields.__previous_value__;return Qh(e)?Xh(e):e}function hl(n){const e=Di(n.mapValue.fields.__local_write_time__.timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,t,r,i,a,l,d,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m}}class pl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new pl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu={mapValue:{}};function So(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qh(n)?4:aP(n)?9007199254740991:sP(n)?10:11:Se()}function mr(n,e){if(n===e)return!0;const t=So(n);if(t!==So(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hl(n).isEqual(hl(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=Di(i.timestampValue),d=Di(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return wo(i.bytesValue).isEqual(wo(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return pt(i.geoPointValue.latitude)===pt(a.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return pt(i.integerValue)===pt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=pt(i.doubleValue),d=pt(a.doubleValue);return l===d?Tc(l)===Tc(d):isNaN(l)&&isNaN(d)}return!1})(n,e);case 9:return bs(n.arrayValue.values||[],e.arrayValue.values||[],mr);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},d=a.mapValue.fields||{};if(by(l)!==by(d))return!1;for(const p in l)if(l.hasOwnProperty(p)&&(d[p]===void 0||!mr(l[p],d[p])))return!1;return!0})(n,e);default:return Se()}}function ml(n,e){return(n.values||[]).find((t=>mr(t,e)))!==void 0}function Os(n,e){if(n===e)return 0;const t=So(n),r=So(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const d=pt(a.integerValue||a.doubleValue),p=pt(l.integerValue||l.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return By(n.timestampValue,e.timestampValue);case 4:return By(hl(n),hl(e));case 5:return Be(n.stringValue,e.stringValue);case 6:return(function(a,l){const d=wo(a),p=wo(l);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const d=a.split("/"),p=l.split("/");for(let m=0;m<d.length&&m<p.length;m++){const y=Be(d[m],p[m]);if(y!==0)return y}return Be(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const d=Be(pt(a.latitude),pt(l.latitude));return d!==0?d:Be(pt(a.longitude),pt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return qy(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var d,p,m,y;const T=a.fields||{},I=l.fields||{},A=(d=T.value)===null||d===void 0?void 0:d.arrayValue,b=(p=I.value)===null||p===void 0?void 0:p.arrayValue,B=Be(((m=A==null?void 0:A.values)===null||m===void 0?void 0:m.length)||0,((y=b==null?void 0:b.values)===null||y===void 0?void 0:y.length)||0);return B!==0?B:qy(A,b)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Xu.mapValue&&l===Xu.mapValue)return 0;if(a===Xu.mapValue)return 1;if(l===Xu.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),m=l.fields||{},y=Object.keys(m);p.sort(),y.sort();for(let T=0;T<p.length&&T<y.length;++T){const I=Be(p[T],y[T]);if(I!==0)return I;const A=Os(d[p[T]],m[y[T]]);if(A!==0)return A}return Be(p.length,y.length)})(n.mapValue,e.mapValue);default:throw Se()}}function By(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=Di(n),r=Di(e),i=Be(t.seconds,r.seconds);return i!==0?i:Be(t.nanos,r.nanos)}function qy(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Os(t[i],r[i]);if(a)return a}return Be(t.length,r.length)}function Bs(n){return ah(n)}function ah(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Di(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return wo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=ah(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${ah(t.fields[l])}`;return i+"}"})(n.mapValue):Se()}function Gy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lh(n){return!!n&&"integerValue"in n}function Zh(n){return!!n&&"arrayValue"in n}function Hy(n){return!!n&&"nullValue"in n}function zy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ac(n){return!!n&&"mapValue"in n}function sP(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function il(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ws(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=il(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=il(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=il(t)}setAll(e){let t=bt.emptyPath(),r={},i=[];e.forEach(((l,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=il(l):i.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ac(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ws(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Nn(il(this.value))}}function tT(n){const e=[];return Ws(n.fields,((t,r)=>{const i=new bt([t]);if(ac(r)){const a=tT(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t,r,i,a,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Kt(e,0,Ce.min(),Ce.min(),Ce.min(),Nn.empty(),0)}static newFoundDocument(e,t,r,i){return new Kt(e,1,t,Ce.min(),r,i,0)}static newNoDocument(e,t){return new Kt(e,2,t,Ce.min(),Ce.min(),Nn.empty(),0)}static newUnknownDocument(e,t){return new Kt(e,3,t,Ce.min(),Ce.min(),Nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t){this.position=e,this.inclusive=t}}function $y(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(a.field.isKeyField()?r=_e.comparator(_e.fromName(l.referenceValue),t.key):r=Os(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Wy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t="asc"){this.field=e,this.dir=t}}function lP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{}class _t extends nT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new cP(e,t,r):t==="array-contains"?new hP(e,r):t==="in"?new pP(e,r):t==="not-in"?new mP(e,r):t==="array-contains-any"?new gP(e,r):new _t(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new dP(e,r):new fP(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Os(t,this.value)):t!==null&&So(this.value)===So(t)&&this.matchesComparison(Os(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends nT{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Zn(e,t)}matches(e){return rT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function rT(n){return n.op==="and"}function iT(n){return uP(n)&&rT(n)}function uP(n){for(const e of n.filters)if(e instanceof Zn)return!1;return!0}function uh(n){if(n instanceof _t)return n.field.canonicalString()+n.op.toString()+Bs(n.value);if(iT(n))return n.filters.map((e=>uh(e))).join(",");{const e=n.filters.map((t=>uh(t))).join(",");return`${n.op}(${e})`}}function oT(n,e){return n instanceof _t?(function(r,i){return i instanceof _t&&r.op===i.op&&r.field.isEqual(i.field)&&mr(r.value,i.value)})(n,e):n instanceof Zn?(function(r,i){return i instanceof Zn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,d)=>a&&oT(l,i.filters[d])),!0):!1})(n,e):void Se()}function sT(n){return n instanceof _t?(function(t){return`${t.field.canonicalString()} ${t.op} ${Bs(t.value)}`})(n):n instanceof Zn?(function(t){return t.op.toString()+" {"+t.getFilters().map(sT).join(" ,")+"}"})(n):"Filter"}class cP extends _t{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class dP extends _t{constructor(e,t){super(e,"in",t),this.keys=aT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fP extends _t{constructor(e,t){super(e,"not-in",t),this.keys=aT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function aT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>_e.fromName(r.referenceValue)))}class hP extends _t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zh(t)&&ml(t.arrayValue,this.value)}}class pP extends _t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ml(this.value.arrayValue,t)}}class mP extends _t{constructor(e,t){super(e,"not-in",t)}matches(e){if(ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ml(this.value.arrayValue,t)}}class gP extends _t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ml(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,t=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.ue=null}}function Ky(n,e=null,t=[],r=[],i=null,a=null,l=null){return new yP(n,e,t,r,i,a,l)}function jh(n){const e=Ae(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>uh(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),qc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Bs(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Bs(r))).join(",")),e.ue=t}return e.ue}function ep(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!lP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Wy(n.startAt,e.startAt)&&Wy(n.endAt,e.endAt)}function ch(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,t=null,r=[],i=[],a=null,l="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _P(n,e,t,r,i,a,l,d){return new Ks(n,e,t,r,i,a,l,d)}function lT(n){return new Ks(n)}function Jy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uT(n){return n.collectionGroup!==null}function ol(n){const e=Ae(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new Ot(bt.comparator);return l.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new gl(a,r))})),t.has(bt.keyField().canonicalString())||e.ce.push(new gl(bt.keyField(),r))}return e.ce}function hr(n){const e=Ae(n);return e.le||(e.le=vP(e,ol(n))),e.le}function vP(n,e){if(n.limitType==="F")return Ky(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new gl(i.field,a)}));const t=n.endAt?new Ic(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ic(n.startAt.position,n.startAt.inclusive):null;return Ky(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function dh(n,e){const t=n.filters.concat([e]);return new Ks(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fh(n,e,t){return new Ks(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gc(n,e){return ep(hr(n),hr(e))&&n.limitType===e.limitType}function cT(n){return`${jh(hr(n))}|lt:${n.limitType}`}function ws(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>sT(i))).join(", ")}]`),qc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Bs(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Bs(i))).join(",")),`Target(${r})`})(hr(n))}; limitType=${n.limitType})`}function Hc(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):_e.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of ol(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(l,d,p){const m=$y(l,d,p);return l.inclusive?m<=0:m<0})(r.startAt,ol(r),i)||r.endAt&&!(function(l,d,p){const m=$y(l,d,p);return l.inclusive?m>=0:m>0})(r.endAt,ol(r),i))})(n,e)}function EP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dT(n){return(e,t)=>{let r=!1;for(const i of ol(n)){const a=TP(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function TP(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(a,l,d){const p=l.data.field(a),m=d.data.field(a);return p!==null&&m!==null?Os(p,m):Se()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ws(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return jE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=new at(_e.comparator);function zr(){return IP}const fT=new at(_e.comparator);function tl(...n){let e=fT;for(const t of n)e=e.insert(t.key,t);return e}function hT(n){let e=fT;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function go(){return sl()}function pT(){return sl()}function sl(){return new Js((n=>n.toString()),((n,e)=>n.isEqual(e)))}const wP=new at(_e.comparator),SP=new Ot(_e.comparator);function ke(...n){let e=SP;for(const t of n)e=e.add(t);return e}const CP=new Ot(Be);function AP(){return CP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function mT(n){return{integerValue:""+n}}function RP(n,e){return rP(e)?mT(e):tp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(){this._=void 0}}function PP(n,e,t){return n instanceof wc?(function(i,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Qh(a)&&(a=Xh(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}})(t,e):n instanceof yl?yT(n,e):n instanceof _l?_T(n,e):(function(i,a){const l=gT(i,a),d=Yy(l)+Yy(i.Pe);return lh(l)&&lh(i.Pe)?mT(d):tp(i.serializer,d)})(n,e)}function NP(n,e,t){return n instanceof yl?yT(n,e):n instanceof _l?_T(n,e):t}function gT(n,e){return n instanceof Sc?(function(r){return lh(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class wc extends zc{}class yl extends zc{constructor(e){super(),this.elements=e}}function yT(n,e){const t=vT(e);for(const r of n.elements)t.some((i=>mr(i,r)))||t.push(r);return{arrayValue:{values:t}}}class _l extends zc{constructor(e){super(),this.elements=e}}function _T(n,e){let t=vT(e);for(const r of n.elements)t=t.filter((i=>!mr(i,r)));return{arrayValue:{values:t}}}class Sc extends zc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Yy(n){return pt(n.integerValue||n.doubleValue)}function vT(n){return Zh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function xP(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof yl&&i instanceof yl||r instanceof _l&&i instanceof _l?bs(r.elements,i.elements,mr):r instanceof Sc&&i instanceof Sc?mr(r.Pe,i.Pe):r instanceof wc&&i instanceof wc})(n.transform,e.transform)}class kP{constructor(e,t){this.version=e,this.transformResults=t}}class Br{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class $c{}function ET(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new IT(n.key,Br.none()):new Rl(n.key,n.data,Br.none());{const t=n.data,r=Nn.empty();let i=new Ot(bt.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new Ro(n.key,r,new Yn(i.toArray()),Br.none())}}function DP(n,e,t){n instanceof Rl?(function(i,a,l){const d=i.value.clone(),p=Xy(i.fieldTransforms,a,l.transformResults);d.setAll(p),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ro?(function(i,a,l){if(!lc(i.precondition,a))return void a.convertToUnknownDocument(l.version);const d=Xy(i.fieldTransforms,a,l.transformResults),p=a.data;p.setAll(TT(i)),p.setAll(d),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()})(n,e,t):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function al(n,e,t,r){return n instanceof Rl?(function(a,l,d,p){if(!lc(a.precondition,l))return d;const m=a.value.clone(),y=Zy(a.fieldTransforms,p,l);return m.setAll(y),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ro?(function(a,l,d,p){if(!lc(a.precondition,l))return d;const m=Zy(a.fieldTransforms,p,l),y=l.data;return y.setAll(TT(a)),y.setAll(m),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,r):(function(a,l,d){return lc(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d})(n,e,t)}function MP(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=gT(r.transform,i||null);a!=null&&(t===null&&(t=Nn.empty()),t.set(r.field,a))}return t||null}function Qy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bs(r,i,((a,l)=>xP(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Rl extends $c{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ro extends $c{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function TT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Xy(n,e,t){const r=new Map;$e(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,NP(l,d,t[i]))}return r}function Zy(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,PP(a,l,e))}return r}class IT extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LP extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&DP(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=al(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=al(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=pT();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(i.key)?null:d;const p=ET(l,d);p!==null&&r.set(i.key,p),l.isValidDocument()||l.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ke())}isEqual(e){return this.batchId===e.batchId&&bs(this.mutations,e.mutations,((t,r)=>Qy(t,r)))&&bs(this.baseMutations,e.baseMutations,((t,r)=>Qy(t,r)))}}class np{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){$e(e.mutations.length===r.length);let i=(function(){return wP})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new np(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,Ue;function bP(n){switch(n){default:return Se();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function wT(n){if(n===void 0)return Hr("GRPC error has no .code"),Y.UNKNOWN;switch(n){case yt.OK:return Y.OK;case yt.CANCELLED:return Y.CANCELLED;case yt.UNKNOWN:return Y.UNKNOWN;case yt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case yt.INTERNAL:return Y.INTERNAL;case yt.UNAVAILABLE:return Y.UNAVAILABLE;case yt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case yt.NOT_FOUND:return Y.NOT_FOUND;case yt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case yt.ABORTED:return Y.ABORTED;case yt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case yt.DATA_LOSS:return Y.DATA_LOSS;default:return Se()}}(Ue=yt||(yt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=new yo([4294967295,4294967295],0);function jy(n){const e=OP().encode(n),t=new $E;return t.update(e),new Uint8Array(t.digest())}function e_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new yo([t,r],0),new yo([i,a],0)]}class rp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new nl(`Invalid padding: ${t}`);if(r<0)throw new nl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new nl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=yo.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(yo.fromNumber(r)));return i.compare(BP)===1&&(i=new yo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=jy(e),[r,i]=e_(t);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,i,a);if(!this.de(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new rp(a,i,t);return r.forEach((d=>l.insert(d))),l}insert(e){if(this.Ie===0)return;const t=jy(e),[r,i]=e_(t);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,i,a);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Pl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wc(Ce.min(),i,new at(Be),zr(),ke())}}class Pl{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Pl(r,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class ST{constructor(e,t){this.targetId=e,this.me=t}}class CT{constructor(e,t,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class t_{constructor(){this.fe=0,this.ge=r_(),this.pe=Bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),t=ke(),r=ke();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Se()}})),new Pl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=r_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class qP{constructor(e){this.Le=e,this.Be=new Map,this.ke=zr(),this.qe=n_(),this.Qe=new at(Be)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Se()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,i)=>{this.ze(i)&&t(i)}))}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const a=i.target;if(ch(a))if(r===0){const l=new _e(a.path);this.Ue(t,l,Kt.newNoDocument(l,Ce.min()))}else $e(r===1);else{const l=this.Ye(t);if(l!==r){const d=this.Ze(e),p=d?this.Xe(d,e,l):1;if(p!==0){this.je(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let l,d;try{l=wo(r).toUint8Array()}catch(p){if(p instanceof eT)return Fs("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new rp(l,i,a)}catch(p){return Fs(p instanceof nl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ie===0?null:d}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const l=this.Le.tt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,a,null),i++)})),i}rt(e){const t=new Map;this.Be.forEach(((a,l)=>{const d=this.Je(l);if(d){if(a.current&&ch(d.target)){const p=new _e(d.target.path);this.ke.get(p)!==null||this.it(l,p)||this.Ue(l,p,Kt.newNoDocument(p,e))}a.be&&(t.set(l,a.ve()),a.Ce())}}));let r=ke();this.qe.forEach(((a,l)=>{let d=!0;l.forEachWhile((p=>{const m=this.Je(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ke.forEach(((a,l)=>l.setReadTime(e)));const i=new Wc(e,t,this.Qe,this.ke,r);return this.ke=zr(),this.qe=n_(),this.Qe=new at(Be),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new t_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ot(Be),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new t_),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function n_(){return new at(_e.comparator)}function r_(){return new at(_e.comparator)}const GP={asc:"ASCENDING",desc:"DESCENDING"},HP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zP={and:"AND",or:"OR"};class $P{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hh(n,e){return n.useProto3Json||qc(e)?e:{value:e}}function Cc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function WP(n,e){return Cc(n,e.toTimestamp())}function pr(n){return $e(!!n),Ce.fromTimestamp((function(t){const r=Di(t);return new At(r.seconds,r.nanos)})(n))}function ip(n,e){return ph(n,e).canonicalString()}function ph(n,e){const t=(function(i){return new tt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function RT(n){const e=tt.fromString(n);return $e(DT(e)),e}function mh(n,e){return ip(n.databaseId,e.path)}function $f(n,e){const t=RT(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(NT(t))}function PT(n,e){return ip(n.databaseId,e)}function KP(n){const e=RT(n);return e.length===4?tt.emptyPath():NT(e)}function gh(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function NT(n){return $e(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function i_(n,e,t){return{name:mh(n,e),fields:t.value.mapValue.fields}}function JP(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Se()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(m,y){return m.useProto3Json?($e(y===void 0||typeof y=="string"),Bt.fromBase64String(y||"")):($e(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Bt.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&(function(m){const y=m.code===void 0?Y.UNKNOWN:wT(m.code);return new fe(y,m.message||"")})(l);t=new CT(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=$f(n,r.document.name),a=pr(r.document.updateTime),l=r.document.createTime?pr(r.document.createTime):Ce.min(),d=new Nn({mapValue:{fields:r.document.fields}}),p=Kt.newFoundDocument(i,a,l,d),m=r.targetIds||[],y=r.removedTargetIds||[];t=new uc(m,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=$f(n,r.document),a=r.readTime?pr(r.readTime):Ce.min(),l=Kt.newNoDocument(i,a),d=r.removedTargetIds||[];t=new uc([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=$f(n,r.document),a=r.removedTargetIds||[];t=new uc([],a,i,null)}else{if(!("filter"in e))return Se();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new FP(i,a),d=r.targetId;t=new ST(d,l)}}return t}function YP(n,e){let t;if(e instanceof Rl)t={update:i_(n,e.key,e.value)};else if(e instanceof IT)t={delete:mh(n,e.key)};else if(e instanceof Ro)t={update:i_(n,e.key,e.data),updateMask:iN(e.fieldMask)};else{if(!(e instanceof LP))return Se();t={verify:mh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const d=l.transform;if(d instanceof wc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof yl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof _l)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Sc)return{fieldPath:l.field.canonicalString(),increment:d.Pe};throw Se()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:WP(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Se()})(n,e.precondition)),t}function QP(n,e){return n&&n.length>0?($e(e!==void 0),n.map((t=>(function(i,a){let l=i.updateTime?pr(i.updateTime):pr(a);return l.isEqual(Ce.min())&&(l=pr(a)),new kP(l,i.transformResults||[])})(t,e)))):[]}function XP(n,e){return{documents:[PT(n,e.path)]}}function ZP(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=PT(n,i);const a=(function(m){if(m.length!==0)return kT(Zn.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(m){if(m.length!==0)return m.map((y=>(function(I){return{field:Ss(I.field),direction:tN(I.dir)}})(y)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=hh(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:t,parent:i}}function jP(n){let e=KP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){$e(r===1);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(T){const I=xT(T);return I instanceof Zn&&iT(I)?I.getFilters():[I]})(t.where));let l=[];t.orderBy&&(l=(function(T){return T.map((I=>(function(b){return new gl(Cs(b.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(I)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let I;return I=typeof T=="object"?T.value:T,qc(I)?null:I})(t.limit));let p=null;t.startAt&&(p=(function(T){const I=!!T.before,A=T.values||[];return new Ic(A,I)})(t.startAt));let m=null;return t.endAt&&(m=(function(T){const I=!T.before,A=T.values||[];return new Ic(A,I)})(t.endAt)),_P(e,i,l,a,d,"F",p,m)}function eN(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Cs(t.unaryFilter.field);return _t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Cs(t.unaryFilter.field);return _t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Cs(t.unaryFilter.field);return _t.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Cs(t.unaryFilter.field);return _t.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Se()}})(n):n.fieldFilter!==void 0?(function(t){return _t.create(Cs(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Zn.create(t.compositeFilter.filters.map((r=>xT(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Se()}})(t.compositeFilter.op))})(n):Se()}function tN(n){return GP[n]}function nN(n){return HP[n]}function rN(n){return zP[n]}function Ss(n){return{fieldPath:n.canonicalString()}}function Cs(n){return bt.fromServerFormat(n.fieldPath)}function kT(n){return n instanceof _t?(function(t){if(t.op==="=="){if(zy(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NAN"}};if(Hy(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zy(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NOT_NAN"}};if(Hy(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ss(t.field),op:nN(t.op),value:t.value}}})(n):n instanceof Zn?(function(t){const r=t.getFilters().map((i=>kT(i)));return r.length===1?r[0]:{compositeFilter:{op:rN(t.op),filters:r}}})(n):Se()}function iN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function DT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t,r,i,a=Ce.min(),l=Ce.min(),d=Bt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.ct=e}}function sN(n){const e=jP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(){this.un=new lN}addToCollectionParentIndex(e,t){return this.un.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(ki.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(ki.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class lN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ot(tt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ot(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new qs(0)}static kn(){return new qs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.changes=new Js((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&al(r.mutation,i,Yn.empty(),At.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ke()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ke()){const i=go();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let l=tl();return a.forEach(((d,p)=>{l=l.insert(d,p.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=go();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ke())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,d)=>{t.set(l,d)}))}))}computeViews(e,t,r,i){let a=zr();const l=sl(),d=(function(){return sl()})();return t.forEach(((p,m)=>{const y=r.get(m.key);i.has(m.key)&&(y===void 0||y.mutation instanceof Ro)?a=a.insert(m.key,m):y!==void 0?(l.set(m.key,y.mutation.getFieldMask()),al(y.mutation,m,y.mutation.getFieldMask(),At.now())):l.set(m.key,Yn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((m,y)=>l.set(m,y))),t.forEach(((m,y)=>{var T;return d.set(m,new cN(y,(T=l.get(m))!==null&&T!==void 0?T:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=sl();let i=new at(((l,d)=>l-d)),a=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const d of l)d.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let y=r.get(p)||Yn.empty();y=d.applyToLocalView(m,y),r.set(p,y);const T=(i.get(d.batchId)||ke()).add(p);i=i.insert(d.batchId,T)}))})).next((()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,y=p.value,T=pT();y.forEach((I=>{if(!a.has(I)){const A=ET(t.get(I),r.get(I));A!==null&&T.set(I,A),a=a.add(I)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,T))}return te.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(l){return _e.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):te.resolve(go());let d=-1,p=a;return l.next((m=>te.forEach(m,((y,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(y)?te.resolve():this.remoteDocumentCache.getEntry(e,y).next((I=>{p=p.insert(y,I)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,p,m,ke()))).next((y=>({batchId:d,changes:hT(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((r=>{let i=tl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let l=tl();return this.indexManager.getCollectionParents(e,a).next((d=>te.forEach(d,(p=>{const m=(function(T,I){return new Ks(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next((y=>{y.forEach(((T,I)=>{l=l.insert(T,I)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((l=>{a.forEach(((p,m)=>{const y=m.getKey();l.get(y)===null&&(l=l.insert(y,Kt.newInvalidDocument(y)))}));let d=tl();return l.forEach(((p,m)=>{const y=a.get(p);y!==void 0&&al(y.mutation,m,Yn.empty(),At.now()),Hc(t,m)&&(d=d.insert(p,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return te.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:pr(i.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(i){return{name:i.name,query:sN(i.bundledQuery),readTime:pr(i.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.overlays=new at(_e.comparator),this.Ir=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=go();return te.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.ht(e,t,a)})),te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const i=go(),a=t.length+1,l=new _e(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>r&&i.set(p.getKey(),p)}return te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new at(((m,y)=>m-y));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let y=a.get(m.largestBatchId);y===null&&(y=go(),a=a.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=go(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,y)=>d.set(m,y))),!(d.size()>=i)););return te.resolve(d)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new UP(t,r));let a=this.Ir.get(t);a===void 0&&(a=ke(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this.Tr=new Ot(Dt.Er),this.dr=new Ot(Dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Dt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new Dt(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new _e(new tt([])),r=new Dt(t,e),i=new Dt(t,e+1),a=[];return this.dr.forEachInRange([r,i],(l=>{this.Vr(l),a.push(l.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new _e(new tt([])),r=new Dt(t,e),i=new Dt(t,e+1);let a=ke();return this.dr.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Dt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Dt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return _e.comparator(e.key,t.key)||Be(e.wr,t.wr)}static Ar(e,t){return Be(e.wr,t.wr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ot(Dt.Er)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new VP(a,t,r,i);this.mutationQueue.push(l);for(const d of i)this.br=this.br.add(new Dt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,t){return te.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),a=i<0?0:i;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Dt(t,0),i=new Dt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],(l=>{const d=this.Dr(l.wr);a.push(d)})),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ot(Be);return t.forEach((i=>{const a=new Dt(i,0),l=new Dt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,l],(d=>{r=r.add(d.wr)}))})),te.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;_e.isDocumentKey(a)||(a=a.child(""));const l=new Dt(new _e(a),0);let d=new Ot(Be);return this.br.forEachWhile((p=>{const m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(d=d.add(p.wr)),!0)}),l),te.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){$e(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return te.forEach(t.mutations,(i=>{const a=new Dt(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new Dt(t,0),i=this.br.firstAfterOrEqual(r);return te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.Mr=e,this.docs=(function(){return new at(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():Kt.newInvalidDocument(t))}getEntries(e,t){let r=zr();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Kt.newInvalidDocument(i))})),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=zr();const l=t.path,d=new _e(l.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:y}}=p.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||jR(ZR(y),r)<=0||(i.has(y.key)||Hc(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Se()}Or(e,t){return te.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new yN(this)}getSize(e){return te.resolve(this.size)}}class yN extends uN{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),te.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.persistence=e,this.Nr=new Js((t=>jh(t)),ep),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new op,this.targetCount=0,this.kr=qs.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,i)=>t(i))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),te.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new qs(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Kn(t),te.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Nr.forEach(((l,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Nr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),te.waitFor(a).next((()=>i))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Yh(0),this.Kr=!1,this.Kr=!0,this.$r=new pN,this.referenceDelegate=e(this),this.Ur=new _N(this),this.indexManager=new aN,this.remoteDocumentCache=(function(i){return new gN(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new oN(t),this.Gr=new fN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new mN(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){me("MemoryPersistence","Starting transaction:",e);const i=new EN(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,t){return te.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class EN extends tP{constructor(e){super(),this.currentSequenceNumber=e}}class sp{constructor(e){this.persistence=e,this.Jr=new op,this.Yr=null}static Zr(e){return new sp(e)}get Xr(){if(this.Yr)return this.Yr;throw Se()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),te.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Xr,(r=>{const i=_e.fromPath(r);return this.ei(e,i).next((a=>{a||t.removeEntry(i,Ce.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return te.or([()=>te.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ke(),i=ke();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new ap(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return aS()?8:nP(Yt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.Yi(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.Zi(e,t,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new TN;return this.Xi(e,t,l).next((d=>{if(a.result=d,this.zi)return this.es(e,t,l,d.size)}))})).next((()=>a.result))}es(e,t,r,i){return r.documentReadCount<this.ji?(Ja()<=Me.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",ws(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),te.resolve()):(Ja()<=Me.DEBUG&&me("QueryEngine","Query:",ws(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ja()<=Me.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",ws(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(t))):te.resolve())}Yi(e,t){if(Jy(t))return te.resolve(null);let r=hr(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=fh(t,null,"F"),r=hr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=ke(...a);return this.Ji.getDocuments(e,l).next((d=>this.indexManager.getMinOffset(e,r).next((p=>{const m=this.ts(t,d);return this.ns(t,m,l,p.readTime)?this.Yi(e,fh(t,null,"F")):this.rs(e,m,t,p)}))))})))))}Zi(e,t,r,i){return Jy(t)||i.isEqual(Ce.min())?te.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const l=this.ts(t,a);return this.ns(t,l,r,i)?te.resolve(null):(Ja()<=Me.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ws(t)),this.rs(e,l,t,XR(i,-1)).next((d=>d)))}))}ts(e,t){let r=new Ot(dT(e));return t.forEach(((i,a)=>{Hc(e,a)&&(r=r.add(a))})),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,t,r){return Ja()<=Me.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",ws(t)),this.Ji.getDocumentsMatchingQuery(e,t,ki.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new at(Be),this._s=new Js((a=>jh(a)),ep),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function SN(n,e,t,r){return new wN(n,e,t,r)}async function MT(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],d=[];let p=ke();for(const m of i){l.push(m.batchId);for(const y of m.mutations)p=p.add(y.key)}for(const m of a){d.push(m.batchId);for(const y of m.mutations)p=p.add(y.key)}return t.localDocuments.getDocuments(r,p).next((m=>({hs:m,removedBatchIds:l,addedBatchIds:d})))}))}))}function CN(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return(function(d,p,m,y){const T=m.batch,I=T.keys();let A=te.resolve();return I.forEach((b=>{A=A.next((()=>y.getEntry(p,b))).next((B=>{const O=m.docVersions.get(b);$e(O!==null),B.version.compareTo(O)<0&&(T.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),y.addEntry(B)))}))})),A.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let p=ke();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function LT(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function AN(n,e){const t=Ae(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const d=[];e.targetChanges.forEach(((y,T)=>{const I=i.get(T);if(!I)return;d.push(t.Ur.removeMatchingKeys(a,y.removedDocuments,T).next((()=>t.Ur.addMatchingKeys(a,y.addedDocuments,T))));let A=I.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?A=A.withResumeToken(Bt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,r)),i=i.insert(T,A),(function(B,O,Q){return B.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(I,A,y)&&d.push(t.Ur.updateTargetData(a,A))}));let p=zr(),m=ke();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),d.push(RN(a,l,e.documentUpdates).next((y=>{p=y.Ps,m=y.Is}))),!r.isEqual(Ce.min())){const y=t.Ur.getLastRemoteSnapshotVersion(a).next((T=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(y)}return te.waitFor(d).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,m))).next((()=>p))})).then((a=>(t.os=i,a)))}function RN(n,e,t){let r=ke(),i=ke();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=zr();return t.forEach(((d,p)=>{const m=a.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(d,p.readTime),l=l.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),l=l.insert(d,p)):me("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)})),{Ps:l,Is:i}}))}function PN(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function NN(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Ur.getTargetData(r,e).next((a=>a?(i=a,te.resolve(i)):t.Ur.allocateTargetId(r).next((l=>(i=new Ci(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function yh(n,e,t){const r=Ae(n),i=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Al(l))throw l;me("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function o_(n,e,t){const r=Ae(n);let i=Ce.min(),a=ke();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(p,m,y){const T=Ae(p),I=T._s.get(y);return I!==void 0?te.resolve(T.os.get(I)):T.Ur.getTargetData(m,y)})(r,l,hr(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,d.targetId).next((p=>{a=p}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,t?i:Ce.min(),t?a:ke()))).next((d=>(xN(r,EP(e),d),{documents:d,Ts:a})))))}function xN(n,e,t){let r=n.us.get(e)||Ce.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.us.set(e,r)}class s_{constructor(){this.activeTargetIds=AP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kN{constructor(){this.so=new s_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new s_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zu=null;function Wf(){return Zu===null?Zu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zu++,"0x"+Zu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class VN extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(t,r,i,a,l){const d=Wf(),p=this.xo(t,r.toUriEncodedString());me("RestConnection",`Sending RPC '${t}' ${d}:`,p,i);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,l),this.No(t,p,m,i).then((y=>(me("RestConnection",`Received RPC '${t}' ${d}: `,y),y)),(y=>{throw Fs("RestConnection",`RPC '${t}' ${d} failed with error: `,y,"url: ",p,"request:",i),y}))}Lo(t,r,i,a,l,d){return this.Mo(t,r,i,a,l)}Oo(t,r,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$s})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,l)=>t[l]=a)),i&&i.headers.forEach(((a,l)=>t[l]=a))}xo(t,r){const i=MN[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const a=Wf();return new Promise(((l,d)=>{const p=new WE;p.setWithCredentials(!0),p.listenOnce(KE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case sc.NO_ERROR:const y=p.getResponseJson();me($t,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),l(y);break;case sc.TIMEOUT:me($t,`RPC '${e}' ${a} timed out`),d(new fe(Y.DEADLINE_EXCEEDED,"Request time out"));break;case sc.HTTP_ERROR:const T=p.getStatus();if(me($t,`RPC '${e}' ${a} failed with status:`,T,"response text:",p.getResponseText()),T>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const A=I==null?void 0:I.error;if(A&&A.status&&A.message){const b=(function(O){const Q=O.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(Q)>=0?Q:Y.UNKNOWN})(A.status);d(new fe(b,A.message))}else d(new fe(Y.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new fe(Y.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{me($t,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(i);me($t,`RPC '${e}' ${a} sending request:`,i),p.send(t,"POST",m,r,15)}))}Bo(e,t,r){const i=Wf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=QE(),d=YE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const y=a.join("");me($t,`Creating RPC '${e}' stream ${i}: ${y}`,p);const T=l.createWebChannel(y,p);let I=!1,A=!1;const b=new LN({Io:O=>{A?me($t,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(I||(me($t,`Opening RPC '${e}' stream ${i} transport.`),T.open(),I=!0),me($t,`RPC '${e}' stream ${i} sending:`,O),T.send(O))},To:()=>T.close()}),B=(O,Q,X)=>{O.listen(Q,(K=>{try{X(K)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return B(T,el.EventType.OPEN,(()=>{A||(me($t,`RPC '${e}' stream ${i} transport opened.`),b.yo())})),B(T,el.EventType.CLOSE,(()=>{A||(A=!0,me($t,`RPC '${e}' stream ${i} transport closed`),b.So())})),B(T,el.EventType.ERROR,(O=>{A||(A=!0,Fs($t,`RPC '${e}' stream ${i} transport errored:`,O),b.So(new fe(Y.UNAVAILABLE,"The operation could not be completed")))})),B(T,el.EventType.MESSAGE,(O=>{var Q;if(!A){const X=O.data[0];$e(!!X);const K=X,ee=K.error||((Q=K[0])===null||Q===void 0?void 0:Q.error);if(ee){me($t,`RPC '${e}' stream ${i} received error:`,ee);const le=ee.status;let oe=(function(R){const k=yt[R];if(k!==void 0)return wT(k)})(le),M=ee.message;oe===void 0&&(oe=Y.INTERNAL,M="Unknown error status: "+le+" with message "+ee.message),A=!0,b.So(new fe(oe,M)),T.close()}else me($t,`RPC '${e}' stream ${i} received:`,X),b.bo(X)}})),B(d,JE.STAT_EVENT,(O=>{O.stat===sh.PROXY?me($t,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===sh.NOPROXY&&me($t,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.wo()}),0),b}}function Kf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(n){return new $P(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,t,r,i,a,l,d,p){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new VT(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Hr(t.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===t&&this.P_(r,i)}),(r=>{e((()=>{const i=new fe(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class UN extends UT{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=JP(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ce.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ce.min():l.readTime?pr(l.readTime):Ce.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=gh(this.serializer),t.addTarget=(function(a,l){let d;const p=l.target;if(d=ch(p)?{documents:XP(a,p)}:{query:ZP(a,p)._t},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=AT(a,l.resumeToken);const m=hh(a,l.expectedCount);m!==null&&(d.expectedCount=m)}else if(l.snapshotVersion.compareTo(Ce.min())>0){d.readTime=Cc(a,l.snapshotVersion.toTimestamp());const m=hh(a,l.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=eN(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=gh(this.serializer),t.removeTarget=e,this.a_(t)}}class FN extends UT{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=QP(e.writeResults,e.commitTime),r=pr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=gh(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>YP(this.serializer,r)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new fe(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Mo(e,ph(t,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new fe(Y.UNKNOWN,a.toString())}))}Lo(e,t,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Lo(e,ph(t,r),i,l,d,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(Y.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class ON{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Hr(t),this.D_=!1):me("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((l=>{r.enqueueAndForget((async()=>{Po(this)&&(me("RemoteStore","Restarting streams for network reachability change."),await(async function(p){const m=Ae(p);m.L_.add(4),await Nl(m),m.q_.set("Unknown"),m.L_.delete(4),await Jc(m)})(this))}))})),this.q_=new ON(r,i)}}async function Jc(n){if(Po(n))for(const e of n.B_)await e(!0)}async function Nl(n){for(const e of n.B_)await e(!1)}function FT(n,e){const t=Ae(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),dp(t)?cp(t):Ys(t).r_()&&up(t,e))}function lp(n,e){const t=Ae(n),r=Ys(t);t.N_.delete(e),r.r_()&&bT(t,e),t.N_.size===0&&(r.r_()?r.o_():Po(t)&&t.q_.set("Unknown"))}function up(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ys(n).A_(e)}function bT(n,e){n.Q_.xe(e),Ys(n).R_(e)}function cp(n){n.Q_=new qP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ys(n).start(),n.q_.v_()}function dp(n){return Po(n)&&!Ys(n).n_()&&n.N_.size>0}function Po(n){return Ae(n).L_.size===0}function OT(n){n.Q_=void 0}async function qN(n){n.q_.set("Online")}async function GN(n){n.N_.forEach(((e,t)=>{up(n,e)}))}async function HN(n,e){OT(n),dp(n)?(n.q_.M_(e),cp(n)):n.q_.set("Unknown")}async function zN(n,e,t){if(n.q_.set("Online"),e instanceof CT&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const d of a.targetIds)i.N_.has(d)&&(await i.remoteSyncer.rejectListen(d,l),i.N_.delete(d),i.Q_.removeTarget(d))})(n,e)}catch(r){me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ac(n,r)}else if(e instanceof uc?n.Q_.Ke(e):e instanceof ST?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ce.min()))try{const r=await LT(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const d=a.Q_.rt(l);return d.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const y=a.N_.get(m);y&&a.N_.set(m,y.withResumeToken(p.resumeToken,l))}})),d.targetMismatches.forEach(((p,m)=>{const y=a.N_.get(p);if(!y)return;a.N_.set(p,y.withResumeToken(Bt.EMPTY_BYTE_STRING,y.snapshotVersion)),bT(a,p);const T=new Ci(y.target,p,m,y.sequenceNumber);up(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){me("RemoteStore","Failed to raise snapshot:",r),await Ac(n,r)}}async function Ac(n,e,t){if(!Al(e))throw e;n.L_.add(1),await Nl(n),n.q_.set("Offline"),t||(t=()=>LT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Jc(n)}))}function BT(n,e){return e().catch((t=>Ac(n,t,e)))}async function Yc(n){const e=Ae(n),t=Mi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$N(e);)try{const i=await PN(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,WN(e,i)}catch(i){await Ac(e,i)}qT(e)&&GT(e)}function $N(n){return Po(n)&&n.O_.length<10}function WN(n,e){n.O_.push(e);const t=Mi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function qT(n){return Po(n)&&!Mi(n).n_()&&n.O_.length>0}function GT(n){Mi(n).start()}async function KN(n){Mi(n).p_()}async function JN(n){const e=Mi(n);for(const t of n.O_)e.m_(t.mutations)}async function YN(n,e,t){const r=n.O_.shift(),i=np.from(r,e,t);await BT(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Yc(n)}async function QN(n,e){e&&Mi(n).V_&&await(async function(r,i){if((function(l){return bP(l)&&l!==Y.ABORTED})(i.code)){const a=r.O_.shift();Mi(r).s_(),await BT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Yc(r)}})(n,e),qT(n)&&GT(n)}async function l_(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const r=Po(t);t.L_.add(3),await Nl(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Jc(t)}async function XN(n,e){const t=Ae(n);e?(t.L_.delete(2),await Jc(t)):e||(t.L_.add(2),await Nl(t),t.q_.set("Unknown"))}function Ys(n){return n.K_||(n.K_=(function(t,r,i){const a=Ae(t);return a.w_(),new UN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Eo:qN.bind(null,n),Ro:GN.bind(null,n),mo:HN.bind(null,n),d_:zN.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),dp(n)?cp(n):n.q_.set("Unknown")):(await n.K_.stop(),OT(n))}))),n.K_}function Mi(n){return n.U_||(n.U_=(function(t,r,i){const a=Ae(t);return a.w_(),new FN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:KN.bind(null,n),mo:QN.bind(null,n),f_:JN.bind(null,n),g_:YN.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await Yc(n)):(await n.U_.stop(),n.O_.length>0&&(me("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,d=new fp(e,t,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hp(n,e){if(Hr("AsyncQueue",`${e}: ${n}`),Al(n))return new fe(Y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=tl(),this.sortedSet=new at(this.comparator)}static emptySet(e){return new Ds(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ds)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ds;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.W_=new at(_e.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Se():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Gs{constructor(e,t,r,i,a,l,d,p,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach((d=>{l.push({type:0,doc:d})})),new Gs(e,t,Ds.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class jN{constructor(){this.queries=c_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=Ae(t),a=i.queries;i.queries=c_(),a.forEach(((l,d)=>{for(const p of d.j_)p.onError(r)}))})(this,new fe(Y.ABORTED,"Firestore shutting down"))}}function c_(){return new Js((n=>cT(n)),Gc)}async function ex(n,e){const t=Ae(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new ZN,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(i,!0);break;case 1:a.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const d=hp(l,`Initialization of query '${ws(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&pp(t)}async function tx(n,e){const t=Ae(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const l=a.j_.indexOf(e);l>=0&&(a.j_.splice(l,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function nx(n,e){const t=Ae(n);let r=!1;for(const i of e){const a=i.query,l=t.queries.get(a);if(l){for(const d of l.j_)d.X_(i)&&(r=!0);l.z_=i}}r&&pp(t)}function rx(n,e,t){const r=Ae(n),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(t);r.queries.delete(e)}function pp(n){n.Y_.forEach((e=>{e.next()}))}var _h,d_;(d_=_h||(_h={})).ea="default",d_.Cache="cache";class ix{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Gs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Gs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_h.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.key=e}}class zT{constructor(e){this.key=e}}class ox{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ke(),this.mutatedKeys=ke(),this.Aa=dT(e),this.Ra=new Ds(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new u_,i=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,T)=>{const I=i.get(y),A=Hc(this.query,T)?T:null,b=!!I&&this.mutatedKeys.has(I.key),B=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let O=!1;I&&A?I.data.isEqual(A.data)?b!==B&&(r.track({type:3,doc:A}),O=!0):this.ga(I,A)||(r.track({type:2,doc:A}),O=!0,(p&&this.Aa(A,p)>0||m&&this.Aa(A,m)<0)&&(d=!0)):!I&&A?(r.track({type:0,doc:A}),O=!0):I&&!A&&(r.track({type:1,doc:I}),O=!0,(p||m)&&(d=!0)),O&&(A?(l=l.add(A),a=B?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{Ra:l,fa:r,ns:d,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((y,T)=>(function(A,b){const B=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return B(A)-B(b)})(y.type,T.type)||this.Aa(y.doc,T.doc))),this.pa(r),i=i!=null&&i;const d=t&&!i?this.ya():[],p=this.da.size===0&&this.current&&!i?1:0,m=p!==this.Ea;return this.Ea=p,l.length!==0||m?{snapshot:new Gs(this.query,e.Ra,a,l,e.mutatedKeys,p===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new u_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ke(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new zT(r))})),this.da.forEach((r=>{e.has(r)||t.push(new HT(r))})),t}ba(e){this.Ta=e.Ts,this.da=ke();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Gs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class sx{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ax{constructor(e){this.key=e,this.va=!1}}class lx{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Js((d=>cT(d)),Gc),this.Ma=new Map,this.xa=new Set,this.Oa=new at(_e.comparator),this.Na=new Map,this.La=new op,this.Ba={},this.ka=new Map,this.qa=qs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ux(n,e,t=!0){const r=QT(n);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await $T(r,e,t,!0),i}async function cx(n,e){const t=QT(n);await $T(t,e,!0,!1)}async function $T(n,e,t,r){const i=await NN(n.localStore,hr(e)),a=i.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await dx(n,e,a,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&FT(n.remoteStore,i),d}async function dx(n,e,t,r,i){n.Ka=(T,I,A)=>(async function(B,O,Q,X){let K=O.view.ma(Q);K.ns&&(K=await o_(B.localStore,O.query,!1).then((({documents:M})=>O.view.ma(M,K))));const ee=X&&X.targetChanges.get(O.targetId),le=X&&X.targetMismatches.get(O.targetId)!=null,oe=O.view.applyChanges(K,B.isPrimaryClient,ee,le);return h_(B,O.targetId,oe.wa),oe.snapshot})(n,T,I,A);const a=await o_(n.localStore,e,!0),l=new ox(e,a.Ts),d=l.ma(a.documents),p=Pl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=l.applyChanges(d,n.isPrimaryClient,p);h_(n,t,m.wa);const y=new sx(e,t,l);return n.Fa.set(e,y),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot}async function fx(n,e,t){const r=Ae(n),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter((l=>!Gc(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await yh(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&lp(r.remoteStore,i.targetId),vh(r,i.targetId)})).catch(Cl)):(vh(r,i.targetId),await yh(r.localStore,i.targetId,!0))}async function hx(n,e){const t=Ae(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),lp(t.remoteStore,r.targetId))}async function px(n,e,t){const r=Tx(n);try{const i=await(function(l,d){const p=Ae(l),m=At.now(),y=d.reduce(((A,b)=>A.add(b.key)),ke());let T,I;return p.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let b=zr(),B=ke();return p.cs.getEntries(A,y).next((O=>{b=O,b.forEach(((Q,X)=>{X.isValidDocument()||(B=B.add(Q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(A,b))).next((O=>{T=O;const Q=[];for(const X of d){const K=MP(X,T.get(X.key).overlayedDocument);K!=null&&Q.push(new Ro(X.key,K,tT(K.value.mapValue),Br.exists(!0)))}return p.mutationQueue.addMutationBatch(A,m,Q,d)})).next((O=>{I=O;const Q=O.applyToLocalDocumentSet(T,B);return p.documentOverlayCache.saveOverlays(A,O.batchId,Q)}))})).then((()=>({batchId:I.batchId,changes:hT(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,d,p){let m=l.Ba[l.currentUser.toKey()];m||(m=new at(Be)),m=m.insert(d,p),l.Ba[l.currentUser.toKey()]=m})(r,i.batchId,t),await xl(r,i.changes),await Yc(r.remoteStore)}catch(i){const a=hp(i,"Failed to persist write");t.reject(a)}}async function WT(n,e){const t=Ae(n);try{const r=await AN(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=t.Na.get(a);l&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.va=!0:i.modifiedDocuments.size>0?$e(l.va):i.removedDocuments.size>0&&($e(l.va),l.va=!1))})),await xl(t,r,e)}catch(r){await Cl(r)}}function f_(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach(((a,l)=>{const d=l.view.Z_(e);d.snapshot&&i.push(d.snapshot)})),(function(l,d){const p=Ae(l);p.onlineState=d;let m=!1;p.queries.forEach(((y,T)=>{for(const I of T.j_)I.Z_(d)&&(m=!0)})),m&&pp(p)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mx(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),a=i&&i.key;if(a){let l=new at(_e.comparator);l=l.insert(a,Kt.newNoDocument(a,Ce.min()));const d=ke().add(a),p=new Wc(Ce.min(),new Map,new at(Be),l,d);await WT(r,p),r.Oa=r.Oa.remove(a),r.Na.delete(e),mp(r)}else await yh(r.localStore,e,!1).then((()=>vh(r,e,t))).catch(Cl)}async function gx(n,e){const t=Ae(n),r=e.batch.batchId;try{const i=await CN(t.localStore,e);JT(t,r,null),KT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await xl(t,i)}catch(i){await Cl(i)}}async function yx(n,e,t){const r=Ae(n);try{const i=await(function(l,d){const p=Ae(l);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return p.mutationQueue.lookupMutationBatch(m,d).next((T=>($e(T!==null),y=T.keys(),p.mutationQueue.removeMutationBatch(m,T)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,y,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>p.localDocuments.getDocuments(m,y)))}))})(r.localStore,e);JT(r,e,t),KT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await xl(r,i)}catch(i){await Cl(i)}}function KT(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function JT(n,e,t){const r=Ae(n);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function vh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||YT(n,r)}))}function YT(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(lp(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),mp(n))}function h_(n,e,t){for(const r of t)r instanceof HT?(n.La.addReference(r.key,e),_x(n,r)):r instanceof zT?(me("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||YT(n,r.key)):Se()}function _x(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(me("SyncEngine","New document in limbo: "+t),n.xa.add(r),mp(n))}function mp(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new _e(tt.fromString(e)),r=n.qa.next();n.Na.set(r,new ax(t)),n.Oa=n.Oa.insert(t,r),FT(n.remoteStore,new Ci(hr(lT(t.path)),r,"TargetPurposeLimboResolution",Yh.oe))}}async function xl(n,e,t){const r=Ae(n),i=[],a=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((d,p)=>{l.push(r.Ka(p,e,t).then((m=>{var y;if((m||t)&&r.isPrimaryClient){const T=m?!m.fromCache:(y=t==null?void 0:t.targetChanges.get(p.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(m){i.push(m);const T=ap.Wi(p.targetId,m);a.push(T)}})))})),await Promise.all(l),r.Ca.d_(i),await(async function(p,m){const y=Ae(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>te.forEach(m,(I=>te.forEach(I.$i,(A=>y.persistence.referenceDelegate.addReference(T,I.targetId,A))).next((()=>te.forEach(I.Ui,(A=>y.persistence.referenceDelegate.removeReference(T,I.targetId,A)))))))))}catch(T){if(!Al(T))throw T;me("LocalStore","Failed to update sequence numbers: "+T)}for(const T of m){const I=T.targetId;if(!T.fromCache){const A=y.os.get(I),b=A.snapshotVersion,B=A.withLastLimboFreeSnapshotVersion(b);y.os=y.os.insert(I,B)}}})(r.localStore,a))}async function vx(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){me("SyncEngine","User change. New user:",e.toKey());const r=await MT(t.localStore,e);t.currentUser=e,(function(a,l){a.ka.forEach((d=>{d.forEach((p=>{p.reject(new fe(Y.CANCELLED,l))}))})),a.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xl(t,r.hs)}}function Ex(n,e){const t=Ae(n),r=t.Na.get(e);if(r&&r.va)return ke().add(r.key);{let i=ke();const a=t.Ma.get(e);if(!a)return i;for(const l of a){const d=t.Fa.get(l);i=i.unionWith(d.view.Va)}return i}}function QT(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ex.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mx.bind(null,e),e.Ca.d_=nx.bind(null,e.eventManager),e.Ca.$a=rx.bind(null,e.eventManager),e}function Tx(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yx.bind(null,e),e}class Rc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return SN(this.persistence,new IN,e.initialUser,this.serializer)}Ga(e){return new vN(sp.Zr,this.serializer)}Wa(e){return new kN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rc.provider={build:()=>new Rc};class Eh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>f_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vx.bind(null,this.syncEngine),await XN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new jN})()}createDatastore(e){const t=Kc(e.databaseInfo.databaseId),r=(function(a){return new VN(a)})(e.databaseInfo);return(function(a,l,d,p){return new bN(a,l,d,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,l,d){return new BN(r,i,a,l,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>f_(this.syncEngine,t,0)),(function(){return a_.D()?new a_:new DN})())}createSyncEngine(e,t){return(function(i,a,l,d,p,m,y){const T=new lx(i,a,l,d,p,m);return y&&(T.Qa=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const a=Ae(i);me("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Nl(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Eh.provider={build:()=>new Eh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Wt.UNAUTHENTICATED,this.clientId=ZE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{me("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(me("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=hp(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Jf(n,e){n.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await MT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function p_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Sx(n);me("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>l_(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>l_(e.remoteStore,i))),n._onlineComponents=e}async function Sx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Y.FAILED_PRECONDITION||i.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Fs("Error using user provided cache. Falling back to memory cache: "+t),await Jf(n,new Rc)}}else me("FirestoreClient","Using default OfflineComponentProvider"),await Jf(n,new Rc);return n._offlineComponents}async function XT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),await p_(n,n._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),await p_(n,new Eh))),n._onlineComponents}function Cx(n){return XT(n).then((e=>e.syncEngine))}async function Ax(n){const e=await XT(n),t=e.eventManager;return t.onListen=ux.bind(null,e.syncEngine),t.onUnlisten=fx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hx.bind(null,e.syncEngine),t}function Rx(n,e,t={}){const r=new Pi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,p,m){const y=new Ix({next:I=>{y.Za(),l.enqueueAndForget((()=>tx(a,T))),I.fromCache&&p.source==="server"?m.reject(new fe(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(I)},error:I=>m.reject(I)}),T=new ix(d,y,{includeMetadataChanges:!0,_a:!0});return ex(a,T)})(await Ax(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(n,e,t){if(!t)throw new fe(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Px(n,e,t,r){if(e===!0&&r===!0)throw new fe(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function g_(n){if(!_e.isDocumentKey(n))throw new fe(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function y_(n){if(_e.isDocumentKey(n))throw new fe(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Qc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se()}function Pc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qc(n);throw new fe(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Px("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new fe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new fe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new fe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xc{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new __({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new __(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new GR;switch(r.type){case"firstParty":return new WR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=m_.get(t);r&&(me("ComponentProvider","Removing Datastore"),m_.delete(t),r.terminate())})(this),Promise.resolve()}}function Nx(n,e,t,r={}){var i;const a=(n=Pc(n,Xc))._getSettings(),l=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==l&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=Wt.MOCK_USER;else{d=sE(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new fe(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Wt(m)}n._authCredentials=new HR(new XE(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new No(this.firestore,e,this._query)}}class xn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class Ni extends No{constructor(e,t,r){super(e,t,lT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new _e(e))}withConverter(e){return new Ni(this.firestore,e,this._path)}}function Zc(n,e,...t){if(n=vt(n),jT("collection","path",e),n instanceof Xc){const r=tt.fromString(e,...t);return y_(r),new Ni(n,null,r)}{if(!(n instanceof xn||n instanceof Ni))throw new fe(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tt.fromString(e,...t));return y_(r),new Ni(n.firestore,null,r)}}function xx(n,e,...t){if(n=vt(n),arguments.length===1&&(e=ZE.newId()),jT("doc","path",e),n instanceof Xc){const r=tt.fromString(e,...t);return g_(r),new xn(n,null,new _e(r))}{if(!(n instanceof xn||n instanceof Ni))throw new fe(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tt.fromString(e,...t));return g_(r),new xn(n.firestore,n instanceof Ni?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new VT(this,"async_queue_retry"),this.Vu=()=>{const r=Kf();r&&me("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Kf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Kf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Pi;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Al(e))throw e;me("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),d})(r);throw Hr("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=fp.createAndSchedule(this,e,t,r,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&Se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class gp extends Xc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new v_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new v_(e),this._firestoreClient=void 0,await e}}}function kx(n,e){const t=typeof n=="object"?n:Uh(),r=typeof n=="string"?n:"(default)",i=Fc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=rE("firestore");a&&Nx(i,...a)}return i}function eI(n){if(n._terminated)throw new fe(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Dx(n),n._firestoreClient}function Dx(n){var e,t,r;const i=n._freezeSettings(),a=(function(d,p,m,y){return new oP(d,p,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,ZT(y.experimentalLongPollingOptions),y.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new wx(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hs(Bt.fromBase64String(e))}catch(t){throw new fe(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hs(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=/^__.*__$/;class Lx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ro(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rl(e,this.data,t,this.fieldTransforms)}}function nI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class Ep{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ep(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Nc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nI(this.Cu)&&Mx.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Vx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Kc(e)}Qu(e,t,r,i=!1){return new Ep({Cu:e,methodName:t,qu:r,path:bt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rI(n){const e=n._freezeSettings(),t=Kc(n._databaseId);return new Vx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ux(n,e,t,r,i,a={}){const l=n.Qu(a.merge||a.mergeFields?2:0,e,t,i);sI("Data must be an object, but it was:",l,r);const d=iI(r,l);let p,m;if(a.merge)p=new Yn(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const T of a.mergeFields){const I=bx(e,T,t);if(!l.contains(I))throw new fe(Y.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Bx(y,I)||y.push(I)}p=new Yn(y),m=l.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,m=l.fieldTransforms;return new Lx(new Nn(d),p,m)}function Fx(n,e,t,r=!1){return Tp(t,n.Qu(r?4:3,e))}function Tp(n,e){if(oI(n=vt(n)))return sI("Unsupported field value:",e,n),iI(n,e);if(n instanceof tI)return(function(r,i){if(!nI(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const d of r){let p=Tp(d,i.Lu(l));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=At.fromDate(r);return{timestampValue:Cc(i.serializer,a)}}if(r instanceof At){const a=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cc(i.serializer,a)}}if(r instanceof _p)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hs)return{bytesValue:AT(i.serializer,r._byteString)};if(r instanceof xn){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ip(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof vp)return(function(l,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw d.Bu("VectorValues must only contain numeric values.");return tp(d.serializer,p)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${Qc(r)}`)})(n,e)}function iI(n,e){const t={};return jE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ws(n,((r,i)=>{const a=Tp(i,e.Mu(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function oI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof At||n instanceof _p||n instanceof Hs||n instanceof xn||n instanceof tI||n instanceof vp)}function sI(n,e,t){if(!oI(t)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(t)){const r=Qc(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function bx(n,e,t){if((e=vt(e))instanceof yp)return e._internalPath;if(typeof e=="string")return aI(n,e);throw Nc("Field path arguments must be of type string or ",n,!1,void 0,t)}const Ox=new RegExp("[~\\*/\\[\\]]");function aI(n,e,t){if(e.search(Ox)>=0)throw Nc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yp(...e.split("."))._internalPath}catch{throw Nc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nc(n,e,t,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||l)&&(p+=" (found",a&&(p+=` in field ${r}`),l&&(p+=` in document ${i}`),p+=")"),new fe(Y.INVALID_ARGUMENT,d+n+p)}function Bx(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class qx extends lI{data(){return super.data()}}function jc(n,e){return typeof e=="string"?aI(n,e):e instanceof yp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ip{}class uI extends Ip{}function cI(n,e,...t){let r=[];e instanceof Ip&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((p=>p instanceof wp)).length,d=a.filter((p=>p instanceof ed)).length;if(l>1||l>0&&d>0)throw new fe(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class ed extends uI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ed(e,t,r)}_apply(e){const t=this._parse(e);return hI(e._query,t),new No(e.firestore,e.converter,dh(e._query,t))}_parse(e){const t=rI(e.firestore);return(function(a,l,d,p,m,y,T){let I;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new fe(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){T_(T,y);const A=[];for(const b of T)A.push(E_(p,a,b));I={arrayValue:{values:A}}}else I=E_(p,a,T)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||T_(T,y),I=Fx(d,l,T,y==="in"||y==="not-in");return _t.create(m,y,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function dI(n,e,t){const r=e,i=jc("where",n);return ed._create(i,r,t)}class wp extends Ip{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wp(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Zn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let l=i;const d=a.getFlattenedFilters();for(const p of d)hI(l,p),l=dh(l,p)})(e._query,t),new No(e.firestore,e.converter,dh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sp extends uI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Sp(e,t)}_apply(e){const t=(function(i,a,l){if(i.startAt!==null)throw new fe(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new fe(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gl(a,l)})(e._query,this._field,this._direction);return new No(e.firestore,e.converter,(function(i,a){const l=i.explicitOrderBy.concat([a]);return new Ks(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function fI(n,e="asc"){const t=e,r=jc("orderBy",n);return Sp._create(r,t)}function E_(n,e,t){if(typeof(t=vt(t))=="string"){if(t==="")throw new fe(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uT(e)&&t.indexOf("/")!==-1)throw new fe(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tt.fromString(t));if(!_e.isDocumentKey(r))throw new fe(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gy(n,new _e(r))}if(t instanceof xn)return Gy(n,t._key);throw new fe(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qc(t)}.`)}function T_(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hI(n,e){const t=(function(i,a){for(const l of i)for(const d of l.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Hx{convertValue(e,t="none"){switch(So(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ws(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((l=>pt(l.doubleValue)));return new vp(a)}convertGeoPoint(e){return new _p(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){const t=Di(e);return new At(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tt.fromString(e);$e(DT(r));const i=new pl(r.get(1),r.get(3)),a=new _e(r.popFirst(5));return i.isEqual(t)||Hr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $x extends lI{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class cc extends $x{data(e={}){return super.data(e)}}class Wx{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ju(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new cc(this._firestore,this._userDataWriter,r.key,r,new ju(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((d=>{const p=new cc(i._firestore,i._userDataWriter,d.doc.key,d.doc,new ju(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new cc(i._firestore,i._userDataWriter,d.doc.key,d.doc,new ju(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,y=-1;return d.type!==0&&(m=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),y=l.indexOf(d.doc.key)),{type:Kx(d.type),doc:p,oldIndex:m,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}class Jx extends Hx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}function pI(n){n=Pc(n,No);const e=Pc(n.firestore,gp),t=eI(e),r=new Jx(e);return Gx(n._query),Rx(t,n._query).then((i=>new Wx(e,r,n,i)))}function mI(n,e){const t=Pc(n.firestore,gp),r=xx(n),i=zx(n.converter,e);return Yx(t,[Ux(rI(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Br.exists(!1))]).then((()=>r))}function Yx(n,e){return(function(r,i){const a=new Pi;return r.asyncQueue.enqueueAndForget((async()=>px(await Cx(r),i,a))),a.promise})(eI(n),e)}(function(e,t=!0){(function(i){$s=i})(Ao),vo(new xi("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),d=new gp(new zR(r.getProvider("auth-internal")),new JR(r.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new fe(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pl(m.options.projectId,y)})(l,i),l);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),dr(Fy,"4.7.3",e),dr(Fy,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="firebasestorage.googleapis.com",yI="storageBucket",Qx=120*1e3,Xx=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends gr{constructor(e,t,r=0){super(Yf(e),`Firebase Storage: ${t} (${Yf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ut;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ut||(ut={}));function Yf(n){return"storage/"+n}function Cp(){const n="An unknown error occurred, please check the error payload for server response.";return new dt(ut.UNKNOWN,n)}function Zx(n){return new dt(ut.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function jx(n){return new dt(ut.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ek(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(ut.UNAUTHENTICATED,n)}function tk(){return new dt(ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nk(n){return new dt(ut.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function rk(){return new dt(ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ik(){return new dt(ut.CANCELED,"User canceled the upload/download.")}function ok(n){return new dt(ut.INVALID_URL,"Invalid URL '"+n+"'.")}function sk(n){return new dt(ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function ak(){return new dt(ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yI+"' property when initializing the app?")}function lk(){return new dt(ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function uk(){return new dt(ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ck(n){return new dt(ut.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Th(n){return new dt(ut.INVALID_ARGUMENT,n)}function _I(){return new dt(ut.APP_DELETED,"The Firebase app was deleted.")}function dk(n){return new dt(ut.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ll(n,e){return new dt(ut.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ya(n){throw new dt(ut.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=_n.makeFromUrl(e,t)}catch{return new _n(e,"")}if(r.path==="")return r;throw sk(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(ee){ee.path.charAt(ee.path.length-1)==="/"&&(ee.path_=ee.path_.slice(0,-1))}const l="(/(.*))?$",d=new RegExp("^gs://"+i+l,"i"),p={bucket:1,path:3};function m(ee){ee.path_=decodeURIComponent(ee.path)}const y="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",A=new RegExp(`^https?://${T}/${y}/b/${i}/o${I}`,"i"),b={bucket:1,path:3},B=t===gI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",Q=new RegExp(`^https?://${B}/${i}/${O}`,"i"),K=[{regex:d,indices:p,postModify:a},{regex:A,indices:b,postModify:m},{regex:Q,indices:{bucket:1,path:2},postModify:m}];for(let ee=0;ee<K.length;ee++){const le=K[ee],oe=le.regex.exec(e);if(oe){const M=oe[le.indices.bucket];let P=oe[le.indices.path];P||(P=""),r=new _n(M,P),le.postModify(r);break}}if(r==null)throw ok(e);return r}}class fk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(n,e,t){let r=1,i=null,a=null,l=!1,d=0;function p(){return d===2}let m=!1;function y(...O){m||(m=!0,e.apply(null,O))}function T(O){i=setTimeout(()=>{i=null,n(A,p())},O)}function I(){a&&clearTimeout(a)}function A(O,...Q){if(m){I();return}if(O){I(),y.call(null,O,...Q);return}if(p()||l){I(),y.call(null,O,...Q);return}r<64&&(r*=2);let K;d===1?(d=2,K=0):K=(r+Math.random())*1e3,T(K)}let b=!1;function B(O){b||(b=!0,I(),!m&&(i!==null?(O||(d=2),clearTimeout(i),T(0)):O||(d=1)))}return T(0),a=setTimeout(()=>{l=!0,B(!0)},t),B}function pk(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(n){return n!==void 0}function gk(n){return typeof n=="object"&&!Array.isArray(n)}function Ap(n){return typeof n=="string"||n instanceof String}function I_(n){return Rp()&&n instanceof Blob}function Rp(){return typeof Blob<"u"}function w_(n,e,t,r){if(r<e)throw Th(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Th(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function vI(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var _o;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(_o||(_o={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t,r,i,a,l,d,p,m,y,T,I=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=T,this.retry=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,b)=>{this.resolve_=A,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ec(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{const p=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===_o.NO_ERROR,p=a.getStatus();if(!d||yk(p,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===_o.ABORT;r(!1,new ec(!1,null,y));return}const m=this.successCodes_.indexOf(p)!==-1;r(!0,new ec(m,a))})},t=(r,i)=>{const a=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());mk(p)?a(p):a()}catch(p){l(p)}else if(d!==null){const p=Cp();p.serverResponse=d.getErrorText(),this.errorCallback_?l(this.errorCallback_(d,p)):l(p)}else if(i.canceled){const p=this.appDelete_?_I():ik();l(p)}else{const p=rk();l(p)}};this.canceled_?t(!1,new ec(!1,null,!0)):this.backoffId_=hk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&pk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ec{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function vk(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Ek(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Tk(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Ik(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function wk(n,e,t,r,i,a,l=!0){const d=vI(n.urlParams),p=n.url+d,m=Object.assign({},n.headers);return Tk(m,e),vk(m,t),Ek(m,a),Ik(m,r),new _k(p,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Ck(...n){const e=Sk();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Rp())return new Blob(n);throw new dt(ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ak(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(n){if(typeof atob>"u")throw ck("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qf{constructor(e,t){this.data=e,this.contentType=t||null}}function EI(n,e){switch(n){case Qn.RAW:return new Qf(TI(e));case Qn.BASE64:case Qn.BASE64URL:return new Qf(II(n,e));case Qn.DATA_URL:return new Qf(Nk(e),xk(e))}throw Cp()}function TI(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,l=n.charCodeAt(++t);r=65536|(a&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Pk(n){let e;try{e=decodeURIComponent(n)}catch{throw ll(Qn.DATA_URL,"Malformed data URL.")}return TI(e)}function II(n,e){switch(n){case Qn.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw ll(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Qn.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw ll(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Rk(e)}catch(i){throw i.message.includes("polyfill")?i:ll(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class wI{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ll(Qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=kk(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Nk(n){const e=new wI(n);return e.base64?II(Qn.BASE64,e.rest):Pk(e.rest)}function xk(n){return new wI(n).contentType}function kk(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,t){let r=0,i="";I_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(I_(this.data_)){const r=this.data_,i=Ak(r,e,t);return i===null?null:new Si(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Si(r,!0)}}static getBlob(...e){if(Rp()){const t=e.map(r=>r instanceof Si?r.data_:r);return new Si(Ck.apply(null,t))}else{const t=e.map(l=>Ap(l)?EI(Qn.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[a++]=l[d]}),new Si(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(n){let e;try{e=JSON.parse(n)}catch{return null}return gk(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Mk(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function CI(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(n,e){return e}class en{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Lk}}let tc=null;function Vk(n){return!Ap(n)||n.length<2?n:CI(n)}function AI(){if(tc)return tc;const n=[];n.push(new en("bucket")),n.push(new en("generation")),n.push(new en("metageneration")),n.push(new en("name","fullPath",!0));function e(a,l){return Vk(l)}const t=new en("name");t.xform=e,n.push(t);function r(a,l){return l!==void 0?Number(l):l}const i=new en("size");return i.xform=r,n.push(i),n.push(new en("timeCreated")),n.push(new en("updated")),n.push(new en("md5Hash",null,!0)),n.push(new en("cacheControl",null,!0)),n.push(new en("contentDisposition",null,!0)),n.push(new en("contentEncoding",null,!0)),n.push(new en("contentLanguage",null,!0)),n.push(new en("contentType",null,!0)),n.push(new en("metadata","customMetadata",!0)),tc=n,tc}function Uk(n,e){function t(){const r=n.bucket,i=n.fullPath,a=new _n(r,i);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function Fk(n,e,t){const r={};r.type="file";const i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return Uk(r,n),r}function RI(n,e,t){const r=SI(e);return r===null?null:Fk(n,r,t)}function bk(n,e,t,r){const i=SI(e);if(i===null||!Ap(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(m=>{const y=n.bucket,T=n.fullPath,I="/b/"+l(y)+"/o/"+l(T),A=Pp(I,t,r),b=vI({alt:"media",token:m});return A+b})[0]}function Ok(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class PI{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(n){if(!n)throw Cp()}function Bk(n,e){function t(r,i){const a=RI(n,i,e);return NI(a!==null),a}return t}function qk(n,e){function t(r,i){const a=RI(n,i,e);return NI(a!==null),bk(a,i,n.host,n._protocol)}return t}function xI(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=tk():i=ek():t.getStatus()===402?i=jx(n.bucket):t.getStatus()===403?i=nk(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Gk(n){const e=xI(n);function t(r,i){let a=e(r,i);return r.getStatus()===404&&(a=Zx(n.path)),a.serverResponse=i.serverResponse,a}return t}function Hk(n,e,t){const r=e.fullServerUrl(),i=Pp(r,n.host,n._protocol),a="GET",l=n.maxOperationRetryTime,d=new PI(i,a,qk(n,t),l);return d.errorHandler=Gk(e),d}function zk(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function $k(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=zk(null,e)),r}function Wk(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function d(){let K="";for(let ee=0;ee<2;ee++)K=K+Math.random().toString().slice(2);return K}const p=d();l["Content-Type"]="multipart/related; boundary="+p;const m=$k(e,r,i),y=Ok(m,t),T="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+p+`\r
Content-Type: `+m.contentType+`\r
\r
`,I=`\r
--`+p+"--",A=Si.getBlob(T,r,I);if(A===null)throw lk();const b={name:m.fullPath},B=Pp(a,n.host,n._protocol),O="POST",Q=n.maxUploadRetryTime,X=new PI(B,O,Bk(n,t),Q);return X.urlParams=b,X.headers=l,X.body=A.uploadData(),X.errorHandler=xI(e),X}class Kk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_o.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_o.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_o.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ya("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ya("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ya("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ya("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ya("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Jk extends Kk{initXhr(){this.xhr_.responseType="text"}}function kI(){return new Jk}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this._service=e,t instanceof _n?this._location=t:this._location=_n.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Co(e,t)}get root(){const e=new _n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CI(this._location.path)}get storage(){return this._service}get parent(){const e=Dk(this._location.path);if(e===null)return null;const t=new _n(this._location.bucket,e);return new Co(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw dk(e)}}function Yk(n,e,t){n._throwIfRoot("uploadBytes");const r=Wk(n.storage,n._location,AI(),new Si(e,!0),t);return n.storage.makeRequestWithTokens(r,kI).then(i=>({metadata:i,ref:n}))}function Qk(n,e,t=Qn.RAW,r){n._throwIfRoot("uploadString");const i=EI(t,e),a=Object.assign({},r);return a.contentType==null&&i.contentType!=null&&(a.contentType=i.contentType),Yk(n,i.data,a)}function Xk(n){n._throwIfRoot("getDownloadURL");const e=Hk(n.storage,n._location,AI());return n.storage.makeRequestWithTokens(e,kI).then(t=>{if(t===null)throw uk();return t})}function Zk(n,e){const t=Mk(n._location.path,e),r=new _n(n._location.bucket,t);return new Co(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(n){return/^[A-Za-z]+:\/\//.test(n)}function eD(n,e){return new Co(n,e)}function DI(n,e){if(n instanceof Np){const t=n;if(t._bucket==null)throw ak();const r=new Co(t,t._bucket);return e!=null?DI(r,e):r}else return e!==void 0?Zk(n,e):n}function tD(n,e){if(e&&jk(e)){if(n instanceof Np)return eD(n,e);throw Th("To use ref(service, url), the first argument must be a Storage instance.")}else return DI(n,e)}function S_(n,e){const t=e==null?void 0:e[yI];return t==null?null:_n.makeFromBucketSpec(t,n)}function nD(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:sE(i,n.app.options.projectId))}class Np{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=gI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Qx,this._maxUploadRetryTime=Xx,this._requests=new Set,i!=null?this._bucket=_n.makeFromBucketSpec(i,this._host):this._bucket=S_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_n.makeFromBucketSpec(this._url,e):this._bucket=S_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){w_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){w_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Co(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new fk(_I());{const l=wk(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const C_="@firebase/storage",A_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="storage";function rD(n,e,t,r){return n=vt(n),Qk(n,e,t,r)}function iD(n){return n=vt(n),Xk(n)}function oD(n,e){return n=vt(n),tD(n,e)}function sD(n=Uh(),e){n=vt(n);const r=Fc(n,MI).getImmediate({identifier:e}),i=rE("storage");return i&&aD(r,...i),r}function aD(n,e,t,r={}){nD(n,e,t,r)}function lD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Np(t,r,i,e,Ao)}function uD(){vo(new xi(MI,lD,"PUBLIC").setMultipleInstances(!0)),dr(C_,A_,""),dr(C_,A_,"esm2017")}uD();const cD={apiKey:"AIzaSyBKSZaUmAnmgVGf8CPCRveLwkN8TFzeNuY",authDomain:"kidzyaiapp.firebaseapp.com",projectId:"kidzyaiapp",storageBucket:"kidzyaiapp.firebasestorage.app",messagingSenderId:"840750221854",appId:"1:840750221854:web:d10ce565505bfa68f6bc0f"},xp=uE(cD),kl=bR(xp),dD=new Vr,td=kx(xp),fD=sD(xp),kp=n=>{var e;return{id:n.uid,name:n.displayName||((e=n.email)==null?void 0:e.split("@")[0])||"User",email:n.email||"",avatarUrl:n.photoURL||`https://ui-avatars.com/api/?name=${n.email}&background=0ea5e9&color=fff`}},cF=async(n,e)=>{const t=await TA(kl,n,e);return kp(t.user)},dF=async(n,e,t)=>{const r=await EA(kl,e,t);return await wA(r.user,{displayName:n}),kp(r.user)},fF=async()=>{try{const n=await KA(kl,dD);return kp(n.user)}catch(n){throw console.error("Google Sign In Error",n),n}},LI=async()=>{await RA(kl)},hD=({setAppState:n,user:e,onLogout:t})=>{const[r,i]=We.useState(!1),a=({label:l,onClick:d,mobile:p=!1})=>N.jsx("button",{onClick:()=>{d(),i(!1)},className:`font-display font-bold transition ${p?"w-full text-left py-3 text-xl text-slate-800 border-b border-slate-100":"text-slate-600 hover:text-brand-600 text-base"}`,children:l});return N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-slate-50/90 backdrop-blur-md border-b border-slate-200 transition-all duration-300",children:N.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 h-24 flex items-center justify-between",children:[N.jsxs("div",{className:"flex items-center space-x-3 cursor-pointer group",onClick:()=>n(Re.LANDING),children:[N.jsx("div",{className:"bg-gradient-to-br from-brand-500 to-magic-500 text-white p-2.5 rounded-xl shadow-lg group-hover:rotate-12 transition transform",children:N.jsx(xw,{size:28,strokeWidth:2.5})}),N.jsxs("span",{className:"text-2xl md:text-3xl font-display font-bold text-slate-900 tracking-tight",children:["Kidzy",N.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-brand-500 to-magic-500",children:"Color"})]})]}),N.jsxs("nav",{className:"hidden md:flex items-center space-x-10",children:[N.jsx(a,{label:"How it Works",onClick:()=>n(Re.LANDING)}),N.jsx(a,{label:"Pricing",onClick:()=>n(Re.PRICING)}),N.jsx(a,{label:"Templates",onClick:()=>{}})]}),N.jsx("div",{className:"hidden md:flex items-center space-x-4",children:e?N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"flex items-center space-x-3 bg-white rounded-full pl-1.5 pr-4 py-1.5 border border-slate-200 shadow-sm hover:shadow-md transition",children:[N.jsx("img",{src:e.avatarUrl,alt:"avatar",className:"w-10 h-10 rounded-full border-2 border-slate-100 cursor-pointer",onClick:()=>n(Re.DASHBOARD)}),N.jsxs("div",{className:"flex flex-col leading-tight cursor-pointer",onClick:()=>n(Re.DASHBOARD),children:[N.jsx("span",{className:"text-sm font-bold text-slate-800",children:e.name.split(" ")[0]}),N.jsx("span",{className:"text-[10px] uppercase tracking-wider text-brand-600 font-bold",children:"My Library"})]}),N.jsx("button",{onClick:t,className:"ml-2 text-slate-400 hover:text-red-500 transition p-1.5 hover:bg-slate-100 rounded-full",title:"Log Out",children:N.jsx(Ow,{size:16})})]}),N.jsxs("button",{onClick:()=>n(Re.CONFIG),className:"bg-slate-900 hover:bg-brand-600 text-white px-6 py-3 rounded-full font-bold shadow-lg shadow-brand-900/20 transition-all transform hover:scale-105 flex items-center space-x-2 text-sm",children:[N.jsx("span",{children:"Start Creating"}),N.jsx(Fw,{size:16,className:"text-yellow-300"})]})]}):N.jsx("div",{className:"flex items-center space-x-3",children:N.jsx("button",{onClick:()=>n(Re.LOGIN),className:"text-slate-600 font-bold px-5 py-2.5 hover:bg-slate-100 rounded-full transition text-sm",children:"Log In"})})}),N.jsx("button",{className:"md:hidden p-2 text-slate-800 hover:bg-slate-100 rounded-lg transition",onClick:()=>i(!r),children:r?N.jsx($w,{size:28}):N.jsx(Bw,{size:28})})]})}),r&&N.jsx("div",{className:"fixed inset-0 z-[90] bg-white/95 backdrop-blur-xl pt-28 px-6 animate-fade-in md:hidden",children:N.jsxs("div",{className:"flex flex-col space-y-2",children:[N.jsx(a,{label:"Home",onClick:()=>n(Re.LANDING),mobile:!0}),N.jsx(a,{label:"How it Works",onClick:()=>n(Re.LANDING),mobile:!0}),N.jsx(a,{label:"Pricing",onClick:()=>n(Re.PRICING),mobile:!0}),N.jsx("div",{className:"pt-8 space-y-4",children:e?N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"flex items-center space-x-4 mb-4 bg-slate-50 p-4 rounded-2xl",children:[N.jsx("img",{src:e.avatarUrl,className:"w-12 h-12 rounded-full"}),N.jsxs("div",{children:[N.jsx("p",{className:"font-bold text-xl",children:e.name}),N.jsx("button",{onClick:()=>n(Re.DASHBOARD),className:"text-brand-600 text-sm font-bold",children:"Go to Dashboard"})]})]}),N.jsx("button",{onClick:()=>{n(Re.CONFIG),i(!1)},className:"w-full bg-brand-600 text-white font-bold py-4 rounded-2xl shadow-xl shadow-brand-200",children:"Create Story"}),N.jsx("button",{onClick:()=>{LI(),t(),i(!1)},className:"w-full bg-slate-100 text-slate-700 font-bold py-4 rounded-2xl",children:"Log Out"})]}):N.jsx(N.Fragment,{children:N.jsx("button",{onClick:()=>{n(Re.LOGIN),i(!1)},className:"w-full bg-white border-2 border-slate-200 text-slate-800 font-bold py-4 rounded-2xl",children:"Log In"})})})]})})]})},pD=({onStart:n,user:e})=>{const t=Object.values(Aw).flat(),r=We.useRef(null),[i,a]=We.useState(null);We.useEffect(()=>(r.current=new IntersectionObserver(y=>{y.forEach(T=>{T.isIntersecting&&T.target.classList.add("is-visible")})},{threshold:.1}),document.querySelectorAll(".reveal-on-scroll").forEach(y=>{var T;return(T=r.current)==null?void 0:T.observe(y)}),()=>{var y;return(y=r.current)==null?void 0:y.disconnect()}),[]);const l=m=>{a(i===m?null:m)},d=[{q:"Is my child's photo safe?",a:"Absolutely. We take privacy seriously. Photos are processed securely by our AI engine solely to generate your story and are deleted from our processing servers within 24 hours. We are a compliant SaaS provider under Wayne Creative Alliance Pvt Ltd."},{q:"Can I print the coloring books?",a:"Yes! Our Premium Digital Pack (99) gives you a high-resolution PDF specifically designed for printing on standard A4 paper at home or your local print shop."},{q:"What kind of photo should I upload?",a:"A clear, front-facing photo works best. Avoid sunglasses, heavy shadows, or photos where the face is obstructed. Our AI is smart, but a good input ensures the best likeness!"},{q:"Do I need a subscription?",a:"No! You can pay per story (99). However, if you want to create many stories, our Kidzy Club subscription offers unlimited access at a huge discount."}],p=[{name:"Priya S.",role:"Mom of 2",text:"My 5-year-old hates taking photos but loves Spiderman. When he saw himself as a superhero in a coloring book, he actually screamed with joy! Best 99 I've ever spent.",avatar:"https://ui-avatars.com/api/?name=Priya+S&background=fce7f3&color=db2777"},{name:"Rahul M.",role:"Dad & Engineer",text:"I was skeptical about the 'likeness' claims, but it actually looks like my daughter. Saved me a fortune on a professional photoshoot for her birthday invites.",avatar:"https://ui-avatars.com/api/?name=Rahul+M&background=dbeafe&color=2563eb"},{name:"Sarah J.",role:"Teacher",text:"Used this for my kindergarten class 'Student of the Week'. The parents went absolutely crazy for it. It's such a unique, personalized gift.",avatar:"https://ui-avatars.com/api/?name=Sarah+J&background=dcfce7&color=16a34a"}];return N.jsxs("div",{className:"relative w-full overflow-hidden bg-slate-50",children:[N.jsxs("div",{className:"relative min-h-[85vh] md:min-h-screen pt-24 md:pt-32 pb-8 md:pb-12 flex flex-col justify-center",style:{backgroundImage:"linear-gradient(to bottom, rgba(248, 250, 252, 0.9), rgba(248, 250, 252, 0.9)), url('/images/bg_1.jpg')",backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[N.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 pointer-events-none",children:[N.jsx("div",{className:"absolute -top-[10%] -left-[10%] w-[80vw] h-[80vw] bg-brand-200/30 rounded-full blur-3xl animate-pulse-slow"}),N.jsx("div",{className:"absolute top-[20%] -right-[10%] w-[60vw] h-[60vw] bg-magic-200/30 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"1s"}}),N.jsx("div",{className:"absolute bottom-0 left-[20%] w-[50vw] h-[50vw] bg-joy-200/30 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"2s"}})]}),N.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 w-full relative z-10 grid lg:grid-cols-2 gap-8 lg:gap-16 items-center",children:[N.jsxs("div",{className:"text-center lg:text-left reveal-on-scroll",children:[N.jsxs("div",{className:"inline-flex items-center space-x-2 bg-white border border-slate-200 rounded-full px-3 py-1 mb-4 md:mb-8 shadow-sm animate-float scale-90 md:scale-100",children:[N.jsx("span",{className:"flex h-2 w-2 rounded-full bg-magic-500 animate-pulse"}),N.jsx("span",{className:"text-[10px] md:text-xs font-bold text-slate-600 uppercase tracking-widest",children:"AI Storyteller for Kids"})]}),N.jsxs("h1",{className:"text-3xl sm:text-5xl md:text-7xl font-display font-bold text-slate-900 leading-tight md:leading-[1.1] mb-4 md:mb-6",children:["Turn ",N.jsxs("span",{className:"relative inline-block",children:[N.jsx("span",{className:"relative z-10 text-transparent bg-clip-text bg-gradient-to-r from-brand-600 to-magic-500",children:"Photos"}),N.jsx("svg",{className:"absolute -bottom-1 md:-bottom-2 left-0 w-full h-2 md:h-3 text-joy-400 z-0",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:N.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),N.jsx("br",{}),"into Adventures."]}),N.jsx("p",{className:"text-base md:text-xl text-slate-600 mb-6 md:mb-10 leading-relaxed max-w-lg mx-auto lg:mx-0 px-2 md:px-0",children:"Upload a photo and watch as we transform your child into an Astronaut, a Wizard, or a Superhero in their very own coloring book!"}),N.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4",children:[N.jsxs("button",{onClick:n,className:"w-full sm:w-auto bg-gradient-to-r from-brand-600 to-magic-500 hover:from-brand-700 hover:to-magic-600 text-white text-lg md:text-xl px-8 py-3 md:py-5 rounded-full font-bold shadow-xl hover:shadow-2xl hover:shadow-brand-500/30 transition-all transform hover:-translate-y-1 flex items-center justify-center space-x-3 group relative overflow-hidden",children:[N.jsx("div",{className:"absolute inset-0 bg-white/20 group-hover:translate-x-full transition-transform duration-700 ease-in-out -skew-x-12 -translate-x-full"}),N.jsx(kw,{size:20,className:"text-white md:w-7 md:h-7 group-hover:rotate-12 transition-transform"}),N.jsx("span",{className:"relative",children:"Upload a Pic"})]}),N.jsxs("button",{onClick:()=>{var m;return(m=document.getElementById("how-it-works"))==null?void 0:m.scrollIntoView({behavior:"smooth"})},className:"w-full sm:w-auto text-slate-500 hover:text-slate-800 font-bold text-sm md:text-base px-6 py-3 rounded-full hover:bg-slate-100 transition-all flex items-center justify-center space-x-2",children:[N.jsx(Vw,{size:18,className:"md:w-5 md:h-5"}),N.jsx("span",{children:"See How It Works"})]})]}),N.jsxs("div",{className:"mt-6 md:mt-10 flex items-center justify-center lg:justify-start space-x-4 md:space-x-6 text-xs md:text-sm font-bold text-slate-400",children:[N.jsxs("span",{className:"flex items-center",children:[N.jsx(iy,{size:14,className:"text-joy-400 mr-1.5 md:mr-2",fill:"currentColor"})," 4.9/5 Rating"]}),N.jsxs("span",{className:"flex items-center",children:[N.jsx(bw,{size:14,className:"text-magic-400 mr-1.5 md:mr-2",fill:"currentColor"})," 10k+ Stories"]})]})]}),N.jsxs("div",{className:"relative mt-8 lg:mt-0 reveal-on-scroll",style:{transitionDelay:"0.2s"},children:[N.jsxs("div",{className:"relative z-10 grid grid-cols-2 gap-3 md:gap-4 transform md:rotate-[-3deg] hover:rotate-0 transition duration-700 ease-out",children:[N.jsx("div",{className:"bg-white p-2 md:p-3 rounded-2xl md:rounded-3xl shadow-xl md:shadow-2xl transform translate-y-4 md:translate-y-8",children:N.jsxs("div",{className:"aspect-[3/4] rounded-xl md:rounded-2xl overflow-hidden relative",children:[N.jsx("img",{src:"/images/before.jpg",alt:"Child",className:"w-full h-full object-cover"}),N.jsx("div",{className:"absolute bottom-2 left-2 md:bottom-3 md:left-3 bg-white/90 backdrop-blur px-2 py-1 md:px-3 rounded-full text-[10px] md:text-xs font-bold text-slate-800 shadow-lg",children:"Original"})]})}),N.jsx("div",{className:"bg-gradient-to-br from-brand-500 to-magic-500 p-1 rounded-2xl md:rounded-3xl shadow-xl md:shadow-2xl transform -translate-y-4 md:-translate-y-8",children:N.jsx("div",{className:"bg-white p-1.5 md:p-2 rounded-[18px] md:rounded-[22px] h-full",children:N.jsxs("div",{className:"aspect-[3/4] rounded-lg md:rounded-xl overflow-hidden relative border-2 border-slate-100",children:[N.jsx("img",{src:"/images/after.png",alt:"Generated",className:"w-full h-full object-cover "}),N.jsxs("div",{className:"absolute bottom-2 right-2 md:bottom-3 md:right-3 bg-brand-600 text-white px-2 py-1 md:px-3 rounded-full text-[10px] md:text-xs font-bold shadow-lg flex items-center",children:[N.jsx(Hw,{size:10,className:"mr-1 text-yellow-300 md:w-3 md:h-3"})," Coloring Page"]})]})})})]}),N.jsx("div",{className:"absolute -top-4 -right-4 md:-top-10 md:-right-10 bg-white p-2 md:p-4 rounded-xl md:rounded-2xl shadow-xl animate-float",style:{animationDelay:"1s"},children:N.jsx(Ww,{size:24,className:"text-joy-500 fill-current md:w-8 md:h-8"})}),N.jsx("div",{className:"absolute bottom-0 -left-4 md:-left-10 bg-white p-2 md:p-4 rounded-xl md:rounded-2xl shadow-xl animate-float",style:{animationDelay:"2s"},children:N.jsx("div",{className:"text-2xl md:text-4xl",children:""})})]})]})]}),N.jsxs("div",{className:"py-8 md:py-12 bg-white border-y border-slate-100 overflow-hidden relative reveal-on-scroll",children:[N.jsx("div",{className:"max-w-7xl mx-auto px-4 mb-6 md:mb-8 text-center",children:N.jsxs("h2",{className:"text-xl md:text-2xl font-display font-bold text-slate-900",children:["Choose from ",N.jsx("span",{className:"text-brand-600",children:"50+ Magical Themes"})]})}),N.jsx("div",{className:"flex w-[200%] animate-scroll",children:[...t,...t].map((m,y)=>N.jsx("div",{className:"flex-shrink-0 mx-2 md:mx-3",children:N.jsxs("div",{className:"bg-slate-50 border border-slate-100 px-4 py-2 md:px-6 md:py-3 rounded-full flex items-center space-x-2 md:space-x-3 shadow-sm whitespace-nowrap",children:[N.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 rounded-full bg-gradient-to-br from-brand-100 to-magic-100 flex items-center justify-center text-sm md:text-lg",children:""}),N.jsx("span",{className:"font-bold text-slate-700 text-xs md:text-sm",children:m})]})},y))}),N.jsx("div",{className:"absolute top-0 left-0 w-16 md:w-32 h-full bg-gradient-to-r from-white to-transparent z-10"}),N.jsx("div",{className:"absolute top-0 right-0 w-16 md:w-32 h-full bg-gradient-to-l from-white to-transparent z-10"})]}),N.jsx("div",{id:"how-it-works",className:"py-16 md:py-24 bg-slate-50",children:N.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[N.jsxs("div",{className:"text-center mb-12 md:mb-16 reveal-on-scroll",children:[N.jsx("span",{className:"text-brand-600 font-bold tracking-wider uppercase text-xs md:text-sm",children:"How it Works"}),N.jsx("h2",{className:"text-3xl md:text-5xl font-display font-bold text-slate-900 mt-2",children:"Simple as 1, 2, 3 Magic!"})]}),N.jsxs("div",{className:"grid grid-cols-3 gap-2 md:gap-6",children:[N.jsxs("div",{className:"bg-white rounded-xl md:rounded-[2rem] p-2 md:p-8 shadow-lg shadow-slate-200/50 border border-slate-100 hover:-translate-y-2 transition duration-500 reveal-on-scroll flex flex-col items-center text-center",style:{transitionDelay:"0.1s"},children:[N.jsx("div",{className:"w-8 h-8 md:w-16 md:h-16 bg-blue-100 rounded-lg md:rounded-2xl flex items-center justify-center mb-2 md:mb-6 text-blue-600",children:N.jsx(zw,{size:14,className:"md:w-8 md:h-8"})}),N.jsx("h3",{className:"text-xs md:text-2xl font-bold text-slate-900 mb-1 md:mb-4",children:"1. Upload"}),N.jsx("p",{className:"text-[10px] md:text-base text-slate-600 leading-tight md:leading-relaxed hidden sm:block",children:'Our smart "Likeness Engine" scans your photo to understand facial features.'})]}),N.jsxs("div",{className:"bg-slate-900 rounded-xl md:rounded-[2rem] p-2 md:p-8 shadow-lg shadow-slate-900/20 text-white relative overflow-hidden hover:-translate-y-2 transition duration-500 reveal-on-scroll flex flex-col items-center text-center",style:{transitionDelay:"0.2s"},children:[N.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-500/20 rounded-full blur-3xl -mr-16 -mt-16"}),N.jsx("div",{className:"w-8 h-8 md:w-16 md:h-16 bg-white/10 backdrop-blur rounded-lg md:rounded-2xl flex items-center justify-center mb-2 md:mb-6 text-yellow-300 relative z-10",children:N.jsx(sy,{size:14,className:"md:w-8 md:h-8"})}),N.jsx("h3",{className:"text-xs md:text-2xl font-bold mb-1 md:mb-4 relative z-10",children:"2. Theme"}),N.jsx("p",{className:"text-[10px] md:text-base text-slate-300 leading-tight md:leading-relaxed relative z-10 hidden sm:block",children:"Pick from Space, Dinosaurs, Princesses, and more."})]}),N.jsxs("div",{className:"bg-white rounded-xl md:rounded-[2rem] p-2 md:p-8 shadow-lg shadow-slate-200/50 border border-slate-100 hover:-translate-y-2 transition duration-500 reveal-on-scroll flex flex-col items-center text-center",style:{transitionDelay:"0.3s"},children:[N.jsx("div",{className:"w-8 h-8 md:w-16 md:h-16 bg-green-100 rounded-lg md:rounded-2xl flex items-center justify-center mb-2 md:mb-6 text-green-600",children:N.jsx(qw,{size:14,className:"md:w-8 md:h-8"})}),N.jsx("h3",{className:"text-xs md:text-2xl font-bold text-slate-900 mb-1 md:mb-4",children:"3. Color"}),N.jsx("p",{className:"text-[10px] md:text-base text-slate-600 leading-tight md:leading-relaxed hidden sm:block",children:"Get a high-quality PDF storybook or order a hardcover keepsake."})]})]})]})}),N.jsxs("div",{className:"py-12 md:py-24 bg-white relative overflow-hidden",children:[N.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 md:w-96 md:h-96 bg-brand-50 rounded-full blur-3xl -mr-10 -mt-10 pointer-events-none"}),N.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 relative z-10",children:[N.jsxs("div",{className:"text-center mb-8 md:mb-16 reveal-on-scroll",children:[N.jsx("span",{className:"text-brand-600 font-bold tracking-wider uppercase text-[10px] md:text-sm",children:"Why Parents Love Us"}),N.jsx("h2",{className:"text-2xl md:text-5xl font-display font-bold text-slate-900 mt-1 md:mt-2",children:"Skip the Studio Struggle"})]}),N.jsxs("div",{className:"grid md:grid-cols-2 gap-4 md:gap-8 items-center reveal-on-scroll",children:[N.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-2xl md:rounded-3xl p-5 md:p-10 grayscale-[0.8] opacity-80 hover:grayscale-0 hover:opacity-100 transition duration-500",children:[N.jsxs("h3",{className:"text-lg md:text-2xl font-bold text-slate-600 mb-4 md:mb-6 flex items-center",children:[N.jsx(Uw,{className:"mr-2 md:mr-3 text-slate-400 w-5 h-5 md:w-auto md:h-auto"})," Traditional Shoot"]}),N.jsxs("ul",{className:"space-y-3 md:space-y-4",children:[N.jsxs("li",{className:"flex items-center text-slate-500 text-sm md:text-base",children:[N.jsx(oy,{className:"mr-2 md:mr-3 w-4 h-4 md:w-5 md:h-5"})," Expensive (15,000+)"]}),N.jsxs("li",{className:"flex items-center text-slate-500 text-sm md:text-base",children:[N.jsx(ny,{className:"mr-2 md:mr-3 w-4 h-4 md:w-5 md:h-5"})," Takes hours (travel + shoot)"]}),N.jsxs("li",{className:"flex items-center text-slate-500 text-sm md:text-base",children:[N.jsx(ry,{className:"mr-2 md:mr-3 w-4 h-4 md:w-5 md:h-5"})," Buying/Renting costly costumes"]})]})]}),N.jsxs("div",{className:"bg-gradient-to-br from-brand-500 to-purple-600 text-white rounded-2xl md:rounded-3xl p-5 md:p-10 shadow-2xl shadow-brand-500/20 transform md:scale-105 relative",children:[N.jsx("div",{className:"absolute top-0 right-0 bg-yellow-400 text-yellow-900 text-[10px] md:text-xs font-bold px-2 py-0.5 md:px-3 md:py-1 rounded-bl-xl rounded-tr-xl md:rounded-tr-3xl",children:"WINNER"}),N.jsxs("h3",{className:"text-lg md:text-2xl font-bold mb-4 md:mb-6 flex items-center",children:[N.jsx(Lw,{className:"mr-2 md:mr-3 text-yellow-300 w-5 h-5 md:w-auto md:h-auto"})," KidzyColor Magic"]}),N.jsxs("ul",{className:"space-y-3 md:space-y-4 font-medium",children:[N.jsxs("li",{className:"flex items-center text-sm md:text-base",children:[N.jsx(oy,{className:"mr-2 md:mr-3 w-4 h-4 md:w-5 md:h-5 text-brand-200"})," Affordable (Free to try)"]}),N.jsxs("li",{className:"flex items-center text-sm md:text-base",children:[N.jsx(ny,{className:"mr-2 md:mr-3 w-4 h-4 md:w-5 md:h-5 text-brand-200"})," Ready in seconds from home"]}),N.jsxs("li",{className:"flex items-center text-sm md:text-base",children:[N.jsx(ry,{className:"mr-2 md:mr-3 w-4 h-4 md:w-5 md:h-5 text-brand-200"})," Any costume you can imagine"]})]})]})]})]})]}),N.jsx("div",{className:"py-12 md:py-24 bg-slate-50",children:N.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[N.jsxs("div",{className:"text-center mb-8 md:mb-12 reveal-on-scroll",children:[N.jsx("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[1,2,3,4,5].map(m=>N.jsx(iy,{size:14,className:"fill-yellow-400 text-yellow-400 md:w-4 md:h-4"},m))}),N.jsx("h2",{className:"text-2xl md:text-5xl font-display font-bold text-slate-900",children:"Loved by 10,000+ Parents"})]}),N.jsx("div",{className:"flex md:grid md:grid-cols-3 gap-4 md:gap-6 overflow-x-auto snap-x snap-mandatory pb-6 md:pb-0 -mx-4 px-4 md:mx-0 md:px-0 no-scrollbar reveal-on-scroll",children:p.map((m,y)=>N.jsxs("div",{className:"min-w-[85vw] md:min-w-0 snap-center bg-white p-5 md:p-8 rounded-2xl shadow-lg shadow-slate-200/50 border border-slate-100 flex flex-col h-full",children:[N.jsxs("div",{className:"flex items-center mb-3 md:mb-4",children:[N.jsx("img",{src:m.avatar,alt:m.name,className:"w-8 h-8 md:w-10 md:h-10 rounded-full mr-3"}),N.jsxs("div",{children:[N.jsx("p",{className:"font-bold text-slate-900 text-sm",children:m.name}),N.jsx("p",{className:"text-xs text-slate-500",children:m.role})]}),N.jsx(Gw,{className:"ml-auto text-green-500 w-4 h-4"})]}),N.jsxs("p",{className:"text-slate-600 text-sm md:text-base leading-relaxed flex-1",children:['"',m.text,'"']})]},y))})]})}),N.jsx("div",{className:"py-12 md:py-24 bg-white",children:N.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6",children:[N.jsxs("div",{className:"text-center mb-8 md:mb-12 reveal-on-scroll",children:[N.jsx("span",{className:"text-brand-600 font-bold tracking-wider uppercase text-[10px] md:text-sm",children:"Got Questions?"}),N.jsx("h2",{className:"text-2xl md:text-5xl font-display font-bold text-slate-900 mt-1 md:mt-2",children:"Frequently Asked"})]}),N.jsx("div",{className:"space-y-3 md:space-y-4 reveal-on-scroll",children:d.map((m,y)=>N.jsxs("div",{className:"border border-slate-200 rounded-xl md:rounded-2xl overflow-hidden",children:[N.jsxs("button",{onClick:()=>l(y),className:"w-full flex items-center justify-between p-4 md:p-6 bg-slate-50 hover:bg-slate-100 transition text-left",children:[N.jsx("span",{className:"font-bold text-slate-900 text-sm md:text-lg pr-4",children:m.q}),i===y?N.jsx(Mw,{className:"text-slate-500 flex-shrink-0"}):N.jsx(Dw,{className:"text-slate-500 flex-shrink-0"})]}),i===y&&N.jsx("div",{className:"p-4 md:p-6 bg-white border-t border-slate-100 text-slate-600 text-xs md:text-base leading-relaxed",children:m.a})]},y))})]})}),N.jsxs("div",{className:"py-12 md:py-24 bg-slate-900 text-white relative overflow-hidden",children:[N.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),N.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-brand-900 to-slate-900 opacity-90"}),N.jsxs("div",{className:"max-w-4xl mx-auto px-4 relative z-10 text-center reveal-on-scroll",children:[N.jsx("h2",{className:"text-3xl md:text-6xl font-display font-bold mb-4 md:mb-6",children:"Ready to create magic?"}),N.jsx("p",{className:"text-slate-300 text-base md:text-xl mb-6 md:mb-10 max-w-2xl mx-auto",children:"Join thousands of happy parents making storytime unforgettable. No credit card required to start."}),e?N.jsxs("button",{onClick:n,className:"bg-brand-500 hover:bg-brand-600 text-white text-lg md:text-xl px-10 py-4 md:py-5 rounded-full font-bold shadow-xl shadow-brand-500/30 transition transform hover:-translate-y-1 inline-flex items-center space-x-2",children:[N.jsx(sy,{className:"text-yellow-300"}),N.jsx("span",{children:"Create Your Story Now"})]}):N.jsx("button",{onClick:n,className:"bg-white text-slate-900 hover:bg-slate-100 text-lg md:text-xl px-10 py-4 md:py-5 rounded-full font-bold shadow-xl transition transform hover:-translate-y-1 inline-flex items-center space-x-2",children:N.jsx("span",{children:"Start for Free"})}),N.jsx("p",{className:"mt-6 text-xs md:text-sm text-slate-500 font-medium",children:"Secure  Private  Satisfaction Guaranteed"})]})]})]})},mD=({onNavigate:n,setAppState:e})=>N.jsxs("footer",{className:"bg-slate-900 text-slate-400 py-6 md:py-12 mt-8 md:mt-12 border-t border-slate-800",children:[N.jsxs("div",{className:"max-w-6xl mx-auto px-4 flex flex-col md:flex-row gap-8 md:gap-12",children:[N.jsxs("div",{className:"md:w-1/4",children:[N.jsx("h4",{className:"text-white font-display font-bold text-xl mb-3 md:mb-4",children:"KidzyColor"}),N.jsx("p",{className:"text-sm leading-relaxed max-w-xs",children:"Making every child the hero of their own imagination through the power of AI."})]}),N.jsxs("div",{className:"md:w-3/4 grid grid-cols-3 gap-2 md:gap-8 text-left",children:[N.jsxs("div",{children:[N.jsx("h5",{className:"text-white font-bold mb-3 text-sm md:text-base",children:"Product"}),N.jsxs("ul",{className:"space-y-2 text-xs md:text-sm",children:[N.jsx("li",{children:N.jsx("button",{onClick:()=>e(Re.LANDING),className:"hover:text-white transition text-left",children:"Features"})}),N.jsx("li",{children:N.jsx("button",{onClick:()=>e(Re.PRICING),className:"hover:text-white transition text-left",children:"Pricing"})}),N.jsx("li",{children:N.jsx("button",{onClick:()=>n("schools"),className:"hover:text-white transition text-left",children:"For Schools"})})]})]}),N.jsxs("div",{children:[N.jsx("h5",{className:"text-white font-bold mb-3 text-sm md:text-base",children:"Support"}),N.jsxs("ul",{className:"space-y-2 text-xs md:text-sm",children:[N.jsx("li",{children:N.jsx("button",{onClick:()=>n("help"),className:"hover:text-white transition text-left",children:"Help Center"})}),N.jsx("li",{children:N.jsx("button",{onClick:()=>n("privacy"),className:"hover:text-white transition text-left",children:"Privacy Policy"})}),N.jsx("li",{children:N.jsx("button",{onClick:()=>n("terms"),className:"hover:text-white transition text-left",children:"Terms of Service"})})]})]}),N.jsxs("div",{children:[N.jsx("h5",{className:"text-white font-bold mb-3 text-sm md:text-base",children:"Connect"}),N.jsxs("ul",{className:"space-y-2 text-xs md:text-sm",children:[N.jsx("li",{children:N.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noreferrer",className:"hover:text-white transition block",children:"Instagram"})}),N.jsx("li",{children:N.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noreferrer",className:"hover:text-white transition block",children:"Twitter"})}),N.jsx("li",{children:N.jsx("button",{onClick:()=>n("contact"),className:"hover:text-white transition text-left",children:"Contact Us"})})]})]})]})]}),N.jsxs("div",{className:"max-w-6xl mx-auto px-4 mt-8 md:mt-12 pt-8 border-t border-slate-800 text-center text-[10px] md:text-xs opacity-60",children:[" ",new Date().getFullYear()," KidzyColor AI. All rights reserved by Wayne Creative Alliance Pvt Ltd."]})]});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gD,yD;function _D(){return{geminiUrl:gD,vertexUrl:yD}}function vD(n,e,t,r){var i,a;if(!(n!=null&&n.baseUrl)){const l=_D();return e?(i=l.vertexUrl)!==null&&i!==void 0?i:t:(a=l.geminiUrl)!==null&&a!==void 0?a:r}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kr{}function ae(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function h(n,e,t){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const d=l.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let m=0;m<p.length;m++){const y=p[m];h(y,e.slice(a+1),t[m])}else for(const m of p)h(m,e.slice(a+1),t)}return}else if(l.endsWith("[0]")){const d=l.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];h(p[0],e.slice(a+1),t);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[r]=t}function c(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return t;const i=e[r];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in n){const l=n[a];return Array.isArray(l)?l.map(d=>c(d,e.slice(r+1),t)):t}else return t}else n=n[i]}return n}catch(r){if(r instanceof TypeError)return t;throw r}}function ED(n,e){for(const[t,r]of Object.entries(e)){const i=t.split("."),a=r.split("."),l=new Set;let d=-1;for(let p=0;p<i.length;p++)if(i[p]==="*"){d=p;break}if(d!==-1&&a.length>d)for(let p=d;p<a.length;p++){const m=a[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&l.add(m)}Ih(n,i,a,0,l)}}function Ih(n,e,t,r,i){if(r>=e.length||typeof n!="object"||n===null)return;const a=e[r];if(a.endsWith("[]")){const l=a.slice(0,-2),d=n;if(l in d&&Array.isArray(d[l]))for(const p of d[l])Ih(p,e,t,r+1,i)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const l=n,d=Object.keys(l).filter(m=>!m.startsWith("_")&&!i.has(m)),p={};for(const m of d)p[m]=l[m];for(const[m,y]of Object.entries(p)){const T=[];for(const I of t.slice(r))I==="*"?T.push(m):T.push(I);h(l,T,y)}for(const m of d)delete l[m]}}else{const l=n;a in l&&Ih(l[a],e,t,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TD(n){const e={},t=c(n,["operationName"]);t!=null&&h(e,["operationName"],t);const r=c(n,["resourceName"]);return r!=null&&h(e,["_url","resourceName"],r),e}function ID(n){const e={},t=c(n,["name"]);t!=null&&h(e,["name"],t);const r=c(n,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(n,["done"]);i!=null&&h(e,["done"],i);const a=c(n,["error"]);a!=null&&h(e,["error"],a);const l=c(n,["response","generateVideoResponse"]);return l!=null&&h(e,["response"],SD(l)),e}function wD(n){const e={},t=c(n,["name"]);t!=null&&h(e,["name"],t);const r=c(n,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(n,["done"]);i!=null&&h(e,["done"],i);const a=c(n,["error"]);a!=null&&h(e,["error"],a);const l=c(n,["response"]);return l!=null&&h(e,["response"],CD(l)),e}function SD(n){const e={},t=c(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>AD(l))),h(e,["generatedVideos"],a)}const r=c(n,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=c(n,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function CD(n){const e={},t=c(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>RD(l))),h(e,["generatedVideos"],a)}const r=c(n,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=c(n,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function AD(n){const e={},t=c(n,["video"]);return t!=null&&h(e,["video"],MD(t)),e}function RD(n){const e={},t=c(n,["_self"]);return t!=null&&h(e,["video"],LD(t)),e}function PD(n){const e={},t=c(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function ND(n){const e={},t=c(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function xD(n){const e={},t=c(n,["name"]);t!=null&&h(e,["name"],t);const r=c(n,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(n,["done"]);i!=null&&h(e,["done"],i);const a=c(n,["error"]);a!=null&&h(e,["error"],a);const l=c(n,["response"]);return l!=null&&h(e,["response"],kD(l)),e}function kD(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["parent"]);r!=null&&h(e,["parent"],r);const i=c(n,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function VI(n){const e={},t=c(n,["name"]);t!=null&&h(e,["name"],t);const r=c(n,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(n,["done"]);i!=null&&h(e,["done"],i);const a=c(n,["error"]);a!=null&&h(e,["error"],a);const l=c(n,["response"]);return l!=null&&h(e,["response"],DD(l)),e}function DD(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["parent"]);r!=null&&h(e,["parent"],r);const i=c(n,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function MD(n){const e={},t=c(n,["uri"]);t!=null&&h(e,["uri"],t);const r=c(n,["encodedVideo"]);r!=null&&h(e,["videoBytes"],Dp(r));const i=c(n,["encoding"]);return i!=null&&h(e,["mimeType"],i),e}function LD(n){const e={},t=c(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const r=c(n,["bytesBase64Encoded"]);r!=null&&h(e,["videoBytes"],Dp(r));const i=c(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var R_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(R_||(R_={}));var P_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(P_||(P_={}));var N_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(N_||(N_={}));var tn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(tn||(tn={}));var x_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(x_||(x_={}));var k_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(k_||(k_={}));var D_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(D_||(D_={}));var M_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(M_||(M_={}));var L_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(L_||(L_={}));var V_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(V_||(V_={}));var As;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(As||(As={}));var U_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(U_||(U_={}));var Rs;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Rs||(Rs={}));var F_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(F_||(F_={}));var b_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(b_||(b_={}));var O_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(O_||(O_={}));var B_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(B_||(B_={}));var q_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(q_||(q_={}));var G_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(G_||(G_={}));var xc;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(xc||(xc={}));var H_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(H_||(H_={}));var z_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(z_||(z_={}));var $_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})($_||($_={}));var wh;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(wh||(wh={}));var W_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(W_||(W_={}));var K_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(K_||(K_={}));var J_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(J_||(J_={}));var Y_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Y_||(Y_={}));var Q_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Q_||(Q_={}));var X_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(X_||(X_={}));var Z_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Z_||(Z_={}));var j_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(j_||(j_={}));var ev;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(ev||(ev={}));var tv;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(tv||(tv={}));var nv;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nv||(nv={}));var rv;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(rv||(rv={}));var iv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(iv||(iv={}));var ov;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ov||(ov={}));var sv;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(sv||(sv={}));var av;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(av||(av={}));var lv;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(lv||(lv={}));var uv;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(uv||(uv={}));var cv;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(cv||(cv={}));var dv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(dv||(dv={}));var fv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(fv||(fv={}));var hv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(hv||(hv={}));var pv;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(pv||(pv={}));var mv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(mv||(mv={}));var gv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(gv||(gv={}));var yv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(yv||(yv={}));var _v;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(_v||(_v={}));var vv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vv||(vv={}));var Ev;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ev||(Ev={}));var Tv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Tv||(Tv={}));var Ps;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Ps||(Ps={}));class Sh{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Qa{get text(){var e,t,r,i,a,l,d,p;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",y=!1;const T=[];for(const I of(p=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[A,b]of Object.entries(I))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(b!==null||b!==void 0)&&T.push(A);if(typeof I.text=="string"){if(typeof I.thought=="boolean"&&I.thought)continue;y=!0,m+=I.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?m:void 0}get data(){var e,t,r,i,a,l,d,p;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const y=[];for(const T of(p=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[I,A]of Object.entries(T))I!=="inlineData"&&(A!==null||A!==void 0)&&y.push(I);T.inlineData&&typeof T.inlineData.data=="string"&&(m+=atob(T.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,r,i,a,l,d,p;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,r,i,a,l,d,p,m;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(p=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,r,i,a,l,d,p,m;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(p=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.output}}class Iv{}class wv{}class VD{}class UD{}class FD{}class bD{}class Sv{}class Cv{}class Av{}class OD{}class kc{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new kc;let i;const a=e;return t?i=wD(a):i=ID(a),Object.assign(r,i),r}}class Rv{}class Pv{}class Nv{}class xv{}class BD{}class qD{}class GD{}class Mp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new Mp,a=xD(e);return Object.assign(r,a),r}}class HD{}class zD{}class $D{}class kv{}class WD{get text(){var e,t,r;let i="",a=!1;const l=[];for(const d of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[p,m]of Object.entries(d))p!=="text"&&p!=="thought"&&m!==null&&l.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,i+=d.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var e,t,r;let i="";const a=[];for(const l of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[d,p]of Object.entries(l))d!=="inlineData"&&p!==null&&a.push(d);l.inlineData&&typeof l.inlineData.data=="string"&&(i+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class KD{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Lp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new Lp,a=VI(e);return Object.assign(r,a),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function UI(n,e){const t=qe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function FI(n){return Array.isArray(n)?n.map(e=>Dc(e)):[Dc(n)]}function Dc(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function bI(n){const e=Dc(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function OI(n){const e=Dc(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Dv(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function BI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Dv(e)):[Dv(n)]}function Ch(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Mv(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Lv(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Jt(n){if(n==null)throw new Error("ContentUnion is required");return Ch(n)?n:{role:"user",parts:BI(n)}}function Vp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=Jt(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=Jt(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Jt(t)):[Jt(e)]}function kn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Mv(n)||Lv(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Jt(n)]}const e=[],t=[],r=Ch(n[0]);for(const i of n){const a=Ch(i);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(i);else{if(Mv(i)||Lv(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(i)}}return r||e.push({role:"user",parts:BI(t)}),e}function JD(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.values(tn).includes(t[0].toUpperCase())?t[0].toUpperCase():tn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.values(tn).includes(r.toUpperCase())?r.toUpperCase():tn.TYPE_UNSPECIFIED})}}function Ms(n){const e={},t=["items"],r=["anyOf"],i=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&JD(n.type,e);for(const[l,d]of Object.entries(n))if(d!=null)if(l=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(tn).includes(d.toUpperCase())?d.toUpperCase():tn.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=Ms(d);else if(r.includes(l)){const p=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}p.push(Ms(m))}e[l]=p}else if(i.includes(l)){const p={};for(const[m,y]of Object.entries(d))p[m]=Ms(y);e[l]=p}else{if(l==="additionalProperties")continue;e[l]=d}return e}function Up(n){return Ms(n)}function Fp(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function bp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Qs(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ms(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ms(e.response));return n}function Xs(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function YD(n,e,t,r=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function Jr(n,e){if(typeof e!="string")throw new Error("name must be a string");return YD(n,e,"cachedContents")}function qI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function bi(n){return Dp(n)}function QD(n){return n!=null&&typeof n=="object"&&"name"in n}function XD(n){return n!=null&&typeof n=="object"&&"video"in n}function ZD(n){return n!=null&&typeof n=="object"&&"uri"in n}function GI(n){var e;let t;if(QD(n)&&(t=n.name),!(ZD(n)&&(t=n.uri,t===void 0))&&!(XD(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const i=t.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${t}`);t=i[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function HI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function zI(n){for(const e of["models","tunedModels","publisherModels"])if(jD(n,e))return n[e];return[]}function jD(n,e){return n!==null&&typeof n=="object"&&e in n}function e1(n,e={}){const t=n,r={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(r.responseJsonSchema=t.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function t1(n,e={}){const t=[],r=new Set;for(const i of n){const a=i.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const l=e1(i,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function $I(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const r=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,i=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function n1(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function WI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const i=t.inlinedResponses;if(!Array.isArray(i)||i.length===0)return n;let a=!1;for(const l of i){if(typeof l!="object"||l===null)continue;const p=l.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Zs(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function KI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r1(n){const e={},t=c(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const r=c(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>F1(l))),h(e,["inlinedResponses"],a)}const i=c(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["inlinedEmbedContentResponses"],a)}return e}function i1(n){const e={},t=c(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const r=c(n,["gcsDestination","outputUriPrefix"]);r!=null&&h(e,["gcsUri"],r);const i=c(n,["bigqueryDestination","outputUri"]);return i!=null&&h(e,["bigqueryUri"],i),e}function o1(n){const e={},t=c(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const r=c(n,["gcsUri"]);r!=null&&h(e,["gcsDestination","outputUriPrefix"],r);const i=c(n,["bigqueryUri"]);if(i!=null&&h(e,["bigqueryDestination","outputUri"],i),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function dc(n){const e={},t=c(n,["name"]);t!=null&&h(e,["name"],t);const r=c(n,["metadata","displayName"]);r!=null&&h(e,["displayName"],r);const i=c(n,["metadata","state"]);i!=null&&h(e,["state"],KI(i));const a=c(n,["metadata","createTime"]);a!=null&&h(e,["createTime"],a);const l=c(n,["metadata","endTime"]);l!=null&&h(e,["endTime"],l);const d=c(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const p=c(n,["metadata","model"]);p!=null&&h(e,["model"],p);const m=c(n,["metadata","output"]);return m!=null&&h(e,["dest"],r1(WI(m))),e}function Ah(n){const e={},t=c(n,["name"]);t!=null&&h(e,["name"],t);const r=c(n,["displayName"]);r!=null&&h(e,["displayName"],r);const i=c(n,["state"]);i!=null&&h(e,["state"],KI(i));const a=c(n,["error"]);a!=null&&h(e,["error"],a);const l=c(n,["createTime"]);l!=null&&h(e,["createTime"],l);const d=c(n,["startTime"]);d!=null&&h(e,["startTime"],d);const p=c(n,["endTime"]);p!=null&&h(e,["endTime"],p);const m=c(n,["updateTime"]);m!=null&&h(e,["updateTime"],m);const y=c(n,["model"]);y!=null&&h(e,["model"],y);const T=c(n,["inputConfig"]);T!=null&&h(e,["src"],s1(T));const I=c(n,["outputConfig"]);I!=null&&h(e,["dest"],i1(WI(I)));const A=c(n,["completionStats"]);return A!=null&&h(e,["completionStats"],A),e}function s1(n){const e={},t=c(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const r=c(n,["gcsSource","uris"]);r!=null&&h(e,["gcsUri"],r);const i=c(n,["bigquerySource","inputUri"]);return i!=null&&h(e,["bigqueryUri"],i),e}function a1(n,e){const t={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=c(e,["fileName"]);r!=null&&h(t,["fileName"],r);const i=c(e,["inlinedRequests"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>U1(n,l))),h(t,["requests","requests"],a)}return t}function l1(n){const e={},t=c(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const r=c(n,["gcsUri"]);r!=null&&h(e,["gcsSource","uris"],r);const i=c(n,["bigqueryUri"]);if(i!=null&&h(e,["bigquerySource","inputUri"],i),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function u1(n){const e={},t=c(n,["data"]);if(t!=null&&h(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function c1(n,e){const t={},r=c(e,["name"]);return r!=null&&h(t,["_url","name"],Zs(n,r)),t}function d1(n,e){const t={},r=c(e,["name"]);return r!=null&&h(t,["_url","name"],Zs(n,r)),t}function f1(n){const e={},t=c(n,["content"]);t!=null&&h(e,["content"],t);const r=c(n,["citationMetadata"]);r!=null&&h(e,["citationMetadata"],h1(r));const i=c(n,["tokenCount"]);i!=null&&h(e,["tokenCount"],i);const a=c(n,["finishReason"]);a!=null&&h(e,["finishReason"],a);const l=c(n,["avgLogprobs"]);l!=null&&h(e,["avgLogprobs"],l);const d=c(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const p=c(n,["index"]);p!=null&&h(e,["index"],p);const m=c(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const y=c(n,["safetyRatings"]);if(y!=null){let I=y;Array.isArray(I)&&(I=I.map(A=>A)),h(e,["safetyRatings"],I)}const T=c(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function h1(n){const e={},t=c(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),h(e,["citations"],r)}return e}function JI(n){const e={},t=c(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>z1(a))),h(e,["parts"],i)}const r=c(n,["role"]);return r!=null&&h(e,["role"],r),e}function p1(n,e){const t={},r=c(n,["displayName"]);if(e!==void 0&&r!=null&&h(e,["batch","displayName"],r),c(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function m1(n,e){const t={},r=c(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const i=c(n,["dest"]);return e!==void 0&&i!=null&&h(e,["outputConfig"],o1(n1(i))),t}function Vv(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["src"]);i!=null&&h(t,["batch","inputConfig"],a1(n,$I(n,i)));const a=c(e,["config"]);return a!=null&&p1(a,t),t}function g1(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["model"],qe(n,r));const i=c(e,["src"]);i!=null&&h(t,["inputConfig"],l1($I(n,i)));const a=c(e,["config"]);return a!=null&&m1(a,t),t}function y1(n,e){const t={},r=c(n,["displayName"]);return e!==void 0&&r!=null&&h(e,["batch","displayName"],r),t}function _1(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["src"]);i!=null&&h(t,["batch","inputConfig"],C1(n,i));const a=c(e,["config"]);return a!=null&&y1(a,t),t}function v1(n,e){const t={},r=c(e,["name"]);return r!=null&&h(t,["_url","name"],Zs(n,r)),t}function E1(n,e){const t={},r=c(e,["name"]);return r!=null&&h(t,["_url","name"],Zs(n,r)),t}function T1(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["name"]);r!=null&&h(e,["name"],r);const i=c(n,["done"]);i!=null&&h(e,["done"],i);const a=c(n,["error"]);return a!=null&&h(e,["error"],a),e}function I1(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["name"]);r!=null&&h(e,["name"],r);const i=c(n,["done"]);i!=null&&h(e,["done"],i);const a=c(n,["error"]);return a!=null&&h(e,["error"],a),e}function w1(n,e){const t={},r=c(e,["contents"]);if(r!=null){let a=Vp(n,r);Array.isArray(a)&&(a=a.map(l=>l)),h(t,["requests[]","request","content"],a)}const i=c(e,["config"]);return i!=null&&(h(t,["_self"],S1(i,t)),ED(t,{"requests[].*":"requests[].request.*"})),t}function S1(n,e){const t={},r=c(n,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const i=c(n,["title"]);e!==void 0&&i!=null&&h(e,["requests[]","title"],i);const a=c(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&h(e,["requests[]","outputDimensionality"],a),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function C1(n,e){const t={},r=c(e,["fileName"]);r!=null&&h(t,["file_name"],r);const i=c(e,["inlinedRequests"]);return i!=null&&h(t,["requests"],w1(n,i)),t}function A1(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function R1(n){const e={},t=c(n,["id"]);t!=null&&h(e,["id"],t);const r=c(n,["args"]);r!=null&&h(e,["args"],r);const i=c(n,["name"]);if(i!=null&&h(e,["name"],i),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function P1(n){const e={},t=c(n,["mode"]);t!=null&&h(e,["mode"],t);const r=c(n,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function N1(n,e,t){const r={},i=c(e,["systemInstruction"]);t!==void 0&&i!=null&&h(t,["systemInstruction"],JI(Jt(i)));const a=c(e,["temperature"]);a!=null&&h(r,["temperature"],a);const l=c(e,["topP"]);l!=null&&h(r,["topP"],l);const d=c(e,["topK"]);d!=null&&h(r,["topK"],d);const p=c(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const m=c(e,["maxOutputTokens"]);m!=null&&h(r,["maxOutputTokens"],m);const y=c(e,["stopSequences"]);y!=null&&h(r,["stopSequences"],y);const T=c(e,["responseLogprobs"]);T!=null&&h(r,["responseLogprobs"],T);const I=c(e,["logprobs"]);I!=null&&h(r,["logprobs"],I);const A=c(e,["presencePenalty"]);A!=null&&h(r,["presencePenalty"],A);const b=c(e,["frequencyPenalty"]);b!=null&&h(r,["frequencyPenalty"],b);const B=c(e,["seed"]);B!=null&&h(r,["seed"],B);const O=c(e,["responseMimeType"]);O!=null&&h(r,["responseMimeType"],O);const Q=c(e,["responseSchema"]);Q!=null&&h(r,["responseSchema"],Up(Q));const X=c(e,["responseJsonSchema"]);if(X!=null&&h(r,["responseJsonSchema"],X),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const K=c(e,["safetySettings"]);if(t!==void 0&&K!=null){let F=K;Array.isArray(F)&&(F=F.map(D=>$1(D))),h(t,["safetySettings"],F)}const ee=c(e,["tools"]);if(t!==void 0&&ee!=null){let F=Xs(ee);Array.isArray(F)&&(F=F.map(D=>K1(Qs(D)))),h(t,["tools"],F)}const le=c(e,["toolConfig"]);if(t!==void 0&&le!=null&&h(t,["toolConfig"],W1(le)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=c(e,["cachedContent"]);t!==void 0&&oe!=null&&h(t,["cachedContent"],Jr(n,oe));const M=c(e,["responseModalities"]);M!=null&&h(r,["responseModalities"],M);const P=c(e,["mediaResolution"]);P!=null&&h(r,["mediaResolution"],P);const R=c(e,["speechConfig"]);if(R!=null&&h(r,["speechConfig"],Fp(R)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=c(e,["thinkingConfig"]);k!=null&&h(r,["thinkingConfig"],k);const V=c(e,["imageConfig"]);return V!=null&&h(r,["imageConfig"],V1(V)),r}function x1(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>f1(m))),h(e,["candidates"],p)}const i=c(n,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const a=c(n,["promptFeedback"]);a!=null&&h(e,["promptFeedback"],a);const l=c(n,["responseId"]);l!=null&&h(e,["responseId"],l);const d=c(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function k1(n,e){const t={},r=c(e,["name"]);return r!=null&&h(t,["_url","name"],Zs(n,r)),t}function D1(n,e){const t={},r=c(e,["name"]);return r!=null&&h(t,["_url","name"],Zs(n,r)),t}function M1(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function L1(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function V1(n){const e={},t=c(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const r=c(n,["imageSize"]);if(r!=null&&h(e,["imageSize"],r),c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function U1(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["request","model"],qe(n,r));const i=c(e,["contents"]);if(i!=null){let d=kn(i);Array.isArray(d)&&(d=d.map(p=>JI(p))),h(t,["request","contents"],d)}const a=c(e,["metadata"]);a!=null&&h(t,["metadata"],a);const l=c(e,["config"]);return l!=null&&h(t,["request","generationConfig"],N1(n,l,c(t,["request"],{}))),t}function F1(n){const e={},t=c(n,["response"]);t!=null&&h(e,["response"],x1(t));const r=c(n,["error"]);return r!=null&&h(e,["error"],r),e}function b1(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);if(e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),c(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function O1(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const a=c(n,["filter"]);return e!==void 0&&a!=null&&h(e,["_query","filter"],a),t}function B1(n){const e={},t=c(n,["config"]);return t!=null&&b1(t,e),e}function q1(n){const e={},t=c(n,["config"]);return t!=null&&O1(t,e),e}function G1(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(n,["operations"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>dc(l))),h(e,["batchJobs"],a)}return e}function H1(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(n,["batchPredictionJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Ah(l))),h(e,["batchJobs"],a)}return e}function z1(n){const e={},t=c(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=c(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const a=c(n,["fileData"]);a!=null&&h(e,["fileData"],A1(a));const l=c(n,["functionCall"]);l!=null&&h(e,["functionCall"],R1(l));const d=c(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const p=c(n,["inlineData"]);p!=null&&h(e,["inlineData"],u1(p));const m=c(n,["text"]);m!=null&&h(e,["text"],m);const y=c(n,["thought"]);y!=null&&h(e,["thought"],y);const T=c(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const I=c(n,["videoMetadata"]);return I!=null&&h(e,["videoMetadata"],I),e}function $1(n){const e={},t=c(n,["category"]);if(t!=null&&h(e,["category"],t),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(n,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function W1(n){const e={},t=c(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],P1(t));const r=c(n,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function K1(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),h(e,["functionDeclarations"],y)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=c(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const a=c(n,["fileSearch"]);a!=null&&h(e,["fileSearch"],a);const l=c(n,["codeExecution"]);if(l!=null&&h(e,["codeExecution"],l),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=c(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],M1(d));const p=c(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],L1(p));const m=c(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $r;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})($r||($r={}));class xo{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(i=l.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J1 extends Kr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new xo($r.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=Vv(this.apiClient,e),r=t._url,i=ae("{model}:batchGenerateContent",r),d=t.batch.inputConfig.requests,p=d.requests,m=[];for(const y of p){const T=Object.assign({},y);if(T.systemInstruction){const I=T.systemInstruction;delete T.systemInstruction;const A=T.request;A.systemInstruction=I,T.request=A}m.push(T)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:i,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const r=t?Object.assign({},t):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${i}`;else if(l)r.dest=`${l}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=g1(this.apiClient,e);return d=ae("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>Ah(y))}else{const m=Vv(this.apiClient,e);return d=ae("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>dc(y))}}async createEmbeddingsInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_1(this.apiClient,e);return a=ae("{model}:asyncBatchEmbedContent",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>dc(p))}}async get(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=D1(this.apiClient,e);return d=ae("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>Ah(y))}else{const m=k1(this.apiClient,e);return d=ae("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>dc(y))}}async cancel(e){var t,r,i,a;let l="",d={};if(this.apiClient.isVertexAI()){const p=d1(this.apiClient,e);l=ae("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const p=c1(this.apiClient,e);l=ae("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=q1(e);return d=ae("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=H1(y),I=new kv;return Object.assign(I,T),I})}else{const m=B1(e);return d=ae("batches",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=G1(y),I=new kv;return Object.assign(I,T),I})}}async delete(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=E1(this.apiClient,e);return d=ae("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>I1(y))}else{const m=v1(this.apiClient,e);return d=ae("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>T1(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y1(n){const e={},t=c(n,["data"]);if(t!=null&&h(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Uv(n){const e={},t=c(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>_M(a))),h(e,["parts"],i)}const r=c(n,["role"]);return r!=null&&h(e,["role"],r),e}function Q1(n,e){const t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=c(n,["expireTime"]);e!==void 0&&i!=null&&h(e,["expireTime"],i);const a=c(n,["displayName"]);e!==void 0&&a!=null&&h(e,["displayName"],a);const l=c(n,["contents"]);if(e!==void 0&&l!=null){let y=kn(l);Array.isArray(y)&&(y=y.map(T=>Uv(T))),h(e,["contents"],y)}const d=c(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],Uv(Jt(d)));const p=c(n,["tools"]);if(e!==void 0&&p!=null){let y=p;Array.isArray(y)&&(y=y.map(T=>EM(T))),h(e,["tools"],y)}const m=c(n,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],vM(m)),c(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function X1(n,e){const t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=c(n,["expireTime"]);e!==void 0&&i!=null&&h(e,["expireTime"],i);const a=c(n,["displayName"]);e!==void 0&&a!=null&&h(e,["displayName"],a);const l=c(n,["contents"]);if(e!==void 0&&l!=null){let T=kn(l);Array.isArray(T)&&(T=T.map(I=>I)),h(e,["contents"],T)}const d=c(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],Jt(d));const p=c(n,["tools"]);if(e!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(I=>TM(I))),h(e,["tools"],T)}const m=c(n,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],m);const y=c(n,["kmsKeyName"]);return e!==void 0&&y!=null&&h(e,["encryption_spec","kmsKeyName"],y),t}function Z1(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["model"],UI(n,r));const i=c(e,["config"]);return i!=null&&Q1(i,t),t}function j1(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["model"],UI(n,r));const i=c(e,["config"]);return i!=null&&X1(i,t),t}function eM(n,e){const t={},r=c(e,["name"]);return r!=null&&h(t,["_url","name"],Jr(n,r)),t}function tM(n,e){const t={},r=c(e,["name"]);return r!=null&&h(t,["_url","name"],Jr(n,r)),t}function nM(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function rM(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function iM(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function oM(n){const e={},t=c(n,["id"]);t!=null&&h(e,["id"],t);const r=c(n,["args"]);r!=null&&h(e,["args"],r);const i=c(n,["name"]);if(i!=null&&h(e,["name"],i),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sM(n){const e={},t=c(n,["mode"]);t!=null&&h(e,["mode"],t);const r=c(n,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function aM(n){const e={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=c(n,["description"]);t!=null&&h(e,["description"],t);const r=c(n,["name"]);r!=null&&h(e,["name"],r);const i=c(n,["parameters"]);i!=null&&h(e,["parameters"],i);const a=c(n,["parametersJsonSchema"]);a!=null&&h(e,["parametersJsonSchema"],a);const l=c(n,["response"]);l!=null&&h(e,["response"],l);const d=c(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function lM(n,e){const t={},r=c(e,["name"]);return r!=null&&h(t,["_url","name"],Jr(n,r)),t}function uM(n,e){const t={},r=c(e,["name"]);return r!=null&&h(t,["_url","name"],Jr(n,r)),t}function cM(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function dM(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function fM(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function hM(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function pM(n){const e={},t=c(n,["config"]);return t!=null&&fM(t,e),e}function mM(n){const e={},t=c(n,["config"]);return t!=null&&hM(t,e),e}function gM(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(n,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["cachedContents"],a)}return e}function yM(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(n,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["cachedContents"],a)}return e}function _M(n){const e={},t=c(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=c(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const a=c(n,["fileData"]);a!=null&&h(e,["fileData"],iM(a));const l=c(n,["functionCall"]);l!=null&&h(e,["functionCall"],oM(l));const d=c(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const p=c(n,["inlineData"]);p!=null&&h(e,["inlineData"],Y1(p));const m=c(n,["text"]);m!=null&&h(e,["text"],m);const y=c(n,["thought"]);y!=null&&h(e,["thought"],y);const T=c(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const I=c(n,["videoMetadata"]);return I!=null&&h(e,["videoMetadata"],I),e}function vM(n){const e={},t=c(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],sM(t));const r=c(n,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function EM(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),h(e,["functionDeclarations"],y)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=c(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const a=c(n,["fileSearch"]);a!=null&&h(e,["fileSearch"],a);const l=c(n,["codeExecution"]);if(l!=null&&h(e,["codeExecution"],l),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=c(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],cM(d));const p=c(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],dM(p));const m=c(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function TM(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(I=>aM(I))),h(e,["functionDeclarations"],T)}const r=c(n,["retrieval"]);r!=null&&h(e,["retrieval"],r);const i=c(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const a=c(n,["computerUse"]);if(a!=null&&h(e,["computerUse"],a),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=c(n,["codeExecution"]);l!=null&&h(e,["codeExecution"],l);const d=c(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const p=c(n,["googleMaps"]);p!=null&&h(e,["googleMaps"],p);const m=c(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const y=c(n,["urlContext"]);return y!=null&&h(e,["urlContext"],y),e}function IM(n,e){const t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=c(n,["expireTime"]);return e!==void 0&&i!=null&&h(e,["expireTime"],i),t}function wM(n,e){const t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=c(n,["expireTime"]);return e!==void 0&&i!=null&&h(e,["expireTime"],i),t}function SM(n,e){const t={},r=c(e,["name"]);r!=null&&h(t,["_url","name"],Jr(n,r));const i=c(e,["config"]);return i!=null&&IM(i,t),t}function CM(n,e){const t={},r=c(e,["name"]);r!=null&&h(t,["_url","name"],Jr(n,r));const i=c(e,["config"]);return i!=null&&wM(i,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AM extends Kr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new xo($r.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=j1(this.apiClient,e);return d=ae("cachedContents",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const m=Z1(this.apiClient,e);return d=ae("cachedContents",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async get(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=uM(this.apiClient,e);return d=ae("{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const m=lM(this.apiClient,e);return d=ae("{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=tM(this.apiClient,e);return d=ae("{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=rM(y),I=new Nv;return Object.assign(I,T),I})}else{const m=eM(this.apiClient,e);return d=ae("{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=nM(y),I=new Nv;return Object.assign(I,T),I})}}async update(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=CM(this.apiClient,e);return d=ae("{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const m=SM(this.apiClient,e);return d=ae("{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async listInternal(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=mM(e);return d=ae("cachedContents",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=yM(y),I=new xv;return Object.assign(I,T),I})}else{const m=pM(e);return d=ae("cachedContents",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=gM(y),I=new xv;return Object.assign(I,T),I})}}}function Fv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function et(n){return this instanceof et?(this.v=n,this):new et(n)}function Ls(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(A){return function(b){return Promise.resolve(b).then(A,T)}}function d(A,b){r[A]&&(i[A]=function(B){return new Promise(function(O,Q){a.push([A,B,O,Q])>1||p(A,B)})},b&&(i[A]=b(i[A])))}function p(A,b){try{m(r[A](b))}catch(B){I(a[0][3],B)}}function m(A){A.value instanceof et?Promise.resolve(A.value.v).then(y,T):I(a[0][2],A)}function y(A){p("next",A)}function T(A){p("throw",A)}function I(A,b){A(b),a.shift(),a.length&&p(a[0][0],a[0][1])}}function ul(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Fv=="function"?Fv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(l){return new Promise(function(d,p){l=n[a](l),i(d,p,l.done,l.value)})}}function i(a,l,d,p){Promise.resolve(p).then(function(m){a({value:m,done:d})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RM(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:YI(t)}function YI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function PM(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function bv(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{const i=[];let a=!0;for(;r<t&&n[r].role==="model";)i.push(n[r]),a&&!YI(n[r])&&(a=!1),r++;a?e.push(...i):e.pop()}return e}class NM{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new xM(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class xM{constructor(e,t,r,i={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),PM(a)}async sendMessage(e){var t;await this.sendPromise;const r=Jt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,l,d;const p=await i,m=(l=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,y=p.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let I=[];y!=null&&(I=(d=y.slice(T))!==null&&d!==void 0?d:[]);const A=m?[m]:[];this.recordHistory(r,A,I)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;const r=Jt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,r)}getHistory(e=!1){const t=e?bv(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var r,i;return Ls(this,arguments,function*(){var l,d,p,m;const y=[];try{for(var T=!0,I=ul(e),A;A=yield et(I.next()),l=A.done,!l;T=!0){m=A.value,T=!1;const b=m;if(RM(b)){const B=(i=(r=b.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;B!==void 0&&y.push(B)}yield yield et(b)}}catch(b){d={error:b}}finally{try{!T&&!l&&(p=I.return)&&(yield et(p.call(I)))}finally{if(d)throw d.error}}this.recordHistory(t,y)})}recordHistory(e,t,r){let i=[];t.length>0&&t.every(a=>a.role!==void 0)?i=t:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...bv(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,nd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kM(n){const e={},t=c(n,["file"]);return t!=null&&h(e,["file"],t),e}function DM(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function MM(n){const e={},t=c(n,["name"]);return t!=null&&h(e,["_url","file"],GI(t)),e}function LM(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function VM(n){const e={},t=c(n,["name"]);return t!=null&&h(e,["_url","file"],GI(t)),e}function UM(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function FM(n){const e={},t=c(n,["config"]);return t!=null&&UM(t,e),e}function bM(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(n,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OM extends Kr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new xo($r.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=FM(e);return a=ae("files",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>{const m=bM(p),y=new HD;return Object.assign(y,m),y})}}async createInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=kM(e);return a=ae("upload/v1beta/files",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const m=DM(p),y=new zD;return Object.assign(y,m),y})}}async get(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=VM(e);return a=ae("files/{file}",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async delete(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=MM(e);return a=ae("files/{file}",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>{const m=LM(p),y=new $D;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fc(n){const e={},t=c(n,["data"]);if(t!=null&&h(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function BM(n){const e={},t=c(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>nL(a))),h(e,["parts"],i)}const r=c(n,["role"]);return r!=null&&h(e,["role"],r),e}function qM(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function GM(n){const e={},t=c(n,["id"]);t!=null&&h(e,["id"],t);const r=c(n,["args"]);r!=null&&h(e,["args"],r);const i=c(n,["name"]);if(i!=null&&h(e,["name"],i),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function HM(n){const e={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=c(n,["description"]);t!=null&&h(e,["description"],t);const r=c(n,["name"]);r!=null&&h(e,["name"],r);const i=c(n,["parameters"]);i!=null&&h(e,["parameters"],i);const a=c(n,["parametersJsonSchema"]);a!=null&&h(e,["parametersJsonSchema"],a);const l=c(n,["response"]);l!=null&&h(e,["response"],l);const d=c(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function zM(n){const e={},t=c(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const r=c(n,["responseJsonSchema"]);r!=null&&h(e,["responseJsonSchema"],r);const i=c(n,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const a=c(n,["candidateCount"]);a!=null&&h(e,["candidateCount"],a);const l=c(n,["enableAffectiveDialog"]);l!=null&&h(e,["enableAffectiveDialog"],l);const d=c(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const p=c(n,["logprobs"]);p!=null&&h(e,["logprobs"],p);const m=c(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const y=c(n,["mediaResolution"]);y!=null&&h(e,["mediaResolution"],y);const T=c(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const I=c(n,["responseLogprobs"]);I!=null&&h(e,["responseLogprobs"],I);const A=c(n,["responseMimeType"]);A!=null&&h(e,["responseMimeType"],A);const b=c(n,["responseModalities"]);b!=null&&h(e,["responseModalities"],b);const B=c(n,["responseSchema"]);B!=null&&h(e,["responseSchema"],B);const O=c(n,["routingConfig"]);O!=null&&h(e,["routingConfig"],O);const Q=c(n,["seed"]);Q!=null&&h(e,["seed"],Q);const X=c(n,["speechConfig"]);X!=null&&h(e,["speechConfig"],QI(X));const K=c(n,["stopSequences"]);K!=null&&h(e,["stopSequences"],K);const ee=c(n,["temperature"]);ee!=null&&h(e,["temperature"],ee);const le=c(n,["thinkingConfig"]);le!=null&&h(e,["thinkingConfig"],le);const oe=c(n,["topK"]);oe!=null&&h(e,["topK"],oe);const M=c(n,["topP"]);if(M!=null&&h(e,["topP"],M),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $M(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function WM(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function KM(n,e){const t={},r=c(n,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],r);const i=c(n,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const a=c(n,["temperature"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","temperature"],a);const l=c(n,["topP"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topP"],l);const d=c(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const p=c(n,["maxOutputTokens"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","maxOutputTokens"],p);const m=c(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const y=c(n,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const T=c(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],bp(T));const I=c(n,["thinkingConfig"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","thinkingConfig"],I);const A=c(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],A);const b=c(n,["systemInstruction"]);e!==void 0&&b!=null&&h(e,["setup","systemInstruction"],BM(Jt(b)));const B=c(n,["tools"]);if(e!==void 0&&B!=null){let oe=Xs(B);Array.isArray(oe)&&(oe=oe.map(M=>iL(Qs(M)))),h(e,["setup","tools"],oe)}const O=c(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],rL(O));const Q=c(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&h(e,["setup","inputAudioTranscription"],Q);const X=c(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const K=c(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&h(e,["setup","realtimeInputConfig"],K);const ee=c(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&h(e,["setup","contextWindowCompression"],ee);const le=c(n,["proactivity"]);return e!==void 0&&le!=null&&h(e,["setup","proactivity"],le),t}function JM(n,e){const t={},r=c(n,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],zM(r));const i=c(n,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const a=c(n,["temperature"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","temperature"],a);const l=c(n,["topP"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topP"],l);const d=c(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const p=c(n,["maxOutputTokens"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","maxOutputTokens"],p);const m=c(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const y=c(n,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const T=c(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],QI(bp(T)));const I=c(n,["thinkingConfig"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","thinkingConfig"],I);const A=c(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],A);const b=c(n,["systemInstruction"]);e!==void 0&&b!=null&&h(e,["setup","systemInstruction"],Jt(b));const B=c(n,["tools"]);if(e!==void 0&&B!=null){let oe=Xs(B);Array.isArray(oe)&&(oe=oe.map(M=>oL(Qs(M)))),h(e,["setup","tools"],oe)}const O=c(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],O);const Q=c(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&h(e,["setup","inputAudioTranscription"],Q);const X=c(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const K=c(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&h(e,["setup","realtimeInputConfig"],K);const ee=c(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&h(e,["setup","contextWindowCompression"],ee);const le=c(n,["proactivity"]);return e!==void 0&&le!=null&&h(e,["setup","proactivity"],le),t}function YM(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["setup","model"],qe(n,r));const i=c(e,["config"]);return i!=null&&h(t,["config"],KM(i,t)),t}function QM(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["setup","model"],qe(n,r));const i=c(e,["config"]);return i!=null&&h(t,["config"],JM(i,t)),t}function XM(n){const e={},t=c(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function ZM(n){const e={},t=c(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),h(e,["weightedPrompts"],r)}return e}function jM(n){const e={},t=c(n,["media"]);if(t!=null){let m=FI(t);Array.isArray(m)&&(m=m.map(y=>fc(y))),h(e,["mediaChunks"],m)}const r=c(n,["audio"]);r!=null&&h(e,["audio"],fc(OI(r)));const i=c(n,["audioStreamEnd"]);i!=null&&h(e,["audioStreamEnd"],i);const a=c(n,["video"]);a!=null&&h(e,["video"],fc(bI(a)));const l=c(n,["text"]);l!=null&&h(e,["text"],l);const d=c(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const p=c(n,["activityEnd"]);return p!=null&&h(e,["activityEnd"],p),e}function eL(n){const e={},t=c(n,["media"]);if(t!=null){let m=FI(t);Array.isArray(m)&&(m=m.map(y=>y)),h(e,["mediaChunks"],m)}const r=c(n,["audio"]);r!=null&&h(e,["audio"],OI(r));const i=c(n,["audioStreamEnd"]);i!=null&&h(e,["audioStreamEnd"],i);const a=c(n,["video"]);a!=null&&h(e,["video"],bI(a));const l=c(n,["text"]);l!=null&&h(e,["text"],l);const d=c(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const p=c(n,["activityEnd"]);return p!=null&&h(e,["activityEnd"],p),e}function tL(n){const e={},t=c(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const r=c(n,["serverContent"]);r!=null&&h(e,["serverContent"],r);const i=c(n,["toolCall"]);i!=null&&h(e,["toolCall"],i);const a=c(n,["toolCallCancellation"]);a!=null&&h(e,["toolCallCancellation"],a);const l=c(n,["usageMetadata"]);l!=null&&h(e,["usageMetadata"],sL(l));const d=c(n,["goAway"]);d!=null&&h(e,["goAway"],d);const p=c(n,["sessionResumptionUpdate"]);return p!=null&&h(e,["sessionResumptionUpdate"],p),e}function nL(n){const e={},t=c(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=c(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const a=c(n,["fileData"]);a!=null&&h(e,["fileData"],qM(a));const l=c(n,["functionCall"]);l!=null&&h(e,["functionCall"],GM(l));const d=c(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const p=c(n,["inlineData"]);p!=null&&h(e,["inlineData"],fc(p));const m=c(n,["text"]);m!=null&&h(e,["text"],m);const y=c(n,["thought"]);y!=null&&h(e,["thought"],y);const T=c(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const I=c(n,["videoMetadata"]);return I!=null&&h(e,["videoMetadata"],I),e}function rL(n){const e={},t=c(n,["handle"]);if(t!=null&&h(e,["handle"],t),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QI(n){const e={},t=c(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const r=c(n,["voiceConfig"]);if(r!=null&&h(e,["voiceConfig"],r),c(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function iL(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),h(e,["functionDeclarations"],y)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=c(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const a=c(n,["fileSearch"]);a!=null&&h(e,["fileSearch"],a);const l=c(n,["codeExecution"]);if(l!=null&&h(e,["codeExecution"],l),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=c(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],$M(d));const p=c(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],WM(p));const m=c(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function oL(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(I=>HM(I))),h(e,["functionDeclarations"],T)}const r=c(n,["retrieval"]);r!=null&&h(e,["retrieval"],r);const i=c(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const a=c(n,["computerUse"]);if(a!=null&&h(e,["computerUse"],a),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=c(n,["codeExecution"]);l!=null&&h(e,["codeExecution"],l);const d=c(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const p=c(n,["googleMaps"]);p!=null&&h(e,["googleMaps"],p);const m=c(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const y=c(n,["urlContext"]);return y!=null&&h(e,["urlContext"],y),e}function sL(n){const e={},t=c(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const r=c(n,["cachedContentTokenCount"]);r!=null&&h(e,["cachedContentTokenCount"],r);const i=c(n,["candidatesTokenCount"]);i!=null&&h(e,["responseTokenCount"],i);const a=c(n,["toolUsePromptTokenCount"]);a!=null&&h(e,["toolUsePromptTokenCount"],a);const l=c(n,["thoughtsTokenCount"]);l!=null&&h(e,["thoughtsTokenCount"],l);const d=c(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const p=c(n,["promptTokensDetails"]);if(p!=null){let A=p;Array.isArray(A)&&(A=A.map(b=>b)),h(e,["promptTokensDetails"],A)}const m=c(n,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(b=>b)),h(e,["cacheTokensDetails"],A)}const y=c(n,["candidatesTokensDetails"]);if(y!=null){let A=y;Array.isArray(A)&&(A=A.map(b=>b)),h(e,["responseTokensDetails"],A)}const T=c(n,["toolUsePromptTokensDetails"]);if(T!=null){let A=T;Array.isArray(A)&&(A=A.map(b=>b)),h(e,["toolUsePromptTokensDetails"],A)}const I=c(n,["trafficType"]);return I!=null&&h(e,["trafficType"],I),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aL(n){const e={},t=c(n,["data"]);if(t!=null&&h(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function lL(n){const e={},t=c(n,["content"]);t!=null&&h(e,["content"],t);const r=c(n,["citationMetadata"]);r!=null&&h(e,["citationMetadata"],uL(r));const i=c(n,["tokenCount"]);i!=null&&h(e,["tokenCount"],i);const a=c(n,["finishReason"]);a!=null&&h(e,["finishReason"],a);const l=c(n,["avgLogprobs"]);l!=null&&h(e,["avgLogprobs"],l);const d=c(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const p=c(n,["index"]);p!=null&&h(e,["index"],p);const m=c(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const y=c(n,["safetyRatings"]);if(y!=null){let I=y;Array.isArray(I)&&(I=I.map(A=>A)),h(e,["safetyRatings"],I)}const T=c(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function uL(n){const e={},t=c(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),h(e,["citations"],r)}return e}function cL(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["contents"]);if(i!=null){let a=kn(i);Array.isArray(a)&&(a=a.map(l=>l)),h(t,["contents"],a)}return t}function dL(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),h(e,["tokensInfo"],i)}return e}function fL(n){const e={},t=c(n,["values"]);t!=null&&h(e,["values"],t);const r=c(n,["statistics"]);return r!=null&&h(e,["statistics"],hL(r)),e}function hL(n){const e={},t=c(n,["truncated"]);t!=null&&h(e,["truncated"],t);const r=c(n,["token_count"]);return r!=null&&h(e,["tokenCount"],r),e}function rd(n){const e={},t=c(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>IV(a))),h(e,["parts"],i)}const r=c(n,["role"]);return r!=null&&h(e,["role"],r),e}function pL(n){const e={},t=c(n,["controlType"]);t!=null&&h(e,["controlType"],t);const r=c(n,["enableControlImageComputation"]);return r!=null&&h(e,["computeControl"],r),e}function mL(n){const e={};if(c(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function gL(n,e){const t={},r=c(n,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],Jt(r));const i=c(n,["tools"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>t0(d))),h(e,["tools"],l)}const a=c(n,["generationConfig"]);return e!==void 0&&a!=null&&h(e,["generationConfig"],aV(a)),t}function yL(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["contents"]);if(i!=null){let l=kn(i);Array.isArray(l)&&(l=l.map(d=>rd(d))),h(t,["contents"],l)}const a=c(e,["config"]);return a!=null&&mL(a),t}function _L(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["contents"]);if(i!=null){let l=kn(i);Array.isArray(l)&&(l=l.map(d=>d)),h(t,["contents"],l)}const a=c(e,["config"]);return a!=null&&gL(a,t),t}function vL(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["totalTokens"]);r!=null&&h(e,["totalTokens"],r);const i=c(n,["cachedContentTokenCount"]);return i!=null&&h(e,["cachedContentTokenCount"],i),e}function EL(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["totalTokens"]);return r!=null&&h(e,["totalTokens"],r),e}function TL(n,e){const t={},r=c(e,["model"]);return r!=null&&h(t,["_url","name"],qe(n,r)),t}function IL(n,e){const t={},r=c(e,["model"]);return r!=null&&h(t,["_url","name"],qe(n,r)),t}function wL(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function SL(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function CL(n,e){const t={},r=c(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const i=c(n,["negativePrompt"]);e!==void 0&&i!=null&&h(e,["parameters","negativePrompt"],i);const a=c(n,["numberOfImages"]);e!==void 0&&a!=null&&h(e,["parameters","sampleCount"],a);const l=c(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const d=c(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const p=c(n,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const m=c(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const y=c(n,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const T=c(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const I=c(n,["includeRaiReason"]);e!==void 0&&I!=null&&h(e,["parameters","includeRaiReason"],I);const A=c(n,["language"]);e!==void 0&&A!=null&&h(e,["parameters","language"],A);const b=c(n,["outputMimeType"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","mimeType"],b);const B=c(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&h(e,["parameters","outputOptions","compressionQuality"],B);const O=c(n,["addWatermark"]);e!==void 0&&O!=null&&h(e,["parameters","addWatermark"],O);const Q=c(n,["labels"]);e!==void 0&&Q!=null&&h(e,["labels"],Q);const X=c(n,["editMode"]);e!==void 0&&X!=null&&h(e,["parameters","editMode"],X);const K=c(n,["baseSteps"]);return e!==void 0&&K!=null&&h(e,["parameters","editConfig","baseSteps"],K),t}function AL(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const a=c(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>PV(p))),h(t,["instances[0]","referenceImages"],d)}const l=c(e,["config"]);return l!=null&&CL(l,t),t}function RL(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>id(a))),h(e,["generatedImages"],i)}return e}function PL(n,e){const t={},r=c(n,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const i=c(n,["title"]);e!==void 0&&i!=null&&h(e,["requests[]","title"],i);const a=c(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&h(e,["requests[]","outputDimensionality"],a),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function NL(n,e){const t={},r=c(n,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const i=c(n,["title"]);e!==void 0&&i!=null&&h(e,["instances[]","title"],i);const a=c(n,["outputDimensionality"]);e!==void 0&&a!=null&&h(e,["parameters","outputDimensionality"],a);const l=c(n,["mimeType"]);e!==void 0&&l!=null&&h(e,["instances[]","mimeType"],l);const d=c(n,["autoTruncate"]);return e!==void 0&&d!=null&&h(e,["parameters","autoTruncate"],d),t}function xL(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["contents"]);if(i!=null){let d=Vp(n,i);Array.isArray(d)&&(d=d.map(p=>p)),h(t,["requests[]","content"],d)}const a=c(e,["config"]);a!=null&&PL(a,t);const l=c(e,["model"]);return l!==void 0&&h(t,["requests[]","model"],qe(n,l)),t}function kL(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["contents"]);if(i!=null){let l=Vp(n,i);Array.isArray(l)&&(l=l.map(d=>d)),h(t,["instances[]","content"],l)}const a=c(e,["config"]);return a!=null&&NL(a,t),t}function DL(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["embeddings"],a)}const i=c(n,["metadata"]);return i!=null&&h(e,["metadata"],i),e}function ML(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>fL(l))),h(e,["embeddings"],a)}const i=c(n,["metadata"]);return i!=null&&h(e,["metadata"],i),e}function LL(n){const e={},t=c(n,["endpoint"]);t!=null&&h(e,["name"],t);const r=c(n,["deployedModelId"]);return r!=null&&h(e,["deployedModelId"],r),e}function VL(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function UL(n){const e={},t=c(n,["id"]);t!=null&&h(e,["id"],t);const r=c(n,["args"]);r!=null&&h(e,["args"],r);const i=c(n,["name"]);if(i!=null&&h(e,["name"],i),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FL(n){const e={},t=c(n,["mode"]);t!=null&&h(e,["mode"],t);const r=c(n,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function bL(n){const e={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=c(n,["description"]);t!=null&&h(e,["description"],t);const r=c(n,["name"]);r!=null&&h(e,["name"],r);const i=c(n,["parameters"]);i!=null&&h(e,["parameters"],i);const a=c(n,["parametersJsonSchema"]);a!=null&&h(e,["parametersJsonSchema"],a);const l=c(n,["response"]);l!=null&&h(e,["response"],l);const d=c(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function OL(n,e,t){const r={},i=c(e,["systemInstruction"]);t!==void 0&&i!=null&&h(t,["systemInstruction"],rd(Jt(i)));const a=c(e,["temperature"]);a!=null&&h(r,["temperature"],a);const l=c(e,["topP"]);l!=null&&h(r,["topP"],l);const d=c(e,["topK"]);d!=null&&h(r,["topK"],d);const p=c(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const m=c(e,["maxOutputTokens"]);m!=null&&h(r,["maxOutputTokens"],m);const y=c(e,["stopSequences"]);y!=null&&h(r,["stopSequences"],y);const T=c(e,["responseLogprobs"]);T!=null&&h(r,["responseLogprobs"],T);const I=c(e,["logprobs"]);I!=null&&h(r,["logprobs"],I);const A=c(e,["presencePenalty"]);A!=null&&h(r,["presencePenalty"],A);const b=c(e,["frequencyPenalty"]);b!=null&&h(r,["frequencyPenalty"],b);const B=c(e,["seed"]);B!=null&&h(r,["seed"],B);const O=c(e,["responseMimeType"]);O!=null&&h(r,["responseMimeType"],O);const Q=c(e,["responseSchema"]);Q!=null&&h(r,["responseSchema"],Up(Q));const X=c(e,["responseJsonSchema"]);if(X!=null&&h(r,["responseJsonSchema"],X),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const K=c(e,["safetySettings"]);if(t!==void 0&&K!=null){let F=K;Array.isArray(F)&&(F=F.map(D=>NV(D))),h(t,["safetySettings"],F)}const ee=c(e,["tools"]);if(t!==void 0&&ee!=null){let F=Xs(ee);Array.isArray(F)&&(F=F.map(D=>UV(Qs(D)))),h(t,["tools"],F)}const le=c(e,["toolConfig"]);if(t!==void 0&&le!=null&&h(t,["toolConfig"],VV(le)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=c(e,["cachedContent"]);t!==void 0&&oe!=null&&h(t,["cachedContent"],Jr(n,oe));const M=c(e,["responseModalities"]);M!=null&&h(r,["responseModalities"],M);const P=c(e,["mediaResolution"]);P!=null&&h(r,["mediaResolution"],P);const R=c(e,["speechConfig"]);if(R!=null&&h(r,["speechConfig"],Fp(R)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=c(e,["thinkingConfig"]);k!=null&&h(r,["thinkingConfig"],k);const V=c(e,["imageConfig"]);return V!=null&&h(r,["imageConfig"],fV(V)),r}function BL(n,e,t){const r={},i=c(e,["systemInstruction"]);t!==void 0&&i!=null&&h(t,["systemInstruction"],Jt(i));const a=c(e,["temperature"]);a!=null&&h(r,["temperature"],a);const l=c(e,["topP"]);l!=null&&h(r,["topP"],l);const d=c(e,["topK"]);d!=null&&h(r,["topK"],d);const p=c(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const m=c(e,["maxOutputTokens"]);m!=null&&h(r,["maxOutputTokens"],m);const y=c(e,["stopSequences"]);y!=null&&h(r,["stopSequences"],y);const T=c(e,["responseLogprobs"]);T!=null&&h(r,["responseLogprobs"],T);const I=c(e,["logprobs"]);I!=null&&h(r,["logprobs"],I);const A=c(e,["presencePenalty"]);A!=null&&h(r,["presencePenalty"],A);const b=c(e,["frequencyPenalty"]);b!=null&&h(r,["frequencyPenalty"],b);const B=c(e,["seed"]);B!=null&&h(r,["seed"],B);const O=c(e,["responseMimeType"]);O!=null&&h(r,["responseMimeType"],O);const Q=c(e,["responseSchema"]);Q!=null&&h(r,["responseSchema"],Up(Q));const X=c(e,["responseJsonSchema"]);X!=null&&h(r,["responseJsonSchema"],X);const K=c(e,["routingConfig"]);K!=null&&h(r,["routingConfig"],K);const ee=c(e,["modelSelectionConfig"]);ee!=null&&h(r,["modelConfig"],ee);const le=c(e,["safetySettings"]);if(t!==void 0&&le!=null){let Je=le;Array.isArray(Je)&&(Je=Je.map(be=>be)),h(t,["safetySettings"],Je)}const oe=c(e,["tools"]);if(t!==void 0&&oe!=null){let Je=Xs(oe);Array.isArray(Je)&&(Je=Je.map(be=>t0(Qs(be)))),h(t,["tools"],Je)}const M=c(e,["toolConfig"]);t!==void 0&&M!=null&&h(t,["toolConfig"],M);const P=c(e,["labels"]);t!==void 0&&P!=null&&h(t,["labels"],P);const R=c(e,["cachedContent"]);t!==void 0&&R!=null&&h(t,["cachedContent"],Jr(n,R));const k=c(e,["responseModalities"]);k!=null&&h(r,["responseModalities"],k);const V=c(e,["mediaResolution"]);V!=null&&h(r,["mediaResolution"],V);const F=c(e,["speechConfig"]);F!=null&&h(r,["speechConfig"],e0(Fp(F)));const D=c(e,["audioTimestamp"]);D!=null&&h(r,["audioTimestamp"],D);const nt=c(e,["thinkingConfig"]);nt!=null&&h(r,["thinkingConfig"],nt);const Et=c(e,["imageConfig"]);return Et!=null&&h(r,["imageConfig"],hV(Et)),r}function Ov(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["contents"]);if(i!=null){let l=kn(i);Array.isArray(l)&&(l=l.map(d=>rd(d))),h(t,["contents"],l)}const a=c(e,["config"]);return a!=null&&h(t,["generationConfig"],OL(n,a,t)),t}function Bv(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["contents"]);if(i!=null){let l=kn(i);Array.isArray(l)&&(l=l.map(d=>d)),h(t,["contents"],l)}const a=c(e,["config"]);return a!=null&&h(t,["generationConfig"],BL(n,a,t)),t}function qv(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>lL(m))),h(e,["candidates"],p)}const i=c(n,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const a=c(n,["promptFeedback"]);a!=null&&h(e,["promptFeedback"],a);const l=c(n,["responseId"]);l!=null&&h(e,["responseId"],l);const d=c(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function Gv(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(y=>y)),h(e,["candidates"],m)}const i=c(n,["createTime"]);i!=null&&h(e,["createTime"],i);const a=c(n,["modelVersion"]);a!=null&&h(e,["modelVersion"],a);const l=c(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const d=c(n,["responseId"]);d!=null&&h(e,["responseId"],d);const p=c(n,["usageMetadata"]);return p!=null&&h(e,["usageMetadata"],p),e}function qL(n,e){const t={};if(c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const i=c(n,["aspectRatio"]);e!==void 0&&i!=null&&h(e,["parameters","aspectRatio"],i);const a=c(n,["guidanceScale"]);if(e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=c(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const d=c(n,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const p=c(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const m=c(n,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const y=c(n,["language"]);e!==void 0&&y!=null&&h(e,["parameters","language"],y);const T=c(n,["outputMimeType"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","mimeType"],T);const I=c(n,["outputCompressionQuality"]);if(e!==void 0&&I!=null&&h(e,["parameters","outputOptions","compressionQuality"],I),c(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=c(n,["imageSize"]);if(e!==void 0&&A!=null&&h(e,["parameters","sampleImageSize"],A),c(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function GL(n,e){const t={},r=c(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const i=c(n,["negativePrompt"]);e!==void 0&&i!=null&&h(e,["parameters","negativePrompt"],i);const a=c(n,["numberOfImages"]);e!==void 0&&a!=null&&h(e,["parameters","sampleCount"],a);const l=c(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const d=c(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const p=c(n,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const m=c(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const y=c(n,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const T=c(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const I=c(n,["includeRaiReason"]);e!==void 0&&I!=null&&h(e,["parameters","includeRaiReason"],I);const A=c(n,["language"]);e!==void 0&&A!=null&&h(e,["parameters","language"],A);const b=c(n,["outputMimeType"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","mimeType"],b);const B=c(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&h(e,["parameters","outputOptions","compressionQuality"],B);const O=c(n,["addWatermark"]);e!==void 0&&O!=null&&h(e,["parameters","addWatermark"],O);const Q=c(n,["labels"]);e!==void 0&&Q!=null&&h(e,["labels"],Q);const X=c(n,["imageSize"]);e!==void 0&&X!=null&&h(e,["parameters","sampleImageSize"],X);const K=c(n,["enhancePrompt"]);return e!==void 0&&K!=null&&h(e,["parameters","enhancePrompt"],K),t}function HL(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const a=c(e,["config"]);return a!=null&&qL(a,t),t}function zL(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const a=c(e,["config"]);return a!=null&&GL(a,t),t}function $L(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>rV(l))),h(e,["generatedImages"],a)}const i=c(n,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],ZI(i)),e}function WL(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>id(l))),h(e,["generatedImages"],a)}const i=c(n,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],jI(i)),e}function KL(n,e){const t={},r=c(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=c(n,["durationSeconds"]);if(e!==void 0&&i!=null&&h(e,["parameters","durationSeconds"],i),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=c(n,["aspectRatio"]);e!==void 0&&a!=null&&h(e,["parameters","aspectRatio"],a);const l=c(n,["resolution"]);e!==void 0&&l!=null&&h(e,["parameters","resolution"],l);const d=c(n,["personGeneration"]);if(e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d),c(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=c(n,["negativePrompt"]);e!==void 0&&p!=null&&h(e,["parameters","negativePrompt"],p);const m=c(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&h(e,["parameters","enhancePrompt"],m),c(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=c(n,["lastFrame"]);e!==void 0&&y!=null&&h(e,["instances[0]","lastFrame"],od(y));const T=c(n,["referenceImages"]);if(e!==void 0&&T!=null){let I=T;Array.isArray(I)&&(I=I.map(A=>YV(A))),h(e,["instances[0]","referenceImages"],I)}if(c(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function JL(n,e){const t={},r=c(n,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const i=c(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const a=c(n,["fps"]);e!==void 0&&a!=null&&h(e,["parameters","fps"],a);const l=c(n,["durationSeconds"]);e!==void 0&&l!=null&&h(e,["parameters","durationSeconds"],l);const d=c(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const p=c(n,["aspectRatio"]);e!==void 0&&p!=null&&h(e,["parameters","aspectRatio"],p);const m=c(n,["resolution"]);e!==void 0&&m!=null&&h(e,["parameters","resolution"],m);const y=c(n,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const T=c(n,["pubsubTopic"]);e!==void 0&&T!=null&&h(e,["parameters","pubsubTopic"],T);const I=c(n,["negativePrompt"]);e!==void 0&&I!=null&&h(e,["parameters","negativePrompt"],I);const A=c(n,["enhancePrompt"]);e!==void 0&&A!=null&&h(e,["parameters","enhancePrompt"],A);const b=c(n,["generateAudio"]);e!==void 0&&b!=null&&h(e,["parameters","generateAudio"],b);const B=c(n,["lastFrame"]);e!==void 0&&B!=null&&h(e,["instances[0]","lastFrame"],jn(B));const O=c(n,["referenceImages"]);if(e!==void 0&&O!=null){let K=O;Array.isArray(K)&&(K=K.map(ee=>QV(ee))),h(e,["instances[0]","referenceImages"],K)}const Q=c(n,["mask"]);e!==void 0&&Q!=null&&h(e,["instances[0]","mask"],JV(Q));const X=c(n,["compressionQuality"]);return e!==void 0&&X!=null&&h(e,["parameters","compressionQuality"],X),t}function YL(n){const e={},t=c(n,["name"]);t!=null&&h(e,["name"],t);const r=c(n,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(n,["done"]);i!=null&&h(e,["done"],i);const a=c(n,["error"]);a!=null&&h(e,["error"],a);const l=c(n,["response","generateVideoResponse"]);return l!=null&&h(e,["response"],jL(l)),e}function QL(n){const e={},t=c(n,["name"]);t!=null&&h(e,["name"],t);const r=c(n,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(n,["done"]);i!=null&&h(e,["done"],i);const a=c(n,["error"]);a!=null&&h(e,["error"],a);const l=c(n,["response"]);return l!=null&&h(e,["response"],eV(l)),e}function XL(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const a=c(e,["image"]);a!=null&&h(t,["instances[0]","image"],od(a));const l=c(e,["video"]);l!=null&&h(t,["instances[0]","video"],n0(l));const d=c(e,["source"]);d!=null&&tV(d,t);const p=c(e,["config"]);return p!=null&&KL(p,t),t}function ZL(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const a=c(e,["image"]);a!=null&&h(t,["instances[0]","image"],jn(a));const l=c(e,["video"]);l!=null&&h(t,["instances[0]","video"],r0(l));const d=c(e,["source"]);d!=null&&nV(d,t);const p=c(e,["config"]);return p!=null&&JL(p,t),t}function jL(n){const e={},t=c(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>oV(l))),h(e,["generatedVideos"],a)}const r=c(n,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=c(n,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function eV(n){const e={},t=c(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>sV(l))),h(e,["generatedVideos"],a)}const r=c(n,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=c(n,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function tV(n,e){const t={},r=c(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=c(n,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],od(i));const a=c(n,["video"]);return e!==void 0&&a!=null&&h(e,["instances[0]","video"],n0(a)),t}function nV(n,e){const t={},r=c(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=c(n,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],jn(i));const a=c(n,["video"]);return e!==void 0&&a!=null&&h(e,["instances[0]","video"],r0(a)),t}function rV(n){const e={},t=c(n,["_self"]);t!=null&&h(e,["image"],pV(t));const r=c(n,["raiFilteredReason"]);r!=null&&h(e,["raiFilteredReason"],r);const i=c(n,["_self"]);return i!=null&&h(e,["safetyAttributes"],ZI(i)),e}function id(n){const e={},t=c(n,["_self"]);t!=null&&h(e,["image"],XI(t));const r=c(n,["raiFilteredReason"]);r!=null&&h(e,["raiFilteredReason"],r);const i=c(n,["_self"]);i!=null&&h(e,["safetyAttributes"],jI(i));const a=c(n,["prompt"]);return a!=null&&h(e,["enhancedPrompt"],a),e}function iV(n){const e={},t=c(n,["_self"]);t!=null&&h(e,["mask"],XI(t));const r=c(n,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),h(e,["labels"],i)}return e}function oV(n){const e={},t=c(n,["video"]);return t!=null&&h(e,["video"],WV(t)),e}function sV(n){const e={},t=c(n,["_self"]);return t!=null&&h(e,["video"],KV(t)),e}function aV(n){const e={},t=c(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const r=c(n,["responseJsonSchema"]);r!=null&&h(e,["responseJsonSchema"],r);const i=c(n,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const a=c(n,["candidateCount"]);a!=null&&h(e,["candidateCount"],a);const l=c(n,["enableAffectiveDialog"]);l!=null&&h(e,["enableAffectiveDialog"],l);const d=c(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const p=c(n,["logprobs"]);p!=null&&h(e,["logprobs"],p);const m=c(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const y=c(n,["mediaResolution"]);y!=null&&h(e,["mediaResolution"],y);const T=c(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const I=c(n,["responseLogprobs"]);I!=null&&h(e,["responseLogprobs"],I);const A=c(n,["responseMimeType"]);A!=null&&h(e,["responseMimeType"],A);const b=c(n,["responseModalities"]);b!=null&&h(e,["responseModalities"],b);const B=c(n,["responseSchema"]);B!=null&&h(e,["responseSchema"],B);const O=c(n,["routingConfig"]);O!=null&&h(e,["routingConfig"],O);const Q=c(n,["seed"]);Q!=null&&h(e,["seed"],Q);const X=c(n,["speechConfig"]);X!=null&&h(e,["speechConfig"],e0(X));const K=c(n,["stopSequences"]);K!=null&&h(e,["stopSequences"],K);const ee=c(n,["temperature"]);ee!=null&&h(e,["temperature"],ee);const le=c(n,["thinkingConfig"]);le!=null&&h(e,["thinkingConfig"],le);const oe=c(n,["topK"]);oe!=null&&h(e,["topK"],oe);const M=c(n,["topP"]);if(M!=null&&h(e,["topP"],M),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function lV(n,e){const t={},r=c(e,["model"]);return r!=null&&h(t,["_url","name"],qe(n,r)),t}function uV(n,e){const t={},r=c(e,["model"]);return r!=null&&h(t,["_url","name"],qe(n,r)),t}function cV(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function dV(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function fV(n){const e={},t=c(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const r=c(n,["imageSize"]);if(r!=null&&h(e,["imageSize"],r),c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function hV(n){const e={},t=c(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const r=c(n,["imageSize"]);r!=null&&h(e,["imageSize"],r);const i=c(n,["outputMimeType"]);i!=null&&h(e,["imageOutputOptions","mimeType"],i);const a=c(n,["outputCompressionQuality"]);return a!=null&&h(e,["imageOutputOptions","compressionQuality"],a),e}function pV(n){const e={},t=c(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],bi(t));const r=c(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function XI(n){const e={},t=c(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const r=c(n,["bytesBase64Encoded"]);r!=null&&h(e,["imageBytes"],bi(r));const i=c(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function od(n){const e={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=c(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],bi(t));const r=c(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function jn(n){const e={},t=c(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const r=c(n,["imageBytes"]);r!=null&&h(e,["bytesBase64Encoded"],bi(r));const i=c(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function mV(n,e,t){const r={},i=c(e,["pageSize"]);t!==void 0&&i!=null&&h(t,["_query","pageSize"],i);const a=c(e,["pageToken"]);t!==void 0&&a!=null&&h(t,["_query","pageToken"],a);const l=c(e,["filter"]);t!==void 0&&l!=null&&h(t,["_query","filter"],l);const d=c(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],HI(n,d)),r}function gV(n,e,t){const r={},i=c(e,["pageSize"]);t!==void 0&&i!=null&&h(t,["_query","pageSize"],i);const a=c(e,["pageToken"]);t!==void 0&&a!=null&&h(t,["_query","pageToken"],a);const l=c(e,["filter"]);t!==void 0&&l!=null&&h(t,["_query","filter"],l);const d=c(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],HI(n,d)),r}function yV(n,e){const t={},r=c(e,["config"]);return r!=null&&mV(n,r,t),t}function _V(n,e){const t={},r=c(e,["config"]);return r!=null&&gV(n,r,t),t}function vV(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(n,["_self"]);if(i!=null){let a=zI(i);Array.isArray(a)&&(a=a.map(l=>Rh(l))),h(e,["models"],a)}return e}function EV(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(n,["_self"]);if(i!=null){let a=zI(i);Array.isArray(a)&&(a=a.map(l=>Ph(l))),h(e,["models"],a)}return e}function TV(n){const e={},t=c(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const r=c(n,["segmentationClasses"]);r!=null&&h(e,["maskClasses"],r);const i=c(n,["maskDilation"]);return i!=null&&h(e,["dilation"],i),e}function Rh(n){const e={},t=c(n,["name"]);t!=null&&h(e,["name"],t);const r=c(n,["displayName"]);r!=null&&h(e,["displayName"],r);const i=c(n,["description"]);i!=null&&h(e,["description"],i);const a=c(n,["version"]);a!=null&&h(e,["version"],a);const l=c(n,["_self"]);l!=null&&h(e,["tunedModelInfo"],FV(l));const d=c(n,["inputTokenLimit"]);d!=null&&h(e,["inputTokenLimit"],d);const p=c(n,["outputTokenLimit"]);p!=null&&h(e,["outputTokenLimit"],p);const m=c(n,["supportedGenerationMethods"]);m!=null&&h(e,["supportedActions"],m);const y=c(n,["temperature"]);y!=null&&h(e,["temperature"],y);const T=c(n,["maxTemperature"]);T!=null&&h(e,["maxTemperature"],T);const I=c(n,["topP"]);I!=null&&h(e,["topP"],I);const A=c(n,["topK"]);A!=null&&h(e,["topK"],A);const b=c(n,["thinking"]);return b!=null&&h(e,["thinking"],b),e}function Ph(n){const e={},t=c(n,["name"]);t!=null&&h(e,["name"],t);const r=c(n,["displayName"]);r!=null&&h(e,["displayName"],r);const i=c(n,["description"]);i!=null&&h(e,["description"],i);const a=c(n,["versionId"]);a!=null&&h(e,["version"],a);const l=c(n,["deployedModels"]);if(l!=null){let T=l;Array.isArray(T)&&(T=T.map(I=>LL(I))),h(e,["endpoints"],T)}const d=c(n,["labels"]);d!=null&&h(e,["labels"],d);const p=c(n,["_self"]);p!=null&&h(e,["tunedModelInfo"],bV(p));const m=c(n,["defaultCheckpointId"]);m!=null&&h(e,["defaultCheckpointId"],m);const y=c(n,["checkpoints"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(I=>I)),h(e,["checkpoints"],T)}return e}function IV(n){const e={},t=c(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=c(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const a=c(n,["fileData"]);a!=null&&h(e,["fileData"],VL(a));const l=c(n,["functionCall"]);l!=null&&h(e,["functionCall"],UL(l));const d=c(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const p=c(n,["inlineData"]);p!=null&&h(e,["inlineData"],aL(p));const m=c(n,["text"]);m!=null&&h(e,["text"],m);const y=c(n,["thought"]);y!=null&&h(e,["thought"],y);const T=c(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const I=c(n,["videoMetadata"]);return I!=null&&h(e,["videoMetadata"],I),e}function wV(n){const e={},t=c(n,["productImage"]);return t!=null&&h(e,["image"],jn(t)),e}function SV(n,e){const t={},r=c(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const i=c(n,["baseSteps"]);e!==void 0&&i!=null&&h(e,["parameters","baseSteps"],i);const a=c(n,["outputGcsUri"]);e!==void 0&&a!=null&&h(e,["parameters","storageUri"],a);const l=c(n,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const d=c(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const p=c(n,["personGeneration"]);e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p);const m=c(n,["addWatermark"]);e!==void 0&&m!=null&&h(e,["parameters","addWatermark"],m);const y=c(n,["outputMimeType"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","mimeType"],y);const T=c(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const I=c(n,["enhancePrompt"]);e!==void 0&&I!=null&&h(e,["parameters","enhancePrompt"],I);const A=c(n,["labels"]);return e!==void 0&&A!=null&&h(e,["labels"],A),t}function CV(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["source"]);i!=null&&RV(i,t);const a=c(e,["config"]);return a!=null&&SV(a,t),t}function AV(n){const e={},t=c(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>id(i))),h(e,["generatedImages"],r)}return e}function RV(n,e){const t={},r=c(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=c(n,["personImage"]);e!==void 0&&i!=null&&h(e,["instances[0]","personImage","image"],jn(i));const a=c(n,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>wV(d))),h(e,["instances[0]","productImages"],l)}return t}function PV(n){const e={},t=c(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],jn(t));const r=c(n,["referenceId"]);r!=null&&h(e,["referenceId"],r);const i=c(n,["referenceType"]);i!=null&&h(e,["referenceType"],i);const a=c(n,["maskImageConfig"]);a!=null&&h(e,["maskImageConfig"],TV(a));const l=c(n,["controlImageConfig"]);l!=null&&h(e,["controlImageConfig"],pL(l));const d=c(n,["styleImageConfig"]);d!=null&&h(e,["styleImageConfig"],d);const p=c(n,["subjectImageConfig"]);return p!=null&&h(e,["subjectImageConfig"],p),e}function ZI(n){const e={},t=c(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const r=c(n,["safetyAttributes","scores"]);r!=null&&h(e,["scores"],r);const i=c(n,["contentType"]);return i!=null&&h(e,["contentType"],i),e}function jI(n){const e={},t=c(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const r=c(n,["safetyAttributes","scores"]);r!=null&&h(e,["scores"],r);const i=c(n,["contentType"]);return i!=null&&h(e,["contentType"],i),e}function NV(n){const e={},t=c(n,["category"]);if(t!=null&&h(e,["category"],t),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(n,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function xV(n){const e={},t=c(n,["image"]);return t!=null&&h(e,["image"],jn(t)),e}function kV(n,e){const t={},r=c(n,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const i=c(n,["maxPredictions"]);e!==void 0&&i!=null&&h(e,["parameters","maxPredictions"],i);const a=c(n,["confidenceThreshold"]);e!==void 0&&a!=null&&h(e,["parameters","confidenceThreshold"],a);const l=c(n,["maskDilation"]);e!==void 0&&l!=null&&h(e,["parameters","maskDilation"],l);const d=c(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&h(e,["parameters","binaryColorThreshold"],d);const p=c(n,["labels"]);return e!==void 0&&p!=null&&h(e,["labels"],p),t}function DV(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["source"]);i!=null&&LV(i,t);const a=c(e,["config"]);return a!=null&&kV(a,t),t}function MV(n){const e={},t=c(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>iV(i))),h(e,["generatedMasks"],r)}return e}function LV(n,e){const t={},r=c(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=c(n,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],jn(i));const a=c(n,["scribbleImage"]);return e!==void 0&&a!=null&&h(e,["instances[0]","scribble"],xV(a)),t}function e0(n){const e={},t=c(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const r=c(n,["voiceConfig"]);if(r!=null&&h(e,["voiceConfig"],r),c(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function VV(n){const e={},t=c(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],FL(t));const r=c(n,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function UV(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),h(e,["functionDeclarations"],y)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=c(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const a=c(n,["fileSearch"]);a!=null&&h(e,["fileSearch"],a);const l=c(n,["codeExecution"]);if(l!=null&&h(e,["codeExecution"],l),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=c(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],cV(d));const p=c(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],dV(p));const m=c(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function t0(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(I=>bL(I))),h(e,["functionDeclarations"],T)}const r=c(n,["retrieval"]);r!=null&&h(e,["retrieval"],r);const i=c(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const a=c(n,["computerUse"]);if(a!=null&&h(e,["computerUse"],a),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=c(n,["codeExecution"]);l!=null&&h(e,["codeExecution"],l);const d=c(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const p=c(n,["googleMaps"]);p!=null&&h(e,["googleMaps"],p);const m=c(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const y=c(n,["urlContext"]);return y!=null&&h(e,["urlContext"],y),e}function FV(n){const e={},t=c(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const r=c(n,["createTime"]);r!=null&&h(e,["createTime"],r);const i=c(n,["updateTime"]);return i!=null&&h(e,["updateTime"],i),e}function bV(n){const e={},t=c(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const r=c(n,["createTime"]);r!=null&&h(e,["createTime"],r);const i=c(n,["updateTime"]);return i!=null&&h(e,["updateTime"],i),e}function OV(n,e){const t={},r=c(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const i=c(n,["description"]);e!==void 0&&i!=null&&h(e,["description"],i);const a=c(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&h(e,["defaultCheckpointId"],a),t}function BV(n,e){const t={},r=c(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const i=c(n,["description"]);e!==void 0&&i!=null&&h(e,["description"],i);const a=c(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&h(e,["defaultCheckpointId"],a),t}function qV(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","name"],qe(n,r));const i=c(e,["config"]);return i!=null&&OV(i,t),t}function GV(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["config"]);return i!=null&&BV(i,t),t}function HV(n,e){const t={},r=c(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const i=c(n,["safetyFilterLevel"]);e!==void 0&&i!=null&&h(e,["parameters","safetySetting"],i);const a=c(n,["personGeneration"]);e!==void 0&&a!=null&&h(e,["parameters","personGeneration"],a);const l=c(n,["includeRaiReason"]);e!==void 0&&l!=null&&h(e,["parameters","includeRaiReason"],l);const d=c(n,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const p=c(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const m=c(n,["enhanceInputImage"]);e!==void 0&&m!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],m);const y=c(n,["imagePreservationFactor"]);e!==void 0&&y!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const T=c(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const I=c(n,["numberOfImages"]);e!==void 0&&I!=null&&h(e,["parameters","sampleCount"],I);const A=c(n,["mode"]);return e!==void 0&&A!=null&&h(e,["parameters","mode"],A),t}function zV(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["_url","model"],qe(n,r));const i=c(e,["image"]);i!=null&&h(t,["instances[0]","image"],jn(i));const a=c(e,["upscaleFactor"]);a!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],a);const l=c(e,["config"]);return l!=null&&HV(l,t),t}function $V(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>id(a))),h(e,["generatedImages"],i)}return e}function WV(n){const e={},t=c(n,["uri"]);t!=null&&h(e,["uri"],t);const r=c(n,["encodedVideo"]);r!=null&&h(e,["videoBytes"],bi(r));const i=c(n,["encoding"]);return i!=null&&h(e,["mimeType"],i),e}function KV(n){const e={},t=c(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const r=c(n,["bytesBase64Encoded"]);r!=null&&h(e,["videoBytes"],bi(r));const i=c(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function JV(n){const e={},t=c(n,["image"]);t!=null&&h(e,["_self"],jn(t));const r=c(n,["maskMode"]);return r!=null&&h(e,["maskMode"],r),e}function YV(n){const e={},t=c(n,["image"]);t!=null&&h(e,["image"],od(t));const r=c(n,["referenceType"]);return r!=null&&h(e,["referenceType"],r),e}function QV(n){const e={},t=c(n,["image"]);t!=null&&h(e,["image"],jn(t));const r=c(n,["referenceType"]);return r!=null&&h(e,["referenceType"],r),e}function n0(n){const e={},t=c(n,["uri"]);t!=null&&h(e,["uri"],t);const r=c(n,["videoBytes"]);r!=null&&h(e,["encodedVideo"],bi(r));const i=c(n,["mimeType"]);return i!=null&&h(e,["encoding"],i),e}function r0(n){const e={},t=c(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const r=c(n,["videoBytes"]);r!=null&&h(e,["bytesBase64Encoded"],bi(r));const i=c(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XV(n,e){const t={},r=c(n,["displayName"]);return e!==void 0&&r!=null&&h(e,["displayName"],r),t}function ZV(n){const e={},t=c(n,["config"]);return t!=null&&XV(t,e),e}function jV(n,e){const t={},r=c(n,["force"]);return e!==void 0&&r!=null&&h(e,["_query","force"],r),t}function e2(n){const e={},t=c(n,["name"]);t!=null&&h(e,["_url","name"],t);const r=c(n,["config"]);return r!=null&&jV(r,e),e}function t2(n){const e={},t=c(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function n2(n,e){const t={},r=c(n,["customMetadata"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["customMetadata"],a)}const i=c(n,["chunkingConfig"]);return e!==void 0&&i!=null&&h(e,["chunkingConfig"],i),t}function r2(n){const e={},t=c(n,["name"]);t!=null&&h(e,["name"],t);const r=c(n,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(n,["done"]);i!=null&&h(e,["done"],i);const a=c(n,["error"]);a!=null&&h(e,["error"],a);const l=c(n,["response"]);return l!=null&&h(e,["response"],o2(l)),e}function i2(n){const e={},t=c(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const r=c(n,["fileName"]);r!=null&&h(e,["fileName"],r);const i=c(n,["config"]);return i!=null&&n2(i,e),e}function o2(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["parent"]);r!=null&&h(e,["parent"],r);const i=c(n,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function s2(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function a2(n){const e={},t=c(n,["config"]);return t!=null&&s2(t,e),e}function l2(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(n,["fileSearchStores"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["fileSearchStores"],a)}return e}function i0(n,e){const t={},r=c(n,["mimeType"]);e!==void 0&&r!=null&&h(e,["mimeType"],r);const i=c(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const a=c(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),h(e,["customMetadata"],d)}const l=c(n,["chunkingConfig"]);return e!==void 0&&l!=null&&h(e,["chunkingConfig"],l),t}function u2(n){const e={},t=c(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const r=c(n,["config"]);return r!=null&&i0(r,e),e}function c2(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d2="Content-Type",f2="X-Server-Timeout",h2="User-Agent",Nh="x-goog-api-client",p2="1.31.0",m2=`google-genai-sdk/${p2}`,g2="v1beta1",y2="v1beta",Hv=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class _2{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:g2,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:y2,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[l,d]of Object.entries(e.queryParams))i.searchParams.append(l,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,i.toString(),e.abortSignal),this.unaryApiCall(i,a,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[i,a]of Object.entries(t))typeof a=="object"?r[i]=Object.assign(Object.assign({},r[i]),a):a!==void 0&&(r[i]=a);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,i.toString(),e.abortSignal),this.streamApiCall(i,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r,i){if(t&&t.timeout||i){const a=new AbortController,l=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}i&&i.addEventListener("abort",()=>{a.abort()}),e.signal=l}return t&&t.extraBody!==null&&v2(e,t.extraBody),e.headers=await this.getHeadersInternal(t,r),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await zv(i),new Sh(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await zv(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var t;return Ls(this,arguments,function*(){const i=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let l="";for(;;){const{done:d,value:p}=yield et(i.read());if(d){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=a.decode(p,{stream:!0});try{const T=JSON.parse(m);if("error"in T){const I=JSON.parse(JSON.stringify(T.error)),A=I.status,b=I.code,B=`got status: ${A}. ${JSON.stringify(T)}`;if(b>=400&&b<600)throw new nd({message:B,status:b})}}catch(T){if(T.name==="ApiError")throw T}l+=m;let y=l.match(Hv);for(;y;){const T=y[1];try{const I=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield et(new Sh(I)),l=l.slice(y[0].length),y=l.match(Hv)}catch(I){throw new Error(`exception parsing stream chunk ${T}. ${I}`)}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=m2+" "+this.clientOptions.userAgentExtra;return e[h2]=t,e[Nh]=t,e[d2]="application/json",e}async getHeadersInternal(e,t){const r=new Headers;if(e&&e.headers){for(const[i,a]of Object.entries(e.headers))r.append(i,a);e.timeout&&e.timeout>0&&r.append(f2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,t),r}getFileName(e){var t;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(t=r.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),r}async uploadFile(e,t){var r;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);i.sizeBytes=String(l.size);const d=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=d;const p={file:i},m=this.getFileName(e),y=ae("upload/v1beta/files",p._url),T=await this.fetchUploadUrl(y,i.sizeBytes,i.mimeType,m,p,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,r){var i;const a=this.clientOptions.uploader,l=await a.stat(t),d=String(l.size),p=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:l.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(t),T={};r!=null&&i0(r,T);const I=await this.fetchUploadUrl(m,d,p,y,T,r==null?void 0:r.httpOptions);return a.uploadToFileSearchStore(t,I,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,r,i,a,l){var d;let p={};l?p=l:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function zv(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const i=JSON.stringify(r);throw t>=400&&t<600?new nd({message:i,status:t}):new Error(i)}}function v2(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,l){const d=Object.assign({},a);for(const p in l)if(Object.prototype.hasOwnProperty.call(l,p)){const m=l[p],y=d[p];m&&typeof m=="object"&&!Array.isArray(m)&&y&&typeof y=="object"&&!Array.isArray(y)?d[p]=r(y,m):(y&&m&&typeof y!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof y}, New type: ${typeof m}. Overwriting.`),d[p]=m)}return d}const i=r(t,e);n.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const E2="mcp_used/unknown";let T2=!1;function o0(n){for(const e of n)if(I2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return T2}function s0(n){var e;const t=(e=n[Nh])!==null&&e!==void 0?e:"";n[Nh]=(t+` ${E2}`).trimStart()}function I2(n){return n!==null&&typeof n=="object"&&n instanceof Op}function w2(n,e=100){return Ls(this,arguments,function*(){let r,i=0;for(;i<e;){const a=yield et(n.listTools({cursor:r}));for(const l of a.tools)yield yield et(l),i++;if(!a.nextCursor)break;r=a.nextCursor}})}class Op{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Op(e,t)}async initialize(){var e,t,r,i;if(this.mcpTools.length>0)return;const a={},l=[];for(const y of this.mcpClients)try{for(var d=!0,p=(t=void 0,ul(w2(y))),m;m=await p.next(),e=m.done,!e;d=!0){i=m.value,d=!1;const T=i;l.push(T);const I=T.name;if(a[I])throw new Error(`Duplicate function name ${I} found in MCP tools. Please ensure function names are unique.`);a[I]=y}}catch(T){t={error:T}}finally{try{!d&&!e&&(r=p.return)&&await r.call(p)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),t1(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await i.callTool({name:r.name,arguments:r.args},void 0,a);t.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function S2(n,e,t){const r=new KD;let i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),Object.assign(r,i),e(r)}class C2{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=P2(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const y=new Promise(K=>{m=K}),T=e.callbacks,I=function(){m({})},A=this.apiClient,b={onopen:I,onmessage:K=>{S2(A,T.onmessage,K)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(K){},onclose:(r=T==null?void 0:T.onclose)!==null&&r!==void 0?r:function(K){}},B=this.webSocketFactory.create(p,R2(l),b);B.connect(),await y;const X={setup:{model:qe(this.apiClient,e.model)}};return B.send(JSON.stringify(X)),new A2(B,this.apiClient)}}class A2{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=ZM(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=XM(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Ps.PLAY)}pause(){this.sendPlaybackControl(Ps.PAUSE)}stop(){this.sendPlaybackControl(Ps.STOP)}resetContext(){this.sendPlaybackControl(Ps.RESET_CONTEXT)}close(){this.conn.close()}}function R2(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function P2(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function x2(n,e,t){const r=new WD;let i;t.data instanceof Blob?i=await t.data.text():t.data instanceof ArrayBuffer?i=new TextDecoder().decode(t.data):i=t.data;const a=JSON.parse(i);if(n.isVertexAI()){const l=tL(a);Object.assign(r,l)}else Object.assign(r,a);e(r)}class k2{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new C2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,i,a,l,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let y;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&o0(e.config.tools)&&s0(T);const I=V2(T);if(this.apiClient.isVertexAI())y=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(I,y);else{const R=this.apiClient.getApiKey();let k="BidiGenerateContent",V="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",V="access_token"),y=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${k}?${V}=${R}`}let A=()=>{};const b=new Promise(R=>{A=R}),B=e.callbacks,O=function(){var R;(R=B==null?void 0:B.onopen)===null||R===void 0||R.call(B),A({})},Q=this.apiClient,X={onopen:O,onmessage:R=>{x2(Q,B.onmessage,R)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(R){},onclose:(r=B==null?void 0:B.onclose)!==null&&r!==void 0?r:function(R){}},K=this.webSocketFactory.create(y,L2(I),X);K.connect(),await b;let ee=qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ee.startsWith("publishers/")){const R=this.apiClient.getProject(),k=this.apiClient.getLocation();ee=`projects/${R}/locations/${k}/`+ee}let le={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[xc.AUDIO]}:e.config.responseModalities=[xc.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const oe=(d=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[],M=[];for(const R of oe)if(this.isCallableTool(R)){const k=R;M.push(await k.tool())}else M.push(R);M.length>0&&(e.config.tools=M);const P={model:ee,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?le=QM(this.apiClient,P):le=YM(this.apiClient,P),delete le.config,K.send(JSON.stringify(le)),new M2(K,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const D2={turnComplete:!0};class M2{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=kn(t.turns),e.isVertexAI()||(r=r.map(i=>rd(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(N2)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},D2),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:eL(e)}:t={realtimeInput:jM(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function L2(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function V2(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $v=10;function Wv(n){var e,t,r;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const l of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Vs(l)){i=!0;break}if(!i)return!0;const a=(r=n==null?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Vs(n){return"callTool"in n&&typeof n.callTool=="function"}function U2(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>Vs(i)))!==null&&r!==void 0?r:!1}function Kv(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((r,i)=>{if(Vs(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(i)}),t}function Jv(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F2 extends Kr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var r,i,a,l,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!U2(t)||Wv(t.config))return await this.generateContentInternal(p);const m=Kv(t);if(m.length>0){const B=m.map(O=>`tools[${O}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${B}.`)}let y,T;const I=kn(p.contents),A=(a=(i=(r=p.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:$v;let b=0;for(;b<A&&(y=await this.generateContentInternal(p),!(!y.functionCalls||y.functionCalls.length===0));){const B=y.candidates[0].content,O=[];for(const Q of(d=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[])if(Vs(Q)){const K=await Q.callTool(y.functionCalls);O.push(...K)}b++,T={role:"user",parts:O},p.contents=kn(p.contents),p.contents.push(B),p.contents.push(T),Jv(p.config)&&(I.push(B),I.push(T))}return Jv(p.config)&&(y.automaticFunctionCallingHistory=I),y},this.generateContentStream=async t=>{var r,i,a,l,d;if(this.maybeMoveToResponseJsonSchem(t),Wv(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const p=Kv(t);if(p.length>0){const T=p.map(I=>`tools[${I}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(a=(i=(r=t==null?void 0:t.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,y=(d=(l=t==null?void 0:t.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var i;let a;const l=[];if(r!=null&&r.generatedImages)for(const p of r.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((i=p==null?void 0:p.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:l.push(p);let d;return a?d={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:d={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},d}),this.list=async t=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new xo($r.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(l),l)},this.editImage=async t=>{const r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));const i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async t=>{var r,i,a,l,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=t.video)===null||r===void 0)&&r.uri&&(!((i=t.video)===null||i===void 0)&&i.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((l=(a=t.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,r,i;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const l=await Promise.all(a.map(async p=>Vs(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(d.config.tools=l,e.config&&e.config.tools&&o0(e.config.tools)){const p=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),s0(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,r,i;const a=new Map;for(const l of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(Vs(l)){const d=l,p=await d.tool();for(const m of(i=p.functionDeclarations)!==null&&i!==void 0?i:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,d)}}return a}async processAfcStream(e){var t,r,i;const a=(i=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:$v;let l=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(m,y,T){var I,A;return Ls(this,arguments,function*(){for(var b,B,O,Q;d<a;){l&&(d++,l=!1);const le=yield et(m.processParamsMaybeAddMcpUsage(T)),oe=yield et(m.generateContentStreamInternal(le)),M=[],P=[];try{for(var X=!0,K=(B=void 0,ul(oe)),ee;ee=yield et(K.next()),b=ee.done,!b;X=!0){Q=ee.value,X=!1;const R=Q;if(yield yield et(R),R.candidates&&(!((I=R.candidates[0])===null||I===void 0)&&I.content)){P.push(R.candidates[0].content);for(const k of(A=R.candidates[0].content.parts)!==null&&A!==void 0?A:[])if(d<a&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(k.functionCall.name)){const V=yield et(y.get(k.functionCall.name).callTool([k.functionCall]));M.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(R){B={error:R}}finally{try{!X&&!b&&(O=K.return)&&(yield et(O.call(K)))}finally{if(B)throw B.error}}if(M.length>0){l=!0;const R=new Qa;R.candidates=[{content:{role:"user",parts:M}}],yield yield et(R);const k=[];k.push(...P),k.push({role:"user",parts:M});const V=kn(T.contents).concat(k);T.contents=V}else break}})})(this,p,e)}async generateContentInternal(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=Bv(this.apiClient,e);return d=ae("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=Gv(y),I=new Qa;return Object.assign(I,T),I})}else{const m=Ov(this.apiClient,e);return d=ae("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=qv(y),I=new Qa;return Object.assign(I,T),I})}}async generateContentStreamInternal(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=Bv(this.apiClient,e);return d=ae("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(T){return Ls(this,arguments,function*(){var I,A,b,B;try{for(var O=!0,Q=ul(T),X;X=yield et(Q.next()),I=X.done,!I;O=!0){B=X.value,O=!1;const K=B,ee=Gv(yield et(K.json()));ee.sdkHttpResponse={headers:K.headers};const le=new Qa;Object.assign(le,ee),yield yield et(le)}}catch(K){A={error:K}}finally{try{!O&&!I&&(b=Q.return)&&(yield et(b.call(Q)))}finally{if(A)throw A.error}}})})}else{const m=Ov(this.apiClient,e);return d=ae("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(T){return Ls(this,arguments,function*(){var I,A,b,B;try{for(var O=!0,Q=ul(T),X;X=yield et(Q.next()),I=X.done,!I;O=!0){B=X.value,O=!1;const K=B,ee=qv(yield et(K.json()));ee.sdkHttpResponse={headers:K.headers};const le=new Qa;Object.assign(le,ee),yield yield et(le)}}catch(K){A={error:K}}finally{try{!O&&!I&&(b=Q.return)&&(yield et(b.call(Q)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=kL(this.apiClient,e);return d=ae("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=ML(y),I=new Iv;return Object.assign(I,T),I})}else{const m=xL(this.apiClient,e);return d=ae("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=DL(y),I=new Iv;return Object.assign(I,T),I})}}async generateImagesInternal(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=zL(this.apiClient,e);return d=ae("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=WL(y),I=new wv;return Object.assign(I,T),I})}else{const m=HL(this.apiClient,e);return d=ae("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=$L(y),I=new wv;return Object.assign(I,T),I})}}async editImageInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=AL(this.apiClient,e);return a=ae("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>{const m=RL(p),y=new VD;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=zV(this.apiClient,e);return a=ae("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>{const m=$V(p),y=new UD;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=CV(this.apiClient,e);return a=ae("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const m=AV(p),y=new FD;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=DV(this.apiClient,e);return a=ae("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const m=MV(p),y=new bD;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=uV(this.apiClient,e);return d=ae("{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>Ph(y))}else{const m=lV(this.apiClient,e);return d=ae("{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Rh(y))}}async listInternal(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=_V(this.apiClient,e);return d=ae("{models_url}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=EV(y),I=new Sv;return Object.assign(I,T),I})}else{const m=yV(this.apiClient,e);return d=ae("{models_url}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=vV(y),I=new Sv;return Object.assign(I,T),I})}}async update(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=GV(this.apiClient,e);return d=ae("{model}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>Ph(y))}else{const m=qV(this.apiClient,e);return d=ae("{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Rh(y))}}async delete(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=IL(this.apiClient,e);return d=ae("{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=SL(y),I=new Cv;return Object.assign(I,T),I})}else{const m=TL(this.apiClient,e);return d=ae("{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=wL(y),I=new Cv;return Object.assign(I,T),I})}}async countTokens(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=_L(this.apiClient,e);return d=ae("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=EL(y),I=new Av;return Object.assign(I,T),I})}else{const m=yL(this.apiClient,e);return d=ae("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=vL(y),I=new Av;return Object.assign(I,T),I})}}async computeTokens(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=cL(this.apiClient,e);return a=ae("{model}:computeTokens",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>{const m=dL(p),y=new OD;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=ZL(this.apiClient,e);return d=ae("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>{const T=QL(y),I=new kc;return Object.assign(I,T),I})}else{const m=XL(this.apiClient,e);return d=ae("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const T=YL(y),I=new kc;return Object.assign(I,T),I})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b2 extends Kr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=ND(e);return d=ae("{operationName}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l}else{const m=PD(e);return d=ae("{operationName}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l}}async fetchPredictVideosOperationInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=TD(e);return a=ae("{resourceName}:fetchPredictOperation",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O2(n){const e={},t=c(n,["data"]);if(t!=null&&h(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function B2(n){const e={},t=c(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>Y2(a))),h(e,["parts"],i)}const r=c(n,["role"]);return r!=null&&h(e,["role"],r),e}function q2(n,e,t){const r={},i=c(e,["expireTime"]);t!==void 0&&i!=null&&h(t,["expireTime"],i);const a=c(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&h(t,["newSessionExpireTime"],a);const l=c(e,["uses"]);t!==void 0&&l!=null&&h(t,["uses"],l);const d=c(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],J2(n,d));const p=c(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&h(t,["fieldMask"],p),r}function G2(n,e){const t={},r=c(e,["config"]);return r!=null&&h(t,["config"],q2(n,r,t)),t}function H2(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function z2(n){const e={},t=c(n,["id"]);t!=null&&h(e,["id"],t);const r=c(n,["args"]);r!=null&&h(e,["args"],r);const i=c(n,["name"]);if(i!=null&&h(e,["name"],i),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $2(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function W2(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function K2(n,e){const t={},r=c(n,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],r);const i=c(n,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const a=c(n,["temperature"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","temperature"],a);const l=c(n,["topP"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topP"],l);const d=c(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const p=c(n,["maxOutputTokens"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","maxOutputTokens"],p);const m=c(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const y=c(n,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const T=c(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],bp(T));const I=c(n,["thinkingConfig"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","thinkingConfig"],I);const A=c(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],A);const b=c(n,["systemInstruction"]);e!==void 0&&b!=null&&h(e,["setup","systemInstruction"],B2(Jt(b)));const B=c(n,["tools"]);if(e!==void 0&&B!=null){let oe=Xs(B);Array.isArray(oe)&&(oe=oe.map(M=>X2(Qs(M)))),h(e,["setup","tools"],oe)}const O=c(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],Q2(O));const Q=c(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&h(e,["setup","inputAudioTranscription"],Q);const X=c(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const K=c(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&h(e,["setup","realtimeInputConfig"],K);const ee=c(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&h(e,["setup","contextWindowCompression"],ee);const le=c(n,["proactivity"]);return e!==void 0&&le!=null&&h(e,["setup","proactivity"],le),t}function J2(n,e){const t={},r=c(e,["model"]);r!=null&&h(t,["setup","model"],qe(n,r));const i=c(e,["config"]);return i!=null&&h(t,["config"],K2(i,t)),t}function Y2(n){const e={},t=c(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=c(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const a=c(n,["fileData"]);a!=null&&h(e,["fileData"],H2(a));const l=c(n,["functionCall"]);l!=null&&h(e,["functionCall"],z2(l));const d=c(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const p=c(n,["inlineData"]);p!=null&&h(e,["inlineData"],O2(p));const m=c(n,["text"]);m!=null&&h(e,["text"],m);const y=c(n,["thought"]);y!=null&&h(e,["thought"],y);const T=c(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const I=c(n,["videoMetadata"]);return I!=null&&h(e,["videoMetadata"],I),e}function Q2(n){const e={},t=c(n,["handle"]);if(t!=null&&h(e,["handle"],t),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function X2(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),h(e,["functionDeclarations"],y)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=c(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const a=c(n,["fileSearch"]);a!=null&&h(e,["fileSearch"],a);const l=c(n,["codeExecution"]);if(l!=null&&h(e,["codeExecution"],l),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=c(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],$2(d));const p=c(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],W2(p));const m=c(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z2(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(a=>`${t}.${a}`);e.push(...i)}else e.push(t)}return e.join(",")}function j2(n,e){let t=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const i=n.fieldMask;if(t){const a=Z2(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];i.length>0&&(d=i.map(m=>l.includes(m)?`generationConfig.${m}`:m));const p=[];a&&p.push(a),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?n.fieldMask=i.join(","):delete n.fieldMask;return n}class eU extends Kr{constructor(e){super(),this.apiClient=e}async create(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=G2(this.apiClient,e);a=ae("auth_tokens",d._url),l=d._query,delete d.config,delete d._url,delete d._query;const p=j2(d,e.config);return i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tU(n,e){const t={},r=c(n,["force"]);return e!==void 0&&r!=null&&h(e,["_query","force"],r),t}function nU(n){const e={},t=c(n,["name"]);t!=null&&h(e,["_url","name"],t);const r=c(n,["config"]);return r!=null&&tU(r,e),e}function rU(n){const e={},t=c(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function iU(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function oU(n){const e={},t=c(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const r=c(n,["config"]);return r!=null&&iU(r,e),e}function sU(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(n,["documents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aU extends Kr{constructor(e){super(),this.apiClient=e,this.list=async t=>new xo($r.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:t.parent,config:r.config}),await this.listInternal(t),t)}async get(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rU(e);return a=ae("{name}",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async delete(e){var t,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=nU(e);i=ae("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oU(e);return a=ae("{parent}/documents",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const m=sU(p),y=new BD;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lU extends Kr{constructor(e,t=new aU(e)){super(),this.apiClient=e,this.documents=t,this.list=async(r={})=>new xo($r.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ZV(e);return a=ae("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async get(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=t2(e);return a=ae("{name}",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async delete(e){var t,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=e2(e);i=ae("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=a2(e);return a=ae("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const m=l2(p),y=new qD;return Object.assign(y,m),y})}}async uploadToFileSearchStoreInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=u2(e);return a=ae("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const m=c2(p),y=new GD;return Object.assign(y,m),y})}}async importFile(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=i2(e);return a=ae("{file_search_store_name}:importFile",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const m=r2(p),y=new Mp;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uU(n,e){const t={},r=c(n,["name"]);return r!=null&&h(t,["_url","name"],r),t}function cU(n,e){const t={},r=c(n,["name"]);return r!=null&&h(t,["_url","name"],r),t}function dU(n,e){const t={},r=c(n,["sdkHttpResponse"]);return r!=null&&h(t,["sdkHttpResponse"],r),t}function fU(n,e){const t={},r=c(n,["sdkHttpResponse"]);return r!=null&&h(t,["sdkHttpResponse"],r),t}function hU(n,e,t){const r={};if(c(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=c(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&h(e,["displayName"],i),c(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=c(n,["epochCount"]);e!==void 0&&a!=null&&h(e,["tuningTask","hyperparameters","epochCount"],a);const l=c(n,["learningRateMultiplier"]);if(l!=null&&h(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),c(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=c(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const p=c(n,["learningRate"]);if(e!==void 0&&p!=null&&h(e,["tuningTask","hyperparameters","learningRate"],p),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function pU(n,e,t){const r={};let i=c(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const A=c(n,["validationDataset"]);e!==void 0&&A!=null&&h(e,["supervisedTuningSpec"],Yv(A))}else if(i==="PREFERENCE_TUNING"){const A=c(n,["validationDataset"]);e!==void 0&&A!=null&&h(e,["preferenceOptimizationSpec"],Yv(A))}const a=c(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&h(e,["tunedModelDisplayName"],a);const l=c(n,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);let d=c(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const A=c(n,["epochCount"]);e!==void 0&&A!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(d==="PREFERENCE_TUNING"){const A=c(n,["epochCount"]);e!==void 0&&A!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let p=c(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const A=c(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(p==="PREFERENCE_TUNING"){const A=c(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let m=c(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=c(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(m==="PREFERENCE_TUNING"){const A=c(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let y=c(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const A=c(n,["adapterSize"]);e!==void 0&&A!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(y==="PREFERENCE_TUNING"){const A=c(n,["adapterSize"]);e!==void 0&&A!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(c(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=c(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const I=c(n,["beta"]);return e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],I),r}function mU(n,e){const t={},r=c(n,["baseModel"]);r!=null&&h(t,["baseModel"],r);const i=c(n,["preTunedModel"]);i!=null&&h(t,["preTunedModel"],i);const a=c(n,["trainingDataset"]);a!=null&&AU(a);const l=c(n,["config"]);return l!=null&&hU(l,t),t}function gU(n,e){const t={},r=c(n,["baseModel"]);r!=null&&h(t,["baseModel"],r);const i=c(n,["preTunedModel"]);i!=null&&h(t,["preTunedModel"],i);const a=c(n,["trainingDataset"]);a!=null&&RU(a,t,e);const l=c(n,["config"]);return l!=null&&pU(l,t,e),t}function yU(n,e){const t={},r=c(n,["name"]);return r!=null&&h(t,["_url","name"],r),t}function _U(n,e){const t={},r=c(n,["name"]);return r!=null&&h(t,["_url","name"],r),t}function vU(n,e,t){const r={},i=c(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const a=c(n,["pageToken"]);e!==void 0&&a!=null&&h(e,["_query","pageToken"],a);const l=c(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),r}function EU(n,e,t){const r={},i=c(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const a=c(n,["pageToken"]);e!==void 0&&a!=null&&h(e,["_query","pageToken"],a);const l=c(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),r}function TU(n,e){const t={},r=c(n,["config"]);return r!=null&&vU(r,t),t}function IU(n,e){const t={},r=c(n,["config"]);return r!=null&&EU(r,t),t}function wU(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&h(t,["sdkHttpResponse"],r);const i=c(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const a=c(n,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>a0(d))),h(t,["tuningJobs"],l)}return t}function SU(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&h(t,["sdkHttpResponse"],r);const i=c(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const a=c(n,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>xh(d))),h(t,["tuningJobs"],l)}return t}function CU(n,e){const t={},r=c(n,["name"]);r!=null&&h(t,["model"],r);const i=c(n,["name"]);return i!=null&&h(t,["endpoint"],i),t}function AU(n,e){const t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=c(n,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),h(t,["examples","examples"],i)}return t}function RU(n,e,t){const r={};let i=c(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const l=c(n,["gcsUri"]);e!==void 0&&l!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(i==="PREFERENCE_TUNING"){const l=c(n,["gcsUri"]);e!==void 0&&l!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=c(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=c(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=c(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(c(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function a0(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&h(t,["sdkHttpResponse"],r);const i=c(n,["name"]);i!=null&&h(t,["name"],i);const a=c(n,["state"]);a!=null&&h(t,["state"],qI(a));const l=c(n,["createTime"]);l!=null&&h(t,["createTime"],l);const d=c(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const p=c(n,["tuningTask","completeTime"]);p!=null&&h(t,["endTime"],p);const m=c(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const y=c(n,["description"]);y!=null&&h(t,["description"],y);const T=c(n,["baseModel"]);T!=null&&h(t,["baseModel"],T);const I=c(n,["_self"]);return I!=null&&h(t,["tunedModel"],CU(I)),t}function xh(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&h(t,["sdkHttpResponse"],r);const i=c(n,["name"]);i!=null&&h(t,["name"],i);const a=c(n,["state"]);a!=null&&h(t,["state"],qI(a));const l=c(n,["createTime"]);l!=null&&h(t,["createTime"],l);const d=c(n,["startTime"]);d!=null&&h(t,["startTime"],d);const p=c(n,["endTime"]);p!=null&&h(t,["endTime"],p);const m=c(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const y=c(n,["error"]);y!=null&&h(t,["error"],y);const T=c(n,["description"]);T!=null&&h(t,["description"],T);const I=c(n,["baseModel"]);I!=null&&h(t,["baseModel"],I);const A=c(n,["tunedModel"]);A!=null&&h(t,["tunedModel"],A);const b=c(n,["preTunedModel"]);b!=null&&h(t,["preTunedModel"],b);const B=c(n,["supervisedTuningSpec"]);B!=null&&h(t,["supervisedTuningSpec"],B);const O=c(n,["preferenceOptimizationSpec"]);O!=null&&h(t,["preferenceOptimizationSpec"],O);const Q=c(n,["tuningDataStats"]);Q!=null&&h(t,["tuningDataStats"],Q);const X=c(n,["encryptionSpec"]);X!=null&&h(t,["encryptionSpec"],X);const K=c(n,["partnerModelTuningSpec"]);K!=null&&h(t,["partnerModelTuningSpec"],K);const ee=c(n,["customBaseModel"]);ee!=null&&h(t,["customBaseModel"],ee);const le=c(n,["experiment"]);le!=null&&h(t,["experiment"],le);const oe=c(n,["labels"]);oe!=null&&h(t,["labels"],oe);const M=c(n,["outputUri"]);M!=null&&h(t,["outputUri"],M);const P=c(n,["pipelineJob"]);P!=null&&h(t,["pipelineJob"],P);const R=c(n,["serviceAccount"]);R!=null&&h(t,["serviceAccount"],R);const k=c(n,["tunedModelDisplayName"]);k!=null&&h(t,["tunedModelDisplayName"],k);const V=c(n,["veoTuningSpec"]);return V!=null&&h(t,["veoTuningSpec"],V),t}function PU(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&h(t,["sdkHttpResponse"],r);const i=c(n,["name"]);i!=null&&h(t,["name"],i);const a=c(n,["metadata"]);a!=null&&h(t,["metadata"],a);const l=c(n,["done"]);l!=null&&h(t,["done"],l);const d=c(n,["error"]);return d!=null&&h(t,["error"],d),t}function Yv(n,e){const t={},r=c(n,["gcsUri"]);r!=null&&h(t,["validationDatasetUri"],r);const i=c(n,["vertexDatasetResource"]);return i!=null&&h(t,["validationDatasetUri"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NU extends Kr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new xo($r.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var r;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel};!((r=t.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:i});return a.baseModel=void 0,await this.tuneInternal(a)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),a=await this.tuneMldevInternal(i);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:wh.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=_U(e);return d=ae("{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>xh(y))}else{const m=yU(e);return d=ae("{name}",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>a0(y))}}async listInternal(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=IU(e);return d=ae("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=SU(y),I=new Rv;return Object.assign(I,T),I})}else{const m=TU(e);return d=ae("tunedModels",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=wU(y),I=new Rv;return Object.assign(I,T),I})}}async cancel(e){var t,r,i,a;let l,d="",p={};if(this.apiClient.isVertexAI()){const m=cU(e);return d=ae("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=fU(y),I=new Pv;return Object.assign(I,T),I})}else{const m=uU(e);return d=ae("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const T=dU(y),I=new Pv;return Object.assign(I,T),I})}}async tuneInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=gU(e,e);return a=ae("tuningJobs",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>xh(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=mU(e);return a=ae("tunedModels",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>PU(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xU{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const kU=1024*1024*8,DU=3,MU=1e3,LU=2,Mc="x-goog-upload-status";async function VU(n,e,t){var r;const i=await l0(n,e,t),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Mc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function UU(n,e,t){var r;const i=await l0(n,e,t),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Mc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=VI(a),d=new Lp;return Object.assign(d,l),d}async function l0(n,e,t){var r,i;let a=0,l=0,d=new Sh(new Response),p="upload";for(a=n.size;l<a;){const m=Math.min(kU,a-l),y=n.slice(l,l+m);l+m>=a&&(p+=", finalize");let T=0,I=MU;for(;T<DU&&(d=await t.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(l),"Content-Length":String(m)}}}),!(!((r=d==null?void 0:d.headers)===null||r===void 0)&&r[Mc]));)T++,await bU(I),I=I*LU;if(l+=m,((i=d==null?void 0:d.headers)===null||i===void 0?void 0:i[Mc])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function FU(n){return{size:n.size,type:n.type}}function bU(n){return new Promise(e=>setTimeout(e,n))}class OU{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await VU(e,t,r)}async uploadToFileSearchStore(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await UU(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await FU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BU{create(e,t,r){return new qU(e,t,r)}}class qU{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qv="x-goog-api-key";class GU{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(Qv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Qv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HU="gl-node/";class zU{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=vD(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new GU(this.apiKey);this.apiClient=new _2({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:HU+"web",uploader:new OU,downloader:new xU}),this.models=new F2(this.apiClient),this.live=new k2(this.apiClient,i,new BU),this.batches=new J1(this.apiClient),this.chats=new NM(this.models,this.apiClient),this.caches=new AM(this.apiClient),this.files=new OM(this.apiClient),this.operations=new b2(this.apiClient),this.authTokens=new eU(this.apiClient),this.tunings=new NU(this.apiClient),this.fileSearchStores=new lU(this.apiClient)}}const $U="AIzaSyD4Hk_B_Q59XWm-Ke2yEooDtvp6mxchQVs",Li=new zU({apiKey:$U}),Lc=[{category:As.HARM_CATEGORY_HARASSMENT,threshold:Rs.BLOCK_ONLY_HIGH},{category:As.HARM_CATEGORY_HATE_SPEECH,threshold:Rs.BLOCK_ONLY_HIGH},{category:As.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Rs.BLOCK_ONLY_HIGH},{category:As.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Rs.BLOCK_ONLY_HIGH}],WU=n=>{switch(n){case Xa.A4_PORTRAIT:return"3:4";case Xa.A4_LANDSCAPE:return"4:3";case Xa.MOBILE_STORY:return"9:16";case Xa.SQUARE:default:return"1:1"}},Vc=n=>{const e=n.match(/^data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+);base64,(.+)$/);return e&&e.length===3?{mimeType:e[1],data:e[2]}:{mimeType:"image/jpeg",data:n.replace(/^data:image\/\w+;base64,/,"")}},kh=async n=>{if(n.startsWith("data:"))return Vc(n);try{const e=await fetch(n);if(!e.ok)throw new Error(`Failed to fetch image: ${e.statusText}`);const t=await e.blob();return new Promise((r,i)=>{const a=new FileReader;a.onloadend=()=>{const l=a.result;r(Vc(l))},a.onerror=i,a.readAsDataURL(t)})}catch(e){throw console.warn("Failed to fetch remote image (likely CORS issue). Using placeholder/skipping.",e),e}},KU=async(n,e)=>{try{return(await Li.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:e,data:n}},{text:"Analyze this image of a child. Describe their physical appearance in detail to help an artist draw a portrait. Focus on: Hair style/color, Eye color, Skin tone, Facial structure, and distinct features. Return a concise comma-separated list of traits."}]}})).text||"A happy child"}catch(t){return console.warn("Analysis failed",t),"A happy child"}},hF=async n=>{var d,p,m,y,T,I;if(!n.photoBase64)throw new Error("Photo required for magic photoshoot");const{mimeType:e,data:t}=Vc(n.photoBase64),r=await KU(t,e);try{const A=`
        Transform this photo into a cinematic fantasy portrait.
        Subject: A ${n.age} year old ${n.gender}.
        Physical Description: ${r}.
        Costume/Theme: ${n.theme}.
        Style: High quality, movie poster style, cinematic lighting, highly detailed.
        IMPORTANT: Preserve the facial features and likeness of the child in the input image as much as possible, while integrating them into the fantasy theme.
      `,b=await Li.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:e,data:t}},{text:A}]},config:{imageConfig:{aspectRatio:"1:1"},safetySettings:Lc}});let B="";for(const O of((m=(p=(d=b.candidates)==null?void 0:d[0])==null?void 0:p.content)==null?void 0:m.parts)||[])if(O.inlineData){B=`data:${O.inlineData.mimeType};base64,${O.inlineData.data}`;break}if(B)return{imageUrl:B,description:r};console.warn("Gemini returned no image (likely safety block). Switching to fallback.")}catch(A){console.warn("Image-to-image generation failed. Switching to fallback.",A)}console.debug("Attempting fallback generation with description:",r);const i=`
    Cinematic studio photoshoot of a ${n.age} year old ${n.gender}.
    Character Description: ${r}.
    Costume: ${n.theme}.
    Style: High-end photography, 8k resolution, cinematic lighting, photorealistic, highly detailed, Disney-Pixar realism.
    Pose: Confident and heroic.
  `,a=await Li.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:i}]},config:{imageConfig:{aspectRatio:"1:1"},safetySettings:Lc}});let l="";for(const A of((I=(T=(y=a.candidates)==null?void 0:y[0])==null?void 0:T.content)==null?void 0:I.parts)||[])if(A.inlineData){l=`data:${A.inlineData.mimeType};base64,${A.inlineData.data}`;break}if(!l)throw new Error("Failed to generate avatar image (Both primary and fallback methods failed).");return{imageUrl:l,description:r}},JU=async n=>{const e=`
    Create a fun, engaging children's story (exactly 5 pages) for a ${n.age} year old ${n.gender} named ${n.childName}.
    Theme: ${n.theme}.
    Buddy: ${n.buddyName?`Sidekick named ${n.buddyName} (${n.buddyType})`:"A magical friend"}.
    
    Structure the story in exactly 5 pages with this narrative arc:
    Page 1: The Hook/Introduction (Setting the scene and introducing the character).
    Page 2: The Adventure Begins (Something magical or exciting happens).
    Page 3: The Challenge (A small puzzling moment or fun obstacle).
    Page 4: The Climax (Solving the problem with the buddy).
    Page 5: Happy Ending (Success and celebration).

    STYLE: The text should be "bubbly", fun, rhythmic, and simple for a child to read. Use excitement!
    
    For each page, provide:
    1. The story text (2-3 sentences max).
    2. A simple visual description of actions and setting (focus on main character, minimize background clutter).
    
    Structure the response as a valid JSON object matching the schema.
    `,t=await Li.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{responseMimeType:"application/json",responseSchema:{type:tn.OBJECT,properties:{title:{type:tn.STRING},pages:{type:tn.ARRAY,items:{type:tn.OBJECT,properties:{id:{type:tn.INTEGER},text:{type:tn.STRING},sceneDescription:{type:tn.STRING}},required:["id","text","sceneDescription"]}}},required:["title","pages"]}}}),r=JSON.parse(t.text||"{}"),i={id:0,text:r.title,imagePrompt:`Cover art for a children's book titled "${r.title}". Theme: ${n.theme}. Character: ${n.description}. Style: Vibrant, colorful, Disney-Pixar style.`,imageUrl:n.avatarUrl,isLoadingImage:!1,isCover:!0},a=(r.pages||[]).map((l,d)=>({id:d+1,text:l.text,imagePrompt:l.sceneDescription,isLoadingImage:!0,isCover:!1}));return{title:r.title,pages:[i,...a]}},pF=async(n,e,t,r)=>{const i=WU(e);let a=null;if(r){const{mimeType:y,data:T}=await kh(r);a={inlineData:{mimeType:y,data:T}}}const l=`
      Create a CHILDREN'S COLORING PAGE based on this scene.
      Scene: ${n}.
      Character: ${t} (Adapt the reference character into this style).
      
      STRICT VISUAL STYLE:
      - THICK, BOLD, CLEAN black outlines only.
      - NO SHADING, NO TEXTURE, NO GRAYSCALE, NO HATCHING.
      - SIMPLE CARTOON STYLE (like a Disney junior coloring book).
      - Minimal background (focus on the character).
      - White background.
  `,d=a?[a,{text:l}]:[{text:l}];console.debug("Generating Line Art...");const p=await Li.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:d},config:{imageConfig:{aspectRatio:i},safetySettings:Lc}});return{lineArt:(y=>{var T,I,A;for(const b of((A=(I=(T=y.candidates)==null?void 0:T[0])==null?void 0:I.content)==null?void 0:A.parts)||[])if(b.inlineData)return`data:${b.inlineData.mimeType};base64,${b.inlineData.data}`;return""})(p),coloredReference:""}},mF=async(n,e,t)=>{var m,y,T;const{mimeType:r,data:i}=await kh(n),{mimeType:a,data:l}=await kh(e),p=await Li.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:r,data:i}},{inlineData:{mimeType:a,data:l}},{text:`
      Color this line art image (first image).
      Use the character reference (second image) to match colors/style perfectly.
      Style: Vibrant 3D animated movie style, Pixar style, high quality, cinematic lighting.
      Keep the composition and lines of the first image exactly as they are, just add color.
  `}]},config:{imageConfig:{aspectRatio:"1:1"},safetySettings:Lc}});for(const I of((T=(y=(m=p.candidates)==null?void 0:m[0])==null?void 0:y.content)==null?void 0:T.parts)||[])if(I.inlineData)return`data:${I.inlineData.mimeType};base64,${I.inlineData.data}`;return""},gF=async(n,e)=>{var l,d,p,m,y,T;if(!n.photoBase64)throw new Error("Photo required");const{mimeType:t,data:r}=Vc(n.photoBase64),i=`
      Photoshoot session continued.
      Subject: A ${n.age} year old ${n.gender}, described as ${n.description}.
      Theme: ${n.theme}.
      Specific Shot: ${e}.
      Style: High-end photography, 8k resolution, cinematic lighting, photorealistic.
    `;try{const I=await Li.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:t,data:r}},{text:i}]},config:{imageConfig:{aspectRatio:"1:1"}}});for(const A of((p=(d=(l=I.candidates)==null?void 0:l[0])==null?void 0:d.content)==null?void 0:p.parts)||[])if(A.inlineData)return`data:${A.inlineData.mimeType};base64,${A.inlineData.data}`}catch{console.warn("Variation generation failed with image. Trying text-only fallback.")}const a=await Li.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:i}]},config:{imageConfig:{aspectRatio:"1:1"}}});for(const I of((T=(y=(m=a.candidates)==null?void 0:m[0])==null?void 0:y.content)==null?void 0:T.parts)||[])if(I.inlineData)return`data:${I.inlineData.mimeType};base64,${I.inlineData.data}`;throw new Error("Failed to generate image variation")},Dh=async(n,e,t)=>{const r=`${Date.now()}-${Math.random().toString(36).substr(2,9)}.png`,i=oD(fD,`users/${n}/${t}/${r}`),a=await rD(i,e,"data_url");return await iD(a.ref)},YU=async(n,e,t,r=!1)=>{var i;try{let a={...t};a.photoBase64&&a.photoBase64.startsWith("data:")&&(a.photoBase64=await Dh(n,a.photoBase64,"stories"));const l=await Promise.all(e.pages.map(async I=>{let A=I.imageUrl||"";return A.startsWith("data:")&&(A=await Dh(n,A,"stories")),{...I,imageUrl:A}})),d={...e,pages:l},p=((i=l[0])==null?void 0:i.imageUrl)||"",m={userId:n,title:e.title,coverUrl:p,createdAt:Date.now(),storyData:d,paperSize:t.paperSize,config:a,isPurchased:r},y=JSON.parse(JSON.stringify(m));return{id:(await mI(Zc(td,"stories"),y)).id,...m}}catch(a){throw console.error("Error saving story",a),a}},yF=async n=>{const e=cI(Zc(td,"stories"),dI("userId","==",n),fI("createdAt","desc"));return(await pI(e)).docs.map(r=>({id:r.id,...r.data()}))},QU=async(n,e,t,r)=>{try{const i=await Dh(n,e,"photos"),a={userId:n,url:i,prompt:t,theme:r,createdAt:Date.now()};return{id:(await mI(Zc(td,"photos"),a)).id,...a}}catch(i){throw console.error("Error saving photo",i),i}},_F=async n=>{const e=cI(Zc(td,"photos"),dI("userId","==",n),fI("createdAt","desc"));return(await pI(e)).docs.map(r=>({id:r.id,...r.data()}))},XU=We.lazy(()=>Vi(()=>import("./StoryConfig-DbpdX8vt.js"),__vite__mapDeps([0,1,2,3,4]))),ZU=We.lazy(()=>Vi(()=>import("./StoryViewer-B6i1i-xm.js"),__vite__mapDeps([5,6,7,2,4]))),jU=We.lazy(()=>Vi(()=>import("./PhotoshootGallery-ZyKwmsdl.js"),__vite__mapDeps([8,6,7,9,2,10]))),eF=We.lazy(()=>Vi(()=>import("./Pricing-Dsoj3tg6.js"),__vite__mapDeps([11,12]))),tF=We.lazy(()=>Vi(()=>import("./Login-BGWOqODC.js"),__vite__mapDeps([13,9,14,7]))),nF=We.lazy(()=>Vi(()=>import("./Signup-CHyMzVpJ.js"),__vite__mapDeps([15,9,1,14,7]))),rF=We.lazy(()=>Vi(()=>import("./Dashboard-CfI-gWH3.js"),__vite__mapDeps([16,3,10]))),iF=We.lazy(()=>Vi(()=>import("./InfoPage-DiiLNDg_.js"),__vite__mapDeps([17,9,14,12]))),oF=()=>{const[n,e]=We.useState(Re.LANDING),[t,r]=We.useState(null),[i,a]=We.useState(null),[l,d]=We.useState(null),[p,m]=We.useState(!1),[y,T]=We.useState(!1),[I,A]=We.useState(""),[b,B]=We.useState(!1);We.useEffect(()=>{const R=AA(kl,k=>{k?(r({id:k.uid,name:k.displayName||"User",email:k.email||"",avatarUrl:k.photoURL||`https://ui-avatars.com/api/?name=${k.email}&background=0ea5e9&color=fff`}),(n===Re.LOGIN||n===Re.SIGNUP)&&e(Re.DASHBOARD)):(r(null),n===Re.DASHBOARD&&e(Re.LANDING))});return()=>R()},[n]);const O=async()=>{await LI(),r(null),e(Re.LANDING)},Q=R=>{r(R),e(Re.DASHBOARD)},X=()=>{e(t?Re.CONFIG:Re.LOGIN)},K=async R=>{T(!0),d(R);try{const k=await JU(R);a(k),e(Re.STORY_VIEW)}catch(k){alert("Something went wrong creating the magic. The AI might be busy (Rate Limit), please try again in a moment."),console.error(k)}finally{T(!1)}},ee=R=>{d(R),e(Re.PHOTOSHOOT_GALLERY)},le=async(R,k)=>{const V=R||i,F=k??p;if(t&&V&&l){B(!0);try{await YU(t.id,V,l,F),R&&a(R),k!==void 0&&m(k)}catch(D){throw alert("Failed to save story. Please try again."),console.error(D),D}finally{B(!1)}}},oe=R=>{a(R.storyData),d(R.config),m(R.isPurchased||!1),e(Re.STORY_VIEW)},M=async(R,k)=>{t&&l&&QU(t.id,R,k,l.theme).catch(V=>console.error("Auto-save failed",V))},P=R=>{A(R),e(Re.INFO_PAGE),window.scrollTo(0,0)};return N.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans text-slate-900 flex flex-col",children:[N.jsx(hD,{setAppState:e,user:t,onLogout:O}),N.jsx("main",{className:"flex-1 pt-28 print:pt-0",children:N.jsxs(We.Suspense,{fallback:N.jsx("div",{className:"flex h-[50vh] w-full items-center justify-center",children:N.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-brand-500 border-t-transparent rounded-full"})}),children:[n===Re.LANDING&&N.jsx(pD,{onStart:X,user:t}),n===Re.LOGIN&&N.jsx(tF,{setAppState:e,onLoginSuccess:Q}),n===Re.SIGNUP&&N.jsx(nF,{setAppState:e,onLoginSuccess:Q}),n===Re.DASHBOARD&&t&&N.jsx(rF,{user:t,setAppState:e,onSelectStory:oe}),n===Re.CONFIG&&N.jsx(XU,{onSubmit:K,onPhotoshootMode:ee,isGenerating:y}),n===Re.STORY_VIEW&&i&&l&&N.jsx(ZU,{story:i,paperSize:l.paperSize,characterDescription:l.childName,isPurchasedExternal:p,onBack:()=>e(Re.DASHBOARD),onSave:(R,k)=>le(R,k)}),n===Re.PHOTOSHOOT_GALLERY&&l&&N.jsx(jU,{config:l,onBack:()=>e(Re.DASHBOARD),onSavePhoto:M}),n===Re.PRICING&&N.jsx(eF,{onBack:()=>e(Re.LANDING)}),n===Re.INFO_PAGE&&N.jsx(iF,{pageKey:I,onBack:()=>e(Re.LANDING)})]})}),N.jsx(mD,{onNavigate:P,setAppState:e}),b&&N.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center backdrop-blur-sm",children:N.jsxs("div",{className:"bg-white p-6 rounded-2xl flex items-center space-x-4",children:[N.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-brand-500 border-t-transparent rounded-full"}),N.jsx("span",{className:"font-bold text-slate-800",children:"Saving to Cloud Library..."})]})})]})},u0=document.getElementById("root");if(!u0)throw new Error("Could not find root element to mount to");const sF=ww.createRoot(u0);sF.render(N.jsx(gw.StrictMode,{children:N.jsx(oF,{})}));export{Re as A,xw as B,kw as C,Xa as P,gw as R,Hw as S,Aw as T,$w as X,qw as a,pF as b,ct as c,mF as d,gF as e,Gw as f,hF as g,iy as h,fF as i,N as j,yF as k,cF as l,_F as m,We as r,dF as s};
