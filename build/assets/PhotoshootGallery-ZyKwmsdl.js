import{r as i,j as e,e as N}from"./index-W2rP_A9A.js";import{P as w}from"./PaymentModal-DNwPN9aS.js";import{A as v}from"./arrow-left-CNZyOFWW.js";import{R as k,D as u}from"./refresh-cw-CsxKXGEf.js";import{I as C}from"./image-B4TWdGcZ.js";import{L as p}from"./lock-CYEKKvdY.js";const L=[{label:"Wide Angle Scene",prompt:"Wide angle full body shot, standing confidently in the environment, epic background"},{label:"Close-up Portrait",prompt:"Extreme close up portrait, smiling happily, looking at camera, shallow depth of field"},{label:"Action Shot",prompt:"Dynamic action pose, running or flying or jumping, high energy, motion blur"},{label:"With Companion",prompt:"Interacting with a friendly magical creature or robot or animal relevant to the theme"}],E=({config:c,onBack:b,onSavePhoto:f})=>{const[d,h]=i.useState(L.map((s,a)=>({id:a.toString(),label:s.label,prompt:s.prompt,isLoading:!0,url:void 0}))),[g,n]=i.useState(!1),[t,j]=i.useState(!1);i.useEffect(()=>{(async()=>{for(let a=0;a<d.length;a++){const l=d[a];if(!l.url)try{const r=await N(c,l.prompt);h(m=>m.map(o=>o.id===l.id?{...o,url:r,isLoading:!1}:o)),f(r,l.prompt)}catch(r){console.error(`Failed to generate ${l.label}`,r),h(m=>m.map(o=>o.id===l.id?{...o,isLoading:!1}:o))}}})()},[]);const x=(s,a)=>{if(!t){n(!0);return}const l=document.createElement("a");l.href=s,l.download=`kidzy-gallery-${a.replace(/\s+/g,"-").toLowerCase()}.png`,document.body.appendChild(l),l.click(),document.body.removeChild(l)},y=()=>{n(!1),j(!0)};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[g&&e.jsx(w,{itemLabel:"Unlock High-Res Gallery Pack",price:99,onClose:()=>n(!1),onSuccess:y}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:b,className:"mr-4 p-2 hover:bg-slate-100 rounded-full transition",children:e.jsx(v,{size:24,className:"text-slate-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-slate-900",children:"Magic Photoshoot Gallery"}),e.jsxs("p",{className:"text-slate-600",children:["Exclusive AI studio shots of ",c.childName," as a ",c.theme]})]})]}),!t&&e.jsx("button",{onClick:()=>n(!0),className:"bg-brand-600 hover:bg-brand-700 text-white px-6 py-3 rounded-full font-bold shadow-xl shadow-brand-200 animate-pulse",children:"Unlock All Downloads (â‚¹99)"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:d.map(s=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-slate-100 flex flex-col",children:[e.jsxs("div",{className:"relative aspect-[4/3] bg-slate-100 group",children:[s.isLoading?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(k,{className:"animate-spin mb-2",size:32}),e.jsx("span",{children:"Developing photo..."})]}):s.url?e.jsx("img",{src:s.url,alt:s.label,className:`w-full h-full object-cover ${t?"":"blur-[2px] transition duration-700"}`}):e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-red-400",children:[e.jsx(C,{size:32}),e.jsx("span",{className:"ml-2",children:"Generation Failed"})]}),!s.isLoading&&s.url&&e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxs("button",{onClick:()=>x(s.url,s.label),className:`${t?"bg-white text-slate-900":"bg-brand-600 text-white"} px-6 py-3 rounded-full font-bold flex items-center shadow-xl hover:scale-105 transition`,children:[t?e.jsx(u,{size:20,className:"mr-2"}):e.jsx(p,{size:20,className:"mr-2"}),t?"Download":"Unlock High-Res"]})})]}),e.jsxs("div",{className:"p-4 border-t border-slate-100 flex justify-between items-center bg-slate-50",children:[e.jsx("span",{className:"font-bold text-slate-700",children:s.label}),!s.isLoading&&s.url&&e.jsxs("button",{onClick:()=>x(s.url,s.label),className:"text-brand-600 text-sm font-medium hover:underline flex items-center",children:[t?e.jsx(u,{size:16,className:"mr-1"}):e.jsx(p,{size:16,className:"mr-1"}),"High-Res"]})]})]},s.id))})]})};export{E as default};
