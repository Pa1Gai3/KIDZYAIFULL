(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function nA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Am={exports:{}},Fl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function cI(){if(Jv)return Fl;Jv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:t,type:i,key:u,ref:o!==void 0?o:null,props:a}}return Fl.Fragment=e,Fl.jsx=n,Fl.jsxs=n,Fl}var $v;function dI(){return $v||($v=1,Am.exports=cI()),Am.exports}var T=dI(),Sm={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function fI(){if(Qv)return Ie;Qv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function w(q){return q===null||typeof q!="object"?null:(q=S&&q[S]||q["@@iterator"],typeof q=="function"?q:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,z={};function X(q,Z,ae){this.props=q,this.context=Z,this.refs=z,this.updater=ae||V}X.prototype.isReactComponent={},X.prototype.setState=function(q,Z){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,Z,"setState")},X.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function ne(){}ne.prototype=X.prototype;function Q(q,Z,ae){this.props=q,this.context=Z,this.refs=z,this.updater=ae||V}var re=Q.prototype=new ne;re.constructor=Q,F(re,X.prototype),re.isPureReactComponent=!0;var ce=Array.isArray;function oe(){}var M={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(q,Z,ae){var me=ae.ref;return{$$typeof:t,type:q,key:Z,ref:me!==void 0?me:null,props:ae}}function k(q,Z){return N(q.type,Z,q.props)}function U(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function L(q){var Z={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ae){return Z[ae]})}var D=/\/+/g;function Ge(q,Z){return typeof q=="object"&&q!==null&&q.key!=null?L(""+q.key):Z.toString(36)}function nt(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(oe,oe):(q.status="pending",q.then(function(Z){q.status==="pending"&&(q.status="fulfilled",q.value=Z)},function(Z){q.status==="pending"&&(q.status="rejected",q.reason=Z)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function J(q,Z,ae,me,Ae){var De=typeof q;(De==="undefined"||De==="boolean")&&(q=null);var Fe=!1;if(q===null)Fe=!0;else switch(De){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(q.$$typeof){case t:case e:Fe=!0;break;case v:return Fe=q._init,J(Fe(q._payload),Z,ae,me,Ae)}}if(Fe)return Ae=Ae(q),Fe=me===""?"."+Ge(q,0):me,ce(Ae)?(ae="",Fe!=null&&(ae=Fe.replace(D,"$&/")+"/"),J(Ae,Z,ae,"",function(fi){return fi})):Ae!=null&&(U(Ae)&&(Ae=k(Ae,ae+(Ae.key==null||q&&q.key===Ae.key?"":(""+Ae.key).replace(D,"$&/")+"/")+Fe)),Z.push(Ae)),1;Fe=0;var zt=me===""?".":me+":";if(ce(q))for(var ht=0;ht<q.length;ht++)me=q[ht],De=zt+Ge(me,ht),Fe+=J(me,Z,ae,De,Ae);else if(ht=w(q),typeof ht=="function")for(q=ht.call(q),ht=0;!(me=q.next()).done;)me=me.value,De=zt+Ge(me,ht++),Fe+=J(me,Z,ae,De,Ae);else if(De==="object"){if(typeof q.then=="function")return J(nt(q),Z,ae,me,Ae);throw Z=String(q),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function le(q,Z,ae){if(q==null)return q;var me=[],Ae=0;return J(q,me,"","",function(De){return Z.call(ae,De,Ae++)}),me}function _e(q){if(q._status===-1){var Z=q._result;Z=Z(),Z.then(function(ae){(q._status===0||q._status===-1)&&(q._status=1,q._result=ae)},function(ae){(q._status===0||q._status===-1)&&(q._status=2,q._result=ae)}),q._status===-1&&(q._status=0,q._result=Z)}if(q._status===1)return q._result.default;throw q._result}var He=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},We={map:le,forEach:function(q,Z,ae){le(q,function(){Z.apply(this,arguments)},ae)},count:function(q){var Z=0;return le(q,function(){Z++}),Z},toArray:function(q){return le(q,function(Z){return Z})||[]},only:function(q){if(!U(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Ie.Activity=E,Ie.Children=We,Ie.Component=X,Ie.Fragment=n,Ie.Profiler=o,Ie.PureComponent=Q,Ie.StrictMode=i,Ie.Suspense=h,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(q){return M.H.useMemoCache(q)}},Ie.cache=function(q){return function(){return q.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(q,Z,ae){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var me=F({},q.props),Ae=q.key;if(Z!=null)for(De in Z.key!==void 0&&(Ae=""+Z.key),Z)!R.call(Z,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&Z.ref===void 0||(me[De]=Z[De]);var De=arguments.length-2;if(De===1)me.children=ae;else if(1<De){for(var Fe=Array(De),zt=0;zt<De;zt++)Fe[zt]=arguments[zt+2];me.children=Fe}return N(q.type,Ae,me)},Ie.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Ie.createElement=function(q,Z,ae){var me,Ae={},De=null;if(Z!=null)for(me in Z.key!==void 0&&(De=""+Z.key),Z)R.call(Z,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ae[me]=Z[me]);var Fe=arguments.length-2;if(Fe===1)Ae.children=ae;else if(1<Fe){for(var zt=Array(Fe),ht=0;ht<Fe;ht++)zt[ht]=arguments[ht+2];Ae.children=zt}if(q&&q.defaultProps)for(me in Fe=q.defaultProps,Fe)Ae[me]===void 0&&(Ae[me]=Fe[me]);return N(q,De,Ae)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(q){return{$$typeof:d,render:q}},Ie.isValidElement=U,Ie.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:_e}},Ie.memo=function(q,Z){return{$$typeof:p,type:q,compare:Z===void 0?null:Z}},Ie.startTransition=function(q){var Z=M.T,ae={};M.T=ae;try{var me=q(),Ae=M.S;Ae!==null&&Ae(ae,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(oe,He)}catch(De){He(De)}finally{Z!==null&&ae.types!==null&&(Z.types=ae.types),M.T=Z}},Ie.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ie.use=function(q){return M.H.use(q)},Ie.useActionState=function(q,Z,ae){return M.H.useActionState(q,Z,ae)},Ie.useCallback=function(q,Z){return M.H.useCallback(q,Z)},Ie.useContext=function(q){return M.H.useContext(q)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(q,Z){return M.H.useDeferredValue(q,Z)},Ie.useEffect=function(q,Z){return M.H.useEffect(q,Z)},Ie.useEffectEvent=function(q){return M.H.useEffectEvent(q)},Ie.useId=function(){return M.H.useId()},Ie.useImperativeHandle=function(q,Z,ae){return M.H.useImperativeHandle(q,Z,ae)},Ie.useInsertionEffect=function(q,Z){return M.H.useInsertionEffect(q,Z)},Ie.useLayoutEffect=function(q,Z){return M.H.useLayoutEffect(q,Z)},Ie.useMemo=function(q,Z){return M.H.useMemo(q,Z)},Ie.useOptimistic=function(q,Z){return M.H.useOptimistic(q,Z)},Ie.useReducer=function(q,Z,ae){return M.H.useReducer(q,Z,ae)},Ie.useRef=function(q){return M.H.useRef(q)},Ie.useState=function(q){return M.H.useState(q)},Ie.useSyncExternalStore=function(q,Z,ae){return M.H.useSyncExternalStore(q,Z,ae)},Ie.useTransition=function(){return M.H.useTransition()},Ie.version="19.2.1",Ie}var Wv;function Ep(){return Wv||(Wv=1,Sm.exports=fI()),Sm.exports}var Se=Ep();const hI=nA(Se);var xm={exports:{}},Bl={},Cm={exports:{}},wm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function mI(){return Xv||(Xv=1,(function(t){function e(J,le){var _e=J.length;J.push(le);e:for(;0<_e;){var He=_e-1>>>1,We=J[He];if(0<o(We,le))J[He]=le,J[_e]=We,_e=He;else break e}}function n(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var le=J[0],_e=J.pop();if(_e!==le){J[0]=_e;e:for(var He=0,We=J.length,q=We>>>1;He<q;){var Z=2*(He+1)-1,ae=J[Z],me=Z+1,Ae=J[me];if(0>o(ae,_e))me<We&&0>o(Ae,ae)?(J[He]=Ae,J[me]=_e,He=me):(J[He]=ae,J[Z]=_e,He=Z);else if(me<We&&0>o(Ae,_e))J[He]=Ae,J[me]=_e,He=me;else break e}}return le}function o(J,le){var _e=J.sortIndex-le.sortIndex;return _e!==0?_e:J.id-le.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var h=[],p=[],v=1,E=null,S=3,w=!1,V=!1,F=!1,z=!1,X=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function re(J){for(var le=n(p);le!==null;){if(le.callback===null)i(p);else if(le.startTime<=J)i(p),le.sortIndex=le.expirationTime,e(h,le);else break;le=n(p)}}function ce(J){if(F=!1,re(J),!V)if(n(h)!==null)V=!0,oe||(oe=!0,L());else{var le=n(p);le!==null&&nt(ce,le.startTime-J)}}var oe=!1,M=-1,R=5,N=-1;function k(){return z?!0:!(t.unstable_now()-N<R)}function U(){if(z=!1,oe){var J=t.unstable_now();N=J;var le=!0;try{e:{V=!1,F&&(F=!1,ne(M),M=-1),w=!0;var _e=S;try{t:{for(re(J),E=n(h);E!==null&&!(E.expirationTime>J&&k());){var He=E.callback;if(typeof He=="function"){E.callback=null,S=E.priorityLevel;var We=He(E.expirationTime<=J);if(J=t.unstable_now(),typeof We=="function"){E.callback=We,re(J),le=!0;break t}E===n(h)&&i(h),re(J)}else i(h);E=n(h)}if(E!==null)le=!0;else{var q=n(p);q!==null&&nt(ce,q.startTime-J),le=!1}}break e}finally{E=null,S=_e,w=!1}le=void 0}}finally{le?L():oe=!1}}}var L;if(typeof Q=="function")L=function(){Q(U)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ge=D.port2;D.port1.onmessage=U,L=function(){Ge.postMessage(null)}}else L=function(){X(U,0)};function nt(J,le){M=X(function(){J(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(J){switch(S){case 1:case 2:case 3:var le=3;break;default:le=S}var _e=S;S=le;try{return J()}finally{S=_e}},t.unstable_requestPaint=function(){z=!0},t.unstable_runWithPriority=function(J,le){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var _e=S;S=J;try{return le()}finally{S=_e}},t.unstable_scheduleCallback=function(J,le,_e){var He=t.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?He+_e:He):_e=He,J){case 1:var We=-1;break;case 2:We=250;break;case 5:We=1073741823;break;case 4:We=1e4;break;default:We=5e3}return We=_e+We,J={id:v++,callback:le,priorityLevel:J,startTime:_e,expirationTime:We,sortIndex:-1},_e>He?(J.sortIndex=_e,e(p,J),n(h)===null&&J===n(p)&&(F?(ne(M),M=-1):F=!0,nt(ce,_e-He))):(J.sortIndex=We,e(h,J),V||w||(V=!0,oe||(oe=!0,L()))),J},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(J){var le=S;return function(){var _e=S;S=le;try{return J.apply(this,arguments)}finally{S=_e}}}})(wm)),wm}var Zv;function pI(){return Zv||(Zv=1,Cm.exports=mI()),Cm.exports}var Im={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function gI(){if(e0)return nn;e0=1;var t=Ep();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(h,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:h,containerInfo:p,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,nn.createPortal=function(h,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(h,p,null,v)},nn.flushSync=function(h){var p=u.T,v=i.p;try{if(u.T=null,i.p=2,h)return h()}finally{u.T=p,i.p=v,i.d.f()}},nn.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(h,p))},nn.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},nn.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:w}):v==="script"&&i.d.X(h,{crossOrigin:E,integrity:S,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},nn.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);i.d.M(h,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(h)},nn.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin);i.d.L(h,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},nn.preloadModule=function(h,p){if(typeof h=="string")if(p){var v=d(p.as,p.crossOrigin);i.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(h)},nn.requestFormReset=function(h){i.d.r(h)},nn.unstable_batchedUpdates=function(h,p){return h(p)},nn.useFormState=function(h,p,v){return u.H.useFormState(h,p,v)},nn.useFormStatus=function(){return u.H.useHostTransitionStatus()},nn.version="19.2.1",nn}var t0;function yI(){if(t0)return Im.exports;t0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Im.exports=gI(),Im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0;function _I(){if(n0)return Bl;n0=1;var t=pI(),e=Ep(),n=yI();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(i(188))}function p(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return h(y),s;if(_===c)return h(y),r;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var x=!1,I=y.child;I;){if(I===l){x=!0,l=y,c=_;break}if(I===c){x=!0,c=y,l=_;break}I=I.sibling}if(!x){for(I=_.child;I;){if(I===l){x=!0,l=_,c=y;break}if(I===c){x=!0,c=_,l=y;break}I=I.sibling}if(!x)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function Ge(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case F:return"Fragment";case X:return"Profiler";case z:return"StrictMode";case ce:return"Suspense";case oe:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case V:return"Portal";case Q:return s.displayName||"Context";case ne:return(s._context.displayName||"Context")+".Consumer";case re:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return r=s.displayName||null,r!==null?r:Ge(s.type)||"Memo";case R:r=s._payload,s=s._init;try{return Ge(s(r))}catch{}}return null}var nt=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},He=[],We=-1;function q(s){return{current:s}}function Z(s){0>We||(s.current=He[We],He[We]=null,We--)}function ae(s,r){We++,He[We]=s.current,s.current=r}var me=q(null),Ae=q(null),De=q(null),Fe=q(null);function zt(s,r){switch(ae(De,r),ae(Ae,s),ae(me,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?yv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=yv(r),s=_v(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(me),ae(me,s)}function ht(){Z(me),Z(Ae),Z(De)}function fi(s){s.memoizedState!==null&&ae(Fe,s);var r=me.current,l=_v(r,s.type);r!==l&&(ae(Ae,s),ae(me,l))}function Ri(s){Ae.current===s&&(Z(me),Z(Ae)),Fe.current===s&&(Z(Fe),Ll._currentValue=_e)}var Cr,vo;function Zn(s){if(Cr===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Cr=r&&r[1]||"",vo=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cr+s+vo}var wr=!1;function To(s,r){if(!s||wr)return"";wr=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(j){var Y=j}Reflect.construct(s,[],te)}else{try{te.call()}catch(j){Y=j}s.call(te.prototype)}}else{try{throw Error()}catch(j){Y=j}(te=s())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(j){if(j&&Y&&typeof j.stack=="string")return[j.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),x=_[0],I=_[1];if(x&&I){var P=x.split(`
`),K=I.split(`
`);for(y=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===P.length||y===K.length)for(c=P.length-1,y=K.length-1;1<=c&&0<=y&&P[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(P[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||P[c]!==K[y]){var W=`
`+P[c].replace(" at new "," at ");return s.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",s.displayName)),W}while(1<=c&&0<=y);break}}}finally{wr=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Zn(l):""}function vf(s,r){switch(s.tag){case 26:case 27:case 5:return Zn(s.type);case 16:return Zn("Lazy");case 13:return s.child!==r&&r!==null?Zn("Suspense Fallback"):Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 15:return To(s.type,!1);case 11:return To(s.type.render,!1);case 1:return To(s.type,!0);case 31:return Zn("Activity");default:return""}}function Iu(s){try{var r="",l=null;do r+=vf(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Eo=Object.prototype.hasOwnProperty,Ir=t.unstable_scheduleCallback,Ao=t.unstable_cancelCallback,Tf=t.unstable_shouldYield,qa=t.unstable_requestPaint,Gt=t.unstable_now,bu=t.unstable_getCurrentPriorityLevel,Pt=t.unstable_ImmediatePriority,Lt=t.unstable_UserBlockingPriority,Ni=t.unstable_NormalPriority,Ru=t.unstable_LowPriority,Fa=t.unstable_IdlePriority,Ef=t.log,br=t.unstable_setDisableYieldValue,vs=null,en=null;function Un(s){if(typeof Ef=="function"&&br(s),en&&typeof en.setStrictMode=="function")try{en.setStrictMode(vs,s)}catch{}}var un=Math.clz32?Math.clz32:Nu,Af=Math.log,Ba=Math.LN2;function Nu(s){return s>>>=0,s===0?32:31-(Af(s)/Ba|0)|0}var Rr=256,hi=262144,Ts=4194304;function ei(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ln(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,x=s.pingedLanes;s=s.warmLanes;var I=c&134217727;return I!==0?(c=I&~_,c!==0?y=ei(c):(x&=I,x!==0?y=ei(x):l||(l=I&~s,l!==0&&(y=ei(l))))):(I=c&~_,I!==0?y=ei(I):x!==0?y=ei(x):l||(l=c&~s,l!==0&&(y=ei(l)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,l=r&-r,_>=l||_===32&&(l&4194048)!==0)?r:y}function Es(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function So(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function za(){var s=Ts;return Ts<<=1,(Ts&62914560)===0&&(Ts=4194304),s}function Mi(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function As(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ht(s,r,l,c,y,_){var x=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var I=s.entanglements,P=s.expirationTimes,K=s.hiddenUpdates;for(l=x&~l;0<l;){var W=31-un(l),te=1<<W;I[W]=0,P[W]=-1;var Y=K[W];if(Y!==null)for(K[W]=null,W=0;W<Y.length;W++){var j=Y[W];j!==null&&(j.lane&=-536870913)}l&=~te}c!==0&&Ga(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(x&~r))}function Ga(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-un(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Ss(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-un(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function xs(s,r){var l=r&-r;return l=(l&42)!==0?1:Ha(l),(l&(s.suspendedLanes|r))!==0?0:l}function Ha(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ka(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Di(){var s=le.p;return s!==0?s:(s=window.event,s===void 0?32:Bv(s.type))}function Mu(s,r){var l=le.p;try{return le.p=s,r()}finally{le.p=l}}var mi=Math.random().toString(36).slice(2),pt="__reactFiber$"+mi,Kt="__reactProps$"+mi,pi="__reactContainer$"+mi,Cs="__reactEvents$"+mi,gi="__reactListeners$"+mi,Du="__reactHandles$"+mi,Ya="__reactResources$"+mi,Pi="__reactMarker$"+mi;function Nr(s){delete s[pt],delete s[Kt],delete s[Cs],delete s[gi],delete s[Du]}function ki(s){var r=s[pt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[pi]||l[pt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=Cv(s);s!==null;){if(l=s[pt])return l;s=Cv(s)}return r}s=l,l=s.parentNode}return null}function Ui(s){if(s=s[pt]||s[pi]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Mr(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function ti(s){var r=s[Ya];return r||(r=s[Ya]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Et(s){s[Pi]=!0}var xo=new Set,ws={};function cn(s,r){yi(s,r),yi(s+"Capture",r)}function yi(s,r){for(ws[s]=r,s=0;s<r.length;s++)xo.add(r[s])}var Sf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ja={},Ja={};function Pu(s){return Eo.call(Ja,s)?!0:Eo.call(ja,s)?!1:Sf.test(s)?Ja[s]=!0:(ja[s]=!0,!1)}function Is(s,r,l){if(Pu(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function bs(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Vn(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function dn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ku(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function xf(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(x){l=""+x,_.call(this,x)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Co(s){if(!s._valueTracker){var r=ku(s)?"checked":"value";s._valueTracker=xf(s,r,""+s[r])}}function $a(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=ku(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function wo(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Li=/[\n"\\]/g;function gt(s){return s.replace(Li,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Rs(s,r,l,c,y,_,x,I){s.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.type=x:s.removeAttribute("type"),r!=null?x==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+dn(r)):s.value!==""+dn(r)&&(s.value=""+dn(r)):x!=="submit"&&x!=="reset"||s.removeAttribute("value"),r!=null?Io(s,x,dn(r)):l!=null?Io(s,x,dn(l)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+dn(I):s.removeAttribute("name")}function Dr(s,r,l,c,y,_,x,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Co(s);return}l=l!=null?""+dn(l):"",r=r!=null?""+dn(r):l,I||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=I?s.checked:!!c,s.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.name=x),Co(s)}function Io(s,r,l){r==="number"&&wo(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Ke(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+dn(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function Pr(s,r,l){if(r!=null&&(r=""+dn(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+dn(l):""}function Ns(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(nt(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=dn(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),Co(s)}function On(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Cf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qa(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||Cf.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function Uu(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&Qa(s,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&Qa(s,_,r[_])}function Wa(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),If=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _i(s){return If.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Vt(){}var bo=null;function Ro(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Vi=null,xn=null;function Lu(s){var r=Ui(s);if(r&&(s=r.stateNode)){var l=s[Kt]||null;e:switch(s=r.stateNode,r.type){case"input":if(Rs(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+gt(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Kt]||null;if(!y)throw Error(i(90));Rs(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&$a(c)}break e;case"textarea":Pr(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Ke(s,!!l.multiple,r,!1)}}}var Xa=!1;function Vu(s,r,l){if(Xa)return s(r,l);Xa=!0;try{var c=s(r);return c}finally{if(Xa=!1,(Vi!==null||xn!==null)&&(Pc(),Vi&&(r=Vi,s=xn,xn=Vi=null,Lu(r),s)))for(r=0;r<s.length;r++)Lu(s[r])}}function yn(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Kt]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Za=!1;if(ni)try{var vi={};Object.defineProperty(vi,"passive",{get:function(){Za=!0}}),window.addEventListener("test",vi,vi),window.removeEventListener("test",vi,vi)}catch{Za=!1}var Cn=null,No=null,Ti=null;function Ms(){if(Ti)return Ti;var s,r=No,l=r.length,c,y="value"in Cn?Cn.value:Cn.textContent,_=y.length;for(s=0;s<l&&r[s]===y[s];s++);var x=l-s;for(c=1;c<=x&&r[l-c]===y[_-c];c++);return Ti=y.slice(s,1<c?1-c:void 0)}function kr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Ds(){return!0}function at(){return!1}function tn(s){function r(l,c,y,_,x){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=x,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(l=s[I],this[I]=l?l(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ds:at,this.isPropagationStopped=at,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),r}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ur=tn(Oi),Ps=E({},Oi,{view:0,detail:0}),Ou=tn(Ps),ks,Mo,fn,Lr=E({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==fn&&(fn&&s.type==="mousemove"?(ks=s.screenX-fn.screenX,Mo=s.screenY-fn.screenY):Mo=ks=0,fn=s),ks)},movementY:function(s){return"movementY"in s?s.movementY:Mo}}),qu=tn(Lr),Vr=E({},Lr,{dataTransfer:0}),Fu=tn(Vr),el=E({},Ps,{relatedTarget:0}),Us=tn(el),Bu=E({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),Do=tn(Bu),bf=E({},Oi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),zu=tn(bf),Or=E({},Oi,{data:0}),tl=tn(Or),Gu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},il={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=il[s])?!!r[s]:!1}function Ls(){return Hu}var Ku=E({},Ps,{key:function(s){if(s.key){var r=Gu[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=kr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?nl[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(s){return s.type==="keypress"?kr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?kr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Yu=tn(Ku),qi=E({},Lr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sl=tn(qi),ju=E({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),Ju=tn(ju),$u=E({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Po=tn($u),hn=E({},Lr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Qu=tn(hn),Wu=E({},Oi,{newState:0,oldState:0}),Vs=tn(Wu),m=[9,13,27,32],A=ni&&"CompositionEvent"in window,C=null;ni&&"documentMode"in document&&(C=document.documentMode);var b=ni&&"TextEvent"in window&&!C,G=ni&&(!A||C&&8<C&&11>=C),$=" ",ue=!1;function Xe(s,r){switch(s){case"keyup":return m.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ct(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Pe=!1;function Ot(s,r){switch(s){case"compositionend":return Ct(r);case"keypress":return r.which!==32?null:(ue=!0,$);case"textInput":return s=r.data,s===$&&ue?null:s;default:return null}}function qt(s,r){if(Pe)return s==="compositionend"||!A&&Xe(s,r)?(s=Ms(),Ti=No=Cn=null,Pe=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return G&&r.locale!=="ko"?null:r.data;default:return null}}var Os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _n(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Os[s.type]:r==="textarea"}function qr(s,r,l,c){Vi?xn?xn.push(c):xn=[c]:Vi=c,r=Fc(r,"onChange"),0<r.length&&(l=new Ur("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var Fi=null,rl=null;function VC(s){dv(s,0)}function Xu(s){var r=Mr(s);if($a(r))return s}function Ng(s,r){if(s==="change")return r}var Mg=!1;if(ni){var Rf;if(ni){var Nf="oninput"in document;if(!Nf){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),Nf=typeof Dg.oninput=="function"}Rf=Nf}else Rf=!1;Mg=Rf&&(!document.documentMode||9<document.documentMode)}function Pg(){Fi&&(Fi.detachEvent("onpropertychange",kg),rl=Fi=null)}function kg(s){if(s.propertyName==="value"&&Xu(rl)){var r=[];qr(r,rl,s,Ro(s)),Vu(VC,r)}}function OC(s,r,l){s==="focusin"?(Pg(),Fi=r,rl=l,Fi.attachEvent("onpropertychange",kg)):s==="focusout"&&Pg()}function qC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Xu(rl)}function FC(s,r){if(s==="click")return Xu(r)}function BC(s,r){if(s==="input"||s==="change")return Xu(r)}function zC(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var wn=typeof Object.is=="function"?Object.is:zC;function ol(s,r){if(wn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!Eo.call(r,y)||!wn(s[y],r[y]))return!1}return!0}function Ug(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Lg(s,r){var l=Ug(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ug(l)}}function Vg(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Vg(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Og(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=wo(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=wo(s.document)}return r}function Mf(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var GC=ni&&"documentMode"in document&&11>=document.documentMode,ko=null,Df=null,al=null,Pf=!1;function qg(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Pf||ko==null||ko!==wo(c)||(c=ko,"selectionStart"in c&&Mf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),al&&ol(al,c)||(al=c,c=Fc(Df,"onSelect"),0<c.length&&(r=new Ur("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=ko)))}function Fr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Uo={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},kf={},Fg={};ni&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete Uo.animationend.animation,delete Uo.animationiteration.animation,delete Uo.animationstart.animation),"TransitionEvent"in window||delete Uo.transitionend.transition);function Br(s){if(kf[s])return kf[s];if(!Uo[s])return s;var r=Uo[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in Fg)return kf[s]=r[l];return s}var Bg=Br("animationend"),zg=Br("animationiteration"),Gg=Br("animationstart"),HC=Br("transitionrun"),KC=Br("transitionstart"),YC=Br("transitioncancel"),Hg=Br("transitionend"),Kg=new Map,Uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uf.push("scrollEnd");function ii(s,r){Kg.set(s,r),cn(r,[s])}var Zu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},qn=[],Lo=0,Lf=0;function ec(){for(var s=Lo,r=Lf=Lo=0;r<s;){var l=qn[r];qn[r++]=null;var c=qn[r];qn[r++]=null;var y=qn[r];qn[r++]=null;var _=qn[r];if(qn[r++]=null,c!==null&&y!==null){var x=c.pending;x===null?y.next=y:(y.next=x.next,x.next=y),c.pending=y}_!==0&&Yg(l,y,_)}}function tc(s,r,l,c){qn[Lo++]=s,qn[Lo++]=r,qn[Lo++]=l,qn[Lo++]=c,Lf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Vf(s,r,l,c){return tc(s,r,l,c),nc(s)}function zr(s,r){return tc(s,null,null,r),nc(s)}function Yg(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=s.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&r!==null&&(y=31-un(l),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),_):null}function nc(s){if(50<Rl)throw Rl=0,Yh=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Vo={};function jC(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(s,r,l,c){return new jC(s,r,l,c)}function Of(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Bi(s,r){var l=s.alternate;return l===null?(l=In(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function jg(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function ic(s,r,l,c,y,_){var x=0;if(c=s,typeof s=="function")Of(s)&&(x=1);else if(typeof s=="string")x=Xw(s,l,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=In(31,l,r,y),s.elementType=N,s.lanes=_,s;case F:return Gr(l.children,y,_,r);case z:x=8,y|=24;break;case X:return s=In(12,l,r,y|2),s.elementType=X,s.lanes=_,s;case ce:return s=In(13,l,r,y),s.elementType=ce,s.lanes=_,s;case oe:return s=In(19,l,r,y),s.elementType=oe,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Q:x=10;break e;case ne:x=9;break e;case re:x=11;break e;case M:x=14;break e;case R:x=16,c=null;break e}x=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=In(x,l,r,y),r.elementType=s,r.type=c,r.lanes=_,r}function Gr(s,r,l,c){return s=In(7,s,c,r),s.lanes=l,s}function qf(s,r,l){return s=In(6,s,null,r),s.lanes=l,s}function Jg(s){var r=In(18,null,null,0);return r.stateNode=s,r}function Ff(s,r,l){return r=In(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var $g=new WeakMap;function Fn(s,r){if(typeof s=="object"&&s!==null){var l=$g.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Iu(r)},$g.set(s,r),r)}return{value:s,source:r,stack:Iu(r)}}var Oo=[],qo=0,sc=null,ll=0,Bn=[],zn=0,qs=null,Ei=1,Ai="";function zi(s,r){Oo[qo++]=ll,Oo[qo++]=sc,sc=s,ll=r}function Qg(s,r,l){Bn[zn++]=Ei,Bn[zn++]=Ai,Bn[zn++]=qs,qs=s;var c=Ei;s=Ai;var y=32-un(c)-1;c&=~(1<<y),l+=1;var _=32-un(r)+y;if(30<_){var x=y-y%5;_=(c&(1<<x)-1).toString(32),c>>=x,y-=x,Ei=1<<32-un(r)+y|l<<y|c,Ai=_+s}else Ei=1<<_|l<<y|c,Ai=s}function Bf(s){s.return!==null&&(zi(s,1),Qg(s,1,0))}function zf(s){for(;s===sc;)sc=Oo[--qo],Oo[qo]=null,ll=Oo[--qo],Oo[qo]=null;for(;s===qs;)qs=Bn[--zn],Bn[zn]=null,Ai=Bn[--zn],Bn[zn]=null,Ei=Bn[--zn],Bn[zn]=null}function Wg(s,r){Bn[zn++]=Ei,Bn[zn++]=Ai,Bn[zn++]=qs,Ei=r.id,Ai=r.overflow,qs=s}var Yt=null,lt=null,Be=!1,Fs=null,Gn=!1,Gf=Error(i(519));function Bs(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ul(Fn(r,s)),Gf}function Xg(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[pt]=s,r[Kt]=c,l){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(l=0;l<Ml.length;l++)Ue(Ml[l],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),Dr(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),Ns(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||pv(r.textContent,l)?(c.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),c.onScroll!=null&&Ue("scroll",r),c.onScrollEnd!=null&&Ue("scrollend",r),c.onClick!=null&&(r.onclick=Vt),r=!0):r=!1,r||Bs(s,!0)}function Zg(s){for(Yt=s.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Yt=Yt.return}}function Fo(s){if(s!==Yt)return!1;if(!Be)return Zg(s),Be=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||am(s.type,s.memoizedProps)),l=!l),l&&lt&&Bs(s),Zg(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));lt=xv(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));lt=xv(s)}else r===27?(r=lt,tr(s.type)?(s=fm,fm=null,lt=s):lt=r):lt=Yt?Kn(s.stateNode.nextSibling):null;return!0}function Hr(){lt=Yt=null,Be=!1}function Hf(){var s=Fs;return s!==null&&(An===null?An=s:An.push.apply(An,s),Fs=null),s}function ul(s){Fs===null?Fs=[s]:Fs.push(s)}var Kf=q(null),Kr=null,Gi=null;function zs(s,r,l){ae(Kf,r._currentValue),r._currentValue=l}function Hi(s){s._currentValue=Kf.current,Z(Kf)}function Yf(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function jf(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var x=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var P=0;P<r.length;P++)if(I.context===r[P]){_.lanes|=l,I=_.alternate,I!==null&&(I.lanes|=l),Yf(_.return,l,s),c||(x=null);break e}_=I.next}}else if(y.tag===18){if(x=y.return,x===null)throw Error(i(341));x.lanes|=l,_=x.alternate,_!==null&&(_.lanes|=l),Yf(x,l,s),x=null}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===s){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}}function Bo(s,r,l,c){s=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var x=y.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var I=y.type;wn(y.pendingProps.value,x.value)||(s!==null?s.push(I):s=[I])}}else if(y===Fe.current){if(x=y.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Ll):s=[Ll])}y=y.return}s!==null&&jf(r,s,l,c),r.flags|=262144}function rc(s){for(s=s.firstContext;s!==null;){if(!wn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Yr(s){Kr=s,Gi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function jt(s){return ey(Kr,s)}function oc(s,r){return Kr===null&&Yr(s),ey(s,r)}function ey(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Gi===null){if(s===null)throw Error(i(308));Gi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Gi=Gi.next=r;return l}var JC=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},$C=t.unstable_scheduleCallback,QC=t.unstable_NormalPriority,wt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jf(){return{controller:new JC,data:new Map,refCount:0}}function cl(s){s.refCount--,s.refCount===0&&$C(QC,function(){s.controller.abort()})}var dl=null,$f=0,zo=0,Go=null;function WC(s,r){if(dl===null){var l=dl=[];$f=0,zo=Xh(),Go={status:"pending",value:void 0,then:function(c){l.push(c)}}}return $f++,r.then(ty,ty),r}function ty(){if(--$f===0&&dl!==null){Go!==null&&(Go.status="fulfilled");var s=dl;dl=null,zo=0,Go=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function XC(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var ny=J.S;J.S=function(s,r){q_=Gt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&WC(s,r),ny!==null&&ny(s,r)};var jr=q(null);function Qf(){var s=jr.current;return s!==null?s:ot.pooledCache}function ac(s,r){r===null?ae(jr,jr.current):ae(jr,r.pool)}function iy(){var s=Qf();return s===null?null:{parent:wt._currentValue,pool:s}}var Ho=Error(i(460)),Wf=Error(i(474)),lc=Error(i(542)),uc={then:function(){}};function sy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ry(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Vt,Vt),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,ay(s),s;default:if(typeof r.status=="string")r.then(Vt,Vt);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,ay(s),s}throw $r=r,Ho}}function Jr(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?($r=l,Ho):l}}var $r=null;function oy(){if($r===null)throw Error(i(459));var s=$r;return $r=null,s}function ay(s){if(s===Ho||s===lc)throw Error(i(483))}var Ko=null,fl=0;function cc(s){var r=fl;return fl+=1,Ko===null&&(Ko=[]),ry(Ko,s,r)}function hl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function dc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function ly(s){function r(B,O){if(s){var H=B.deletions;H===null?(B.deletions=[O],B.flags|=16):H.push(O)}}function l(B,O){if(!s)return null;for(;O!==null;)r(B,O),O=O.sibling;return null}function c(B){for(var O=new Map;B!==null;)B.key!==null?O.set(B.key,B):O.set(B.index,B),B=B.sibling;return O}function y(B,O){return B=Bi(B,O),B.index=0,B.sibling=null,B}function _(B,O,H){return B.index=H,s?(H=B.alternate,H!==null?(H=H.index,H<O?(B.flags|=67108866,O):H):(B.flags|=67108866,O)):(B.flags|=1048576,O)}function x(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function I(B,O,H,ee){return O===null||O.tag!==6?(O=qf(H,B.mode,ee),O.return=B,O):(O=y(O,H),O.return=B,O)}function P(B,O,H,ee){var ye=H.type;return ye===F?W(B,O,H.props.children,ee,H.key):O!==null&&(O.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===R&&Jr(ye)===O.type)?(O=y(O,H.props),hl(O,H),O.return=B,O):(O=ic(H.type,H.key,H.props,null,B.mode,ee),hl(O,H),O.return=B,O)}function K(B,O,H,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==H.containerInfo||O.stateNode.implementation!==H.implementation?(O=Ff(H,B.mode,ee),O.return=B,O):(O=y(O,H.children||[]),O.return=B,O)}function W(B,O,H,ee,ye){return O===null||O.tag!==7?(O=Gr(H,B.mode,ee,ye),O.return=B,O):(O=y(O,H),O.return=B,O)}function te(B,O,H){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=qf(""+O,B.mode,H),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case w:return H=ic(O.type,O.key,O.props,null,B.mode,H),hl(H,O),H.return=B,H;case V:return O=Ff(O,B.mode,H),O.return=B,O;case R:return O=Jr(O),te(B,O,H)}if(nt(O)||L(O))return O=Gr(O,B.mode,H,null),O.return=B,O;if(typeof O.then=="function")return te(B,cc(O),H);if(O.$$typeof===Q)return te(B,oc(B,O),H);dc(B,O)}return null}function Y(B,O,H,ee){var ye=O!==null?O.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ye!==null?null:I(B,O,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return H.key===ye?P(B,O,H,ee):null;case V:return H.key===ye?K(B,O,H,ee):null;case R:return H=Jr(H),Y(B,O,H,ee)}if(nt(H)||L(H))return ye!==null?null:W(B,O,H,ee,null);if(typeof H.then=="function")return Y(B,O,cc(H),ee);if(H.$$typeof===Q)return Y(B,O,oc(B,H),ee);dc(B,H)}return null}function j(B,O,H,ee,ye){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(H)||null,I(O,B,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return B=B.get(ee.key===null?H:ee.key)||null,P(O,B,ee,ye);case V:return B=B.get(ee.key===null?H:ee.key)||null,K(O,B,ee,ye);case R:return ee=Jr(ee),j(B,O,H,ee,ye)}if(nt(ee)||L(ee))return B=B.get(H)||null,W(O,B,ee,ye,null);if(typeof ee.then=="function")return j(B,O,H,cc(ee),ye);if(ee.$$typeof===Q)return j(B,O,H,oc(O,ee),ye);dc(O,ee)}return null}function fe(B,O,H,ee){for(var ye=null,Ye=null,ge=O,Me=O=0,Ve=null;ge!==null&&Me<H.length;Me++){ge.index>Me?(Ve=ge,ge=null):Ve=ge.sibling;var je=Y(B,ge,H[Me],ee);if(je===null){ge===null&&(ge=Ve);break}s&&ge&&je.alternate===null&&r(B,ge),O=_(je,O,Me),Ye===null?ye=je:Ye.sibling=je,Ye=je,ge=Ve}if(Me===H.length)return l(B,ge),Be&&zi(B,Me),ye;if(ge===null){for(;Me<H.length;Me++)ge=te(B,H[Me],ee),ge!==null&&(O=_(ge,O,Me),Ye===null?ye=ge:Ye.sibling=ge,Ye=ge);return Be&&zi(B,Me),ye}for(ge=c(ge);Me<H.length;Me++)Ve=j(ge,B,Me,H[Me],ee),Ve!==null&&(s&&Ve.alternate!==null&&ge.delete(Ve.key===null?Me:Ve.key),O=_(Ve,O,Me),Ye===null?ye=Ve:Ye.sibling=Ve,Ye=Ve);return s&&ge.forEach(function(or){return r(B,or)}),Be&&zi(B,Me),ye}function Te(B,O,H,ee){if(H==null)throw Error(i(151));for(var ye=null,Ye=null,ge=O,Me=O=0,Ve=null,je=H.next();ge!==null&&!je.done;Me++,je=H.next()){ge.index>Me?(Ve=ge,ge=null):Ve=ge.sibling;var or=Y(B,ge,je.value,ee);if(or===null){ge===null&&(ge=Ve);break}s&&ge&&or.alternate===null&&r(B,ge),O=_(or,O,Me),Ye===null?ye=or:Ye.sibling=or,Ye=or,ge=Ve}if(je.done)return l(B,ge),Be&&zi(B,Me),ye;if(ge===null){for(;!je.done;Me++,je=H.next())je=te(B,je.value,ee),je!==null&&(O=_(je,O,Me),Ye===null?ye=je:Ye.sibling=je,Ye=je);return Be&&zi(B,Me),ye}for(ge=c(ge);!je.done;Me++,je=H.next())je=j(ge,B,Me,je.value,ee),je!==null&&(s&&je.alternate!==null&&ge.delete(je.key===null?Me:je.key),O=_(je,O,Me),Ye===null?ye=je:Ye.sibling=je,Ye=je);return s&&ge.forEach(function(uI){return r(B,uI)}),Be&&zi(B,Me),ye}function rt(B,O,H,ee){if(typeof H=="object"&&H!==null&&H.type===F&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case w:e:{for(var ye=H.key;O!==null;){if(O.key===ye){if(ye=H.type,ye===F){if(O.tag===7){l(B,O.sibling),ee=y(O,H.props.children),ee.return=B,B=ee;break e}}else if(O.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===R&&Jr(ye)===O.type){l(B,O.sibling),ee=y(O,H.props),hl(ee,H),ee.return=B,B=ee;break e}l(B,O);break}else r(B,O);O=O.sibling}H.type===F?(ee=Gr(H.props.children,B.mode,ee,H.key),ee.return=B,B=ee):(ee=ic(H.type,H.key,H.props,null,B.mode,ee),hl(ee,H),ee.return=B,B=ee)}return x(B);case V:e:{for(ye=H.key;O!==null;){if(O.key===ye)if(O.tag===4&&O.stateNode.containerInfo===H.containerInfo&&O.stateNode.implementation===H.implementation){l(B,O.sibling),ee=y(O,H.children||[]),ee.return=B,B=ee;break e}else{l(B,O);break}else r(B,O);O=O.sibling}ee=Ff(H,B.mode,ee),ee.return=B,B=ee}return x(B);case R:return H=Jr(H),rt(B,O,H,ee)}if(nt(H))return fe(B,O,H,ee);if(L(H)){if(ye=L(H),typeof ye!="function")throw Error(i(150));return H=ye.call(H),Te(B,O,H,ee)}if(typeof H.then=="function")return rt(B,O,cc(H),ee);if(H.$$typeof===Q)return rt(B,O,oc(B,H),ee);dc(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,O!==null&&O.tag===6?(l(B,O.sibling),ee=y(O,H),ee.return=B,B=ee):(l(B,O),ee=qf(H,B.mode,ee),ee.return=B,B=ee),x(B)):l(B,O)}return function(B,O,H,ee){try{fl=0;var ye=rt(B,O,H,ee);return Ko=null,ye}catch(ge){if(ge===Ho||ge===lc)throw ge;var Ye=In(29,ge,null,B.mode);return Ye.lanes=ee,Ye.return=B,Ye}finally{}}}var Qr=ly(!0),uy=ly(!1),Gs=!1;function Xf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zf(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Hs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ks(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Qe&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=nc(s),Yg(s,null,l),r}return tc(s,c,r,l),nc(s)}function ml(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Ss(s,l)}}function eh(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=x:_=_.next=x,l=l.next}while(l!==null);_===null?y=_=r:_=_.next=r}else y=_=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var th=!1;function pl(){if(th){var s=Go;if(s!==null)throw s}}function gl(s,r,l,c){th=!1;var y=s.updateQueue;Gs=!1;var _=y.firstBaseUpdate,x=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var P=I,K=P.next;P.next=null,x===null?_=K:x.next=K,x=P;var W=s.alternate;W!==null&&(W=W.updateQueue,I=W.lastBaseUpdate,I!==x&&(I===null?W.firstBaseUpdate=K:I.next=K,W.lastBaseUpdate=P))}if(_!==null){var te=y.baseState;x=0,W=K=P=null,I=_;do{var Y=I.lane&-536870913,j=Y!==I.lane;if(j?(Le&Y)===Y:(c&Y)===Y){Y!==0&&Y===zo&&(th=!0),W!==null&&(W=W.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var fe=s,Te=I;Y=r;var rt=l;switch(Te.tag){case 1:if(fe=Te.payload,typeof fe=="function"){te=fe.call(rt,te,Y);break e}te=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=Te.payload,Y=typeof fe=="function"?fe.call(rt,te,Y):fe,Y==null)break e;te=E({},te,Y);break e;case 2:Gs=!0}}Y=I.callback,Y!==null&&(s.flags|=64,j&&(s.flags|=8192),j=y.callbacks,j===null?y.callbacks=[Y]:j.push(Y))}else j={lane:Y,tag:I.tag,payload:I.payload,callback:I.callback,next:null},W===null?(K=W=j,P=te):W=W.next=j,x|=Y;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;j=I,I=j.next,j.next=null,y.lastBaseUpdate=j,y.shared.pending=null}}while(!0);W===null&&(P=te),y.baseState=P,y.firstBaseUpdate=K,y.lastBaseUpdate=W,_===null&&(y.shared.lanes=0),Qs|=x,s.lanes=x,s.memoizedState=te}}function cy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function dy(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)cy(l[s],r)}var Yo=q(null),fc=q(0);function fy(s,r){s=Zi,ae(fc,s),ae(Yo,r),Zi=s|r.baseLanes}function nh(){ae(fc,Zi),ae(Yo,Yo.current)}function ih(){Zi=fc.current,Z(Yo),Z(fc)}var bn=q(null),Hn=null;function Ys(s){var r=s.alternate;ae(At,At.current&1),ae(bn,s),Hn===null&&(r===null||Yo.current!==null||r.memoizedState!==null)&&(Hn=s)}function sh(s){ae(At,At.current),ae(bn,s),Hn===null&&(Hn=s)}function hy(s){s.tag===22?(ae(At,At.current),ae(bn,s),Hn===null&&(Hn=s)):js()}function js(){ae(At,At.current),ae(bn,bn.current)}function Rn(s){Z(bn),Hn===s&&(Hn=null),Z(At)}var At=q(0);function hc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||cm(l)||dm(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ki=0,Ne=null,it=null,It=null,mc=!1,jo=!1,Wr=!1,pc=0,yl=0,Jo=null,ZC=0;function yt(){throw Error(i(321))}function rh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!wn(s[l],r[l]))return!1;return!0}function oh(s,r,l,c,y,_){return Ki=_,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=s===null||s.memoizedState===null?Qy:Eh,Wr=!1,_=l(c,y),Wr=!1,jo&&(_=py(r,l,c,y)),my(s),_}function my(s){J.H=Tl;var r=it!==null&&it.next!==null;if(Ki=0,It=it=Ne=null,mc=!1,yl=0,Jo=null,r)throw Error(i(300));s===null||bt||(s=s.dependencies,s!==null&&rc(s)&&(bt=!0))}function py(s,r,l,c){Ne=s;var y=0;do{if(jo&&(Jo=null),yl=0,jo=!1,25<=y)throw Error(i(301));if(y+=1,It=it=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}J.H=Wy,_=r(l,c)}while(jo);return _}function ew(){var s=J.H,r=s.useState()[0];return r=typeof r.then=="function"?_l(r):r,s=s.useState()[0],(it!==null?it.memoizedState:null)!==s&&(Ne.flags|=1024),r}function ah(){var s=pc!==0;return pc=0,s}function lh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function uh(s){if(mc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}mc=!1}Ki=0,It=it=Ne=null,jo=!1,yl=pc=0,Jo=null}function mn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Ne.memoizedState=It=s:It=It.next=s,It}function St(){if(it===null){var s=Ne.alternate;s=s!==null?s.memoizedState:null}else s=it.next;var r=It===null?Ne.memoizedState:It.next;if(r!==null)It=r,it=s;else{if(s===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));it=s,s={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},It===null?Ne.memoizedState=It=s:It=It.next=s}return It}function gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _l(s){var r=yl;return yl+=1,Jo===null&&(Jo=[]),s=ry(Jo,s,r),r=Ne,(It===null?r.memoizedState:It.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?Qy:Eh),s}function yc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return _l(s);if(s.$$typeof===Q)return jt(s)}throw Error(i(438,String(s)))}function ch(s){var r=null,l=Ne.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=gc(),Ne.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=k;return r.index++,l}function Yi(s,r){return typeof r=="function"?r(s):r}function _c(s){var r=St();return dh(r,it,s)}function dh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var x=y.next;y.next=_.next,_.next=x}r.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{r=y.next;var I=x=null,P=null,K=r,W=!1;do{var te=K.lane&-536870913;if(te!==K.lane?(Le&te)===te:(Ki&te)===te){var Y=K.revertLane;if(Y===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),te===zo&&(W=!0);else if((Ki&Y)===Y){K=K.next,Y===zo&&(W=!0);continue}else te={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(I=P=te,x=_):P=P.next=te,Ne.lanes|=Y,Qs|=Y;te=K.action,Wr&&l(_,te),_=K.hasEagerState?K.eagerState:l(_,te)}else Y={lane:te,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(I=P=Y,x=_):P=P.next=Y,Ne.lanes|=te,Qs|=te;K=K.next}while(K!==null&&K!==r);if(P===null?x=_:P.next=I,!wn(_,s.memoizedState)&&(bt=!0,W&&(l=Go,l!==null)))throw l;s.memoizedState=_,s.baseState=x,s.baseQueue=P,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function fh(s){var r=St(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,_=r.memoizedState;if(y!==null){l.pending=null;var x=y=y.next;do _=s(_,x.action),x=x.next;while(x!==y);wn(_,r.memoizedState)||(bt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),l.lastRenderedState=_}return[_,c]}function gy(s,r,l){var c=Ne,y=St(),_=Be;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=r();var x=!wn((it||y).memoizedState,l);if(x&&(y.memoizedState=l,bt=!0),y=y.queue,ph(vy.bind(null,c,y,s),[s]),y.getSnapshot!==r||x||It!==null&&It.memoizedState.tag&1){if(c.flags|=2048,$o(9,{destroy:void 0},_y.bind(null,c,y,l,r),null),ot===null)throw Error(i(349));_||(Ki&127)!==0||yy(c,r,l)}return l}function yy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Ne.updateQueue,r===null?(r=gc(),Ne.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function _y(s,r,l,c){r.value=l,r.getSnapshot=c,Ty(r)&&Ey(s)}function vy(s,r,l){return l(function(){Ty(r)&&Ey(s)})}function Ty(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!wn(s,l)}catch{return!0}}function Ey(s){var r=zr(s,2);r!==null&&Sn(r,s,2)}function hh(s){var r=mn();if(typeof s=="function"){var l=s;if(s=l(),Wr){Un(!0);try{l()}finally{Un(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:s},r}function Ay(s,r,l,c){return s.baseState=l,dh(s,it,typeof c=="function"?c:Yi)}function tw(s,r,l,c,y){if(Ec(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){_.listeners.push(x)}};J.T!==null?l(!0):_.isTransition=!1,c(_),l=r.pending,l===null?(_.next=r.pending=_,Sy(r,_)):(_.next=l.next,r.pending=l.next=_)}}function Sy(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var _=J.T,x={};J.T=x;try{var I=l(y,c),P=J.S;P!==null&&P(x,I),xy(s,r,I)}catch(K){mh(s,r,K)}finally{_!==null&&x.types!==null&&(_.types=x.types),J.T=_}}else try{_=l(y,c),xy(s,r,_)}catch(K){mh(s,r,K)}}function xy(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Cy(s,r,c)},function(c){return mh(s,r,c)}):Cy(s,r,l)}function Cy(s,r,l){r.status="fulfilled",r.value=l,wy(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,Sy(s,l)))}function mh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,wy(r),r=r.next;while(r!==c)}s.action=null}function wy(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Iy(s,r){return r}function by(s,r){if(Be){var l=ot.formState;if(l!==null){e:{var c=Ne;if(Be){if(lt){t:{for(var y=lt,_=Gn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Kn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){lt=Kn(y.nextSibling),c=y.data==="F!";break e}}Bs(c)}c=!1}c&&(r=l[0])}}return l=mn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iy,lastRenderedState:r},l.queue=c,l=jy.bind(null,Ne,c),c.dispatch=l,c=hh(!1),_=Th.bind(null,Ne,!1,c.queue),c=mn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=tw.bind(null,Ne,y,_,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function Ry(s){var r=St();return Ny(r,it,s)}function Ny(s,r,l){if(r=dh(s,r,Iy)[0],s=_c(Yi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=_l(r)}catch(x){throw x===Ho?lc:x}else c=r;r=St();var y=r.queue,_=y.dispatch;return l!==r.memoizedState&&(Ne.flags|=2048,$o(9,{destroy:void 0},nw.bind(null,y,l),null)),[c,_,s]}function nw(s,r){s.action=r}function My(s){var r=St(),l=it;if(l!==null)return Ny(r,l,s);St(),r=r.memoizedState,l=St();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function $o(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=gc(),Ne.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function Dy(){return St().memoizedState}function vc(s,r,l,c){var y=mn();Ne.flags|=s,y.memoizedState=$o(1|r,{destroy:void 0},l,c===void 0?null:c)}function Tc(s,r,l,c){var y=St();c=c===void 0?null:c;var _=y.memoizedState.inst;it!==null&&c!==null&&rh(c,it.memoizedState.deps)?y.memoizedState=$o(r,_,l,c):(Ne.flags|=s,y.memoizedState=$o(1|r,_,l,c))}function Py(s,r){vc(8390656,8,s,r)}function ph(s,r){Tc(2048,8,s,r)}function iw(s){Ne.flags|=4;var r=Ne.updateQueue;if(r===null)r=gc(),Ne.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function ky(s){var r=St().memoizedState;return iw({ref:r,nextImpl:s}),function(){if((Qe&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Uy(s,r){return Tc(4,2,s,r)}function Ly(s,r){return Tc(4,4,s,r)}function Vy(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Oy(s,r,l){l=l!=null?l.concat([s]):null,Tc(4,4,Vy.bind(null,r,s),l)}function gh(){}function qy(s,r){var l=St();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&rh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function Fy(s,r){var l=St();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&rh(r,c[1]))return c[0];if(c=s(),Wr){Un(!0);try{s()}finally{Un(!1)}}return l.memoizedState=[c,r],c}function yh(s,r,l){return l===void 0||(Ki&1073741824)!==0&&(Le&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=B_(),Ne.lanes|=s,Qs|=s,l)}function By(s,r,l,c){return wn(l,r)?l:Yo.current!==null?(s=yh(s,l,c),wn(s,r)||(bt=!0),s):(Ki&42)===0||(Ki&1073741824)!==0&&(Le&261930)===0?(bt=!0,s.memoizedState=l):(s=B_(),Ne.lanes|=s,Qs|=s,r)}function zy(s,r,l,c,y){var _=le.p;le.p=_!==0&&8>_?_:8;var x=J.T,I={};J.T=I,Th(s,!1,r,l);try{var P=y(),K=J.S;if(K!==null&&K(I,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var W=XC(P,c);vl(s,r,W,Dn(s))}else vl(s,r,c,Dn(s))}catch(te){vl(s,r,{then:function(){},status:"rejected",reason:te},Dn())}finally{le.p=_,x!==null&&I.types!==null&&(x.types=I.types),J.T=x}}function sw(){}function _h(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=Gy(s).queue;zy(s,y,r,_e,l===null?sw:function(){return Hy(s),l(c)})}function Gy(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:_e},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Hy(s){var r=Gy(s);r.next===null&&(r=s.alternate.memoizedState),vl(s,r.next.queue,{},Dn())}function vh(){return jt(Ll)}function Ky(){return St().memoizedState}function Yy(){return St().memoizedState}function rw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Dn();s=Hs(l);var c=Ks(r,s,l);c!==null&&(Sn(c,r,l),ml(c,r,l)),r={cache:Jf()},s.payload=r;return}r=r.return}}function ow(s,r,l){var c=Dn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ec(s)?Jy(r,l):(l=Vf(s,r,l,c),l!==null&&(Sn(l,s,c),$y(l,r,c)))}function jy(s,r,l){var c=Dn();vl(s,r,l,c)}function vl(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ec(s))Jy(r,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var x=r.lastRenderedState,I=_(x,l);if(y.hasEagerState=!0,y.eagerState=I,wn(I,x))return tc(s,r,y,0),ot===null&&ec(),!1}catch{}finally{}if(l=Vf(s,r,y,c),l!==null)return Sn(l,s,c),$y(l,r,c),!0}return!1}function Th(s,r,l,c){if(c={lane:2,revertLane:Xh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ec(s)){if(r)throw Error(i(479))}else r=Vf(s,l,c,2),r!==null&&Sn(r,s,2)}function Ec(s){var r=s.alternate;return s===Ne||r!==null&&r===Ne}function Jy(s,r){jo=mc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function $y(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Ss(s,l)}}var Tl={readContext:jt,use:yc,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};Tl.useEffectEvent=yt;var Qy={readContext:jt,use:yc,useCallback:function(s,r){return mn().memoizedState=[s,r===void 0?null:r],s},useContext:jt,useEffect:Py,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,vc(4194308,4,Vy.bind(null,r,s),l)},useLayoutEffect:function(s,r){return vc(4194308,4,s,r)},useInsertionEffect:function(s,r){vc(4,2,s,r)},useMemo:function(s,r){var l=mn();r=r===void 0?null:r;var c=s();if(Wr){Un(!0);try{s()}finally{Un(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=mn();if(l!==void 0){var y=l(r);if(Wr){Un(!0);try{l(r)}finally{Un(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=ow.bind(null,Ne,s),[c.memoizedState,s]},useRef:function(s){var r=mn();return s={current:s},r.memoizedState=s},useState:function(s){s=hh(s);var r=s.queue,l=jy.bind(null,Ne,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:gh,useDeferredValue:function(s,r){var l=mn();return yh(l,s,r)},useTransition:function(){var s=hh(!1);return s=zy.bind(null,Ne,s.queue,!0,!1),mn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=Ne,y=mn();if(Be){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),ot===null)throw Error(i(349));(Le&127)!==0||yy(c,r,l)}y.memoizedState=l;var _={value:l,getSnapshot:r};return y.queue=_,Py(vy.bind(null,c,_,s),[s]),c.flags|=2048,$o(9,{destroy:void 0},_y.bind(null,c,_,l,r),null),l},useId:function(){var s=mn(),r=ot.identifierPrefix;if(Be){var l=Ai,c=Ei;l=(c&~(1<<32-un(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=pc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=ZC++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:vh,useFormState:by,useActionState:by,useOptimistic:function(s){var r=mn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Th.bind(null,Ne,!0,l),l.dispatch=r,[s,r]},useMemoCache:ch,useCacheRefresh:function(){return mn().memoizedState=rw.bind(null,Ne)},useEffectEvent:function(s){var r=mn(),l={impl:s};return r.memoizedState=l,function(){if((Qe&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Eh={readContext:jt,use:yc,useCallback:qy,useContext:jt,useEffect:ph,useImperativeHandle:Oy,useInsertionEffect:Uy,useLayoutEffect:Ly,useMemo:Fy,useReducer:_c,useRef:Dy,useState:function(){return _c(Yi)},useDebugValue:gh,useDeferredValue:function(s,r){var l=St();return By(l,it.memoizedState,s,r)},useTransition:function(){var s=_c(Yi)[0],r=St().memoizedState;return[typeof s=="boolean"?s:_l(s),r]},useSyncExternalStore:gy,useId:Ky,useHostTransitionStatus:vh,useFormState:Ry,useActionState:Ry,useOptimistic:function(s,r){var l=St();return Ay(l,it,s,r)},useMemoCache:ch,useCacheRefresh:Yy};Eh.useEffectEvent=ky;var Wy={readContext:jt,use:yc,useCallback:qy,useContext:jt,useEffect:ph,useImperativeHandle:Oy,useInsertionEffect:Uy,useLayoutEffect:Ly,useMemo:Fy,useReducer:fh,useRef:Dy,useState:function(){return fh(Yi)},useDebugValue:gh,useDeferredValue:function(s,r){var l=St();return it===null?yh(l,s,r):By(l,it.memoizedState,s,r)},useTransition:function(){var s=fh(Yi)[0],r=St().memoizedState;return[typeof s=="boolean"?s:_l(s),r]},useSyncExternalStore:gy,useId:Ky,useHostTransitionStatus:vh,useFormState:My,useActionState:My,useOptimistic:function(s,r){var l=St();return it!==null?Ay(l,it,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:ch,useCacheRefresh:Yy};Wy.useEffectEvent=ky;function Ah(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:E({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Sh={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=Dn(),y=Hs(c);y.payload=r,l!=null&&(y.callback=l),r=Ks(s,y,c),r!==null&&(Sn(r,s,c),ml(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=Dn(),y=Hs(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=Ks(s,y,c),r!==null&&(Sn(r,s,c),ml(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Dn(),c=Hs(l);c.tag=2,r!=null&&(c.callback=r),r=Ks(s,c,l),r!==null&&(Sn(r,s,l),ml(r,s,l))}};function Xy(s,r,l,c,y,_,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,x):r.prototype&&r.prototype.isPureReactComponent?!ol(l,c)||!ol(y,_):!0}function Zy(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Sh.enqueueReplaceState(r,r.state,null)}function Xr(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=E({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function e_(s){Zu(s)}function t_(s){console.error(s)}function n_(s){Zu(s)}function Ac(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function i_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function xh(s,r,l){return l=Hs(l),l.tag=3,l.payload={element:null},l.callback=function(){Ac(s,r)},l}function s_(s){return s=Hs(s),s.tag=3,s}function r_(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){i_(r,l,c)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){i_(r,l,c),typeof y!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function aw(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Bo(r,l,y,!0),l=bn.current,l!==null){switch(l.tag){case 31:case 13:return Hn===null?kc():l.alternate===null&&_t===0&&(_t=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===uc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),$h(s,c,y)),!1;case 22:return l.flags|=65536,c===uc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),$h(s,c,y)),!1}throw Error(i(435,l.tag))}return $h(s,c,y),kc(),!1}if(Be)return r=bn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Gf&&(s=Error(i(422),{cause:c}),ul(Fn(s,l)))):(c!==Gf&&(r=Error(i(423),{cause:c}),ul(Fn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Fn(c,l),y=xh(s.stateNode,c,y),eh(s,y),_t!==4&&(_t=2)),!1;var _=Error(i(520),{cause:c});if(_=Fn(_,l),bl===null?bl=[_]:bl.push(_),_t!==4&&(_t=2),r===null)return!0;c=Fn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=xh(l.stateNode,c,s),eh(l,s),!1;case 1:if(r=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ws===null||!Ws.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=s_(y),r_(y,s,l,c),eh(l,y),!1}l=l.return}while(l!==null);return!1}var Ch=Error(i(461)),bt=!1;function Jt(s,r,l,c){r.child=s===null?uy(r,null,l,c):Qr(r,s.child,l,c)}function o_(s,r,l,c,y){l=l.render;var _=r.ref;if("ref"in c){var x={};for(var I in c)I!=="ref"&&(x[I]=c[I])}else x=c;return Yr(r),c=oh(s,r,l,x,_,y),I=ah(),s!==null&&!bt?(lh(s,r,y),ji(s,r,y)):(Be&&I&&Bf(r),r.flags|=1,Jt(s,r,c,y),r.child)}function a_(s,r,l,c,y){if(s===null){var _=l.type;return typeof _=="function"&&!Of(_)&&_.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=_,l_(s,r,_,c,y)):(s=ic(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!Ph(s,y)){var x=_.memoizedProps;if(l=l.compare,l=l!==null?l:ol,l(x,c)&&s.ref===r.ref)return ji(s,r,y)}return r.flags|=1,s=Bi(_,c),s.ref=r.ref,s.return=r,r.child=s}function l_(s,r,l,c,y){if(s!==null){var _=s.memoizedProps;if(ol(_,c)&&s.ref===r.ref)if(bt=!1,r.pendingProps=c=_,Ph(s,y))(s.flags&131072)!==0&&(bt=!0);else return r.lanes=s.lanes,ji(s,r,y)}return wh(s,r,l,c,y)}function u_(s,r,l,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return c_(s,r,_,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&ac(r,_!==null?_.cachePool:null),_!==null?fy(r,_):nh(),hy(r);else return c=r.lanes=536870912,c_(s,r,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(ac(r,_.cachePool),fy(r,_),js(),r.memoizedState=null):(s!==null&&ac(r,null),nh(),js());return Jt(s,r,y,l),r.child}function El(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function c_(s,r,l,c,y){var _=Qf();return _=_===null?null:{parent:wt._currentValue,pool:_},r.memoizedState={baseLanes:l,cachePool:_},s!==null&&ac(r,null),nh(),hy(r),s!==null&&Bo(s,r,c,!0),r.childLanes=y,null}function Sc(s,r){return r=Cc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function d_(s,r,l){return Qr(r,s.child,null,l),s=Sc(r,r.pendingProps),s.flags|=2,Rn(r),r.memoizedState=null,s}function lw(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Be){if(c.mode==="hidden")return s=Sc(r,c),r.lanes=536870912,El(null,s);if(sh(r),(s=lt)?(s=Sv(s,Gn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:qs!==null?{id:Ei,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},l=Jg(s),l.return=r,r.child=l,Yt=r,lt=null)):s=null,s===null)throw Bs(r);return r.lanes=536870912,null}return Sc(r,c)}var _=s.memoizedState;if(_!==null){var x=_.dehydrated;if(sh(r),y)if(r.flags&256)r.flags&=-257,r=d_(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(bt||Bo(s,r,l,!1),y=(l&s.childLanes)!==0,bt||y){if(c=ot,c!==null&&(x=xs(c,l),x!==0&&x!==_.retryLane))throw _.retryLane=x,zr(s,x),Sn(c,s,x),Ch;kc(),r=d_(s,r,l)}else s=_.treeContext,lt=Kn(x.nextSibling),Yt=r,Be=!0,Fs=null,Gn=!1,s!==null&&Wg(r,s),r=Sc(r,c),r.flags|=4096;return r}return s=Bi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function xc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function wh(s,r,l,c,y){return Yr(r),l=oh(s,r,l,c,void 0,y),c=ah(),s!==null&&!bt?(lh(s,r,y),ji(s,r,y)):(Be&&c&&Bf(r),r.flags|=1,Jt(s,r,l,y),r.child)}function f_(s,r,l,c,y,_){return Yr(r),r.updateQueue=null,l=py(r,c,l,y),my(s),c=ah(),s!==null&&!bt?(lh(s,r,_),ji(s,r,_)):(Be&&c&&Bf(r),r.flags|=1,Jt(s,r,l,_),r.child)}function h_(s,r,l,c,y){if(Yr(r),r.stateNode===null){var _=Vo,x=l.contextType;typeof x=="object"&&x!==null&&(_=jt(x)),_=new l(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Sh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},Xf(r),x=l.contextType,_.context=typeof x=="object"&&x!==null?jt(x):Vo,_.state=r.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Ah(r,l,x,c),_.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(x=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),x!==_.state&&Sh.enqueueReplaceState(_,_.state,null),gl(r,c,_,y),pl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var I=r.memoizedProps,P=Xr(l,I);_.props=P;var K=_.context,W=l.contextType;x=Vo,typeof W=="object"&&W!==null&&(x=jt(W));var te=l.getDerivedStateFromProps;W=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,W||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||K!==x)&&Zy(r,_,c,x),Gs=!1;var Y=r.memoizedState;_.state=Y,gl(r,c,_,y),pl(),K=r.memoizedState,I||Y!==K||Gs?(typeof te=="function"&&(Ah(r,l,te,c),K=r.memoizedState),(P=Gs||Xy(r,l,P,c,Y,K,x))?(W||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=K),_.props=c,_.state=K,_.context=x,c=P):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Zf(s,r),x=r.memoizedProps,W=Xr(l,x),_.props=W,te=r.pendingProps,Y=_.context,K=l.contextType,P=Vo,typeof K=="object"&&K!==null&&(P=jt(K)),I=l.getDerivedStateFromProps,(K=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(x!==te||Y!==P)&&Zy(r,_,c,P),Gs=!1,Y=r.memoizedState,_.state=Y,gl(r,c,_,y),pl();var j=r.memoizedState;x!==te||Y!==j||Gs||s!==null&&s.dependencies!==null&&rc(s.dependencies)?(typeof I=="function"&&(Ah(r,l,I,c),j=r.memoizedState),(W=Gs||Xy(r,l,W,c,Y,j,P)||s!==null&&s.dependencies!==null&&rc(s.dependencies))?(K||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,j,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,j,P)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||x===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=j),_.props=c,_.state=j,_.context=P,c=W):(typeof _.componentDidUpdate!="function"||x===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,xc(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=Qr(r,s.child,null,y),r.child=Qr(r,null,l,y)):Jt(s,r,l,y),r.memoizedState=_.state,s=r.child):s=ji(s,r,y),s}function m_(s,r,l,c){return Hr(),r.flags|=256,Jt(s,r,l,c),r.child}var Ih={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bh(s){return{baseLanes:s,cachePool:iy()}}function Rh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Mn),s}function p_(s,r,l){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,x;if((x=_)||(x=s!==null&&s.memoizedState===null?!1:(At.current&2)!==0),x&&(y=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,s===null){if(Be){if(y?Ys(r):js(),(s=lt)?(s=Sv(s,Gn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:qs!==null?{id:Ei,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},l=Jg(s),l.return=r,r.child=l,Yt=r,lt=null)):s=null,s===null)throw Bs(r);return dm(s)?r.lanes=32:r.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(js(),y=r.mode,I=Cc({mode:"hidden",children:I},y),c=Gr(c,y,l,null),I.return=r,c.return=r,I.sibling=c,r.child=I,c=r.child,c.memoizedState=bh(l),c.childLanes=Rh(s,x,l),r.memoizedState=Ih,El(null,c)):(Ys(r),Nh(r,I))}var P=s.memoizedState;if(P!==null&&(I=P.dehydrated,I!==null)){if(_)r.flags&256?(Ys(r),r.flags&=-257,r=Mh(s,r,l)):r.memoizedState!==null?(js(),r.child=s.child,r.flags|=128,r=null):(js(),I=c.fallback,y=r.mode,c=Cc({mode:"visible",children:c.children},y),I=Gr(I,y,l,null),I.flags|=2,c.return=r,I.return=r,c.sibling=I,r.child=c,Qr(r,s.child,null,l),c=r.child,c.memoizedState=bh(l),c.childLanes=Rh(s,x,l),r.memoizedState=Ih,r=El(null,c));else if(Ys(r),dm(I)){if(x=I.nextSibling&&I.nextSibling.dataset,x)var K=x.dgst;x=K,c=Error(i(419)),c.stack="",c.digest=x,ul({value:c,source:null,stack:null}),r=Mh(s,r,l)}else if(bt||Bo(s,r,l,!1),x=(l&s.childLanes)!==0,bt||x){if(x=ot,x!==null&&(c=xs(x,l),c!==0&&c!==P.retryLane))throw P.retryLane=c,zr(s,c),Sn(x,s,c),Ch;cm(I)||kc(),r=Mh(s,r,l)}else cm(I)?(r.flags|=192,r.child=s.child,r=null):(s=P.treeContext,lt=Kn(I.nextSibling),Yt=r,Be=!0,Fs=null,Gn=!1,s!==null&&Wg(r,s),r=Nh(r,c.children),r.flags|=4096);return r}return y?(js(),I=c.fallback,y=r.mode,P=s.child,K=P.sibling,c=Bi(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&65011712,K!==null?I=Bi(K,I):(I=Gr(I,y,l,null),I.flags|=2),I.return=r,c.return=r,c.sibling=I,r.child=c,El(null,c),c=r.child,I=s.child.memoizedState,I===null?I=bh(l):(y=I.cachePool,y!==null?(P=wt._currentValue,y=y.parent!==P?{parent:P,pool:P}:y):y=iy(),I={baseLanes:I.baseLanes|l,cachePool:y}),c.memoizedState=I,c.childLanes=Rh(s,x,l),r.memoizedState=Ih,El(s.child,c)):(Ys(r),l=s.child,s=l.sibling,l=Bi(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(x=r.deletions,x===null?(r.deletions=[s],r.flags|=16):x.push(s)),r.child=l,r.memoizedState=null,l)}function Nh(s,r){return r=Cc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Cc(s,r){return s=In(22,s,null,r),s.lanes=0,s}function Mh(s,r,l){return Qr(r,s.child,null,l),s=Nh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function g_(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Yf(s.return,r,l)}function Dh(s,r,l,c,y,_){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=l,x.tailMode=y,x.treeForkCount=_)}function y_(s,r,l){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var x=At.current,I=(x&2)!==0;if(I?(x=x&1|2,r.flags|=128):x&=1,ae(At,x),Jt(s,r,c,l),c=Be?ll:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&g_(s,l,r);else if(s.tag===19)g_(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&hc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),Dh(r,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&hc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Dh(r,!0,l,null,_,c);break;case"together":Dh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ji(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Qs|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Bo(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Bi(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Bi(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Ph(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&rc(s)))}function uw(s,r,l){switch(r.tag){case 3:zt(r,r.stateNode.containerInfo),zs(r,wt,s.memoizedState.cache),Hr();break;case 27:case 5:fi(r);break;case 4:zt(r,r.stateNode.containerInfo);break;case 10:zs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,sh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ys(r),r.flags|=128,null):(l&r.child.childLanes)!==0?p_(s,r,l):(Ys(r),s=ji(s,r,l),s!==null?s.sibling:null);Ys(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Bo(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return y_(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ae(At,At.current),c)break;return null;case 22:return r.lanes=0,u_(s,r,l,r.pendingProps);case 24:zs(r,wt,s.memoizedState.cache)}return ji(s,r,l)}function __(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)bt=!0;else{if(!Ph(s,l)&&(r.flags&128)===0)return bt=!1,uw(s,r,l);bt=(s.flags&131072)!==0}else bt=!1,Be&&(r.flags&1048576)!==0&&Qg(r,ll,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=Jr(r.elementType),r.type=s,typeof s=="function")Of(s)?(c=Xr(s,c),r.tag=1,r=h_(null,r,s,c,l)):(r.tag=0,r=wh(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===re){r.tag=11,r=o_(null,r,s,c,l);break e}else if(y===M){r.tag=14,r=a_(null,r,s,c,l);break e}}throw r=Ge(s)||s,Error(i(306,r,""))}}return r;case 0:return wh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=Xr(c,r.pendingProps),h_(s,r,c,y,l);case 3:e:{if(zt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,Zf(s,r),gl(r,c,null,l);var x=r.memoizedState;if(c=x.cache,zs(r,wt,c),c!==_.cache&&jf(r,[wt],l,!0),pl(),c=x.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=m_(s,r,c,l);break e}else if(c!==y){y=Fn(Error(i(424)),r),ul(y),r=m_(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(lt=Kn(s.firstChild),Yt=r,Be=!0,Fs=null,Gn=!0,l=uy(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Hr(),c===y){r=ji(s,r,l);break e}Jt(s,r,c,l)}r=r.child}return r;case 26:return xc(s,r),s===null?(l=Rv(r.type,null,r.pendingProps,null))?r.memoizedState=l:Be||(l=r.type,s=r.pendingProps,c=Bc(De.current).createElement(l),c[pt]=r,c[Kt]=s,$t(c,l,s),Et(c),r.stateNode=c):r.memoizedState=Rv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return fi(r),s===null&&Be&&(c=r.stateNode=wv(r.type,r.pendingProps,De.current),Yt=r,Gn=!0,y=lt,tr(r.type)?(fm=y,lt=Kn(c.firstChild)):lt=y),Jt(s,r,r.pendingProps.children,l),xc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Be&&((y=c=lt)&&(c=qw(c,r.type,r.pendingProps,Gn),c!==null?(r.stateNode=c,Yt=r,lt=Kn(c.firstChild),Gn=!1,y=!0):y=!1),y||Bs(r)),fi(r),y=r.type,_=r.pendingProps,x=s!==null?s.memoizedProps:null,c=_.children,am(y,_)?c=null:x!==null&&am(y,x)&&(r.flags|=32),r.memoizedState!==null&&(y=oh(s,r,ew,null,null,l),Ll._currentValue=y),xc(s,r),Jt(s,r,c,l),r.child;case 6:return s===null&&Be&&((s=l=lt)&&(l=Fw(l,r.pendingProps,Gn),l!==null?(r.stateNode=l,Yt=r,lt=null,s=!0):s=!1),s||Bs(r)),null;case 13:return p_(s,r,l);case 4:return zt(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=Qr(r,null,c,l):Jt(s,r,c,l),r.child;case 11:return o_(s,r,r.type,r.pendingProps,l);case 7:return Jt(s,r,r.pendingProps,l),r.child;case 8:return Jt(s,r,r.pendingProps.children,l),r.child;case 12:return Jt(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,zs(r,r.type,c.value),Jt(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,Yr(r),y=jt(y),c=c(y),r.flags|=1,Jt(s,r,c,l),r.child;case 14:return a_(s,r,r.type,r.pendingProps,l);case 15:return l_(s,r,r.type,r.pendingProps,l);case 19:return y_(s,r,l);case 31:return lw(s,r,l);case 22:return u_(s,r,l,r.pendingProps);case 24:return Yr(r),c=jt(wt),s===null?(y=Qf(),y===null&&(y=ot,_=Jf(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),r.memoizedState={parent:c,cache:y},Xf(r),zs(r,wt,y)):((s.lanes&l)!==0&&(Zf(s,r),gl(r,null,null,l),pl()),y=s.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),zs(r,wt,c)):(c=_.cache,zs(r,wt,c),c!==y.cache&&jf(r,[wt],l,!0))),Jt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Ji(s){s.flags|=4}function kh(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(K_())s.flags|=8192;else throw $r=uc,Wf}else s.flags&=-16777217}function v_(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!kv(r))if(K_())s.flags|=8192;else throw $r=uc,Wf}function wc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?za():536870912,s.lanes|=r,Zo|=r)}function Al(s,r){if(!Be)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ut(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function cw(s,r,l){var c=r.pendingProps;switch(zf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return ut(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Hi(wt),ht(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Fo(r)?Ji(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Hf())),ut(r),null;case 26:var y=r.type,_=r.memoizedState;return s===null?(Ji(r),_!==null?(ut(r),v_(r,_)):(ut(r),kh(r,y,null,c,l))):_?_!==s.memoizedState?(Ji(r),ut(r),v_(r,_)):(ut(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&Ji(r),ut(r),kh(r,y,s,c,l)),null;case 27:if(Ri(r),l=De.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Ji(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ut(r),null}s=me.current,Fo(r)?Xg(r):(s=wv(y,c,l),r.stateNode=s,Ji(r))}return ut(r),null;case 5:if(Ri(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Ji(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ut(r),null}if(_=me.current,Fo(r))Xg(r);else{var x=Bc(De.current);switch(_){case 1:_=x.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=x.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=x.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=x.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=x.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?x.createElement(y,{is:c.is}):x.createElement(y)}}_[pt]=r,_[Kt]=c;e:for(x=r.child;x!==null;){if(x.tag===5||x.tag===6)_.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===r)break e;for(;x.sibling===null;){if(x.return===null||x.return===r)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}r.stateNode=_;e:switch($t(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ji(r)}}return ut(r),kh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&Ji(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=De.current,Fo(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=Yt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[pt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||pv(s.nodeValue,l)),s||Bs(r,!0)}else s=Bc(s).createTextNode(c),s[pt]=r,r.stateNode=s}return ut(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=Fo(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[pt]=r}else Hr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),s=!1}else l=Hf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Rn(r),r):(Rn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ut(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Fo(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[pt]=r}else Hr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),y=!1}else y=Hf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Rn(r),r):(Rn(r),null)}return Rn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),wc(r,r.updateQueue),ut(r),null);case 4:return ht(),s===null&&nm(r.stateNode.containerInfo),ut(r),null;case 10:return Hi(r.type),ut(r),null;case 19:if(Z(At),c=r.memoizedState,c===null)return ut(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)Al(c,!1);else{if(_t!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=hc(s),_!==null){for(r.flags|=128,Al(c,!1),s=_.updateQueue,r.updateQueue=s,wc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)jg(l,s),l=l.sibling;return ae(At,At.current&1|2),Be&&zi(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&Gt()>Mc&&(r.flags|=128,y=!0,Al(c,!1),r.lanes=4194304)}else{if(!y)if(s=hc(_),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,wc(r,s),Al(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!Be)return ut(r),null}else 2*Gt()-c.renderingStartTime>Mc&&l!==536870912&&(r.flags|=128,y=!0,Al(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Gt(),s.sibling=null,l=At.current,ae(At,y?l&1|2:l&1),Be&&zi(r,c.treeForkCount),s):(ut(r),null);case 22:case 23:return Rn(r),ih(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),l=r.updateQueue,l!==null&&wc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&Z(jr),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Hi(wt),ut(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function dw(s,r){switch(zf(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Hi(wt),ht(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Ri(r),null;case 31:if(r.memoizedState!==null){if(Rn(r),r.alternate===null)throw Error(i(340));Hr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Rn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Hr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return Z(At),null;case 4:return ht(),null;case 10:return Hi(r.type),null;case 22:case 23:return Rn(r),ih(),s!==null&&Z(jr),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Hi(wt),null;case 25:return null;default:return null}}function T_(s,r){switch(zf(r),r.tag){case 3:Hi(wt),ht();break;case 26:case 27:case 5:Ri(r);break;case 4:ht();break;case 31:r.memoizedState!==null&&Rn(r);break;case 13:Rn(r);break;case 19:Z(At);break;case 10:Hi(r.type);break;case 22:case 23:Rn(r),ih(),s!==null&&Z(jr);break;case 24:Hi(wt)}}function Sl(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var _=l.create,x=l.inst;c=_(),x.destroy=c}l=l.next}while(l!==y)}}catch(I){et(r,r.return,I)}}function Js(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var x=c.inst,I=x.destroy;if(I!==void 0){x.destroy=void 0,y=r;var P=l,K=I;try{K()}catch(W){et(y,P,W)}}}c=c.next}while(c!==_)}}catch(W){et(r,r.return,W)}}function E_(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{dy(r,l)}catch(c){et(s,s.return,c)}}}function A_(s,r,l){l.props=Xr(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){et(s,r,c)}}function xl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){et(s,r,y)}}function Si(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){et(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){et(s,r,y)}else l.current=null}function S_(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){et(s,s.return,y)}}function Uh(s,r,l){try{var c=s.stateNode;Pw(c,s.type,l,r),c[Kt]=r}catch(y){et(s,s.return,y)}}function x_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&tr(s.type)||s.tag===4}function Lh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||x_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&tr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Vh(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Vt));else if(c!==4&&(c===27&&tr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Vh(s,r,l),s=s.sibling;s!==null;)Vh(s,r,l),s=s.sibling}function Ic(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&tr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Ic(s,r,l),s=s.sibling;s!==null;)Ic(s,r,l),s=s.sibling}function C_(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);$t(r,c,l),r[pt]=s,r[Kt]=l}catch(_){et(s,s.return,_)}}var $i=!1,Rt=!1,Oh=!1,w_=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function fw(s,r){if(s=s.containerInfo,rm=Jc,s=Og(s),Mf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var x=0,I=-1,P=-1,K=0,W=0,te=s,Y=null;t:for(;;){for(var j;te!==l||y!==0&&te.nodeType!==3||(I=x+y),te!==_||c!==0&&te.nodeType!==3||(P=x+c),te.nodeType===3&&(x+=te.nodeValue.length),(j=te.firstChild)!==null;)Y=te,te=j;for(;;){if(te===s)break t;if(Y===l&&++K===y&&(I=x),Y===_&&++W===c&&(P=x),(j=te.nextSibling)!==null)break;te=Y,Y=te.parentNode}te=j}l=I===-1||P===-1?null:{start:I,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(om={focusedElem:s,selectionRange:l},Jc=!1,Ft=r;Ft!==null;)if(r=Ft,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Ft=s;else for(;Ft!==null;){switch(r=Ft,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=r,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var fe=Xr(l.type,y);s=c.getSnapshotBeforeUpdate(fe,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Te){et(l,l.return,Te)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)um(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":um(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Ft=s;break}Ft=r.return}}function I_(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Wi(s,l),c&4&&Sl(5,l);break;case 1:if(Wi(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(x){et(l,l.return,x)}else{var y=Xr(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(x){et(l,l.return,x)}}c&64&&E_(l),c&512&&xl(l,l.return);break;case 3:if(Wi(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{dy(s,r)}catch(x){et(l,l.return,x)}}break;case 27:r===null&&c&4&&C_(l);case 26:case 5:Wi(s,l),r===null&&c&4&&S_(l),c&512&&xl(l,l.return);break;case 12:Wi(s,l);break;case 31:Wi(s,l),c&4&&N_(s,l);break;case 13:Wi(s,l),c&4&&M_(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Ew.bind(null,l),Bw(s,l))));break;case 22:if(c=l.memoizedState!==null||$i,!c){r=r!==null&&r.memoizedState!==null||Rt,y=$i;var _=Rt;$i=c,(Rt=r)&&!_?Xi(s,l,(l.subtreeFlags&8772)!==0):Wi(s,l),$i=y,Rt=_}break;case 30:break;default:Wi(s,l)}}function b_(s){var r=s.alternate;r!==null&&(s.alternate=null,b_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Nr(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ft=null,vn=!1;function Qi(s,r,l){for(l=l.child;l!==null;)R_(s,r,l),l=l.sibling}function R_(s,r,l){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(vs,l)}catch{}switch(l.tag){case 26:Rt||Si(l,r),Qi(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Rt||Si(l,r);var c=ft,y=vn;tr(l.type)&&(ft=l.stateNode,vn=!1),Qi(s,r,l),Pl(l.stateNode),ft=c,vn=y;break;case 5:Rt||Si(l,r);case 6:if(c=ft,y=vn,ft=null,Qi(s,r,l),ft=c,vn=y,ft!==null)if(vn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(l.stateNode)}catch(_){et(l,r,_)}else try{ft.removeChild(l.stateNode)}catch(_){et(l,r,_)}break;case 18:ft!==null&&(vn?(s=ft,Ev(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),aa(s)):Ev(ft,l.stateNode));break;case 4:c=ft,y=vn,ft=l.stateNode.containerInfo,vn=!0,Qi(s,r,l),ft=c,vn=y;break;case 0:case 11:case 14:case 15:Js(2,l,r),Rt||Js(4,l,r),Qi(s,r,l);break;case 1:Rt||(Si(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&A_(l,r,c)),Qi(s,r,l);break;case 21:Qi(s,r,l);break;case 22:Rt=(c=Rt)||l.memoizedState!==null,Qi(s,r,l),Rt=c;break;default:Qi(s,r,l)}}function N_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{aa(s)}catch(l){et(r,r.return,l)}}}function M_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{aa(s)}catch(l){et(r,r.return,l)}}function hw(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new w_),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new w_),r;default:throw Error(i(435,s.tag))}}function bc(s,r){var l=hw(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=Aw.bind(null,s,c);c.then(y,y)}})}function Tn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=s,x=r,I=x;e:for(;I!==null;){switch(I.tag){case 27:if(tr(I.type)){ft=I.stateNode,vn=!1;break e}break;case 5:ft=I.stateNode,vn=!1;break e;case 3:case 4:ft=I.stateNode.containerInfo,vn=!0;break e}I=I.return}if(ft===null)throw Error(i(160));R_(_,x,y),ft=null,vn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)D_(r,s),r=r.sibling}var si=null;function D_(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Tn(r,s),En(s),c&4&&(Js(3,s,s.return),Sl(3,s),Js(5,s,s.return));break;case 1:Tn(r,s),En(s),c&512&&(Rt||l===null||Si(l,l.return)),c&64&&$i&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=si;if(Tn(r,s),En(s),c&512&&(Rt||l===null||Si(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Pi]||_[pt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),$t(_,c,l),_[pt]=s,Et(_),c=_;break e;case"link":var x=Dv("link","href",y).get(c+(l.href||""));if(x){for(var I=0;I<x.length;I++)if(_=x[I],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(I,1);break t}}_=y.createElement(c),$t(_,c,l),y.head.appendChild(_);break;case"meta":if(x=Dv("meta","content",y).get(c+(l.content||""))){for(I=0;I<x.length;I++)if(_=x[I],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(I,1);break t}}_=y.createElement(c),$t(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[pt]=s,Et(_),c=_}s.stateNode=c}else Pv(y,s.type,s.stateNode);else s.stateNode=Mv(y,c,s.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?Pv(y,s.type,s.stateNode):Mv(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Uh(s,s.memoizedProps,l.memoizedProps)}break;case 27:Tn(r,s),En(s),c&512&&(Rt||l===null||Si(l,l.return)),l!==null&&c&4&&Uh(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Tn(r,s),En(s),c&512&&(Rt||l===null||Si(l,l.return)),s.flags&32){y=s.stateNode;try{On(y,"")}catch(fe){et(s,s.return,fe)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Uh(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Oh=!0);break;case 6:if(Tn(r,s),En(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(fe){et(s,s.return,fe)}}break;case 3:if(Hc=null,y=si,si=zc(r.containerInfo),Tn(r,s),si=y,En(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{aa(r.containerInfo)}catch(fe){et(s,s.return,fe)}Oh&&(Oh=!1,P_(s));break;case 4:c=si,si=zc(s.stateNode.containerInfo),Tn(r,s),En(s),si=c;break;case 12:Tn(r,s),En(s);break;case 31:Tn(r,s),En(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,bc(s,c)));break;case 13:Tn(r,s),En(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Nc=Gt()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,bc(s,c)));break;case 22:y=s.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,K=$i,W=Rt;if($i=K||y,Rt=W||P,Tn(r,s),Rt=W,$i=K,En(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||P||$i||Rt||Zr(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){P=l=r;try{if(_=P.stateNode,y)x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{I=P.stateNode;var te=P.memoizedProps.style,Y=te!=null&&te.hasOwnProperty("display")?te.display:null;I.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(fe){et(P,P.return,fe)}}}else if(r.tag===6){if(l===null){P=r;try{P.stateNode.nodeValue=y?"":P.memoizedProps}catch(fe){et(P,P.return,fe)}}}else if(r.tag===18){if(l===null){P=r;try{var j=P.stateNode;y?Av(j,!0):Av(P.stateNode,!1)}catch(fe){et(P,P.return,fe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,bc(s,l))));break;case 19:Tn(r,s),En(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,bc(s,c)));break;case 30:break;case 21:break;default:Tn(r,s),En(s)}}function En(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(x_(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=Lh(s);Ic(s,_,y);break;case 5:var x=l.stateNode;l.flags&32&&(On(x,""),l.flags&=-33);var I=Lh(s);Ic(s,I,x);break;case 3:case 4:var P=l.stateNode.containerInfo,K=Lh(s);Vh(s,K,P);break;default:throw Error(i(161))}}catch(W){et(s,s.return,W)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function P_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;P_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Wi(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)I_(s,r.alternate,r),r=r.sibling}function Zr(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Js(4,r,r.return),Zr(r);break;case 1:Si(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&A_(r,r.return,l),Zr(r);break;case 27:Pl(r.stateNode);case 26:case 5:Si(r,r.return),Zr(r);break;case 22:r.memoizedState===null&&Zr(r);break;case 30:Zr(r);break;default:Zr(r)}s=s.sibling}}function Xi(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,_=r,x=_.flags;switch(_.tag){case 0:case 11:case 15:Xi(y,_,l),Sl(4,_);break;case 1:if(Xi(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){et(c,c.return,K)}if(c=_,y=c.updateQueue,y!==null){var I=c.stateNode;try{var P=y.shared.hiddenCallbacks;if(P!==null)for(y.shared.hiddenCallbacks=null,y=0;y<P.length;y++)cy(P[y],I)}catch(K){et(c,c.return,K)}}l&&x&64&&E_(_),xl(_,_.return);break;case 27:C_(_);case 26:case 5:Xi(y,_,l),l&&c===null&&x&4&&S_(_),xl(_,_.return);break;case 12:Xi(y,_,l);break;case 31:Xi(y,_,l),l&&x&4&&N_(y,_);break;case 13:Xi(y,_,l),l&&x&4&&M_(y,_);break;case 22:_.memoizedState===null&&Xi(y,_,l),xl(_,_.return);break;case 30:break;default:Xi(y,_,l)}r=r.sibling}}function qh(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&cl(l))}function Fh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&cl(s))}function ri(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)k_(s,r,l,c),r=r.sibling}function k_(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ri(s,r,l,c),y&2048&&Sl(9,r);break;case 1:ri(s,r,l,c);break;case 3:ri(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&cl(s)));break;case 12:if(y&2048){ri(s,r,l,c),s=r.stateNode;try{var _=r.memoizedProps,x=_.id,I=_.onPostCommit;typeof I=="function"&&I(x,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(P){et(r,r.return,P)}}else ri(s,r,l,c);break;case 31:ri(s,r,l,c);break;case 13:ri(s,r,l,c);break;case 23:break;case 22:_=r.stateNode,x=r.alternate,r.memoizedState!==null?_._visibility&2?ri(s,r,l,c):Cl(s,r):_._visibility&2?ri(s,r,l,c):(_._visibility|=2,Qo(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&qh(x,r);break;case 24:ri(s,r,l,c),y&2048&&Fh(r.alternate,r);break;default:ri(s,r,l,c)}}function Qo(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,x=r,I=l,P=c,K=x.flags;switch(x.tag){case 0:case 11:case 15:Qo(_,x,I,P,y),Sl(8,x);break;case 23:break;case 22:var W=x.stateNode;x.memoizedState!==null?W._visibility&2?Qo(_,x,I,P,y):Cl(_,x):(W._visibility|=2,Qo(_,x,I,P,y)),y&&K&2048&&qh(x.alternate,x);break;case 24:Qo(_,x,I,P,y),y&&K&2048&&Fh(x.alternate,x);break;default:Qo(_,x,I,P,y)}r=r.sibling}}function Cl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:Cl(l,c),y&2048&&qh(c.alternate,c);break;case 24:Cl(l,c),y&2048&&Fh(c.alternate,c);break;default:Cl(l,c)}r=r.sibling}}var wl=8192;function Wo(s,r,l){if(s.subtreeFlags&wl)for(s=s.child;s!==null;)U_(s,r,l),s=s.sibling}function U_(s,r,l){switch(s.tag){case 26:Wo(s,r,l),s.flags&wl&&s.memoizedState!==null&&Zw(l,si,s.memoizedState,s.memoizedProps);break;case 5:Wo(s,r,l);break;case 3:case 4:var c=si;si=zc(s.stateNode.containerInfo),Wo(s,r,l),si=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=wl,wl=16777216,Wo(s,r,l),wl=c):Wo(s,r,l));break;default:Wo(s,r,l)}}function L_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Il(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Ft=c,O_(c,s)}L_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)V_(s),s=s.sibling}function V_(s){switch(s.tag){case 0:case 11:case 15:Il(s),s.flags&2048&&Js(9,s,s.return);break;case 3:Il(s);break;case 12:Il(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Rc(s)):Il(s);break;default:Il(s)}}function Rc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Ft=c,O_(c,s)}L_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Js(8,r,r.return),Rc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Rc(r));break;default:Rc(r)}s=s.sibling}}function O_(s,r){for(;Ft!==null;){var l=Ft;switch(l.tag){case 0:case 11:case 15:Js(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:cl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Ft=c;else e:for(l=s;Ft!==null;){c=Ft;var y=c.sibling,_=c.return;if(b_(c),c===l){Ft=null;break e}if(y!==null){y.return=_,Ft=y;break e}Ft=_}}}var mw={getCacheForType:function(s){var r=jt(wt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return jt(wt).controller.signal}},pw=typeof WeakMap=="function"?WeakMap:Map,Qe=0,ot=null,ke=null,Le=0,Ze=0,Nn=null,$s=!1,Xo=!1,Bh=!1,Zi=0,_t=0,Qs=0,eo=0,zh=0,Mn=0,Zo=0,bl=null,An=null,Gh=!1,Nc=0,q_=0,Mc=1/0,Dc=null,Ws=null,kt=0,Xs=null,ea=null,es=0,Hh=0,Kh=null,F_=null,Rl=0,Yh=null;function Dn(){return(Qe&2)!==0&&Le!==0?Le&-Le:J.T!==null?Xh():Di()}function B_(){if(Mn===0)if((Le&536870912)===0||Be){var s=hi;hi<<=1,(hi&3932160)===0&&(hi=262144),Mn=s}else Mn=536870912;return s=bn.current,s!==null&&(s.flags|=32),Mn}function Sn(s,r,l){(s===ot&&(Ze===2||Ze===9)||s.cancelPendingCommit!==null)&&(ta(s,0),Zs(s,Le,Mn,!1)),As(s,l),((Qe&2)===0||s!==ot)&&(s===ot&&((Qe&2)===0&&(eo|=l),_t===4&&Zs(s,Le,Mn,!1)),xi(s))}function z_(s,r,l){if((Qe&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||Es(s,r),y=c?_w(s,r):Jh(s,r,!0),_=c;do{if(y===0){Xo&&!c&&Zs(s,r,0,!1);break}else{if(l=s.current.alternate,_&&!gw(l)){y=Jh(s,r,!1),_=!1;continue}if(y===2){if(_=r,s.errorRecoveryDisabledLanes&_)var x=0;else x=s.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;e:{var I=s;y=bl;var P=I.current.memoizedState.isDehydrated;if(P&&(ta(I,x).flags|=256),x=Jh(I,x,!1),x!==2){if(Bh&&!P){I.errorRecoveryDisabledLanes|=_,eo|=_,y=4;break e}_=An,An=y,_!==null&&(An===null?An=_:An.push.apply(An,_))}y=x}if(_=!1,y!==2)continue}}if(y===1){ta(s,0),Zs(s,r,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Zs(c,r,Mn,!$s);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Nc+300-Gt(),10<y)){if(Zs(c,r,Mn,!$s),Ln(c,0,!0)!==0)break e;es=r,c.timeoutHandle=vv(G_.bind(null,c,l,An,Dc,Gh,r,Mn,eo,Zo,$s,_,"Throttled",-0,0),y);break e}G_(c,l,An,Dc,Gh,r,Mn,eo,Zo,$s,_,null,-0,0)}}break}while(!0);xi(s)}function G_(s,r,l,c,y,_,x,I,P,K,W,te,Y,j){if(s.timeoutHandle=-1,te=r.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vt},U_(r,_,te);var fe=(_&62914560)===_?Nc-Gt():(_&4194048)===_?q_-Gt():0;if(fe=eI(te,fe),fe!==null){es=_,s.cancelPendingCommit=fe(W_.bind(null,s,r,_,l,c,y,x,I,P,W,te,null,Y,j)),Zs(s,_,x,!K);return}}W_(s,r,_,l,c,y,x,I,P)}function gw(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!wn(_(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Zs(s,r,l,c){r&=~zh,r&=~eo,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var _=31-un(y),x=1<<_;c[_]=-1,y&=~x}l!==0&&Ga(s,l,r)}function Pc(){return(Qe&6)===0?(Nl(0),!1):!0}function jh(){if(ke!==null){if(Ze===0)var s=ke.return;else s=ke,Gi=Kr=null,uh(s),Ko=null,fl=0,s=ke;for(;s!==null;)T_(s.alternate,s),s=s.return;ke=null}}function ta(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Lw(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),es=0,jh(),ot=s,ke=l=Bi(s.current,null),Le=r,Ze=0,Nn=null,$s=!1,Xo=Es(s,r),Bh=!1,Zo=Mn=zh=eo=Qs=_t=0,An=bl=null,Gh=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-un(c),_=1<<y;r|=s[y],c&=~_}return Zi=r,ec(),l}function H_(s,r){Ne=null,J.H=Tl,r===Ho||r===lc?(r=oy(),Ze=3):r===Wf?(r=oy(),Ze=4):Ze=r===Ch?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Nn=r,ke===null&&(_t=1,Ac(s,Fn(r,s.current)))}function K_(){var s=bn.current;return s===null?!0:(Le&4194048)===Le?Hn===null:(Le&62914560)===Le||(Le&536870912)!==0?s===Hn:!1}function Y_(){var s=J.H;return J.H=Tl,s===null?Tl:s}function j_(){var s=J.A;return J.A=mw,s}function kc(){_t=4,$s||(Le&4194048)!==Le&&bn.current!==null||(Xo=!0),(Qs&134217727)===0&&(eo&134217727)===0||ot===null||Zs(ot,Le,Mn,!1)}function Jh(s,r,l){var c=Qe;Qe|=2;var y=Y_(),_=j_();(ot!==s||Le!==r)&&(Dc=null,ta(s,r)),r=!1;var x=_t;e:do try{if(Ze!==0&&ke!==null){var I=ke,P=Nn;switch(Ze){case 8:jh(),x=6;break e;case 3:case 2:case 9:case 6:bn.current===null&&(r=!0);var K=Ze;if(Ze=0,Nn=null,na(s,I,P,K),l&&Xo){x=0;break e}break;default:K=Ze,Ze=0,Nn=null,na(s,I,P,K)}}yw(),x=_t;break}catch(W){H_(s,W)}while(!0);return r&&s.shellSuspendCounter++,Gi=Kr=null,Qe=c,J.H=y,J.A=_,ke===null&&(ot=null,Le=0,ec()),x}function yw(){for(;ke!==null;)J_(ke)}function _w(s,r){var l=Qe;Qe|=2;var c=Y_(),y=j_();ot!==s||Le!==r?(Dc=null,Mc=Gt()+500,ta(s,r)):Xo=Es(s,r);e:do try{if(Ze!==0&&ke!==null){r=ke;var _=Nn;t:switch(Ze){case 1:Ze=0,Nn=null,na(s,r,_,1);break;case 2:case 9:if(sy(_)){Ze=0,Nn=null,$_(r);break}r=function(){Ze!==2&&Ze!==9||ot!==s||(Ze=7),xi(s)},_.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:sy(_)?(Ze=0,Nn=null,$_(r)):(Ze=0,Nn=null,na(s,r,_,7));break;case 5:var x=null;switch(ke.tag){case 26:x=ke.memoizedState;case 5:case 27:var I=ke;if(x?kv(x):I.stateNode.complete){Ze=0,Nn=null;var P=I.sibling;if(P!==null)ke=P;else{var K=I.return;K!==null?(ke=K,Uc(K)):ke=null}break t}}Ze=0,Nn=null,na(s,r,_,5);break;case 6:Ze=0,Nn=null,na(s,r,_,6);break;case 8:jh(),_t=6;break e;default:throw Error(i(462))}}vw();break}catch(W){H_(s,W)}while(!0);return Gi=Kr=null,J.H=c,J.A=y,Qe=l,ke!==null?0:(ot=null,Le=0,ec(),_t)}function vw(){for(;ke!==null&&!Tf();)J_(ke)}function J_(s){var r=__(s.alternate,s,Zi);s.memoizedProps=s.pendingProps,r===null?Uc(s):ke=r}function $_(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=f_(l,r,r.pendingProps,r.type,void 0,Le);break;case 11:r=f_(l,r,r.pendingProps,r.type.render,r.ref,Le);break;case 5:uh(r);default:T_(l,r),r=ke=jg(r,Zi),r=__(l,r,Zi)}s.memoizedProps=s.pendingProps,r===null?Uc(s):ke=r}function na(s,r,l,c){Gi=Kr=null,uh(r),Ko=null,fl=0;var y=r.return;try{if(aw(s,y,r,l,Le)){_t=1,Ac(s,Fn(l,s.current)),ke=null;return}}catch(_){if(y!==null)throw ke=y,_;_t=1,Ac(s,Fn(l,s.current)),ke=null;return}r.flags&32768?(Be||c===1?s=!0:Xo||(Le&536870912)!==0?s=!1:($s=s=!0,(c===2||c===9||c===3||c===6)&&(c=bn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Q_(r,s)):Uc(r)}function Uc(s){var r=s;do{if((r.flags&32768)!==0){Q_(r,$s);return}s=r.return;var l=cw(r.alternate,r,Zi);if(l!==null){ke=l;return}if(r=r.sibling,r!==null){ke=r;return}ke=r=s}while(r!==null);_t===0&&(_t=5)}function Q_(s,r){do{var l=dw(s.alternate,s);if(l!==null){l.flags&=32767,ke=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){ke=s;return}ke=s=l}while(s!==null);_t=6,ke=null}function W_(s,r,l,c,y,_,x,I,P){s.cancelPendingCommit=null;do Lc();while(kt!==0);if((Qe&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=Lf,Ht(s,l,_,x,I,P),s===ot&&(ke=ot=null,Le=0),ea=r,Xs=s,es=l,Hh=_,Kh=y,F_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Sw(Ni,function(){return nv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,y=le.p,le.p=2,x=Qe,Qe|=4;try{fw(s,r,l)}finally{Qe=x,le.p=y,J.T=c}}kt=1,X_(),Z_(),ev()}}function X_(){if(kt===1){kt=0;var s=Xs,r=ea,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=J.T,J.T=null;var c=le.p;le.p=2;var y=Qe;Qe|=4;try{D_(r,s);var _=om,x=Og(s.containerInfo),I=_.focusedElem,P=_.selectionRange;if(x!==I&&I&&I.ownerDocument&&Vg(I.ownerDocument.documentElement,I)){if(P!==null&&Mf(I)){var K=P.start,W=P.end;if(W===void 0&&(W=K),"selectionStart"in I)I.selectionStart=K,I.selectionEnd=Math.min(W,I.value.length);else{var te=I.ownerDocument||document,Y=te&&te.defaultView||window;if(Y.getSelection){var j=Y.getSelection(),fe=I.textContent.length,Te=Math.min(P.start,fe),rt=P.end===void 0?Te:Math.min(P.end,fe);!j.extend&&Te>rt&&(x=rt,rt=Te,Te=x);var B=Lg(I,Te),O=Lg(I,rt);if(B&&O&&(j.rangeCount!==1||j.anchorNode!==B.node||j.anchorOffset!==B.offset||j.focusNode!==O.node||j.focusOffset!==O.offset)){var H=te.createRange();H.setStart(B.node,B.offset),j.removeAllRanges(),Te>rt?(j.addRange(H),j.extend(O.node,O.offset)):(H.setEnd(O.node,O.offset),j.addRange(H))}}}}for(te=[],j=I;j=j.parentNode;)j.nodeType===1&&te.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<te.length;I++){var ee=te[I];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Jc=!!rm,om=rm=null}finally{Qe=y,le.p=c,J.T=l}}s.current=r,kt=2}}function Z_(){if(kt===2){kt=0;var s=Xs,r=ea,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=J.T,J.T=null;var c=le.p;le.p=2;var y=Qe;Qe|=4;try{I_(s,r.alternate,r)}finally{Qe=y,le.p=c,J.T=l}}kt=3}}function ev(){if(kt===4||kt===3){kt=0,qa();var s=Xs,r=ea,l=es,c=F_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?kt=5:(kt=0,ea=Xs=null,tv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Ws=null),Ka(l),r=r.stateNode,en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(vs,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=J.T,y=le.p,le.p=2,J.T=null;try{for(var _=s.onRecoverableError,x=0;x<c.length;x++){var I=c[x];_(I.value,{componentStack:I.stack})}}finally{J.T=r,le.p=y}}(es&3)!==0&&Lc(),xi(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===Yh?Rl++:(Rl=0,Yh=s):Rl=0,Nl(0)}}function tv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,cl(r)))}function Lc(){return X_(),Z_(),ev(),nv()}function nv(){if(kt!==5)return!1;var s=Xs,r=Hh;Hh=0;var l=Ka(es),c=J.T,y=le.p;try{le.p=32>l?32:l,J.T=null,l=Kh,Kh=null;var _=Xs,x=es;if(kt=0,ea=Xs=null,es=0,(Qe&6)!==0)throw Error(i(331));var I=Qe;if(Qe|=4,V_(_.current),k_(_,_.current,x,l),Qe=I,Nl(0,!1),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(vs,_)}catch{}return!0}finally{le.p=y,J.T=c,tv(s,r)}}function iv(s,r,l){r=Fn(l,r),r=xh(s.stateNode,r,2),s=Ks(s,r,2),s!==null&&(As(s,2),xi(s))}function et(s,r,l){if(s.tag===3)iv(s,s,l);else for(;r!==null;){if(r.tag===3){iv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ws===null||!Ws.has(c))){s=Fn(l,s),l=s_(2),c=Ks(r,l,2),c!==null&&(r_(l,c,r,s),As(c,2),xi(c));break}}r=r.return}}function $h(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new pw;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(Bh=!0,y.add(l),s=Tw.bind(null,s,r,l),r.then(s,s))}function Tw(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ot===s&&(Le&l)===l&&(_t===4||_t===3&&(Le&62914560)===Le&&300>Gt()-Nc?(Qe&2)===0&&ta(s,0):zh|=l,Zo===Le&&(Zo=0)),xi(s)}function sv(s,r){r===0&&(r=za()),s=zr(s,r),s!==null&&(As(s,r),xi(s))}function Ew(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),sv(s,l)}function Aw(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),sv(s,l)}function Sw(s,r){return Ir(s,r)}var Vc=null,ia=null,Qh=!1,Oc=!1,Wh=!1,er=0;function xi(s){s!==ia&&s.next===null&&(ia===null?Vc=ia=s:ia=ia.next=s),Oc=!0,Qh||(Qh=!0,Cw())}function Nl(s,r){if(!Wh&&Oc){Wh=!0;do for(var l=!1,c=Vc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var x=c.suspendedLanes,I=c.pingedLanes;_=(1<<31-un(42|s)+1)-1,_&=y&~(x&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,lv(c,_))}else _=Le,_=Ln(c,c===ot?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Es(c,_)||(l=!0,lv(c,_));c=c.next}while(l);Wh=!1}}function xw(){rv()}function rv(){Oc=Qh=!1;var s=0;er!==0&&Uw()&&(s=er);for(var r=Gt(),l=null,c=Vc;c!==null;){var y=c.next,_=ov(c,r);_===0?(c.next=null,l===null?Vc=y:l.next=y,y===null&&(ia=l)):(l=c,(s!==0||(_&3)!==0)&&(Oc=!0)),c=y}kt!==0&&kt!==5||Nl(s),er!==0&&(er=0)}function ov(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var x=31-un(_),I=1<<x,P=y[x];P===-1?((I&l)===0||(I&c)!==0)&&(y[x]=So(I,r)):P<=r&&(s.expiredLanes|=I),_&=~I}if(r=ot,l=Le,l=Ln(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(Ze===2||Ze===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Ao(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Es(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&Ao(c),Ka(l)){case 2:case 8:l=Lt;break;case 32:l=Ni;break;case 268435456:l=Fa;break;default:l=Ni}return c=av.bind(null,s),l=Ir(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&Ao(c),s.callbackPriority=2,s.callbackNode=null,2}function av(s,r){if(kt!==0&&kt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Lc()&&s.callbackNode!==l)return null;var c=Le;return c=Ln(s,s===ot?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(z_(s,c,r),ov(s,Gt()),s.callbackNode!=null&&s.callbackNode===l?av.bind(null,s):null)}function lv(s,r){if(Lc())return null;z_(s,r,!0)}function Cw(){Vw(function(){(Qe&6)!==0?Ir(Pt,xw):rv()})}function Xh(){if(er===0){var s=zo;s===0&&(s=Rr,Rr<<=1,(Rr&261888)===0&&(Rr=256)),er=s}return er}function uv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:_i(""+s)}function cv(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function ww(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var _=uv((y[Kt]||null).action),x=c.submitter;x&&(r=(r=x[Kt]||null)?uv(r.formAction):x.getAttribute("formAction"),r!==null&&(_=r,x=null));var I=new Ur("action","action",null,c,y);s.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(er!==0){var P=x?cv(y,x):new FormData(y);_h(l,{pending:!0,data:P,method:y.method,action:_},null,P)}}else typeof _=="function"&&(I.preventDefault(),P=x?cv(y,x):new FormData(y),_h(l,{pending:!0,data:P,method:y.method,action:_},_,P))},currentTarget:y}]})}}for(var Zh=0;Zh<Uf.length;Zh++){var em=Uf[Zh],Iw=em.toLowerCase(),bw=em[0].toUpperCase()+em.slice(1);ii(Iw,"on"+bw)}ii(Bg,"onAnimationEnd"),ii(zg,"onAnimationIteration"),ii(Gg,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(HC,"onTransitionRun"),ii(KC,"onTransitionStart"),ii(YC,"onTransitionCancel"),ii(Hg,"onTransitionEnd"),yi("onMouseEnter",["mouseout","mouseover"]),yi("onMouseLeave",["mouseout","mouseover"]),yi("onPointerEnter",["pointerout","pointerover"]),yi("onPointerLeave",["pointerout","pointerover"]),cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cn("onBeforeInput",["compositionend","keypress","textInput","paste"]),cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ml));function dv(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var x=c.length-1;0<=x;x--){var I=c[x],P=I.instance,K=I.currentTarget;if(I=I.listener,P!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=K;try{_(y)}catch(W){Zu(W)}y.currentTarget=null,_=P}else for(x=0;x<c.length;x++){if(I=c[x],P=I.instance,K=I.currentTarget,I=I.listener,P!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=K;try{_(y)}catch(W){Zu(W)}y.currentTarget=null,_=P}}}}function Ue(s,r){var l=r[Cs];l===void 0&&(l=r[Cs]=new Set);var c=s+"__bubble";l.has(c)||(fv(r,s,2,!1),l.add(c))}function tm(s,r,l){var c=0;r&&(c|=4),fv(l,s,c,r)}var qc="_reactListening"+Math.random().toString(36).slice(2);function nm(s){if(!s[qc]){s[qc]=!0,xo.forEach(function(l){l!=="selectionchange"&&(Rw.has(l)||tm(l,!1,s),tm(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[qc]||(r[qc]=!0,tm("selectionchange",!1,r))}}function fv(s,r,l,c){switch(Bv(r)){case 2:var y=iI;break;case 8:y=sI;break;default:y=ym}l=y.bind(null,r,l,s),y=void 0,!Za||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function im(s,r,l,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var I=c.stateNode.containerInfo;if(I===y)break;if(x===4)for(x=c.return;x!==null;){var P=x.tag;if((P===3||P===4)&&x.stateNode.containerInfo===y)return;x=x.return}for(;I!==null;){if(x=ki(I),x===null)return;if(P=x.tag,P===5||P===6||P===26||P===27){c=_=x;continue e}I=I.parentNode}}c=c.return}Vu(function(){var K=_,W=Ro(l),te=[];e:{var Y=Kg.get(s);if(Y!==void 0){var j=Ur,fe=s;switch(s){case"keypress":if(kr(l)===0)break e;case"keydown":case"keyup":j=Yu;break;case"focusin":fe="focus",j=Us;break;case"focusout":fe="blur",j=Us;break;case"beforeblur":case"afterblur":j=Us;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Ju;break;case Bg:case zg:case Gg:j=Do;break;case Hg:j=Po;break;case"scroll":case"scrollend":j=Ou;break;case"wheel":j=Qu;break;case"copy":case"cut":case"paste":j=zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=sl;break;case"toggle":case"beforetoggle":j=Vs}var Te=(r&4)!==0,rt=!Te&&(s==="scroll"||s==="scrollend"),B=Te?Y!==null?Y+"Capture":null:Y;Te=[];for(var O=K,H;O!==null;){var ee=O;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||B===null||(ee=yn(O,B),ee!=null&&Te.push(Dl(O,ee,H))),rt)break;O=O.return}0<Te.length&&(Y=new j(Y,fe,null,l,W),te.push({event:Y,listeners:Te}))}}if((r&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",j=s==="mouseout"||s==="pointerout",Y&&l!==bo&&(fe=l.relatedTarget||l.fromElement)&&(ki(fe)||fe[pi]))break e;if((j||Y)&&(Y=W.window===W?W:(Y=W.ownerDocument)?Y.defaultView||Y.parentWindow:window,j?(fe=l.relatedTarget||l.toElement,j=K,fe=fe?ki(fe):null,fe!==null&&(rt=a(fe),Te=fe.tag,fe!==rt||Te!==5&&Te!==27&&Te!==6)&&(fe=null)):(j=null,fe=K),j!==fe)){if(Te=qu,ee="onMouseLeave",B="onMouseEnter",O="mouse",(s==="pointerout"||s==="pointerover")&&(Te=sl,ee="onPointerLeave",B="onPointerEnter",O="pointer"),rt=j==null?Y:Mr(j),H=fe==null?Y:Mr(fe),Y=new Te(ee,O+"leave",j,l,W),Y.target=rt,Y.relatedTarget=H,ee=null,ki(W)===K&&(Te=new Te(B,O+"enter",fe,l,W),Te.target=H,Te.relatedTarget=rt,ee=Te),rt=ee,j&&fe)t:{for(Te=Nw,B=j,O=fe,H=0,ee=B;ee;ee=Te(ee))H++;ee=0;for(var ye=O;ye;ye=Te(ye))ee++;for(;0<H-ee;)B=Te(B),H--;for(;0<ee-H;)O=Te(O),ee--;for(;H--;){if(B===O||O!==null&&B===O.alternate){Te=B;break t}B=Te(B),O=Te(O)}Te=null}else Te=null;j!==null&&hv(te,Y,j,Te,!1),fe!==null&&rt!==null&&hv(te,rt,fe,Te,!0)}}e:{if(Y=K?Mr(K):window,j=Y.nodeName&&Y.nodeName.toLowerCase(),j==="select"||j==="input"&&Y.type==="file")var Ye=Ng;else if(_n(Y))if(Mg)Ye=BC;else{Ye=qC;var ge=OC}else j=Y.nodeName,!j||j.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?K&&Wa(K.elementType)&&(Ye=Ng):Ye=FC;if(Ye&&(Ye=Ye(s,K))){qr(te,Ye,l,W);break e}ge&&ge(s,Y,K),s==="focusout"&&K&&Y.type==="number"&&K.memoizedProps.value!=null&&Io(Y,"number",Y.value)}switch(ge=K?Mr(K):window,s){case"focusin":(_n(ge)||ge.contentEditable==="true")&&(ko=ge,Df=K,al=null);break;case"focusout":al=Df=ko=null;break;case"mousedown":Pf=!0;break;case"contextmenu":case"mouseup":case"dragend":Pf=!1,qg(te,l,W);break;case"selectionchange":if(GC)break;case"keydown":case"keyup":qg(te,l,W)}var Me;if(A)e:{switch(s){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Pe?Xe(s,l)&&(Ve="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Ve="onCompositionStart");Ve&&(G&&l.locale!=="ko"&&(Pe||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Pe&&(Me=Ms()):(Cn=W,No="value"in Cn?Cn.value:Cn.textContent,Pe=!0)),ge=Fc(K,Ve),0<ge.length&&(Ve=new tl(Ve,s,null,l,W),te.push({event:Ve,listeners:ge}),Me?Ve.data=Me:(Me=Ct(l),Me!==null&&(Ve.data=Me)))),(Me=b?Ot(s,l):qt(s,l))&&(Ve=Fc(K,"onBeforeInput"),0<Ve.length&&(ge=new tl("onBeforeInput","beforeinput",null,l,W),te.push({event:ge,listeners:Ve}),ge.data=Me)),ww(te,s,K,l,W)}dv(te,r)})}function Dl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Fc(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=yn(s,l),y!=null&&c.unshift(Dl(s,y,_)),y=yn(s,r),y!=null&&c.push(Dl(s,y,_))),s.tag===3)return c;s=s.return}return[]}function Nw(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function hv(s,r,l,c,y){for(var _=r._reactName,x=[];l!==null&&l!==c;){var I=l,P=I.alternate,K=I.stateNode;if(I=I.tag,P!==null&&P===c)break;I!==5&&I!==26&&I!==27||K===null||(P=K,y?(K=yn(l,_),K!=null&&x.unshift(Dl(l,K,P))):y||(K=yn(l,_),K!=null&&x.push(Dl(l,K,P)))),l=l.return}x.length!==0&&s.push({event:r,listeners:x})}var Mw=/\r\n?/g,Dw=/\u0000|\uFFFD/g;function mv(s){return(typeof s=="string"?s:""+s).replace(Mw,`
`).replace(Dw,"")}function pv(s,r){return r=mv(r),mv(s)===r}function st(s,r,l,c,y,_){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||On(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&On(s,""+c);break;case"className":bs(s,"class",c);break;case"tabIndex":bs(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":bs(s,l,c);break;case"style":Uu(s,c,_);break;case"data":if(r!=="object"){bs(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=_i(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(r!=="input"&&st(s,r,"name",y.name,y,null),st(s,r,"formEncType",y.formEncType,y,null),st(s,r,"formMethod",y.formMethod,y,null),st(s,r,"formTarget",y.formTarget,y,null)):(st(s,r,"encType",y.encType,y,null),st(s,r,"method",y.method,y,null),st(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=_i(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Vt);break;case"onScroll":c!=null&&Ue("scroll",s);break;case"onScrollEnd":c!=null&&Ue("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=_i(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Ue("beforetoggle",s),Ue("toggle",s),Is(s,"popover",c);break;case"xlinkActuate":Vn(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Vn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Vn(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Vn(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Vn(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Vn(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Vn(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Vn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Vn(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Is(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=wf.get(l)||l,Is(s,l,c))}}function sm(s,r,l,c,y,_){switch(l){case"style":Uu(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?On(s,c):(typeof c=="number"||typeof c=="bigint")&&On(s,""+c);break;case"onScroll":c!=null&&Ue("scroll",s);break;case"onScrollEnd":c!=null&&Ue("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Vt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ws.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),_=s[Kt]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Is(s,l,c)}}}function $t(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",s),Ue("load",s);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var x=l[_];if(x!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,_,x,l,null)}}y&&st(s,r,"srcSet",l.srcSet,l,null),c&&st(s,r,"src",l.src,l,null);return;case"input":Ue("invalid",s);var I=_=x=y=null,P=null,K=null;for(c in l)if(l.hasOwnProperty(c)){var W=l[c];if(W!=null)switch(c){case"name":y=W;break;case"type":x=W;break;case"checked":P=W;break;case"defaultChecked":K=W;break;case"value":_=W;break;case"defaultValue":I=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:st(s,r,c,W,l,null)}}Dr(s,_,I,P,K,x,y,!1);return;case"select":Ue("invalid",s),c=x=_=null;for(y in l)if(l.hasOwnProperty(y)&&(I=l[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":x=I;break;case"multiple":c=I;default:st(s,r,y,I,l,null)}r=_,l=x,s.multiple=!!c,r!=null?Ke(s,!!c,r,!1):l!=null&&Ke(s,!!c,l,!0);return;case"textarea":Ue("invalid",s),_=y=c=null;for(x in l)if(l.hasOwnProperty(x)&&(I=l[x],I!=null))switch(x){case"value":c=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:st(s,r,x,I,l,null)}Ns(s,c,y,_);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(c=l[P],c!=null))switch(P){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:st(s,r,P,c,l,null)}return;case"dialog":Ue("beforetoggle",s),Ue("toggle",s),Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":Ue("load",s);break;case"video":case"audio":for(c=0;c<Ml.length;c++)Ue(Ml[c],s);break;case"image":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"embed":case"source":case"link":Ue("error",s),Ue("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(c=l[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,K,c,l,null)}return;default:if(Wa(r)){for(W in l)l.hasOwnProperty(W)&&(c=l[W],c!==void 0&&sm(s,r,W,c,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(c=l[I],c!=null&&st(s,r,I,c,l,null))}function Pw(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,x=null,I=null,P=null,K=null,W=null;for(j in l){var te=l[j];if(l.hasOwnProperty(j)&&te!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":P=te;default:c.hasOwnProperty(j)||st(s,r,j,null,c,te)}}for(var Y in c){var j=c[Y];if(te=l[Y],c.hasOwnProperty(Y)&&(j!=null||te!=null))switch(Y){case"type":_=j;break;case"name":y=j;break;case"checked":K=j;break;case"defaultChecked":W=j;break;case"value":x=j;break;case"defaultValue":I=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,r));break;default:j!==te&&st(s,r,Y,j,c,te)}}Rs(s,x,I,P,K,W,_,y);return;case"select":j=x=I=Y=null;for(_ in l)if(P=l[_],l.hasOwnProperty(_)&&P!=null)switch(_){case"value":break;case"multiple":j=P;default:c.hasOwnProperty(_)||st(s,r,_,null,c,P)}for(y in c)if(_=c[y],P=l[y],c.hasOwnProperty(y)&&(_!=null||P!=null))switch(y){case"value":Y=_;break;case"defaultValue":I=_;break;case"multiple":x=_;default:_!==P&&st(s,r,y,_,c,P)}r=I,l=x,c=j,Y!=null?Ke(s,!!l,Y,!1):!!c!=!!l&&(r!=null?Ke(s,!!l,r,!0):Ke(s,!!l,l?[]:"",!1));return;case"textarea":j=Y=null;for(I in l)if(y=l[I],l.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:st(s,r,I,null,c,y)}for(x in c)if(y=c[x],_=l[x],c.hasOwnProperty(x)&&(y!=null||_!=null))switch(x){case"value":Y=y;break;case"defaultValue":j=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&st(s,r,x,y,c,_)}Pr(s,Y,j);return;case"option":for(var fe in l)if(Y=l[fe],l.hasOwnProperty(fe)&&Y!=null&&!c.hasOwnProperty(fe))switch(fe){case"selected":s.selected=!1;break;default:st(s,r,fe,null,c,Y)}for(P in c)if(Y=c[P],j=l[P],c.hasOwnProperty(P)&&Y!==j&&(Y!=null||j!=null))switch(P){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:st(s,r,P,Y,c,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in l)Y=l[Te],l.hasOwnProperty(Te)&&Y!=null&&!c.hasOwnProperty(Te)&&st(s,r,Te,null,c,Y);for(K in c)if(Y=c[K],j=l[K],c.hasOwnProperty(K)&&Y!==j&&(Y!=null||j!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:st(s,r,K,Y,c,j)}return;default:if(Wa(r)){for(var rt in l)Y=l[rt],l.hasOwnProperty(rt)&&Y!==void 0&&!c.hasOwnProperty(rt)&&sm(s,r,rt,void 0,c,Y);for(W in c)Y=c[W],j=l[W],!c.hasOwnProperty(W)||Y===j||Y===void 0&&j===void 0||sm(s,r,W,Y,c,j);return}}for(var B in l)Y=l[B],l.hasOwnProperty(B)&&Y!=null&&!c.hasOwnProperty(B)&&st(s,r,B,null,c,Y);for(te in c)Y=c[te],j=l[te],!c.hasOwnProperty(te)||Y===j||Y==null&&j==null||st(s,r,te,Y,c,j)}function gv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kw(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,x=y.initiatorType,I=y.duration;if(_&&I&&gv(x)){for(x=0,I=y.responseEnd,c+=1;c<l.length;c++){var P=l[c],K=P.startTime;if(K>I)break;var W=P.transferSize,te=P.initiatorType;W&&gv(te)&&(P=P.responseEnd,x+=W*(P<I?1:(I-K)/(P-K)))}if(--c,r+=8*(_+x)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var rm=null,om=null;function Bc(s){return s.nodeType===9?s:s.ownerDocument}function yv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _v(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function am(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var lm=null;function Uw(){var s=window.event;return s&&s.type==="popstate"?s===lm?!1:(lm=s,!0):(lm=null,!1)}var vv=typeof setTimeout=="function"?setTimeout:void 0,Lw=typeof clearTimeout=="function"?clearTimeout:void 0,Tv=typeof Promise=="function"?Promise:void 0,Vw=typeof queueMicrotask=="function"?queueMicrotask:typeof Tv<"u"?function(s){return Tv.resolve(null).then(s).catch(Ow)}:vv;function Ow(s){setTimeout(function(){throw s})}function tr(s){return s==="head"}function Ev(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),aa(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Pl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Pl(l);for(var _=l.firstChild;_;){var x=_.nextSibling,I=_.nodeName;_[Pi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=x}}else l==="body"&&Pl(s.ownerDocument.body);l=y}while(l);aa(r)}function Av(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function um(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":um(l),Nr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function qw(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Pi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Kn(s.nextSibling),s===null)break}return null}function Fw(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Kn(s.nextSibling),s===null))return null;return s}function Sv(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Kn(s.nextSibling),s===null))return null;return s}function cm(s){return s.data==="$?"||s.data==="$~"}function dm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Bw(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Kn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var fm=null;function xv(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Kn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function Cv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function wv(s,r,l){switch(r=Bc(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Pl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Nr(s)}var Yn=new Map,Iv=new Set;function zc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ts=le.d;le.d={f:zw,r:Gw,D:Hw,C:Kw,L:Yw,m:jw,X:$w,S:Jw,M:Qw};function zw(){var s=ts.f(),r=Pc();return s||r}function Gw(s){var r=Ui(s);r!==null&&r.tag===5&&r.type==="form"?Hy(r):ts.r(s)}var sa=typeof document>"u"?null:document;function bv(s,r,l){var c=sa;if(c&&typeof r=="string"&&r){var y=gt(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Iv.has(y)||(Iv.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),$t(r,"link",s),Et(r),c.head.appendChild(r)))}}function Hw(s){ts.D(s),bv("dns-prefetch",s,null)}function Kw(s,r){ts.C(s,r),bv("preconnect",s,r)}function Yw(s,r,l){ts.L(s,r,l);var c=sa;if(c&&s&&r){var y='link[rel="preload"][as="'+gt(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+gt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+gt(l.imageSizes)+'"]')):y+='[href="'+gt(s)+'"]';var _=y;switch(r){case"style":_=ra(s);break;case"script":_=oa(s)}Yn.has(_)||(s=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Yn.set(_,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(kl(_))||r==="script"&&c.querySelector(Ul(_))||(r=c.createElement("link"),$t(r,"link",s),Et(r),c.head.appendChild(r)))}}function jw(s,r){ts.m(s,r);var l=sa;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+gt(c)+'"][href="'+gt(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=oa(s)}if(!Yn.has(_)&&(s=E({rel:"modulepreload",href:s},r),Yn.set(_,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ul(_)))return}c=l.createElement("link"),$t(c,"link",s),Et(c),l.head.appendChild(c)}}}function Jw(s,r,l){ts.S(s,r,l);var c=sa;if(c&&s){var y=ti(c).hoistableStyles,_=ra(s);r=r||"default";var x=y.get(_);if(!x){var I={loading:0,preload:null};if(x=c.querySelector(kl(_)))I.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Yn.get(_))&&hm(s,l);var P=x=c.createElement("link");Et(P),$t(P,"link",s),P._p=new Promise(function(K,W){P.onload=K,P.onerror=W}),P.addEventListener("load",function(){I.loading|=1}),P.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Gc(x,r,c)}x={type:"stylesheet",instance:x,count:1,state:I},y.set(_,x)}}}function $w(s,r){ts.X(s,r);var l=sa;if(l&&s){var c=ti(l).hoistableScripts,y=oa(s),_=c.get(y);_||(_=l.querySelector(Ul(y)),_||(s=E({src:s,async:!0},r),(r=Yn.get(y))&&mm(s,r),_=l.createElement("script"),Et(_),$t(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Qw(s,r){ts.M(s,r);var l=sa;if(l&&s){var c=ti(l).hoistableScripts,y=oa(s),_=c.get(y);_||(_=l.querySelector(Ul(y)),_||(s=E({src:s,async:!0,type:"module"},r),(r=Yn.get(y))&&mm(s,r),_=l.createElement("script"),Et(_),$t(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Rv(s,r,l,c){var y=(y=De.current)?zc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=ra(l.href),l=ti(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=ra(l.href);var _=ti(y).hoistableStyles,x=_.get(s);if(x||(y=y.ownerDocument||y,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,x),(_=y.querySelector(kl(s)))&&!_._p&&(x.instance=_,x.state.loading=5),Yn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Yn.set(s,l),_||Ww(y,s,l,x.state))),r&&c===null)throw Error(i(528,""));return x}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=oa(l),l=ti(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ra(s){return'href="'+gt(s)+'"'}function kl(s){return'link[rel="stylesheet"]['+s+"]"}function Nv(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function Ww(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),$t(r,"link",l),Et(r),s.head.appendChild(r))}function oa(s){return'[src="'+gt(s)+'"]'}function Ul(s){return"script[async]"+s}function Mv(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+gt(l.href)+'"]');if(c)return r.instance=c,Et(c),c;var y=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Et(c),$t(c,"style",y),Gc(c,l.precedence,s),r.instance=c;case"stylesheet":y=ra(l.href);var _=s.querySelector(kl(y));if(_)return r.state.loading|=4,r.instance=_,Et(_),_;c=Nv(l),(y=Yn.get(y))&&hm(c,y),_=(s.ownerDocument||s).createElement("link"),Et(_);var x=_;return x._p=new Promise(function(I,P){x.onload=I,x.onerror=P}),$t(_,"link",c),r.state.loading|=4,Gc(_,l.precedence,s),r.instance=_;case"script":return _=oa(l.src),(y=s.querySelector(Ul(_)))?(r.instance=y,Et(y),y):(c=l,(y=Yn.get(_))&&(c=E({},l),mm(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Et(y),$t(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Gc(c,l.precedence,s));return r.instance}function Gc(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,x=0;x<c.length;x++){var I=c[x];if(I.dataset.precedence===r)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function hm(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function mm(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Hc=null;function Dv(s,r,l){if(Hc===null){var c=new Map,y=Hc=new Map;y.set(l,c)}else y=Hc,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var _=l[y];if(!(_[Pi]||_[pt]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var x=_.getAttribute(r)||"";x=s+x;var I=c.get(x);I?I.push(_):c.set(x,[_])}}return c}function Pv(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function Xw(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function kv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Zw(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=ra(c.href),_=r.querySelector(kl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=Kc.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=_,Et(_);return}_=r.ownerDocument||r,c=Nv(c),(y=Yn.get(y))&&hm(c,y),_=_.createElement("link"),Et(_);var x=_;x._p=new Promise(function(I,P){x.onload=I,x.onerror=P}),$t(_,"link",c),l.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Kc.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var pm=0;function eI(s,r){return s.stylesheets&&s.count===0&&jc(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&jc(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&pm===0&&(pm=62500*kw());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&jc(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>pm?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Kc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Yc=null;function jc(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Yc=new Map,r.forEach(tI,s),Yc=null,Kc.call(s))}function tI(s,r){if(!(r.state.loading&4)){var l=Yc.get(s);if(l)var c=l.get(null);else{l=new Map,Yc.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var x=y[_];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),c=x)}c&&l.set(null,c)}y=r.instance,x=y.getAttribute("data-precedence"),_=l.get(x)||c,_===c&&l.set(null,y),l.set(x,y),this.count++,c=Kc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var Ll={$$typeof:Q,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function nI(s,r,l,c,y,_,x,I,P){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.hiddenUpdates=Mi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function Uv(s,r,l,c,y,_,x,I,P,K,W,te){return s=new nI(s,r,l,x,P,K,W,te,I),r=1,_===!0&&(r|=24),_=In(3,null,null,r),s.current=_,_.stateNode=s,r=Jf(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:r},Xf(_),s}function Lv(s){return s?(s=Vo,s):Vo}function Vv(s,r,l,c,y,_){y=Lv(y),c.context===null?c.context=y:c.pendingContext=y,c=Hs(r),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=Ks(s,c,r),l!==null&&(Sn(l,s,r),ml(l,s,r))}function Ov(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function gm(s,r){Ov(s,r),(s=s.alternate)&&Ov(s,r)}function qv(s){if(s.tag===13||s.tag===31){var r=zr(s,67108864);r!==null&&Sn(r,s,67108864),gm(s,67108864)}}function Fv(s){if(s.tag===13||s.tag===31){var r=Dn();r=Ha(r);var l=zr(s,r);l!==null&&Sn(l,s,r),gm(s,r)}}var Jc=!0;function iI(s,r,l,c){var y=J.T;J.T=null;var _=le.p;try{le.p=2,ym(s,r,l,c)}finally{le.p=_,J.T=y}}function sI(s,r,l,c){var y=J.T;J.T=null;var _=le.p;try{le.p=8,ym(s,r,l,c)}finally{le.p=_,J.T=y}}function ym(s,r,l,c){if(Jc){var y=_m(c);if(y===null)im(s,r,c,$c,l),zv(s,c);else if(oI(y,s,r,l,c))c.stopPropagation();else if(zv(s,c),r&4&&-1<rI.indexOf(s)){for(;y!==null;){var _=Ui(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var x=ei(_.pendingLanes);if(x!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;x;){var P=1<<31-un(x);I.entanglements[1]|=P,x&=~P}xi(_),(Qe&6)===0&&(Mc=Gt()+500,Nl(0))}}break;case 31:case 13:I=zr(_,2),I!==null&&Sn(I,_,2),Pc(),gm(_,2)}if(_=_m(c),_===null&&im(s,r,c,$c,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else im(s,r,c,null,l)}}function _m(s){return s=Ro(s),vm(s)}var $c=null;function vm(s){if($c=null,s=ki(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return $c=s,null}function Bv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bu()){case Pt:return 2;case Lt:return 8;case Ni:case Ru:return 32;case Fa:return 268435456;default:return 32}default:return 32}}var Tm=!1,nr=null,ir=null,sr=null,Vl=new Map,Ol=new Map,rr=[],rI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zv(s,r){switch(s){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":Vl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(r.pointerId)}}function ql(s,r,l,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Ui(r),r!==null&&qv(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function oI(s,r,l,c,y){switch(r){case"focusin":return nr=ql(nr,s,r,l,c,y),!0;case"dragenter":return ir=ql(ir,s,r,l,c,y),!0;case"mouseover":return sr=ql(sr,s,r,l,c,y),!0;case"pointerover":var _=y.pointerId;return Vl.set(_,ql(Vl.get(_)||null,s,r,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Ol.set(_,ql(Ol.get(_)||null,s,r,l,c,y)),!0}return!1}function Gv(s){var r=ki(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,Mu(s.priority,function(){Fv(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,Mu(s.priority,function(){Fv(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Qc(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=_m(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);bo=c,l.target.dispatchEvent(c),bo=null}else return r=Ui(l),r!==null&&qv(r),s.blockedOn=l,!1;r.shift()}return!0}function Hv(s,r,l){Qc(s)&&l.delete(r)}function aI(){Tm=!1,nr!==null&&Qc(nr)&&(nr=null),ir!==null&&Qc(ir)&&(ir=null),sr!==null&&Qc(sr)&&(sr=null),Vl.forEach(Hv),Ol.forEach(Hv)}function Wc(s,r){s.blockedOn===r&&(s.blockedOn=null,Tm||(Tm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,aI)))}var Xc=null;function Kv(s){Xc!==s&&(Xc=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Xc===s&&(Xc=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(vm(c||l)===null)continue;break}var _=Ui(l);_!==null&&(s.splice(r,3),r-=3,_h(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function aa(s){function r(P){return Wc(P,s)}nr!==null&&Wc(nr,s),ir!==null&&Wc(ir,s),sr!==null&&Wc(sr,s),Vl.forEach(r),Ol.forEach(r);for(var l=0;l<rr.length;l++){var c=rr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<rr.length&&(l=rr[0],l.blockedOn===null);)Gv(l),l.blockedOn===null&&rr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],x=y[Kt]||null;if(typeof _=="function")x||Kv(l);else if(x){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,x=_[Kt]||null)I=x.formAction;else if(vm(y)!==null)continue}else I=x.action;typeof I=="function"?l[c+1]=I:(l.splice(c,3),c-=3),Kv(l)}}}function Yv(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(x){return y=x})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Em(s){this._internalRoot=s}Zc.prototype.render=Em.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=Dn();Vv(l,c,s,r,null,null)},Zc.prototype.unmount=Em.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Vv(s.current,2,null,s,null,null),Pc(),r[pi]=null}};function Zc(s){this._internalRoot=s}Zc.prototype.unstable_scheduleHydration=function(s){if(s){var r=Di();s={blockedOn:null,target:s,priority:r};for(var l=0;l<rr.length&&r!==0&&r<rr[l].priority;l++);rr.splice(l,0,s),l===0&&Gv(s)}};var jv=e.version;if(jv!=="19.2.1")throw Error(i(527,jv,"19.2.1"));le.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=p(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var lI={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{vs=ed.inject(lI),en=ed}catch{}}return Bl.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=e_,_=t_,x=n_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),r=Uv(s,1,!1,null,null,l,c,null,y,_,x,Yv),s[pi]=r.current,nm(s),new Em(r)},Bl.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",_=e_,x=t_,I=n_,P=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.formState!==void 0&&(P=l.formState)),r=Uv(s,1,!0,r,l??null,c,y,P,_,x,I,Yv),r.context=Lv(null),l=r.current,c=Dn(),c=Ha(c),y=Hs(c),y.callback=null,Ks(l,y,c),l=c,r.current.lanes=l,As(r,l),xi(r),s[pi]=r.current,nm(s),new Zc(r)},Bl.version="19.2.1",Bl}var i0;function vI(){if(i0)return xm.exports;i0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xm.exports=_I(),xm.exports}var TI=vI();const EI=nA(TI),iA={"Fantasy & Magic":["Space Explorer","Dragon Rider","Fairy Princess","Wizard Apprentice","Mermaid/Merman","Unicorn Keeper","Forest Elf","Royal Knight","Cloud Walker","Time Traveler"],Professions:["Astronaut","Doctor","Firefighter","Pilot","Chef","Scientist","Veterinarian","Detective","Construction Builder","Teacher","Artist","Musician","F1 Driver"],"Sports & Action":["Cricket Captain","Football Star","Gymnast","Ninja Warrior","Super Hero","Archer","Scuba Diver","Mountain Climber","Skateboarder","Karate Master"],"History & Culture":["Maharaja/Maharani","Viking Warrior","Egyptian Pharaoh","Samurai","Cowboy/Cowgirl","Pirate Captain","Greek God/Goddess","Explorer"],"Nature & Animals":["Jungle King/Queen","Dinosaur Tamer","Wolf Pack Leader","Eagle Flyer","Ocean Guardian","Safari Ranger","Butterfly Whisperer"]};var no=(t=>(t.SQUARE="Square (1:1)",t.A4_PORTRAIT="A4 Portrait",t.A4_LANDSCAPE="A4 Landscape",t.MOBILE_STORY="Mobile Story (9:16)",t))(no||{}),Ce=(t=>(t[t.LANDING=0]="LANDING",t[t.LOGIN=1]="LOGIN",t[t.SIGNUP=2]="SIGNUP",t[t.DASHBOARD=3]="DASHBOARD",t[t.CONFIG=4]="CONFIG",t[t.STORY_VIEW=5]="STORY_VIEW",t[t.PHOTOSHOOT_GALLERY=6]="PHOTOSHOOT_GALLERY",t[t.PRICING=7]="PRICING",t[t.INFO_PAGE=8]="INFO_PAGE",t))(Ce||{});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sA=(...t)=>t.filter((e,n,i)=>!!e&&i.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=Se.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:u,...d},h)=>Se.createElement("svg",{ref:h,...SI,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:sA("lucide",o),...d},[...u.map(([p,v])=>Se.createElement(p,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(t,e)=>{const n=Se.forwardRef(({className:i,...o},a)=>Se.createElement(xI,{ref:a,iconNode:e,className:sA(`lucide-${AI(t)}`,i),...o}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=Ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=Ee("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=Ee("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=Ee("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=Ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=Ee("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=Ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=Ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=Ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=Ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=Ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=Ee("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=Ee("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=Ee("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=Ee("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=Ee("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=Ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=Ee("CloudUpload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=Ee("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=Ee("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=Ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=Ee("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=Ee("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=Ee("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=Ee("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=Ee("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=Ee("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=Ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=Ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=Ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=Ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=Ee("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=Ee("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=Ee("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=Ee("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=Ee("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=Ee("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=Ee("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=Ee("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=Ee("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=Ee("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=Ee("Sticker",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M14 3v4a2 2 0 0 0 2 2h4",key:"36rjfy"}],["path",{d:"M8 13h0",key:"jdup5h"}],["path",{d:"M16 13h0",key:"l4i2ga"}],["path",{d:"M10 16s.8 1 2 1c1.3 0 2-1 2-1",key:"1vvgv3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=Ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=Ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=Ee("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=Ee("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=Ee("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var l0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},eb=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=t[n++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=t[n++],u=t[n++],d=t[n++],h=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],u=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},fA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const a=t[o],u=o+1<t.length,d=u?t[o+1]:0,h=o+2<t.length,p=h?t[o+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|p>>6,w=p&63;h||(w=64,u||(S=64)),i.push(n[v],n[E],n[S],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const a=n[t.charAt(o++)],d=o<t.length?n[t.charAt(o)]:0;++o;const p=o<t.length?n[t.charAt(o)]:64;++o;const E=o<t.length?n[t.charAt(o)]:64;if(++o,a==null||d==null||p==null||E==null)throw new tb;const S=a<<2|d>>4;if(i.push(S),p!==64){const w=d<<4&240|p>>2;if(i.push(w),E!==64){const V=p<<6&192|E;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nb=function(t){const e=dA(t);return fA.encodeByteArray(e,!0)},xd=function(t){return nb(t).replace(/\./g,"")},hA=function(t){try{return fA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Cd(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!ib(n)||(t[n]=Cd(t[n],e[n]));return t}function ib(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=()=>mA().__FIREBASE_DEFAULTS__,rb=()=>{if(typeof process>"u"||typeof l0>"u")return;const t=l0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ob=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hA(t[1]);return e&&JSON.parse(e)},jd=()=>{try{return sb()||rb()||ob()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pA=t=>{var e,n;return(n=(e=jd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gA=t=>{const e=pA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},yA=()=>{var t;return(t=jd())===null||t===void 0?void 0:t.config},_A=t=>{var e;return(e=jd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xd(JSON.stringify(n)),xd(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function ub(){var t;const e=(t=jd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cb(){return typeof window<"u"||TA()}function TA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function db(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mb(){const t=ln();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function pb(){return!ub()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gb(){try{return typeof indexedDB=="object"}catch{return!1}}function yb(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="FirebaseError";class ci extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=_b,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mo.prototype.create)}}class mo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?vb(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new ci(o,d,i)}}function vb(t,e){return t.replace(Tb,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Tb=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Eb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wd(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const a=t[o],u=e[o];if(c0(a)&&c0(u)){if(!wd(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function c0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Yl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function jl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function EA(t,e){const n=new Ab(t,e);return n.subscribe.bind(n)}class Ab{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Sb(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=bm),o.error===void 0&&(o.error=bm),o.complete===void 0&&(o.complete=bm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return t&&t._delegate?t._delegate:t}class ls{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new ab;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wb(e))try{this.getOrInitializeService({instanceIdentifier:to})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=to){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=to){return this.instances.has(e)}getOptions(e=to){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Cb(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=to){return this.component?this.component.multipleInstances?e:to:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cb(t){return t===to?void 0:t}function wb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=[];var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const SA={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},Ib=Oe.INFO,bb={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},Rb=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=bb[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jd{constructor(e){this.name=e,this._logLevel=Ib,this._logHandler=Rb,this._userLogHandler=null,Sp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}function Nb(t){Sp.forEach(e=>{e.setLogLevel(t)})}function Mb(t,e){for(const n of Sp){let i=null;e&&e.level&&(i=SA[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(o,a,...u)=>{const d=u.map(h=>{if(h==null)return null;if(typeof h=="string")return h;if(typeof h=="number"||typeof h=="boolean")return h.toString();if(h instanceof Error)return h.message;try{return JSON.stringify(h)}catch{return null}}).filter(h=>h).join(" ");a>=(i??o.logLevel)&&t({level:Oe[a].toLowerCase(),message:d,args:u,type:o.name})}}}const Db=(t,e)=>e.some(n=>t instanceof n);let d0,f0;function Pb(){return d0||(d0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kb(){return f0||(f0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xA=new WeakMap,Gm=new WeakMap,CA=new WeakMap,Rm=new WeakMap,xp=new WeakMap;function Ub(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(hr(t.result)),o()},u=()=>{i(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&xA.set(n,t)}).catch(()=>{}),xp.set(e,t),e}function Lb(t){if(Gm.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),o()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});Gm.set(t,e)}let Hm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Vb(t){Hm=t(Hm)}function Ob(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Nm(this),e,...n);return CA.set(i,e.sort?e.sort():[e]),hr(i)}:kb().includes(t)?function(...e){return t.apply(Nm(this),e),hr(xA.get(this))}:function(...e){return hr(t.apply(Nm(this),e))}}function qb(t){return typeof t=="function"?Ob(t):(t instanceof IDBTransaction&&Lb(t),Db(t,Pb())?new Proxy(t,Hm):t)}function hr(t){if(t instanceof IDBRequest)return Ub(t);if(Rm.has(t))return Rm.get(t);const e=qb(t);return e!==t&&(Rm.set(t,e),xp.set(e,t)),e}const Nm=t=>xp.get(t);function Fb(t,e,{blocked:n,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(t,e),d=hr(u);return i&&u.addEventListener("upgradeneeded",h=>{i(hr(u.result),h.oldVersion,h.newVersion,hr(u.transaction),h)}),n&&u.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),d.then(h=>{a&&h.addEventListener("close",()=>a()),o&&h.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const Bb=["get","getKey","getAll","getAllKeys","count"],zb=["put","add","delete","clear"],Mm=new Map;function h0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=zb.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Bb.includes(n)))return;const a=async function(u,...d){const h=this.transaction(u,o?"readwrite":"readonly");let p=h.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[n](...d),o&&h.done]))[0]};return Mm.set(e,a),a}Vb(t=>({...t,get:(e,n,i)=>h0(e,n)||t.get(e,n,i),has:(e,n)=>!!h0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Hb(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Hb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Id="@firebase/app",Km="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Jd("@firebase/app"),Kb="@firebase/app-compat",Yb="@firebase/analytics-compat",jb="@firebase/analytics",Jb="@firebase/app-check-compat",$b="@firebase/app-check",Qb="@firebase/auth",Wb="@firebase/auth-compat",Xb="@firebase/database",Zb="@firebase/data-connect",eR="@firebase/database-compat",tR="@firebase/functions",nR="@firebase/functions-compat",iR="@firebase/installations",sR="@firebase/installations-compat",rR="@firebase/messaging",oR="@firebase/messaging-compat",aR="@firebase/performance",lR="@firebase/performance-compat",uR="@firebase/remote-config",cR="@firebase/remote-config-compat",dR="@firebase/storage",fR="@firebase/storage-compat",hR="@firebase/firestore",mR="@firebase/vertexai-preview",pR="@firebase/firestore-compat",gR="firebase",yR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="[DEFAULT]",_R={[Id]:"fire-core",[Kb]:"fire-core-compat",[jb]:"fire-analytics",[Yb]:"fire-analytics-compat",[$b]:"fire-app-check",[Jb]:"fire-app-check-compat",[Qb]:"fire-auth",[Wb]:"fire-auth-compat",[Xb]:"fire-rtdb",[Zb]:"fire-data-connect",[eR]:"fire-rtdb-compat",[tR]:"fire-fn",[nR]:"fire-fn-compat",[iR]:"fire-iid",[sR]:"fire-iid-compat",[rR]:"fire-fcm",[oR]:"fire-fcm-compat",[aR]:"fire-perf",[lR]:"fire-perf-compat",[uR]:"fire-rc",[cR]:"fire-rc-compat",[dR]:"fire-gcs",[fR]:"fire-gcs-compat",[hR]:"fire-fst",[pR]:"fire-fst-compat",[mR]:"fire-vertex","fire-js":"fire-js",[gR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new Map,va=new Map,Ta=new Map;function ru(t,e){try{t.container.addComponent(e)}catch(n){us.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wA(t,e){t.container.addOrOverwriteComponent(e)}function cs(t){const e=t.name;if(Ta.has(e))return us.debug(`There were multiple attempts to register component ${e}.`),!1;Ta.set(e,t);for(const n of yr.values())ru(n,t);for(const n of va.values())ru(n,t);return!0}function Ra(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vR(t,e,n=gr){Ra(t,e).clearInstance(n)}function IA(t){return t.options!==void 0}function Jn(t){return t.settings!==void 0}function TR(){Ta.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$n=new mo("app","Firebase",ER);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bA=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR extends bA{constructor(e,n,i,o){const a=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,u={name:i,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,u,o);else{const d=e;super(d.options,u,o)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:a},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,kn(Id,Km,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){wp(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw $n.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=yR;function Cp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:gr,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw $n.create("bad-app-name",{appName:String(o)});if(n||(n=yA()),!n)throw $n.create("no-options");const a=yr.get(o);if(a){if(wd(n,a.options)&&wd(i,a.config))return a;throw $n.create("duplicate-app",{appName:o})}const u=new AA(o);for(const h of Ta.values())u.addComponent(h);const d=new bA(n,i,u);return yr.set(o,d),d}function SR(t,e){if(cb()&&!TA())throw $n.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;IA(t)?n=t.options:n=t;const i=Object.assign(Object.assign({},e),n);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const o=p=>[...p].reduce((v,E)=>Math.imul(31,v)+E.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw $n.create("finalization-registry-not-supported",{});const a=""+o(JSON.stringify(i)),u=va.get(a);if(u)return u.incRefCount(e.releaseOnDeref),u;const d=new AA(a);for(const p of Ta.values())d.addComponent(p);const h=new AR(n,e,a,d);return va.set(a,h),h}function $d(t=gr){const e=yr.get(t);if(!e&&t===gr&&yA())return Cp();if(!e)throw $n.create("no-app",{appName:t});return e}function xR(){return Array.from(yr.values())}async function wp(t){let e=!1;const n=t.name;yr.has(n)?(e=!0,yr.delete(n)):va.has(n)&&t.decRefCount()<=0&&(va.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)}function kn(t,e,n){var i;let o=(i=_R[t])!==null&&i!==void 0?i:t;n&&(o+=`-${n}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),us.warn(d.join(" "));return}cs(new ls(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}function RA(t,e){if(t!==null&&typeof t!="function")throw $n.create("invalid-log-argument");Mb(t,e)}function NA(t){Nb(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="firebase-heartbeat-database",wR=1,ou="firebase-heartbeat-store";let Dm=null;function MA(){return Dm||(Dm=Fb(CR,wR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ou)}catch(n){console.warn(n)}}}}).catch(t=>{throw $n.create("idb-open",{originalErrorMessage:t.message})})),Dm}async function IR(t){try{const n=(await MA()).transaction(ou),i=await n.objectStore(ou).get(DA(t));return await n.done,i}catch(e){if(e instanceof ci)us.warn(e.message);else{const n=$n.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});us.warn(n.message)}}}async function m0(t,e){try{const i=(await MA()).transaction(ou,"readwrite");await i.objectStore(ou).put(e,DA(t)),await i.done}catch(n){if(n instanceof ci)us.warn(n.message);else{const i=$n.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});us.warn(i.message)}}}function DA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=1024,RR=720*60*60*1e3;class NR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=p0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=RR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){us.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=p0(),{heartbeatsToSend:i,unsentEntries:o}=MR(this._heartbeatsCache.heartbeats),a=xd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return us.warn(n),""}}}function p0(){return new Date().toISOString().substring(0,10)}function MR(t,e=bR){const n=[];let i=t.slice();for(const o of t){const a=n.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),g0(n)>e){a.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),g0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class DR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gb()?yb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return m0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return m0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function g0(t){return xd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t){cs(new ls("platform-logger",e=>new Gb(e),"PRIVATE")),cs(new ls("heartbeat",e=>new NR(e),"PRIVATE")),kn(Id,Km,t),kn(Id,Km,"esm2017"),kn("fire-js","")}PR("");const kR=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ci,SDK_VERSION:ps,_DEFAULT_ENTRY_NAME:gr,_addComponent:ru,_addOrOverwriteComponent:wA,_apps:yr,_clearComponents:TR,_components:Ta,_getProvider:Ra,_isFirebaseApp:IA,_isFirebaseServerApp:Jn,_registerComponent:cs,_removeServiceInstance:vR,_serverApps:va,deleteApp:wp,getApp:$d,getApps:xR,initializeApp:Cp,initializeServerApp:SR,onLog:RA,registerVersion:kn,setLogLevel:NA},Symbol.toStringTag,{value:"Module"}));function Ip(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function PA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UR=PA,kA=new mo("auth","Firebase",PA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Jd("@firebase/auth");function LR(t,...e){bd.logLevel<=Oe.WARN&&bd.warn(`Auth (${ps}): ${t}`,...e)}function ud(t,...e){bd.logLevel<=Oe.ERROR&&bd.error(`Auth (${ps}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,...e){throw Rp(t,...e)}function li(t,...e){return Rp(t,...e)}function bp(t,e,n){const i=Object.assign(Object.assign({},UR()),{[e]:n});return new mo("auth","Firebase",i).create(e,{appName:t.name})}function os(t){return bp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VR(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Xn(t,"argument-error"),bp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rp(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return kA.create(t,...e)}function xe(t,e,...n){if(!t)throw Rp(e,...n)}function is(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ud(e),new Error(e)}function ds(t,e){t||is(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function OR(){return y0()==="http:"||y0()==="https:"}function y0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OR()||fb()||"connection"in navigator)?navigator.onLine:!0}function FR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ds(n>e,"Short delay should be less than long delay!"),this.isMobile=lb()||hb()}get(){return qR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t,e){ds(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new gu(3e4,6e4);function Ar(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gs(t,e,n,i,o={}){return LA(t,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=pu(Object.assign({key:t.config.apiKey},u)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:h},a);return db()||(p.referrerPolicy="no-referrer"),UA.fetch()(VA(t,t.config.apiHost,n,d),p)})}async function LA(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},BR),e);try{const o=new HR(t),a=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw td(t,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[h,p]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw td(t,"credential-already-in-use",u);if(h==="EMAIL_EXISTS")throw td(t,"email-already-in-use",u);if(h==="USER_DISABLED")throw td(t,"user-disabled",u);const v=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw bp(t,v,p);Xn(t,v)}}catch(o){if(o instanceof ci)throw o;Xn(t,"network-request-failed",{message:String(o)})}}async function yu(t,e,n,i,o={}){const a=await gs(t,e,n,i,o);return"mfaPendingCredential"in a&&Xn(t,"multi-factor-auth-required",{_serverResponse:a}),a}function VA(t,e,n,i){const o=`${e}${n}?${i}`;return t.config.emulator?Np(t.config,o):`${t.config.apiScheme}://${o}`}function GR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(li(this.auth,"network-request-failed")),zR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function td(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=li(t,e,i);return o.customData._tokenResponse=n,o}function _0(t){return t!==void 0&&t.enterprise!==void 0}class KR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return GR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function YR(t,e){return gs(t,"GET","/v2/recaptchaConfig",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e){return gs(t,"POST","/v1/accounts:delete",e)}async function OA(t,e){return gs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JR(t,e=!1){const n=Dt(t),i=await n.getIdToken(e),o=Mp(i);xe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:Wl(Pm(o.auth_time)),issuedAtTime:Wl(Pm(o.iat)),expirationTime:Wl(Pm(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Pm(t){return Number(t)*1e3}function Mp(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return ud("JWT malformed, contained fewer than 3 sections"),null;try{const o=hA(n);return o?JSON.parse(o):(ud("Failed to decode base64 JWT payload"),null)}catch(o){return ud("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function v0(t){const e=Mp(t);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ci&&$R(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function $R({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wl(this.lastLoginAt),this.creationTime=Wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rd(t){var e;const n=t.auth,i=await t.getIdToken(),o=await Ea(t,OA(n,{idToken:i}));xe(o==null?void 0:o.users.length,n,"internal-error");const a=o.users[0];t._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?qA(a.providerUserInfo):[],d=XR(t.providerData,u),h=t.isAnonymous,p=!(t.email&&a.passwordHash)&&!(d!=null&&d.length),v=h?p:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new jm(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(t,E)}async function WR(t){const e=Dt(t);await Rd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XR(t,e){return[...t.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function qA(t){return t.map(e=>{var{providerId:n}=e,i=Ip(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(t,e){const n=await LA(t,{},async()=>{const i=pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=t.config,u=VA(t,o,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",UA.fetch()(u,{method:"POST",headers:d,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eN(t,e){return gs(t,"POST","/v2/accounts:revokeToken",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=v0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:a}=await ZR(e,n);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:a}=n,u=new fa;return i&&(xe(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(xe(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(xe(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fa,this.toJSON())}_performRefresh(){return is("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,e){xe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ss{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,a=Ip(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new jm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Ea(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JR(this,e)}reload(){return WR(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Rd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(os(this.auth));const e=await this.getIdToken();return await Ea(this,jR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,a,u,d,h,p,v;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,S=(o=n.email)!==null&&o!==void 0?o:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,V=(u=n.photoURL)!==null&&u!==void 0?u:void 0,F=(d=n.tenantId)!==null&&d!==void 0?d:void 0,z=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,X=(p=n.createdAt)!==null&&p!==void 0?p:void 0,ne=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:Q,emailVerified:re,isAnonymous:ce,providerData:oe,stsTokenManager:M}=n;xe(Q&&M,e,"internal-error");const R=fa.fromJSON(this.name,M);xe(typeof Q=="string",e,"internal-error"),ar(E,e.name),ar(S,e.name),xe(typeof re=="boolean",e,"internal-error"),xe(typeof ce=="boolean",e,"internal-error"),ar(w,e.name),ar(V,e.name),ar(F,e.name),ar(z,e.name),ar(X,e.name),ar(ne,e.name);const N=new ss({uid:Q,auth:e,email:S,emailVerified:re,displayName:E,isAnonymous:ce,photoURL:V,phoneNumber:w,tenantId:F,stsTokenManager:R,createdAt:X,lastLoginAt:ne});return oe&&Array.isArray(oe)&&(N.providerData=oe.map(k=>Object.assign({},k))),z&&(N._redirectEventId=z),N}static async _fromIdTokenResponse(e,n,i=!1){const o=new fa;o.updateFromServerResponse(n);const a=new ss({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Rd(a),a}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];xe(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?qA(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new fa;d.updateFromIdToken(i);const h=new ss({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new jm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=new Map;function rs(t){ds(t instanceof Function,"Expected a class definition");let e=T0.get(t);return e?(ds(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,T0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}FA.type="NONE";const E0=FA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t,e,n){return`firebase:${t}:${e}:${n}`}class ha{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=cd(this.userKey,o.apiKey,a),this.fullPersistenceKey=cd("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ss._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ha(rs(E0),e,i);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=o[0]||rs(E0);const u=cd(i,e.config.apiKey,e.name);let d=null;for(const p of n)try{const v=await p._get(u);if(v){const E=ss._fromJSON(e,v);p!==a&&(d=E),a=p;break}}catch{}const h=o.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new ha(a,e,i):(a=h[0],d&&await a._set(u,d.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(u)}catch{}})),new ha(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YA(e))return"Blackberry";if(jA(e))return"Webos";if(zA(e))return"Safari";if((e.includes("chrome/")||GA(e))&&!e.includes("edge/"))return"Chrome";if(KA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function BA(t=ln()){return/firefox\//i.test(t)}function zA(t=ln()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GA(t=ln()){return/crios\//i.test(t)}function HA(t=ln()){return/iemobile/i.test(t)}function KA(t=ln()){return/android/i.test(t)}function YA(t=ln()){return/blackberry/i.test(t)}function jA(t=ln()){return/webos/i.test(t)}function Dp(t=ln()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tN(t=ln()){var e;return Dp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nN(){return mb()&&document.documentMode===10}function JA(t=ln()){return Dp(t)||KA(t)||jA(t)||YA(t)||/windows phone/i.test(t)||HA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t,e=[]){let n;switch(t){case"Browser":n=A0(ln());break;case"Worker":n=`${A0(ln())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ps}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((u,d)=>{try{const h=e(a);u(h)}catch(h){d(h)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(t,e={}){return gs(t,"GET","/v2/passwordPolicy",Ar(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=6;class oN{constructor(e){var n,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:rN,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,a,u,d;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(i=h.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(o=h.containsLowercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(u=h.containsNumericCharacter)!==null&&u!==void 0?u:!0),h.isValid&&(h.isValid=(d=h.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),h}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S0(this),this.idTokenSubscription=new S0(this),this.beforeStateQueue=new iN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rs(n)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await ha.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await OA(this,{idToken:e}),i=await ss._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Jn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=o==null?void 0:o._redirectEventId,h=await this.tryRedirectSignIn(e);(!u||u===d)&&(h!=null&&h.user)&&(o=h.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(os(this));const n=e?Dt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sN(this),n=new oN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await eN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&rs(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await ha.create(this,[rs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,o);return()=>{u=!0,h()}}else{const h=e.addObserver(n);return()=>{u=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$A(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&LR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Sr(t){return Dt(t)}class S0{constructor(e){this.auth=e,this.observer=null,this.addObserver=EA(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lN(t){Qd=t}function QA(t){return Qd.loadJS(t)}function uN(){return Qd.recaptchaEnterpriseScript}function cN(){return Qd.gapiScript}function dN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const fN="recaptcha-enterprise",hN="NO_RECAPTCHA";class mN{constructor(e){this.type=fN,this.auth=Sr(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{YR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new KR(h);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,u(p.siteKey)}}).catch(h=>{d(h)})})}function o(a,u,d){const h=window.grecaptcha;_0(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(p=>{u(p)}).catch(()=>{u(hN)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{i(this.auth).then(d=>{if(!n&&_0(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let h=uN();h.length!==0&&(h+=d),QA(h).then(()=>{o(d,a,u)}).catch(p=>{u(p)})}}).catch(d=>{u(d)})})}}async function x0(t,e,n,i=!1){const o=new mN(t);let a;try{a=await o.verify(n)}catch{a=await o.verify(n,!0)}const u=Object.assign({},e);return i?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Jm(t,e,n,i){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await x0(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await x0(t,e,n,n==="getOobCode");return i(t,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t,e){const n=Ra(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),a=n.getOptions();if(wd(a,e??{}))return o;Xn(o,"already-initialized")}return n.initialize({options:e})}function gN(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(rs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function yN(t,e,n){const i=Sr(t);xe(i._canInitEmulator,i,"emulator-config-failed"),xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=WA(e),{host:u,port:d}=_N(e),h=d===null?"":`:${d}`;i.config.emulator={url:`${a}//${u}${h}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),vN()}function WA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _N(t){const e=WA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:C0(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:C0(u)}}}function C0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return is("not implemented")}_getIdTokenResponse(e){return is("not implemented")}_linkToIdToken(e,n){return is("not implemented")}_getReauthenticationResolver(e){return is("not implemented")}}async function TN(t,e){return gs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(t,e){return yu(t,"POST","/v1/accounts:signInWithPassword",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e){return yu(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}async function SN(t,e){return yu(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends Pp{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new au(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new au(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jm(e,n,"signInWithPassword",EN);case"emailLink":return AN(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jm(e,i,"signUpPassword",TN);case"emailLink":return SN(e,{idToken:n,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t,e){return yu(t,"POST","/v1/accounts:signInWithIdp",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="http://localhost";class ao extends Pp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=n,a=Ip(n,["providerId","signInMethod"]);if(!i||!o)return null;const u=new ao(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return ma(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ma(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ma(e,n)}buildRequest(){const e={requestUri:xN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wN(t){const e=Yl(jl(t)).link,n=e?Yl(jl(e)).deep_link_id:null,i=Yl(jl(t)).deep_link_id;return(i?Yl(jl(i)).link:null)||i||n||e||t}class kp{constructor(e){var n,i,o,a,u,d;const h=Yl(jl(e)),p=(n=h.apiKey)!==null&&n!==void 0?n:null,v=(i=h.oobCode)!==null&&i!==void 0?i:null,E=CN((o=h.mode)!==null&&o!==void 0?o:null);xe(p&&v&&E,"argument-error"),this.apiKey=p,this.operation=E,this.code=v,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=h.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(d=h.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=wN(e);try{return new kp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.providerId=Na.PROVIDER_ID}static credential(e,n){return au._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=kp.parseLink(n);return xe(i,"argument-error"),au._fromEmailAndCode(e,i.code,i.tenantId)}}Na.PROVIDER_ID="password";Na.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Na.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends Up{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends _u{constructor(){super("facebook.com")}static credential(e){return ao._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ao._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ns.credential(n,i)}catch{return null}}}ns.GOOGLE_SIGN_IN_METHOD="google.com";ns.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends _u{constructor(){super("github.com")}static credential(e){return ao._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.GITHUB_SIGN_IN_METHOD="github.com";ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends _u{constructor(){super("twitter.com")}static credential(e,n){return ao._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return cr.credential(n,i)}catch{return null}}}cr.TWITTER_SIGN_IN_METHOD="twitter.com";cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t,e){return yu(t,"POST","/v1/accounts:signUp",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const a=await ss._fromIdTokenResponse(e,i,o),u=w0(i);return new lo({user:a,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=w0(i);return new lo({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function w0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends ci{constructor(e,n,i,o){var a;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Nd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Nd(e,n,i,o)}}function XA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Nd._fromErrorAndOperation(t,a,e,i):a})}async function bN(t,e,n=!1){const i=await Ea(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return lo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(t,e,n=!1){const{auth:i}=t;if(Jn(i.app))return Promise.reject(os(i));const o="reauthenticate";try{const a=await Ea(t,XA(i,o,e,t),n);xe(a.idToken,i,"internal-error");const u=Mp(a.idToken);xe(u,i,"internal-error");const{sub:d}=u;return xe(t.uid===d,i,"user-mismatch"),lo._forOperation(t,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Xn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(t,e,n=!1){if(Jn(t.app))return Promise.reject(os(t));const i="signIn",o=await XA(t,i,e),a=await lo._fromIdTokenResponse(t,i,o);return n||await t._updateCurrentUser(a.user),a}async function NN(t,e){return ZA(Sr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(t){const e=Sr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function MN(t,e,n){if(Jn(t.app))return Promise.reject(os(t));const i=Sr(t),u=await Jm(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",IN).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&eS(t),h}),d=await lo._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function DN(t,e,n){return Jn(t.app)?Promise.reject(os(t)):NN(Dt(t),Na.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&eS(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(t,e){return gs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Dt(t),a={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},u=await Ea(i,PN(i.auth,a));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const d=i.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function UN(t,e,n,i){return Dt(t).onIdTokenChanged(e,n,i)}function LN(t,e,n){return Dt(t).beforeAuthStateChanged(e,n)}function VN(t,e,n,i){return Dt(t).onAuthStateChanged(e,n,i)}function ON(t){return Dt(t).signOut()}const Md="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Md,"1"),this.storage.removeItem(Md),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=1e3,FN=10;class nS extends tS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,d,h)=>{this.notifyListeners(u,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);nN()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,FN):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},qN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nS.type="LOCAL";const BN=nS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS extends tS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iS.type="SESSION";const sS=iS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Wd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:a}=n.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async p=>p(n.origin,a)),h=await zN(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,h)=>{const p=Lp("",20);o.port1.start();const v=setTimeout(()=>{h(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){return window}function HN(t){Ci().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function KN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function jN(){return rS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="firebaseLocalStorageDb",JN=1,Dd="firebaseLocalStorage",aS="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xd(t,e){return t.transaction([Dd],e?"readwrite":"readonly").objectStore(Dd)}function $N(){const t=indexedDB.deleteDatabase(oS);return new vu(t).toPromise()}function $m(){const t=indexedDB.open(oS,JN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Dd,{keyPath:aS})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Dd)?e(i):(i.close(),await $N(),e(await $m()))})})}async function I0(t,e,n){const i=Xd(t,!0).put({[aS]:e,value:n});return new vu(i).toPromise()}async function QN(t,e){const n=Xd(t,!1).get(e),i=await new vu(n).toPromise();return i===void 0?null:i.value}function b0(t,e){const n=Xd(t,!0).delete(e);return new vu(n).toPromise()}const WN=800,XN=3;class lS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $m(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>XN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wd._getInstance(jN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await KN(),!this.activeServiceWorker)return;this.sender=new GN(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $m();return await I0(e,Md,"1"),await b0(e,Md),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>I0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>QN(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>b0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Xd(o,!1).getAll();return new vu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lS.type="LOCAL";const ZN=lS;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t,e){return e?rs(e):(xe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Pp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ma(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ma(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function e1(t){return ZA(t.auth,new Vp(t),t.bypassAuthState)}function t1(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),RN(n,new Vp(t),t.bypassAuthState)}async function n1(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),bN(n,new Vp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e1;case"linkViaPopup":case"linkViaRedirect":return n1;case"reauthViaPopup":case"reauthViaRedirect":return t1;default:Xn(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=new gu(2e3,1e4);async function s1(t,e,n){if(Jn(t.app))return Promise.reject(li(t,"operation-not-supported-in-this-environment"));const i=Sr(t);VR(t,e,Up);const o=uS(i,n);return new io(i,"signInViaPopup",e,o).executeNotNull()}class io extends cS{constructor(e,n,i,o,a){super(e,n,o,a),this.provider=i,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=Lp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,i1.get())};e()}}io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="pendingRedirect",dd=new Map;class o1 extends cS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=dd.get(this.auth._key());if(!e){try{const i=await a1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}dd.set(this.auth._key(),e)}return this.bypassAuthState||dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function a1(t,e){const n=c1(e),i=u1(t);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function l1(t,e){dd.set(t._key(),e)}function u1(t){return rs(t._redirectPersistence)}function c1(t){return cd(r1,t.config.apiKey,t.name)}async function d1(t,e,n=!1){if(Jn(t.app))return Promise.reject(os(t));const i=Sr(t),o=uS(i,e),u=await new o1(i,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=600*1e3;class h1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!m1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!dS(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(li(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=f1&&this.cachedEventUids.clear(),this.cachedEventUids.has(R0(e))}saveEventToCache(e){this.cachedEventUids.add(R0(e)),this.lastProcessedEventTime=Date.now()}}function R0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function m1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(t,e={}){return gs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,y1=/^https?/;async function _1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await p1(t);for(const n of e)try{if(v1(n))return}catch{}Xn(t,"unauthorized-domain")}function v1(t){const e=Ym(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!y1.test(n))return!1;if(g1.test(t))return i===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new gu(3e4,6e4);function N0(){const t=Ci().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function E1(t){return new Promise((e,n)=>{var i,o,a;function u(){N0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N0(),n(li(t,"network-request-failed"))},timeout:T1.get()})}if(!((o=(i=Ci().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Ci().gapi)===null||a===void 0)&&a.load)u();else{const d=dN("iframefcb");return Ci()[d]=()=>{gapi.load?u():n(li(t,"network-request-failed"))},QA(`${cN()}?onload=${d}`).catch(h=>n(h))}}).catch(e=>{throw fd=null,e})}let fd=null;function A1(t){return fd=fd||E1(t),fd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=new gu(5e3,15e3),x1="__/auth/iframe",C1="emulator/auth/iframe",w1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},I1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b1(t){const e=t.config;xe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Np(e,C1):`https://${t.config.authDomain}/${x1}`,i={apiKey:e.apiKey,appName:t.name,v:ps},o=I1.get(t.config.apiHost);o&&(i.eid=o);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${pu(i).slice(1)}`}async function R1(t){const e=await A1(t),n=Ci().gapi;return xe(n,t,"internal-error"),e.open({where:document.body,url:b1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:w1,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=li(t,"network-request-failed"),d=Ci().setTimeout(()=>{a(u)},S1.get());function h(){Ci().clearTimeout(d),o(i)}i.ping(h).then(h,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},M1=500,D1=600,P1="_blank",k1="http://localhost";class M0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function U1(t,e,n,i=M1,o=D1){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const h=Object.assign(Object.assign({},N1),{width:i.toString(),height:o.toString(),top:a,left:u}),p=ln().toLowerCase();n&&(d=GA(p)?P1:n),BA(p)&&(e=e||k1,h.scrollbars="yes");const v=Object.entries(h).reduce((S,[w,V])=>`${S}${w}=${V},`,"");if(tN(p)&&d!=="_self")return L1(e||"",d),new M0(null);const E=window.open(e||"",d,v);xe(E,t,"popup-blocked");try{E.focus()}catch{}return new M0(E)}function L1(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="__/auth/handler",O1="emulator/auth/handler",q1=encodeURIComponent("fac");async function D0(t,e,n,i,o,a){xe(t.config.authDomain,t,"auth-domain-config-required"),xe(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ps,eventId:o};if(e instanceof Up){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",Eb(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof _u){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}t.tenantId&&(u.tid=t.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const h=await t._getAppCheckToken(),p=h?`#${q1}=${encodeURIComponent(h)}`:"";return`${F1(t)}?${pu(d).slice(1)}${p}`}function F1({config:t}){return t.emulator?Np(t,O1):`https://${t.authDomain}/${V1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="webStorageSupport";class B1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sS,this._completeRedirectFn=d1,this._overrideRedirectResult=l1}async _openPopup(e,n,i,o){var a;ds((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await D0(e,n,i,Ym(),o);return U1(e,u,Lp())}async _openRedirect(e,n,i,o){await this._originValidation(e);const a=await D0(e,n,i,Ym(),o);return HN(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:a}=this.eventManagers[n];return o?Promise.resolve(o):(ds(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await R1(e),i=new h1(e);return n.register("authEvent",o=>(xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(km,{type:km},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[km];u!==void 0&&n(!!u),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JA()||zA()||Dp()}}const z1=B1;var P0="@firebase/auth",k0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function K1(t){cs(new ls("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;xe(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:u,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$A(t)},p=new aN(i,o,a,h);return gN(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),cs(new ls("auth-internal",e=>{const n=Sr(e.getProvider("auth").getImmediate());return(i=>new G1(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kn(P0,k0,H1(t)),kn(P0,k0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=300,j1=_A("authIdTokenMaxAge")||Y1;let U0=null;const J1=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>j1)return;const o=n==null?void 0:n.token;U0!==o&&(U0=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function $1(t=$d()){const e=Ra(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pN(t,{popupRedirectResolver:z1,persistence:[ZN,BN,sS]}),i=_A("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=J1(a.toString());LN(n,u,()=>u(n.currentUser)),UN(n,d=>u(d))}}const o=pA("auth");return o&&yN(n,`http://${o}`),n}function Q1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lN({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=o=>{const a=li("internal-error");a.customData=o,n(a)},i.type="text/javascript",i.charset="UTF-8",Q1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});K1("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this._delegate=e,this.firebase=n,ru(e,new ls("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),wp(this._delegate)))}_getService(e,n=gr){var i;this._delegate.checkDestroyed();const o=this._delegate.container.getProvider(e);return!o.isInitialized()&&((i=o.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&o.initialize(),o.getImmediate({identifier:n})}_removeServiceInstance(e,n=gr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){ru(this._delegate,e)}_addOrOverwriteComponent(e){wA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},L0=new mo("app-compat","Firebase",X1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t){const e={},n={__esModule:!0,initializeApp:a,app:o,registerVersion:kn,setLogLevel:NA,onLog:RA,apps:null,SDK_VERSION:ps,INTERNAL:{registerComponent:d,removeApp:i,useAsService:h,modularAPIs:kR}};n.default=n,Object.defineProperty(n,"apps",{get:u});function i(p){delete e[p]}function o(p){if(p=p||gr,!u0(e,p))throw L0.create("no-app",{appName:p});return e[p]}o.App=t;function a(p,v={}){const E=Cp(p,v);if(u0(e,E.name))return e[E.name];const S=new t(E,n);return e[E.name]=S,S}function u(){return Object.keys(e).map(p=>e[p])}function d(p){const v=p.name,E=v.replace("-compat","");if(cs(p)&&p.type==="PUBLIC"){const S=(w=o())=>{if(typeof w[E]!="function")throw L0.create("invalid-app-argument",{appName:v});return w[E]()};p.serviceProps!==void 0&&Cd(S,p.serviceProps),n[E]=S,t.prototype[E]=function(...w){return this._getService.bind(this,v).apply(this,p.multipleInstances?w:[])}}return p.type==="PUBLIC"?n[E]:null}function h(p,v){return v==="serverAuth"?null:v}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(){const t=Z1(W1);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:fS,extendNamespace:e,createSubscribe:EA,ErrorFactory:mo,deepExtend:Cd});function e(n){Cd(t,n)}return t}const e2=fS();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=new Jd("@firebase/app-compat"),t2="@firebase/app-compat",n2="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t){kn(t2,n2,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=mA();if(t.firebase!==void 0){V0.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&V0.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const hS=e2;i2();var s2="firebase",r2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hS.registerVersion(s2,r2,"app-compat");var O0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ro,mS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,R){function N(){}N.prototype=R.prototype,M.D=R.prototype,M.prototype=new N,M.prototype.constructor=M,M.C=function(k,U,L){for(var D=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)D[Ge-2]=arguments[Ge];return R.prototype[U].apply(k,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,R,N){N||(N=0);var k=Array(16);if(typeof R=="string")for(var U=0;16>U;++U)k[U]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(U=0;16>U;++U)k[U]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=M.g[0],N=M.g[1],U=M.g[2];var L=M.g[3],D=R+(L^N&(U^L))+k[0]+3614090360&4294967295;R=N+(D<<7&4294967295|D>>>25),D=L+(U^R&(N^U))+k[1]+3905402710&4294967295,L=R+(D<<12&4294967295|D>>>20),D=U+(N^L&(R^N))+k[2]+606105819&4294967295,U=L+(D<<17&4294967295|D>>>15),D=N+(R^U&(L^R))+k[3]+3250441966&4294967295,N=U+(D<<22&4294967295|D>>>10),D=R+(L^N&(U^L))+k[4]+4118548399&4294967295,R=N+(D<<7&4294967295|D>>>25),D=L+(U^R&(N^U))+k[5]+1200080426&4294967295,L=R+(D<<12&4294967295|D>>>20),D=U+(N^L&(R^N))+k[6]+2821735955&4294967295,U=L+(D<<17&4294967295|D>>>15),D=N+(R^U&(L^R))+k[7]+4249261313&4294967295,N=U+(D<<22&4294967295|D>>>10),D=R+(L^N&(U^L))+k[8]+1770035416&4294967295,R=N+(D<<7&4294967295|D>>>25),D=L+(U^R&(N^U))+k[9]+2336552879&4294967295,L=R+(D<<12&4294967295|D>>>20),D=U+(N^L&(R^N))+k[10]+4294925233&4294967295,U=L+(D<<17&4294967295|D>>>15),D=N+(R^U&(L^R))+k[11]+2304563134&4294967295,N=U+(D<<22&4294967295|D>>>10),D=R+(L^N&(U^L))+k[12]+1804603682&4294967295,R=N+(D<<7&4294967295|D>>>25),D=L+(U^R&(N^U))+k[13]+4254626195&4294967295,L=R+(D<<12&4294967295|D>>>20),D=U+(N^L&(R^N))+k[14]+2792965006&4294967295,U=L+(D<<17&4294967295|D>>>15),D=N+(R^U&(L^R))+k[15]+1236535329&4294967295,N=U+(D<<22&4294967295|D>>>10),D=R+(U^L&(N^U))+k[1]+4129170786&4294967295,R=N+(D<<5&4294967295|D>>>27),D=L+(N^U&(R^N))+k[6]+3225465664&4294967295,L=R+(D<<9&4294967295|D>>>23),D=U+(R^N&(L^R))+k[11]+643717713&4294967295,U=L+(D<<14&4294967295|D>>>18),D=N+(L^R&(U^L))+k[0]+3921069994&4294967295,N=U+(D<<20&4294967295|D>>>12),D=R+(U^L&(N^U))+k[5]+3593408605&4294967295,R=N+(D<<5&4294967295|D>>>27),D=L+(N^U&(R^N))+k[10]+38016083&4294967295,L=R+(D<<9&4294967295|D>>>23),D=U+(R^N&(L^R))+k[15]+3634488961&4294967295,U=L+(D<<14&4294967295|D>>>18),D=N+(L^R&(U^L))+k[4]+3889429448&4294967295,N=U+(D<<20&4294967295|D>>>12),D=R+(U^L&(N^U))+k[9]+568446438&4294967295,R=N+(D<<5&4294967295|D>>>27),D=L+(N^U&(R^N))+k[14]+3275163606&4294967295,L=R+(D<<9&4294967295|D>>>23),D=U+(R^N&(L^R))+k[3]+4107603335&4294967295,U=L+(D<<14&4294967295|D>>>18),D=N+(L^R&(U^L))+k[8]+1163531501&4294967295,N=U+(D<<20&4294967295|D>>>12),D=R+(U^L&(N^U))+k[13]+2850285829&4294967295,R=N+(D<<5&4294967295|D>>>27),D=L+(N^U&(R^N))+k[2]+4243563512&4294967295,L=R+(D<<9&4294967295|D>>>23),D=U+(R^N&(L^R))+k[7]+1735328473&4294967295,U=L+(D<<14&4294967295|D>>>18),D=N+(L^R&(U^L))+k[12]+2368359562&4294967295,N=U+(D<<20&4294967295|D>>>12),D=R+(N^U^L)+k[5]+4294588738&4294967295,R=N+(D<<4&4294967295|D>>>28),D=L+(R^N^U)+k[8]+2272392833&4294967295,L=R+(D<<11&4294967295|D>>>21),D=U+(L^R^N)+k[11]+1839030562&4294967295,U=L+(D<<16&4294967295|D>>>16),D=N+(U^L^R)+k[14]+4259657740&4294967295,N=U+(D<<23&4294967295|D>>>9),D=R+(N^U^L)+k[1]+2763975236&4294967295,R=N+(D<<4&4294967295|D>>>28),D=L+(R^N^U)+k[4]+1272893353&4294967295,L=R+(D<<11&4294967295|D>>>21),D=U+(L^R^N)+k[7]+4139469664&4294967295,U=L+(D<<16&4294967295|D>>>16),D=N+(U^L^R)+k[10]+3200236656&4294967295,N=U+(D<<23&4294967295|D>>>9),D=R+(N^U^L)+k[13]+681279174&4294967295,R=N+(D<<4&4294967295|D>>>28),D=L+(R^N^U)+k[0]+3936430074&4294967295,L=R+(D<<11&4294967295|D>>>21),D=U+(L^R^N)+k[3]+3572445317&4294967295,U=L+(D<<16&4294967295|D>>>16),D=N+(U^L^R)+k[6]+76029189&4294967295,N=U+(D<<23&4294967295|D>>>9),D=R+(N^U^L)+k[9]+3654602809&4294967295,R=N+(D<<4&4294967295|D>>>28),D=L+(R^N^U)+k[12]+3873151461&4294967295,L=R+(D<<11&4294967295|D>>>21),D=U+(L^R^N)+k[15]+530742520&4294967295,U=L+(D<<16&4294967295|D>>>16),D=N+(U^L^R)+k[2]+3299628645&4294967295,N=U+(D<<23&4294967295|D>>>9),D=R+(U^(N|~L))+k[0]+4096336452&4294967295,R=N+(D<<6&4294967295|D>>>26),D=L+(N^(R|~U))+k[7]+1126891415&4294967295,L=R+(D<<10&4294967295|D>>>22),D=U+(R^(L|~N))+k[14]+2878612391&4294967295,U=L+(D<<15&4294967295|D>>>17),D=N+(L^(U|~R))+k[5]+4237533241&4294967295,N=U+(D<<21&4294967295|D>>>11),D=R+(U^(N|~L))+k[12]+1700485571&4294967295,R=N+(D<<6&4294967295|D>>>26),D=L+(N^(R|~U))+k[3]+2399980690&4294967295,L=R+(D<<10&4294967295|D>>>22),D=U+(R^(L|~N))+k[10]+4293915773&4294967295,U=L+(D<<15&4294967295|D>>>17),D=N+(L^(U|~R))+k[1]+2240044497&4294967295,N=U+(D<<21&4294967295|D>>>11),D=R+(U^(N|~L))+k[8]+1873313359&4294967295,R=N+(D<<6&4294967295|D>>>26),D=L+(N^(R|~U))+k[15]+4264355552&4294967295,L=R+(D<<10&4294967295|D>>>22),D=U+(R^(L|~N))+k[6]+2734768916&4294967295,U=L+(D<<15&4294967295|D>>>17),D=N+(L^(U|~R))+k[13]+1309151649&4294967295,N=U+(D<<21&4294967295|D>>>11),D=R+(U^(N|~L))+k[4]+4149444226&4294967295,R=N+(D<<6&4294967295|D>>>26),D=L+(N^(R|~U))+k[11]+3174756917&4294967295,L=R+(D<<10&4294967295|D>>>22),D=U+(R^(L|~N))+k[2]+718787259&4294967295,U=L+(D<<15&4294967295|D>>>17),D=N+(L^(U|~R))+k[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(U+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+U&4294967295,M.g[3]=M.g[3]+L&4294967295}i.prototype.u=function(M,R){R===void 0&&(R=M.length);for(var N=R-this.blockSize,k=this.B,U=this.h,L=0;L<R;){if(U==0)for(;L<=N;)o(this,M,L),L+=this.blockSize;if(typeof M=="string"){for(;L<R;)if(k[U++]=M.charCodeAt(L++),U==this.blockSize){o(this,k),U=0;break}}else for(;L<R;)if(k[U++]=M[L++],U==this.blockSize){o(this,k),U=0;break}}this.h=U,this.o+=R},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;var N=8*this.o;for(R=M.length-8;R<M.length;++R)M[R]=N&255,N/=256;for(this.u(M),M=Array(16),R=N=0;4>R;++R)for(var k=0;32>k;k+=8)M[N++]=this.g[R]>>>k&255;return M};function a(M,R){var N=d;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=R(M)}function u(M,R){this.h=R;for(var N=[],k=!0,U=M.length-1;0<=U;U--){var L=M[U]|0;k&&L==R||(N[U]=L,k=!1)}this.g=N}var d={};function h(M){return-128<=M&&128>M?a(M,function(R){return new u([R|0],0>R?-1:0)}):new u([M|0],0>M?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return E;if(0>M)return z(p(-M));for(var R=[],N=1,k=0;M>=N;k++)R[k]=M/N|0,N*=4294967296;return new u(R,0)}function v(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return z(v(M.substring(1),R));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=p(Math.pow(R,8)),k=E,U=0;U<M.length;U+=8){var L=Math.min(8,M.length-U),D=parseInt(M.substring(U,U+L),R);8>L?(L=p(Math.pow(R,L)),k=k.j(L).add(p(D))):(k=k.j(N),k=k.add(p(D)))}return k}var E=h(0),S=h(1),w=h(16777216);t=u.prototype,t.m=function(){if(F(this))return-z(this).m();for(var M=0,R=1,N=0;N<this.g.length;N++){var k=this.i(N);M+=(0<=k?k:4294967296+k)*R,R*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(V(this))return"0";if(F(this))return"-"+z(this).toString(M);for(var R=p(Math.pow(M,6)),N=this,k="";;){var U=re(N,R).g;N=X(N,U.j(R));var L=((0<N.g.length?N.g[0]:N.h)>>>0).toString(M);if(N=U,V(N))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function V(M){if(M.h!=0)return!1;for(var R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function F(M){return M.h==-1}t.l=function(M){return M=X(this,M),F(M)?-1:V(M)?0:1};function z(M){for(var R=M.g.length,N=[],k=0;k<R;k++)N[k]=~M.g[k];return new u(N,~M.h).add(S)}t.abs=function(){return F(this)?z(this):this},t.add=function(M){for(var R=Math.max(this.g.length,M.g.length),N=[],k=0,U=0;U<=R;U++){var L=k+(this.i(U)&65535)+(M.i(U)&65535),D=(L>>>16)+(this.i(U)>>>16)+(M.i(U)>>>16);k=D>>>16,L&=65535,D&=65535,N[U]=D<<16|L}return new u(N,N[N.length-1]&-2147483648?-1:0)};function X(M,R){return M.add(z(R))}t.j=function(M){if(V(this)||V(M))return E;if(F(this))return F(M)?z(this).j(z(M)):z(z(this).j(M));if(F(M))return z(this.j(z(M)));if(0>this.l(w)&&0>M.l(w))return p(this.m()*M.m());for(var R=this.g.length+M.g.length,N=[],k=0;k<2*R;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(var U=0;U<M.g.length;U++){var L=this.i(k)>>>16,D=this.i(k)&65535,Ge=M.i(U)>>>16,nt=M.i(U)&65535;N[2*k+2*U]+=D*nt,ne(N,2*k+2*U),N[2*k+2*U+1]+=L*nt,ne(N,2*k+2*U+1),N[2*k+2*U+1]+=D*Ge,ne(N,2*k+2*U+1),N[2*k+2*U+2]+=L*Ge,ne(N,2*k+2*U+2)}for(k=0;k<R;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=R;k<2*R;k++)N[k]=0;return new u(N,0)};function ne(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function Q(M,R){this.g=M,this.h=R}function re(M,R){if(V(R))throw Error("division by zero");if(V(M))return new Q(E,E);if(F(M))return R=re(z(M),R),new Q(z(R.g),z(R.h));if(F(R))return R=re(M,z(R)),new Q(z(R.g),R.h);if(30<M.g.length){if(F(M)||F(R))throw Error("slowDivide_ only works with positive integers.");for(var N=S,k=R;0>=k.l(M);)N=ce(N),k=ce(k);var U=oe(N,1),L=oe(k,1);for(k=oe(k,2),N=oe(N,2);!V(k);){var D=L.add(k);0>=D.l(M)&&(U=U.add(N),L=D),k=oe(k,1),N=oe(N,1)}return R=X(M,U.j(R)),new Q(U,R)}for(U=E;0<=M.l(R);){for(N=Math.max(1,Math.floor(M.m()/R.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=p(N),D=L.j(R);F(D)||0<D.l(M);)N-=k,L=p(N),D=L.j(R);V(L)&&(L=S),U=U.add(L),M=X(M,D)}return new Q(U,M)}t.A=function(M){return re(this,M).h},t.and=function(M){for(var R=Math.max(this.g.length,M.g.length),N=[],k=0;k<R;k++)N[k]=this.i(k)&M.i(k);return new u(N,this.h&M.h)},t.or=function(M){for(var R=Math.max(this.g.length,M.g.length),N=[],k=0;k<R;k++)N[k]=this.i(k)|M.i(k);return new u(N,this.h|M.h)},t.xor=function(M){for(var R=Math.max(this.g.length,M.g.length),N=[],k=0;k<R;k++)N[k]=this.i(k)^M.i(k);return new u(N,this.h^M.h)};function ce(M){for(var R=M.g.length+1,N=[],k=0;k<R;k++)N[k]=M.i(k)<<1|M.i(k-1)>>>31;return new u(N,M.h)}function oe(M,R){var N=R>>5;R%=32;for(var k=M.g.length-N,U=[],L=0;L<k;L++)U[L]=0<R?M.i(L+N)>>>R|M.i(L+N+1)<<32-R:M.i(L+N);return new u(U,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,mS=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,ro=u}).apply(typeof O0<"u"?O0:typeof self<"u"?self:typeof window<"u"?window:{});var nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pS,Jl,gS,hd,Qm,yS,_S,vS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,A,C){return m==Array.prototype||m==Object.prototype||(m[A]=C.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof nd=="object"&&nd];for(var A=0;A<m.length;++A){var C=m[A];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function o(m,A){if(A)e:{var C=i;m=m.split(".");for(var b=0;b<m.length-1;b++){var G=m[b];if(!(G in C))break e;C=C[G]}m=m[m.length-1],b=C[m],A=A(b),A!=b&&A!=null&&e(C,m,{configurable:!0,writable:!0,value:A})}}function a(m,A){m instanceof String&&(m+="");var C=0,b=!1,G={next:function(){if(!b&&C<m.length){var $=C++;return{value:A($,m[$]),done:!1}}return b=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(m){return m||function(){return a(this,function(A,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function h(m){var A=typeof m;return A=A!="object"?A:m?Array.isArray(m)?"array":A:"null",A=="array"||A=="object"&&typeof m.length=="number"}function p(m){var A=typeof m;return A=="object"&&m!=null||A=="function"}function v(m,A,C){return m.call.apply(m.bind,arguments)}function E(m,A,C){if(!m)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,b),m.apply(A,G)}}return function(){return m.apply(A,arguments)}}function S(m,A,C){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function w(m,A){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),m.apply(this,b)}}function V(m,A){function C(){}C.prototype=A.prototype,m.aa=A.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(b,G,$){for(var ue=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)ue[Xe-2]=arguments[Xe];return A.prototype[G].apply(b,ue)}}function F(m){const A=m.length;if(0<A){const C=Array(A);for(let b=0;b<A;b++)C[b]=m[b];return C}return[]}function z(m,A){for(let C=1;C<arguments.length;C++){const b=arguments[C];if(h(b)){const G=m.length||0,$=b.length||0;m.length=G+$;for(let ue=0;ue<$;ue++)m[G+ue]=b[ue]}else m.push(b)}}class X{constructor(A,C){this.i=A,this.j=C,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function ne(m){return/^[\s\xa0]*$/.test(m)}function Q(){var m=d.navigator;return m&&(m=m.userAgent)?m:""}function re(m){return re[" "](m),m}re[" "]=function(){};var ce=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function oe(m,A,C){for(const b in m)A.call(C,m[b],b,m)}function M(m,A){for(const C in m)A.call(void 0,m[C],C,m)}function R(m){const A={};for(const C in m)A[C]=m[C];return A}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(m,A){let C,b;for(let G=1;G<arguments.length;G++){b=arguments[G];for(C in b)m[C]=b[C];for(let $=0;$<N.length;$++)C=N[$],Object.prototype.hasOwnProperty.call(b,C)&&(m[C]=b[C])}}function U(m){var A=1;m=m.split(":");const C=[];for(;0<A&&m.length;)C.push(m.shift()),A--;return m.length&&C.push(m.join(":")),C}function L(m){d.setTimeout(()=>{throw m},0)}function D(){var m=He;let A=null;return m.g&&(A=m.g,m.g=m.g.next,m.g||(m.h=null),A.next=null),A}class Ge{constructor(){this.h=this.g=null}add(A,C){const b=nt.get();b.set(A,C),this.h?this.h.next=b:this.g=b,this.h=b}}var nt=new X(()=>new J,m=>m.reset());class J{constructor(){this.next=this.g=this.h=null}set(A,C){this.h=A,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let le,_e=!1,He=new Ge,We=()=>{const m=d.Promise.resolve(void 0);le=()=>{m.then(q)}};var q=()=>{for(var m;m=D();){try{m.h.call(m.g)}catch(C){L(C)}var A=nt;A.j(m),100>A.h&&(A.h++,m.next=A.g,A.g=m)}_e=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(m,A){this.type=m,this.g=this.target=A,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var me=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var m=!1,A=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};d.addEventListener("test",C,A),d.removeEventListener("test",C,A)}catch{}return m})();function Ae(m,A){if(ae.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,b=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=A,A=m.relatedTarget){if(ce){e:{try{re(A.nodeName);var G=!0;break e}catch{}G=!1}G||(A=null)}}else C=="mouseover"?A=m.fromElement:C=="mouseout"&&(A=m.toElement);this.relatedTarget=A,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:De[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ae.aa.h.call(this)}}V(Ae,ae);var De={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),zt=0;function ht(m,A,C,b,G){this.listener=m,this.proxy=null,this.src=A,this.type=C,this.capture=!!b,this.ha=G,this.key=++zt,this.da=this.fa=!1}function fi(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ri(m){this.src=m,this.g={},this.h=0}Ri.prototype.add=function(m,A,C,b,G){var $=m.toString();m=this.g[$],m||(m=this.g[$]=[],this.h++);var ue=vo(m,A,b,G);return-1<ue?(A=m[ue],C||(A.fa=!1)):(A=new ht(A,this.src,$,!!b,G),A.fa=C,m.push(A)),A};function Cr(m,A){var C=A.type;if(C in m.g){var b=m.g[C],G=Array.prototype.indexOf.call(b,A,void 0),$;($=0<=G)&&Array.prototype.splice.call(b,G,1),$&&(fi(A),m.g[C].length==0&&(delete m.g[C],m.h--))}}function vo(m,A,C,b){for(var G=0;G<m.length;++G){var $=m[G];if(!$.da&&$.listener==A&&$.capture==!!C&&$.ha==b)return G}return-1}var Zn="closure_lm_"+(1e6*Math.random()|0),wr={};function To(m,A,C,b,G){if(Array.isArray(A)){for(var $=0;$<A.length;$++)To(m,A[$],C,b,G);return null}return C=bu(C),m&&m[Fe]?m.K(A,C,p(b)?!!b.capture:!1,G):vf(m,A,C,!1,b,G)}function vf(m,A,C,b,G,$){if(!A)throw Error("Invalid event type");var ue=p(G)?!!G.capture:!!G,Xe=qa(m);if(Xe||(m[Zn]=Xe=new Ri(m)),C=Xe.add(A,C,b,ue,$),C.proxy)return C;if(b=Iu(),C.proxy=b,b.src=m,b.listener=C,m.addEventListener)me||(G=ue),G===void 0&&(G=!1),m.addEventListener(A.toString(),b,G);else if(m.attachEvent)m.attachEvent(Ao(A.toString()),b);else if(m.addListener&&m.removeListener)m.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Iu(){function m(C){return A.call(m.src,m.listener,C)}const A=Tf;return m}function Eo(m,A,C,b,G){if(Array.isArray(A))for(var $=0;$<A.length;$++)Eo(m,A[$],C,b,G);else b=p(b)?!!b.capture:!!b,C=bu(C),m&&m[Fe]?(m=m.i,A=String(A).toString(),A in m.g&&($=m.g[A],C=vo($,C,b,G),-1<C&&(fi($[C]),Array.prototype.splice.call($,C,1),$.length==0&&(delete m.g[A],m.h--)))):m&&(m=qa(m))&&(A=m.g[A.toString()],m=-1,A&&(m=vo(A,C,b,G)),(C=-1<m?A[m]:null)&&Ir(C))}function Ir(m){if(typeof m!="number"&&m&&!m.da){var A=m.src;if(A&&A[Fe])Cr(A.i,m);else{var C=m.type,b=m.proxy;A.removeEventListener?A.removeEventListener(C,b,m.capture):A.detachEvent?A.detachEvent(Ao(C),b):A.addListener&&A.removeListener&&A.removeListener(b),(C=qa(A))?(Cr(C,m),C.h==0&&(C.src=null,A[Zn]=null)):fi(m)}}}function Ao(m){return m in wr?wr[m]:wr[m]="on"+m}function Tf(m,A){if(m.da)m=!0;else{A=new Ae(A,this);var C=m.listener,b=m.ha||m.src;m.fa&&Ir(m),m=C.call(b,A)}return m}function qa(m){return m=m[Zn],m instanceof Ri?m:null}var Gt="__closure_events_fn_"+(1e9*Math.random()>>>0);function bu(m){return typeof m=="function"?m:(m[Gt]||(m[Gt]=function(A){return m.handleEvent(A)}),m[Gt])}function Pt(){Z.call(this),this.i=new Ri(this),this.M=this,this.F=null}V(Pt,Z),Pt.prototype[Fe]=!0,Pt.prototype.removeEventListener=function(m,A,C,b){Eo(this,m,A,C,b)};function Lt(m,A){var C,b=m.F;if(b)for(C=[];b;b=b.F)C.push(b);if(m=m.M,b=A.type||A,typeof A=="string")A=new ae(A,m);else if(A instanceof ae)A.target=A.target||m;else{var G=A;A=new ae(b,m),k(A,G)}if(G=!0,C)for(var $=C.length-1;0<=$;$--){var ue=A.g=C[$];G=Ni(ue,b,!0,A)&&G}if(ue=A.g=m,G=Ni(ue,b,!0,A)&&G,G=Ni(ue,b,!1,A)&&G,C)for($=0;$<C.length;$++)ue=A.g=C[$],G=Ni(ue,b,!1,A)&&G}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var m=this.i,A;for(A in m.g){for(var C=m.g[A],b=0;b<C.length;b++)fi(C[b]);delete m.g[A],m.h--}}this.F=null},Pt.prototype.K=function(m,A,C,b){return this.i.add(String(m),A,!1,C,b)},Pt.prototype.L=function(m,A,C,b){return this.i.add(String(m),A,!0,C,b)};function Ni(m,A,C,b){if(A=m.i.g[String(A)],!A)return!0;A=A.concat();for(var G=!0,$=0;$<A.length;++$){var ue=A[$];if(ue&&!ue.da&&ue.capture==C){var Xe=ue.listener,Ct=ue.ha||ue.src;ue.fa&&Cr(m.i,ue),G=Xe.call(Ct,b)!==!1&&G}}return G&&!b.defaultPrevented}function Ru(m,A,C){if(typeof m=="function")C&&(m=S(m,C));else if(m&&typeof m.handleEvent=="function")m=S(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:d.setTimeout(m,A||0)}function Fa(m){m.g=Ru(()=>{m.g=null,m.i&&(m.i=!1,Fa(m))},m.l);const A=m.h;m.h=null,m.m.apply(null,A)}class Ef extends Z{constructor(A,C){super(),this.m=A,this.l=C,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Fa(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(m){Z.call(this),this.h=m,this.g={}}V(br,Z);var vs=[];function en(m){oe(m.g,function(A,C){this.g.hasOwnProperty(C)&&Ir(A)},m),m.g={}}br.prototype.N=function(){br.aa.N.call(this),en(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Un=d.JSON.stringify,un=d.JSON.parse,Af=class{stringify(m){return d.JSON.stringify(m,void 0)}parse(m){return d.JSON.parse(m,void 0)}};function Ba(){}Ba.prototype.h=null;function Nu(m){return m.h||(m.h=m.i())}function Rr(){}var hi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ts(){ae.call(this,"d")}V(Ts,ae);function ei(){ae.call(this,"c")}V(ei,ae);var Ln={},Es=null;function So(){return Es=Es||new Pt}Ln.La="serverreachability";function za(m){ae.call(this,Ln.La,m)}V(za,ae);function Mi(m){const A=So();Lt(A,new za(A))}Ln.STAT_EVENT="statevent";function As(m,A){ae.call(this,Ln.STAT_EVENT,m),this.stat=A}V(As,ae);function Ht(m){const A=So();Lt(A,new As(A,m))}Ln.Ma="timingevent";function Ga(m,A){ae.call(this,Ln.Ma,m),this.size=A}V(Ga,ae);function Ss(m,A){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){m()},A)}function xs(){this.g=!0}xs.prototype.xa=function(){this.g=!1};function Ha(m,A,C,b,G,$){m.info(function(){if(m.g)if($)for(var ue="",Xe=$.split("&"),Ct=0;Ct<Xe.length;Ct++){var Pe=Xe[Ct].split("=");if(1<Pe.length){var Ot=Pe[0];Pe=Pe[1];var qt=Ot.split("_");ue=2<=qt.length&&qt[1]=="type"?ue+(Ot+"="+Pe+"&"):ue+(Ot+"=redacted&")}}else ue=null;else ue=$;return"XMLHTTP REQ ("+b+") [attempt "+G+"]: "+A+`
`+C+`
`+ue})}function Ka(m,A,C,b,G,$,ue){m.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+G+"]: "+A+`
`+C+`
`+$+" "+ue})}function Di(m,A,C,b){m.info(function(){return"XMLHTTP TEXT ("+A+"): "+mi(m,C)+(b?" "+b:"")})}function Mu(m,A){m.info(function(){return"TIMEOUT: "+A})}xs.prototype.info=function(){};function mi(m,A){if(!m.g)return A;if(!A)return null;try{var C=JSON.parse(A);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var b=C[m];if(!(2>b.length)){var G=b[1];if(Array.isArray(G)&&!(1>G.length)){var $=G[0];if($!="noop"&&$!="stop"&&$!="close")for(var ue=1;ue<G.length;ue++)G[ue]=""}}}}return Un(C)}catch{return A}}var pt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pi;function Cs(){}V(Cs,Ba),Cs.prototype.g=function(){return new XMLHttpRequest},Cs.prototype.i=function(){return{}},pi=new Cs;function gi(m,A,C,b){this.j=m,this.i=A,this.l=C,this.R=b||1,this.U=new br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Du}function Du(){this.i=null,this.g="",this.h=!1}var Ya={},Pi={};function Nr(m,A,C){m.L=1,m.v=Pr(gt(A)),m.m=C,m.P=!0,ki(m,null)}function ki(m,A){m.F=Date.now(),ti(m),m.A=gt(m.v);var C=m.A,b=m.R;Array.isArray(b)||(b=[String(b)]),Vi(C.i,"t",b),m.C=0,C=m.j.J,m.h=new Du,m.g=Ju(m.j,C?A:null,!m.m),0<m.O&&(m.M=new Ef(S(m.Y,m,m.g),m.O)),A=m.U,C=m.g,b=m.ca;var G="readystatechange";Array.isArray(G)||(G&&(vs[0]=G.toString()),G=vs);for(var $=0;$<G.length;$++){var ue=To(C,G[$],b||A.handleEvent,!1,A.h||A);if(!ue)break;A.g[ue.key]=ue}A=m.H?R(m.H):{},m.m?(m.u||(m.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,A)):(m.u="GET",m.g.ea(m.A,m.u,null,A)),Mi(),Ha(m.i,m.u,m.A,m.l,m.R,m.m)}gi.prototype.ca=function(m){m=m.target;const A=this.M;A&&fn(m)==3?A.j():this.Y(m)},gi.prototype.Y=function(m){try{if(m==this.g)e:{const qt=fn(this.g);var A=this.g.Ba();const Os=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||Lr(this.g)))){this.J||qt!=4||A==7||(A==8||0>=Os?Mi(3):Mi(2)),xo(this);var C=this.g.Z();this.X=C;t:if(Ui(this)){var b=Lr(this.g);m="";var G=b.length,$=fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),ws(this);var ue="";break t}this.h.i=new d.TextDecoder}for(A=0;A<G;A++)this.h.h=!0,m+=this.h.i.decode(b[A],{stream:!($&&A==G-1)});b.length=0,this.h.g+=m,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=C==200,Ka(this.i,this.u,this.A,this.l,this.R,qt,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Ct=this.g;if((Xe=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(Xe)){var Pe=Xe;break t}}Pe=null}if(C=Pe)Di(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yi(this,C);else{this.o=!1,this.s=3,Ht(12),cn(this),ws(this);break e}}if(this.P){C=!0;let _n;for(;!this.J&&this.C<ue.length;)if(_n=Mr(this,ue),_n==Pi){qt==4&&(this.s=4,Ht(14),C=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==Ya){this.s=4,Ht(15),Di(this.i,this.l,ue,"[Invalid Chunk]"),C=!1;break}else Di(this.i,this.l,_n,null),yi(this,_n);if(Ui(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||ue.length!=0||this.h.h||(this.s=1,Ht(16),C=!1),this.o=this.o&&C,!C)Di(this.i,this.l,ue,"[Invalid Chunked Response]"),cn(this),ws(this);else if(0<ue.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),il(Ot),Ot.M=!0,Ht(11))}}else Di(this.i,this.l,ue,null),yi(this,ue);qt==4&&cn(this),this.o&&!this.J&&(qt==4?Ku(this.j,this):(this.o=!1,ti(this)))}else qu(this.g),C==400&&0<ue.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),cn(this),ws(this)}}}catch{}finally{}};function Ui(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Mr(m,A){var C=m.C,b=A.indexOf(`
`,C);return b==-1?Pi:(C=Number(A.substring(C,b)),isNaN(C)?Ya:(b+=1,b+C>A.length?Pi:(A=A.slice(b,b+C),m.C=b+C,A)))}gi.prototype.cancel=function(){this.J=!0,cn(this)};function ti(m){m.S=Date.now()+m.I,Et(m,m.I)}function Et(m,A){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Ss(S(m.ba,m),A)}function xo(m){m.B&&(d.clearTimeout(m.B),m.B=null)}gi.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Mu(this.i,this.A),this.L!=2&&(Mi(),Ht(17)),cn(this),this.s=2,ws(this)):Et(this,this.S-m)};function ws(m){m.j.G==0||m.J||Ku(m.j,m)}function cn(m){xo(m);var A=m.M;A&&typeof A.ma=="function"&&A.ma(),m.M=null,en(m.U),m.g&&(A=m.g,m.g=null,A.abort(),A.ma())}function yi(m,A){try{var C=m.j;if(C.G!=0&&(C.g==m||Is(C.h,m))){if(!m.K&&Is(C.h,m)&&C.G==3){try{var b=C.Da.g.parse(A)}catch{b=null}if(Array.isArray(b)&&b.length==3){var G=b;if(G[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)Ls(C),Us(C);else break e;nl(C),Ht(18)}}else C.za=G[1],0<C.za-C.T&&37500>G[2]&&C.F&&C.v==0&&!C.C&&(C.C=Ss(S(C.Za,C),6e3));if(1>=Pu(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else qi(C,11)}else if((m.K||C.g==m)&&Ls(C),!ne(A))for(G=C.Da.g.parse(A),A=0;A<G.length;A++){let Pe=G[A];if(C.T=Pe[0],Pe=Pe[1],C.G==2)if(Pe[0]=="c"){C.K=Pe[1],C.ia=Pe[2];const Ot=Pe[3];Ot!=null&&(C.la=Ot,C.j.info("VER="+C.la));const qt=Pe[4];qt!=null&&(C.Aa=qt,C.j.info("SVER="+C.Aa));const Os=Pe[5];Os!=null&&typeof Os=="number"&&0<Os&&(b=1.5*Os,C.L=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const _n=m.g;if(_n){const qr=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qr){var $=b.h;$.g||qr.indexOf("spdy")==-1&&qr.indexOf("quic")==-1&&qr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(bs($,$.h),$.h=null))}if(b.D){const Fi=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;Fi&&(b.ya=Fi,Ke(b.I,b.D,Fi))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),b=C;var ue=m;if(b.qa=ju(b,b.J?b.ia:null,b.W),ue.K){Vn(b.h,ue);var Xe=ue,Ct=b.L;Ct&&(Xe.I=Ct),Xe.B&&(xo(Xe),ti(Xe)),b.g=ue}else Gu(b);0<C.i.length&&Do(C)}else Pe[0]!="stop"&&Pe[0]!="close"||qi(C,7);else C.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?qi(C,7):el(C):Pe[0]!="noop"&&C.l&&C.l.ta(Pe),C.v=0)}}Mi(4)}catch{}}var Sf=class{constructor(m,A){this.g=m,this.map=A}};function ja(m){this.l=m||10,d.PerformanceNavigationTiming?(m=d.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ja(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Pu(m){return m.h?1:m.g?m.g.size:0}function Is(m,A){return m.h?m.h==A:m.g?m.g.has(A):!1}function bs(m,A){m.g?m.g.add(A):m.h=A}function Vn(m,A){m.h&&m.h==A?m.h=null:m.g&&m.g.has(A)&&m.g.delete(A)}ja.prototype.cancel=function(){if(this.i=dn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function dn(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let A=m.i;for(const C of m.g.values())A=A.concat(C.D);return A}return F(m.i)}function ku(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(h(m)){for(var A=[],C=m.length,b=0;b<C;b++)A.push(m[b]);return A}A=[],C=0;for(b in m)A[C++]=m[b];return A}function xf(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(h(m)||typeof m=="string"){var A=[];m=m.length;for(var C=0;C<m;C++)A.push(C);return A}A=[],C=0;for(const b in m)A[C++]=b;return A}}}function Co(m,A){if(m.forEach&&typeof m.forEach=="function")m.forEach(A,void 0);else if(h(m)||typeof m=="string")Array.prototype.forEach.call(m,A,void 0);else for(var C=xf(m),b=ku(m),G=b.length,$=0;$<G;$++)A.call(void 0,b[$],C&&C[$],m)}var $a=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wo(m,A){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var b=m[C].indexOf("="),G=null;if(0<=b){var $=m[C].substring(0,b);G=m[C].substring(b+1)}else $=m[C];A($,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Li(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Li){this.h=m.h,Rs(this,m.j),this.o=m.o,this.g=m.g,Dr(this,m.s),this.l=m.l;var A=m.i,C=new _i;C.i=A.i,A.g&&(C.g=new Map(A.g),C.h=A.h),Io(this,C),this.m=m.m}else m&&(A=String(m).match($a))?(this.h=!1,Rs(this,A[1]||"",!0),this.o=Ns(A[2]||""),this.g=Ns(A[3]||"",!0),Dr(this,A[4]),this.l=Ns(A[5]||"",!0),Io(this,A[6]||"",!0),this.m=Ns(A[7]||"")):(this.h=!1,this.i=new _i(null,this.h))}Li.prototype.toString=function(){var m=[],A=this.j;A&&m.push(On(A,Qa,!0),":");var C=this.g;return(C||A=="file")&&(m.push("//"),(A=this.o)&&m.push(On(A,Qa,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(On(C,C.charAt(0)=="/"?Wa:Uu,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",On(C,If)),m.join("")};function gt(m){return new Li(m)}function Rs(m,A,C){m.j=C?Ns(A,!0):A,m.j&&(m.j=m.j.replace(/:$/,""))}function Dr(m,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);m.s=A}else m.s=null}function Io(m,A,C){A instanceof _i?(m.i=A,Lu(m.i,m.h)):(C||(A=On(A,wf)),m.i=new _i(A,m.h))}function Ke(m,A,C){m.i.set(A,C)}function Pr(m){return Ke(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Ns(m,A){return m?A?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function On(m,A,C){return typeof m=="string"?(m=encodeURI(m).replace(A,Cf),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Cf(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Qa=/[#\/\?@]/g,Uu=/[#\?:]/g,Wa=/[#\?]/g,wf=/[#\?@]/g,If=/#/g;function _i(m,A){this.h=this.g=null,this.i=m||null,this.j=!!A}function Vt(m){m.g||(m.g=new Map,m.h=0,m.i&&wo(m.i,function(A,C){m.add(decodeURIComponent(A.replace(/\+/g," ")),C)}))}t=_i.prototype,t.add=function(m,A){Vt(this),this.i=null,m=xn(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(A),this.h+=1,this};function bo(m,A){Vt(m),A=xn(m,A),m.g.has(A)&&(m.i=null,m.h-=m.g.get(A).length,m.g.delete(A))}function Ro(m,A){return Vt(m),A=xn(m,A),m.g.has(A)}t.forEach=function(m,A){Vt(this),this.g.forEach(function(C,b){C.forEach(function(G){m.call(A,G,b,this)},this)},this)},t.na=function(){Vt(this);const m=Array.from(this.g.values()),A=Array.from(this.g.keys()),C=[];for(let b=0;b<A.length;b++){const G=m[b];for(let $=0;$<G.length;$++)C.push(A[b])}return C},t.V=function(m){Vt(this);let A=[];if(typeof m=="string")Ro(this,m)&&(A=A.concat(this.g.get(xn(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)A=A.concat(m[C])}return A},t.set=function(m,A){return Vt(this),this.i=null,m=xn(this,m),Ro(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[A]),this.h+=1,this},t.get=function(m,A){return m?(m=this.V(m),0<m.length?String(m[0]):A):A};function Vi(m,A,C){bo(m,A),0<C.length&&(m.i=null,m.g.set(xn(m,A),F(C)),m.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],A=Array.from(this.g.keys());for(var C=0;C<A.length;C++){var b=A[C];const $=encodeURIComponent(String(b)),ue=this.V(b);for(b=0;b<ue.length;b++){var G=$;ue[b]!==""&&(G+="="+encodeURIComponent(String(ue[b]))),m.push(G)}}return this.i=m.join("&")};function xn(m,A){return A=String(A),m.j&&(A=A.toLowerCase()),A}function Lu(m,A){A&&!m.j&&(Vt(m),m.i=null,m.g.forEach(function(C,b){var G=b.toLowerCase();b!=G&&(bo(this,b),Vi(this,G,C))},m)),m.j=A}function Xa(m,A){const C=new xs;if(d.Image){const b=new Image;b.onload=w(yn,C,"TestLoadImage: loaded",!0,A,b),b.onerror=w(yn,C,"TestLoadImage: error",!1,A,b),b.onabort=w(yn,C,"TestLoadImage: abort",!1,A,b),b.ontimeout=w(yn,C,"TestLoadImage: timeout",!1,A,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=m}else A(!1)}function Vu(m,A){const C=new xs,b=new AbortController,G=setTimeout(()=>{b.abort(),yn(C,"TestPingServer: timeout",!1,A)},1e4);fetch(m,{signal:b.signal}).then($=>{clearTimeout(G),$.ok?yn(C,"TestPingServer: ok",!0,A):yn(C,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(G),yn(C,"TestPingServer: error",!1,A)})}function yn(m,A,C,b,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),b(C)}catch{}}function ni(){this.g=new Af}function Za(m,A,C){const b=C||"";try{Co(m,function(G,$){let ue=G;p(G)&&(ue=Un(G)),A.push(b+$+"="+encodeURIComponent(ue))})}catch(G){throw A.push(b+"type="+encodeURIComponent("_badmap")),G}}function vi(m){this.l=m.Ub||null,this.j=m.eb||!1}V(vi,Ba),vi.prototype.g=function(){return new Cn(this.l,this.j)},vi.prototype.i=(function(m){return function(){return m}})({});function Cn(m,A){Pt.call(this),this.D=m,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Cn,Pt),t=Cn.prototype,t.open=function(m,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=A,this.readyState=1,Ms(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(A.body=m),(this.D||d).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ms(this)),this.g&&(this.readyState=3,Ms(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;No(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function No(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var A=m.value?m.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!m.done}))&&(this.response=this.responseText+=A)}m.done?Ti(this):Ms(this),this.readyState==3&&No(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Ti(this))},t.Qa=function(m){this.g&&(this.response=m,Ti(this))},t.ga=function(){this.g&&Ti(this)};function Ti(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Ms(m)}t.setRequestHeader=function(m,A){this.u.append(m,A)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],A=this.h.entries();for(var C=A.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=A.next();return m.join(`\r
`)};function Ms(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Cn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function kr(m){let A="";return oe(m,function(C,b){A+=b,A+=":",A+=C,A+=`\r
`}),A}function Ds(m,A,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=kr(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):Ke(m,A,C))}function at(m){Pt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(at,Pt);var tn=/^https?$/i,Oi=["POST","PUT"];t=at.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,A,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);A=A?A.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pi.g(),this.v=this.o?Nu(this.o):Nu(pi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(A,String(m),!0),this.B=!1}catch($){Ur(this,$);return}if(m=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var G in b)C.set(G,b[G]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const $ of b.keys())C.set($,b.get($));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find($=>$.toLowerCase()=="content-type"),G=d.FormData&&m instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Oi,A,void 0))||b||G||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ue]of C)this.g.setRequestHeader($,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mo(this),this.u=!0,this.g.send(m),this.u=!1}catch($){Ur(this,$)}};function Ur(m,A){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=A,m.m=5,Ps(m),ks(m)}function Ps(m){m.A||(m.A=!0,Lt(m,"complete"),Lt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Lt(this,"complete"),Lt(this,"abort"),ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),at.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ou(this):this.bb())},t.bb=function(){Ou(this)};function Ou(m){if(m.h&&typeof u<"u"&&(!m.v[1]||fn(m)!=4||m.Z()!=2)){if(m.u&&fn(m)==4)Ru(m.Ea,0,m);else if(Lt(m,"readystatechange"),fn(m)==4){m.h=!1;try{const ue=m.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var C;if(!(C=A)){var b;if(b=ue===0){var G=String(m.D).match($a)[1]||null;!G&&d.self&&d.self.location&&(G=d.self.location.protocol.slice(0,-1)),b=!tn.test(G?G.toLowerCase():"")}C=b}if(C)Lt(m,"complete"),Lt(m,"success");else{m.m=6;try{var $=2<fn(m)?m.g.statusText:""}catch{$=""}m.l=$+" ["+m.Z()+"]",Ps(m)}}finally{ks(m)}}}}function ks(m,A){if(m.g){Mo(m);const C=m.g,b=m.v[0]?()=>{}:null;m.g=null,m.v=null,A||Lt(m,"ready");try{C.onreadystatechange=b}catch{}}}function Mo(m){m.I&&(d.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function fn(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<fn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var A=this.g.responseText;return m&&A.indexOf(m)==0&&(A=A.substring(m.length)),un(A)}};function Lr(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function qu(m){const A={};m=(m.g&&2<=fn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<m.length;b++){if(ne(m[b]))continue;var C=U(m[b]);const G=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const $=A[G]||[];A[G]=$,$.push(C)}M(A,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vr(m,A,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||A}function Fu(m){this.Aa=0,this.i=[],this.j=new xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vr("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vr("baseRetryDelayMs",5e3,m),this.cb=Vr("retryDelaySeedMs",1e4,m),this.Wa=Vr("forwardChannelMaxRetries",2,m),this.wa=Vr("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new ja(m&&m.concurrentRequestLimit),this.Da=new ni,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fu.prototype,t.la=8,t.G=1,t.connect=function(m,A,C,b){Ht(0),this.W=m,this.H=A||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.I=ju(this,null,this.W),Do(this)};function el(m){if(Bu(m),m.G==3){var A=m.U++,C=gt(m.I);if(Ke(C,"SID",m.K),Ke(C,"RID",A),Ke(C,"TYPE","terminate"),Or(m,C),A=new gi(m,m.j,A),A.L=2,A.v=Pr(gt(C)),C=!1,d.navigator&&d.navigator.sendBeacon)try{C=d.navigator.sendBeacon(A.v.toString(),"")}catch{}!C&&d.Image&&(new Image().src=A.v,C=!0),C||(A.g=Ju(A.j,null),A.g.ea(A.v)),A.F=Date.now(),ti(A)}sl(m)}function Us(m){m.g&&(il(m),m.g.cancel(),m.g=null)}function Bu(m){Us(m),m.u&&(d.clearTimeout(m.u),m.u=null),Ls(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&d.clearTimeout(m.s),m.s=null)}function Do(m){if(!Ja(m.h)&&!m.s){m.s=!0;var A=m.Ga;le||We(),_e||(le(),_e=!0),He.add(A,m),m.B=0}}function bf(m,A){return Pu(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=A.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Ss(S(m.Ga,m,A),Yu(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const G=new gi(this,this.j,m);let $=this.o;if(this.S&&($?($=R($),k($,this.S)):$=this.S),this.m!==null||this.O||(G.H=$,$=null),this.P)e:{for(var A=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(A+=b,4096<A){A=C;break e}if(A===4096||C===this.i.length-1){A=C+1;break e}}A=1e3}else A=1e3;A=tl(this,G,A),C=gt(this.I),Ke(C,"RID",m),Ke(C,"CVER",22),this.D&&Ke(C,"X-HTTP-Session-Id",this.D),Or(this,C),$&&(this.O?A="headers="+encodeURIComponent(String(kr($)))+"&"+A:this.m&&Ds(C,this.m,$)),bs(this.h,G),this.Ua&&Ke(C,"TYPE","init"),this.P?(Ke(C,"$req",A),Ke(C,"SID","null"),G.T=!0,Nr(G,C,null)):Nr(G,C,A),this.G=2}}else this.G==3&&(m?zu(this,m):this.i.length==0||Ja(this.h)||zu(this))};function zu(m,A){var C;A?C=A.l:C=m.U++;const b=gt(m.I);Ke(b,"SID",m.K),Ke(b,"RID",C),Ke(b,"AID",m.T),Or(m,b),m.m&&m.o&&Ds(b,m.m,m.o),C=new gi(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),A&&(m.i=A.D.concat(m.i)),A=tl(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),bs(m.h,C),Nr(C,b,A)}function Or(m,A){m.H&&oe(m.H,function(C,b){Ke(A,b,C)}),m.l&&Co({},function(C,b){Ke(A,b,C)})}function tl(m,A,C){C=Math.min(m.i.length,C);var b=m.l?S(m.l.Na,m.l,m):null;e:{var G=m.i;let $=-1;for(;;){const ue=["count="+C];$==-1?0<C?($=G[0].g,ue.push("ofs="+$)):$=0:ue.push("ofs="+$);let Xe=!0;for(let Ct=0;Ct<C;Ct++){let Pe=G[Ct].g;const Ot=G[Ct].map;if(Pe-=$,0>Pe)$=Math.max(0,G[Ct].g-100),Xe=!1;else try{Za(Ot,ue,"req"+Pe+"_")}catch{b&&b(Ot)}}if(Xe){b=ue.join("&");break e}}}return m=m.i.splice(0,C),A.D=m,b}function Gu(m){if(!m.g&&!m.u){m.Y=1;var A=m.Fa;le||We(),_e||(le(),_e=!0),He.add(A,m),m.v=0}}function nl(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Ss(S(m.Fa,m),Yu(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,Hu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Ss(S(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),Us(this),Hu(this))};function il(m){m.A!=null&&(d.clearTimeout(m.A),m.A=null)}function Hu(m){m.g=new gi(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var A=gt(m.qa);Ke(A,"RID","rpc"),Ke(A,"SID",m.K),Ke(A,"AID",m.T),Ke(A,"CI",m.F?"0":"1"),!m.F&&m.ja&&Ke(A,"TO",m.ja),Ke(A,"TYPE","xmlhttp"),Or(m,A),m.m&&m.o&&Ds(A,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=Pr(gt(A)),C.m=null,C.P=!0,ki(C,m)}t.Za=function(){this.C!=null&&(this.C=null,Us(this),nl(this),Ht(19))};function Ls(m){m.C!=null&&(d.clearTimeout(m.C),m.C=null)}function Ku(m,A){var C=null;if(m.g==A){Ls(m),il(m),m.g=null;var b=2}else if(Is(m.h,A))C=A.D,Vn(m.h,A),b=1;else return;if(m.G!=0){if(A.o)if(b==1){C=A.m?A.m.length:0,A=Date.now()-A.F;var G=m.B;b=So(),Lt(b,new Ga(b,C)),Do(m)}else Gu(m);else if(G=A.s,G==3||G==0&&0<A.X||!(b==1&&bf(m,A)||b==2&&nl(m)))switch(C&&0<C.length&&(A=m.h,A.i=A.i.concat(C)),G){case 1:qi(m,5);break;case 4:qi(m,10);break;case 3:qi(m,6);break;default:qi(m,2)}}}function Yu(m,A){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*A}function qi(m,A){if(m.j.info("Error code "+A),A==2){var C=S(m.fb,m),b=m.Xa;const G=!b;b=new Li(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Rs(b,"https"),Pr(b),G?Xa(b.toString(),C):Vu(b.toString(),C)}else Ht(2);m.G=0,m.l&&m.l.sa(A),sl(m),Bu(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function sl(m){if(m.G=0,m.ka=[],m.l){const A=dn(m.h);(A.length!=0||m.i.length!=0)&&(z(m.ka,A),z(m.ka,m.i),m.h.i.length=0,F(m.i),m.i.length=0),m.l.ra()}}function ju(m,A,C){var b=C instanceof Li?gt(C):new Li(C);if(b.g!="")A&&(b.g=A+"."+b.g),Dr(b,b.s);else{var G=d.location;b=G.protocol,A=A?A+"."+G.hostname:G.hostname,G=+G.port;var $=new Li(null);b&&Rs($,b),A&&($.g=A),G&&Dr($,G),C&&($.l=C),b=$}return C=m.D,A=m.ya,C&&A&&Ke(b,C,A),Ke(b,"VER",m.la),Or(m,b),b}function Ju(m,A,C){if(A&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=m.Ca&&!m.pa?new at(new vi({eb:C})):new at(m.pa),A.Ha(m.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $u(){}t=$u.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Po(){}Po.prototype.g=function(m,A){return new hn(m,A)};function hn(m,A){Pt.call(this),this.g=new Fu(A),this.l=m,this.h=A&&A.messageUrlParams||null,m=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(m?m["X-WebChannel-Content-Type"]=A.messageContentType:m={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(m?m["X-WebChannel-Client-Profile"]=A.va:m={"X-WebChannel-Client-Profile":A.va}),this.g.S=m,(m=A&&A.Sb)&&!ne(m)&&(this.g.m=m),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!ne(A)&&(this.g.D=A,m=this.h,m!==null&&A in m&&(m=this.h,A in m&&delete m[A])),this.j=new Vs(this)}V(hn,Pt),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){el(this.g)},hn.prototype.o=function(m){var A=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=Un(m),m=C);A.i.push(new Sf(A.Ya++,m)),A.G==3&&Do(A)},hn.prototype.N=function(){this.g.l=null,delete this.j,el(this.g),delete this.g,hn.aa.N.call(this)};function Qu(m){Ts.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var A=m.__sm__;if(A){e:{for(const C in A){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,A=A!==null&&m in A?A[m]:void 0),this.data=A}else this.data=m}V(Qu,Ts);function Wu(){ei.call(this),this.status=1}V(Wu,ei);function Vs(m){this.g=m}V(Vs,$u),Vs.prototype.ua=function(){Lt(this.g,"a")},Vs.prototype.ta=function(m){Lt(this.g,new Qu(m))},Vs.prototype.sa=function(m){Lt(this.g,new Wu)},Vs.prototype.ra=function(){Lt(this.g,"b")},Po.prototype.createWebChannel=Po.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,vS=function(){return new Po},_S=function(){return So()},yS=Ln,Qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pt.NO_ERROR=0,pt.TIMEOUT=8,pt.HTTP_ERROR=6,hd=pt,Kt.COMPLETE="complete",gS=Kt,Rr.EventType=hi,hi.OPEN="a",hi.CLOSE="b",hi.ERROR="c",hi.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,Jl=Rr,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,pS=at}).apply(typeof nd<"u"?nd:typeof self<"u"?self:typeof window<"u"?window:{});const q0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=new Jd("@firebase/firestore");function zl(){return uo.logLevel}function pe(t,...e){if(uo.logLevel<=Oe.DEBUG){const n=e.map(Op);uo.debug(`Firestore (${Ma}): ${t}`,...n)}}function fs(t,...e){if(uo.logLevel<=Oe.ERROR){const n=e.map(Op);uo.error(`Firestore (${Ma}): ${t}`,...n)}}function Aa(t,...e){if(uo.logLevel<=Oe.WARN){const n=e.map(Op);uo.warn(`Firestore (${Ma}): ${t}`,...n)}}function Op(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t="Unexpected state"){const e=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: `+t;throw fs(e),new Error(e)}function tt(t,e){t||we()}function Re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(rn.UNAUTHENTICATED)))}shutdown(){}}class a2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class l2{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tt(this.o===void 0);let i=this.i;const o=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let a=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new mr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await o(this.currentUser)}))},d=h=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new mr)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(tt(typeof i.accessToken=="string"),new TS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string"),new rn(e)}}class u2{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class c2{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new u2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class d2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class f2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){tt(this.o===void 0);const i=a=>{a.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(tt(typeof n.token=="string"),this.R=n.token,new d2(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=h2(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<n&&(i+=e.charAt(o[a]%e.length))}return i}}function Je(t,e){return t<e?-1:t>e?1:0}function Sa(t,e,n){return t.length===e.length&&t.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Ut(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new Ut(0,0))}static max(){return new be(new Ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(),i===void 0?i=e.length-n:i>e.length-n&&we(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return lu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof lu?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const a=e.get(o),u=n.get(o);if(a<u)return-1;if(a>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class dt extends lu{construct(e,n,i){return new dt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new dt(n)}static emptyPath(){return new dt([])}}const m2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends lu{construct(e,n,i){return new Wt(e,n,i)}static isValidIdentifier(e){return m2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wt(["__name__"])}static fromServerFormat(e){const n=[];let i="",o=0;const a=()=>{if(i.length===0)throw new he(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new he(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[o+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new he(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new he(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(dt.fromString(e))}static fromName(e){return new ve(dt.fromString(e).popFirst(5))}static empty(){return new ve(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new dt(e.slice()))}}function p2(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=be.fromTimestamp(i===1e9?new Ut(n+1,0):new Ut(n,i));return new _r(o,ve.empty(),e)}function g2(t){return new _r(t.readTime,t.key,-1)}class _r{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new _r(be.min(),ve.empty(),-1)}static max(){return new _r(be.max(),ve.empty(),-1)}}function y2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:Je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(t){if(t.code!==ie.FAILED_PRECONDITION||t.message!==_2)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,i)=>{n(e)}))}static reject(e){return new se(((n,i)=>{i(e)}))}static waitFor(e){return new se(((n,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&n()}),(h=>i(h)))})),u=!0,a===o&&n()}))}static or(e){let n=se.resolve(!1);for(const i of e)n=n.next((o=>o?se.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,a)=>{i.push(n.call(this,o,a))})),this.waitFor(i)}static mapArray(e,n){return new se(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let h=0;h<a;h++){const p=h;n(e[p]).next((v=>{u[p]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,n){return new se(((i,o)=>{const a=()=>{e()===!0?n().next((()=>{a()}),o):i()};a()}))}}function T2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}qp.oe=-1;function Zd(t){return t==null}function Pd(t){return t===0&&1/t==-1/0}function E2(t){return typeof t=="number"&&Number.isInteger(t)&&!Pd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Da(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){this.comparator=e,this.root=n||Qt.EMPTY}insert(e,n){return new mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new id(this.root,e,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new id(this.root,e,this.comparator,!0)}}class id{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,n,i,o,a){this.key=e,this.value=n,this.color=i??Qt.RED,this.left=o??Qt.EMPTY,this.right=a??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,a){return new Qt(e??this.key,n??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,n,i),null):a===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Qt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,n,i,o,a){return this}insert(e,n,i){return new Qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new B0(this.data.getIterator())}getIteratorFrom(e){return new B0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Xt(this.comparator);return n.data=e,n}}class B0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new oi([])}unionWith(e){let n=new Xt(Wt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new oi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Sa(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new SS("Invalid base64 string: "+a):a}})(e);return new Zt(n)}static fromUint8Array(e){const n=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const A2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vr(t){if(tt(!!t),typeof t=="string"){let e=0;const n=A2.exec(t);if(tt(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xt(t.seconds),nanos:xt(t.nanos)}}function xt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function co(t){return typeof t=="string"?Zt.fromBase64String(t):Zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Bp(t){const e=t.mapValue.fields.__previous_value__;return Fp(e)?Bp(e):e}function uu(t){const e=vr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n,i,o,a,u,d,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=p}}class cu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof cu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd={mapValue:{}};function fo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fp(t)?4:C2(t)?9007199254740991:x2(t)?10:11:we()}function bi(t,e){if(t===e)return!0;const n=fo(t);if(n!==fo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uu(t).isEqual(uu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=vr(o.timestampValue),d=vr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(o,a){return co(o.bytesValue).isEqual(co(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(o,a){return xt(o.geoPointValue.latitude)===xt(a.geoPointValue.latitude)&&xt(o.geoPointValue.longitude)===xt(a.geoPointValue.longitude)})(t,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return xt(o.integerValue)===xt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=xt(o.doubleValue),d=xt(a.doubleValue);return u===d?Pd(u)===Pd(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return Sa(t.arrayValue.values||[],e.arrayValue.values||[],bi);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(F0(u)!==F0(d))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(d[h]===void 0||!bi(u[h],d[h])))return!1;return!0})(t,e);default:return we()}}function du(t,e){return(t.values||[]).find((n=>bi(n,e)))!==void 0}function xa(t,e){if(t===e)return 0;const n=fo(t),i=fo(e);if(n!==i)return Je(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(t.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=xt(a.integerValue||a.doubleValue),h=xt(u.integerValue||u.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(t,e);case 3:return z0(t.timestampValue,e.timestampValue);case 4:return z0(uu(t),uu(e));case 5:return Je(t.stringValue,e.stringValue);case 6:return(function(a,u){const d=co(a),h=co(u);return d.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),h=u.split("/");for(let p=0;p<d.length&&p<h.length;p++){const v=Je(d[p],h[p]);if(v!==0)return v}return Je(d.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Je(xt(a.latitude),xt(u.latitude));return d!==0?d:Je(xt(a.longitude),xt(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return G0(t.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,h,p,v;const E=a.fields||{},S=u.fields||{},w=(d=E.value)===null||d===void 0?void 0:d.arrayValue,V=(h=S.value)===null||h===void 0?void 0:h.arrayValue,F=Je(((p=w==null?void 0:w.values)===null||p===void 0?void 0:p.length)||0,((v=V==null?void 0:V.values)===null||v===void 0?void 0:v.length)||0);return F!==0?F:G0(w,V)})(t.mapValue,e.mapValue);case 11:return(function(a,u){if(a===sd.mapValue&&u===sd.mapValue)return 0;if(a===sd.mapValue)return 1;if(u===sd.mapValue)return-1;const d=a.fields||{},h=Object.keys(d),p=u.fields||{},v=Object.keys(p);h.sort(),v.sort();for(let E=0;E<h.length&&E<v.length;++E){const S=Je(h[E],v[E]);if(S!==0)return S;const w=xa(d[h[E]],p[v[E]]);if(w!==0)return w}return Je(h.length,v.length)})(t.mapValue,e.mapValue);default:throw we()}}function z0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Je(t,e);const n=vr(t),i=vr(e),o=Je(n.seconds,i.seconds);return o!==0?o:Je(n.nanos,i.nanos)}function G0(t,e){const n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const a=xa(n[o],i[o]);if(a)return a}return Je(n.length,i.length)}function Ca(t){return Wm(t)}function Wm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=vr(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return co(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ve.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",o=!0;for(const a of n.values||[])o?o=!1:i+=",",i+=Wm(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Wm(n.fields[u])}`;return o+"}"})(t.mapValue):we()}function H0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xm(t){return!!t&&"integerValue"in t}function zp(t){return!!t&&"arrayValue"in t}function K0(t){return!!t&&"nullValue"in t}function Y0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function md(t){return!!t&&"mapValue"in t}function x2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Xl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Da(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Xl(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function C2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!md(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xl(n)}setAll(e){let n=Wt.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const h=this.getFieldsMap(n);this.applyChanges(h,i,o),i={},o=[],n=d.popLast()}u?i[d.lastSegment()]=Xl(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,o)}delete(e){const n=this.field(e.popLast());md(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];md(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Da(n,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new jn(Xl(this.value))}}function xS(t){const e=[];return Da(t.fields,((n,i)=>{const o=new Wt([n]);if(md(i)){const a=xS(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n,i,o,a,u,d){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new on(e,0,be.min(),be.min(),be.min(),jn.empty(),0)}static newFoundDocument(e,n,i,o){return new on(e,1,n,be.min(),i,o,0)}static newNoDocument(e,n){return new on(e,2,n,be.min(),be.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new on(e,3,n,be.min(),be.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n){this.position=e,this.inclusive=n}}function j0(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){const a=e[o],u=t.position[o];if(a.field.isKeyField()?i=ve.comparator(ve.fromName(u.referenceValue),n.key):i=xa(u,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function J0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n="asc"){this.field=e,this.dir=n}}function w2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{}class Mt extends CS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new b2(e,n,i):n==="array-contains"?new M2(e,i):n==="in"?new D2(e,i):n==="not-in"?new P2(e,i):n==="array-contains-any"?new k2(e,i):new Mt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new R2(e,i):new N2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xa(n,this.value)):n!==null&&fo(this.value)===fo(n)&&this.matchesComparison(xa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends CS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ui(e,n)}matches(e){return wS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function wS(t){return t.op==="and"}function IS(t){return I2(t)&&wS(t)}function I2(t){for(const e of t.filters)if(e instanceof ui)return!1;return!0}function Zm(t){if(t instanceof Mt)return t.field.canonicalString()+t.op.toString()+Ca(t.value);if(IS(t))return t.filters.map((e=>Zm(e))).join(",");{const e=t.filters.map((n=>Zm(n))).join(",");return`${t.op}(${e})`}}function bS(t,e){return t instanceof Mt?(function(i,o){return o instanceof Mt&&i.op===o.op&&i.field.isEqual(o.field)&&bi(i.value,o.value)})(t,e):t instanceof ui?(function(i,o){return o instanceof ui&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&bS(u,o.filters[d])),!0):!1})(t,e):void we()}function RS(t){return t instanceof Mt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ca(n.value)}`})(t):t instanceof ui?(function(n){return n.op.toString()+" {"+n.getFilters().map(RS).join(" ,")+"}"})(t):"Filter"}class b2 extends Mt{constructor(e,n,i){super(e,n,i),this.key=ve.fromName(i.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class R2 extends Mt{constructor(e,n){super(e,"in",n),this.keys=NS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class N2 extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=NS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function NS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>ve.fromName(i.referenceValue)))}class M2 extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zp(n)&&du(n.arrayValue,this.value)}}class D2 extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&du(this.value.arrayValue,n)}}class P2 extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!du(this.value.arrayValue,n)}}class k2 extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>du(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.ue=null}}function $0(t,e=null,n=[],i=[],o=null,a=null,u=null){return new U2(t,e,n,i,o,a,u)}function Gp(t){const e=Re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Zm(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Zd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ca(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ca(i))).join(",")),e.ue=n}return e.ue}function Hp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!w2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!J0(t.startAt,e.startAt)&&J0(t.endAt,e.endAt)}function ep(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n=null,i=[],o=[],a=null,u="F",d=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function L2(t,e,n,i,o,a,u,d){return new Pa(t,e,n,i,o,a,u,d)}function MS(t){return new Pa(t)}function Q0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function DS(t){return t.collectionGroup!==null}function Zl(t){const e=Re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Xt(Wt.comparator);return u.filters.forEach((h=>{h.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new fu(a,i))})),n.has(Wt.keyField().canonicalString())||e.ce.push(new fu(Wt.keyField(),i))}return e.ce}function wi(t){const e=Re(t);return e.le||(e.le=V2(e,Zl(t))),e.le}function V2(t,e){if(t.limitType==="F")return $0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new fu(o.field,a)}));const n=t.endAt?new kd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new kd(t.startAt.position,t.startAt.inclusive):null;return $0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function tp(t,e){const n=t.filters.concat([e]);return new Pa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function np(t,e,n){return new Pa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ef(t,e){return Hp(wi(t),wi(e))&&t.limitType===e.limitType}function PS(t){return`${Gp(wi(t))}|lt:${t.limitType}`}function la(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>RS(o))).join(", ")}]`),Zd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>Ca(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>Ca(o))).join(",")),`Target(${i})`})(wi(t))}; limitType=${t.limitType})`}function tf(t,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ve.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,o){for(const a of Zl(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(t,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,h){const p=j0(u,d,h);return u.inclusive?p<=0:p<0})(i.startAt,Zl(i),o)||i.endAt&&!(function(u,d,h){const p=j0(u,d,h);return u.inclusive?p>=0:p>0})(i.endAt,Zl(i),o))})(t,e)}function O2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kS(t){return(e,n)=>{let i=!1;for(const o of Zl(t)){const a=q2(o,e,n);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function q2(t,e,n){const i=t.field.isKeyField()?ve.comparator(e.key,n.key):(function(a,u,d){const h=u.data.field(a),p=d.data.field(a);return h!==null&&p!==null?xa(h,p):we()})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,((n,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return AS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new mt(ve.comparator);function hs(){return F2}const US=new mt(ve.comparator);function $l(...t){let e=US;for(const n of t)e=e.insert(n.key,n);return e}function LS(t){let e=US;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function so(){return eu()}function VS(){return eu()}function eu(){return new ka((t=>t.toString()),((t,e)=>t.isEqual(e)))}const B2=new mt(ve.comparator),z2=new Xt(ve.comparator);function qe(...t){let e=z2;for(const n of t)e=e.add(n);return e}const G2=new Xt(Je);function H2(){return G2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pd(e)?"-0":e}}function OS(t){return{integerValue:""+t}}function K2(t,e){return E2(e)?OS(e):Kp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(){this._=void 0}}function Y2(t,e,n){return t instanceof Ud?(function(o,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Fp(a)&&(a=Bp(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(n,e):t instanceof hu?FS(t,e):t instanceof mu?BS(t,e):(function(o,a){const u=qS(o,a),d=W0(u)+W0(o.Pe);return Xm(u)&&Xm(o.Pe)?OS(d):Kp(o.serializer,d)})(t,e)}function j2(t,e,n){return t instanceof hu?FS(t,e):t instanceof mu?BS(t,e):n}function qS(t,e){return t instanceof Ld?(function(i){return Xm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Ud extends nf{}class hu extends nf{constructor(e){super(),this.elements=e}}function FS(t,e){const n=zS(e);for(const i of t.elements)n.some((o=>bi(o,i)))||n.push(i);return{arrayValue:{values:n}}}class mu extends nf{constructor(e){super(),this.elements=e}}function BS(t,e){let n=zS(e);for(const i of t.elements)n=n.filter((o=>!bi(o,i)));return{arrayValue:{values:n}}}class Ld extends nf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function W0(t){return xt(t.integerValue||t.doubleValue)}function zS(t){return zp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function J2(t,e){return t.field.isEqual(e.field)&&(function(i,o){return i instanceof hu&&o instanceof hu||i instanceof mu&&o instanceof mu?Sa(i.elements,o.elements,bi):i instanceof Ld&&o instanceof Ld?bi(i.Pe,o.Pe):i instanceof Ud&&o instanceof Ud})(t.transform,e.transform)}class $2{constructor(e,n){this.version=e,this.transformResults=n}}class as{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new as}static exists(e){return new as(void 0,e)}static updateTime(e){return new as(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sf{}function GS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new KS(t.key,as.none()):new Au(t.key,t.data,as.none());{const n=t.data,i=jn.empty();let o=new Xt(Wt.comparator);for(let a of e.fields)if(!o.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new po(t.key,i,new oi(o.toArray()),as.none())}}function Q2(t,e,n){t instanceof Au?(function(o,a,u){const d=o.value.clone(),h=Z0(o.fieldTransforms,a,u.transformResults);d.setAll(h),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof po?(function(o,a,u){if(!pd(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=Z0(o.fieldTransforms,a,u.transformResults),h=a.data;h.setAll(HS(o)),h.setAll(d),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function tu(t,e,n,i){return t instanceof Au?(function(a,u,d,h){if(!pd(a.precondition,u))return d;const p=a.value.clone(),v=eT(a.fieldTransforms,h,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(t,e,n,i):t instanceof po?(function(a,u,d,h){if(!pd(a.precondition,u))return d;const p=eT(a.fieldTransforms,h,u),v=u.data;return v.setAll(HS(a)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(t,e,n,i):(function(a,u,d){return pd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function W2(t,e){let n=null;for(const i of t.fieldTransforms){const o=e.data.field(i.field),a=qS(i.transform,o||null);a!=null&&(n===null&&(n=jn.empty()),n.set(i.field,a))}return n||null}function X0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Sa(i,o,((a,u)=>J2(a,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Au extends sf{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class po extends sf{constructor(e,n,i,o,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function HS(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Z0(t,e,n){const i=new Map;tt(t.length===n.length);for(let o=0;o<n.length;o++){const a=t[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,j2(u,d,n[o]))}return i}function eT(t,e,n){const i=new Map;for(const o of t){const a=o.transform,u=n.data.field(o.field);i.set(o.field,Y2(a,u,e))}return i}class KS extends sf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X2 extends sf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&Q2(a,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=tu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=tu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=VS();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=n.has(o.key)?null:d;const h=GS(u,d);h!==null&&i.set(o.key,h),u.isValidDocument()||u.convertToNoDocument(be.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),qe())}isEqual(e){return this.batchId===e.batchId&&Sa(this.mutations,e.mutations,((n,i)=>X0(n,i)))&&Sa(this.baseMutations,e.baseMutations,((n,i)=>X0(n,i)))}}class Yp{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){tt(e.mutations.length===i.length);let o=(function(){return B2})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new Yp(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,ze;function nM(t){switch(t){default:return we();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function YS(t){if(t===void 0)return fs("GRPC error has no .code"),ie.UNKNOWN;switch(t){case Nt.OK:return ie.OK;case Nt.CANCELLED:return ie.CANCELLED;case Nt.UNKNOWN:return ie.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ie.INTERNAL;case Nt.UNAVAILABLE:return ie.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ie.NOT_FOUND;case Nt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Nt.ABORTED:return ie.ABORTED;case Nt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Nt.DATA_LOSS:return ie.DATA_LOSS;default:return we()}}(ze=Nt||(Nt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=new ro([4294967295,4294967295],0);function tT(t){const e=iM().encode(t),n=new mS;return n.update(e),new Uint8Array(n.digest())}function nT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ro([n,i],0),new ro([o,a],0)]}class jp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ql(`Invalid padding: ${n}`);if(i<0)throw new Ql(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ql(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ql(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ro.fromNumber(this.Ie)}Ee(e,n,i){let o=e.add(n.multiply(ro.fromNumber(i)));return o.compare(sM)===1&&(o=new ro([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=tT(e),[i,o]=nT(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);if(!this.de(u))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new jp(a,o,n);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.Ie===0)return;const n=tT(e),[i,o]=nT(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);this.Ae(u)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n,i,o,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new rf(be.min(),o,new mt(Je),hs(),qe())}}class Su{constructor(e,n,i,o,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Su(i,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n,i,o){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=o}}class jS{constructor(e,n){this.targetId=e,this.me=n}}class JS{constructor(e,n,i=Zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class iT{constructor(){this.fe=0,this.ge=rT(),this.pe=Zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=qe(),n=qe(),i=qe();return this.ge.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:we()}})),new Su(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=rT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,tt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rM{constructor(e){this.Le=e,this.Be=new Map,this.ke=hs(),this.qe=sT(),this.Qe=new mt(Je)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:we()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((i,o)=>{this.ze(o)&&n(o)}))}He(e){const n=e.targetId,i=e.me.count,o=this.Je(n);if(o){const a=o.target;if(ep(a))if(i===0){const u=new ve(a.path);this.Ue(n,u,on.newNoDocument(u,be.min()))}else tt(i===1);else{const u=this.Ye(n);if(u!==i){const d=this.Ze(e),h=d?this.Xe(d,e,u):1;if(h!==0){this.je(n);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=n;let u,d;try{u=co(i).toUint8Array()}catch(h){if(h instanceof SS)return Aa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new jp(u,o,a)}catch(h){return Aa(h instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.Ie===0?null:d}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let o=0;return i.forEach((a=>{const u=this.Le.tt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(n,a,null),o++)})),o}rt(e){const n=new Map;this.Be.forEach(((a,u)=>{const d=this.Je(u);if(d){if(a.current&&ep(d.target)){const h=new ve(d.target.path);this.ke.get(h)!==null||this.it(u,h)||this.Ue(u,h,on.newNoDocument(h,e))}a.be&&(n.set(u,a.ve()),a.Ce())}}));let i=qe();this.qe.forEach(((a,u)=>{let d=!0;u.forEachWhile((h=>{const p=this.Je(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const o=new rf(e,n,this.Qe,this.ke,i);return this.ke=hs(),this.qe=sT(),this.Qe=new mt(Je),o}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new iT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xt(Je),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new iT),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function sT(){return new mt(ve.comparator)}function rT(){return new mt(ve.comparator)}const oM={asc:"ASCENDING",desc:"DESCENDING"},aM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lM={and:"AND",or:"OR"};class uM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ip(t,e){return t.useProto3Json||Zd(e)?e:{value:e}}function Vd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $S(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function cM(t,e){return Vd(t,e.toTimestamp())}function Ii(t){return tt(!!t),be.fromTimestamp((function(n){const i=vr(n);return new Ut(i.seconds,i.nanos)})(t))}function Jp(t,e){return sp(t,e).canonicalString()}function sp(t,e){const n=(function(o){return new dt(["projects",o.projectId,"databases",o.database])})(t).child("documents");return e===void 0?n:n.child(e)}function QS(t){const e=dt.fromString(t);return tt(tx(e)),e}function rp(t,e){return Jp(t.databaseId,e.path)}function Um(t,e){const n=QS(e);if(n.get(1)!==t.databaseId.projectId)throw new he(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(XS(n))}function WS(t,e){return Jp(t.databaseId,e)}function dM(t){const e=QS(t);return e.length===4?dt.emptyPath():XS(e)}function op(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function XS(t){return tt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function oT(t,e,n){return{name:rp(t,e),fields:n.value.mapValue.fields}}function fM(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:we()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(p,v){return p.useProto3Json?(tt(v===void 0||typeof v=="string"),Zt.fromBase64String(v||"")):(tt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Zt.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(p){const v=p.code===void 0?ie.UNKNOWN:YS(p.code);return new he(v,p.message||"")})(u);n=new JS(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Um(t,i.document.name),a=Ii(i.document.updateTime),u=i.document.createTime?Ii(i.document.createTime):be.min(),d=new jn({mapValue:{fields:i.document.fields}}),h=on.newFoundDocument(o,a,u,d),p=i.targetIds||[],v=i.removedTargetIds||[];n=new gd(p,v,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Um(t,i.document),a=i.readTime?Ii(i.readTime):be.min(),u=on.newNoDocument(o,a),d=i.removedTargetIds||[];n=new gd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Um(t,i.document),a=i.removedTargetIds||[];n=new gd([],a,o,null)}else{if(!("filter"in e))return we();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new tM(o,a),d=i.targetId;n=new jS(d,u)}}return n}function hM(t,e){let n;if(e instanceof Au)n={update:oT(t,e.key,e.value)};else if(e instanceof KS)n={delete:rp(t,e.key)};else if(e instanceof po)n={update:oT(t,e.key,e.data),updateMask:AM(e.fieldMask)};else{if(!(e instanceof X2))return we();n={verify:rp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Ud)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof hu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof mu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ld)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw we()})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:cM(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:we()})(t,e.precondition)),n}function mM(t,e){return t&&t.length>0?(tt(e!==void 0),t.map((n=>(function(o,a){let u=o.updateTime?Ii(o.updateTime):Ii(a);return u.isEqual(be.min())&&(u=Ii(a)),new $2(u,o.transformResults||[])})(n,e)))):[]}function pM(t,e){return{documents:[WS(t,e.path)]}}function gM(t,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=WS(t,o);const a=(function(p){if(p.length!==0)return ex(ui.create(p,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const u=(function(p){if(p.length!==0)return p.map((v=>(function(S){return{field:ua(S.field),direction:vM(S.dir)}})(v)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=ip(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{_t:n,parent:o}}function yM(t){let e=dM(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){tt(i===1);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=(function(E){const S=ZS(E);return S instanceof ui&&IS(S)?S.getFilters():[S]})(n.where));let u=[];n.orderBy&&(u=(function(E){return E.map((S=>(function(V){return new fu(ca(V.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(n.orderBy));let d=null;n.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,Zd(S)?null:S})(n.limit));let h=null;n.startAt&&(h=(function(E){const S=!!E.before,w=E.values||[];return new kd(w,S)})(n.startAt));let p=null;return n.endAt&&(p=(function(E){const S=!E.before,w=E.values||[];return new kd(w,S)})(n.endAt)),L2(e,o,u,a,d,"F",h,p)}function _M(t,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ca(n.unaryFilter.field);return Mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ca(n.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ca(n.unaryFilter.field);return Mt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ca(n.unaryFilter.field);return Mt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return we()}})(t):t.fieldFilter!==void 0?(function(n){return Mt.create(ca(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ui.create(n.compositeFilter.filters.map((i=>ZS(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we()}})(n.compositeFilter.op))})(t):we()}function vM(t){return oM[t]}function TM(t){return aM[t]}function EM(t){return lM[t]}function ua(t){return{fieldPath:t.canonicalString()}}function ca(t){return Wt.fromServerFormat(t.fieldPath)}function ex(t){return t instanceof Mt?(function(n){if(n.op==="=="){if(Y0(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NAN"}};if(K0(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Y0(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NOT_NAN"}};if(K0(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ua(n.field),op:TM(n.op),value:n.value}}})(t):t instanceof ui?(function(n){const i=n.getFilters().map((o=>ex(o)));return i.length===1?i[0]:{compositeFilter:{op:EM(n.op),filters:i}}})(t):we()}function AM(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function tx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,i,o,a=be.min(),u=be.min(),d=Zt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.ct=e}}function xM(t){const e=yM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?np(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(){this.un=new wM}addToCollectionParentIndex(e,n){return this.un.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(_r.min())}updateCollectionGroup(e,n,i){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class wM{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Xt(dt.comparator),a=!o.has(i);return this.index[n]=o.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Xt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new wa(0)}static kn(){return new wa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this.changes=new ka((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?se.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&tu(i.mutation,o,oi.empty(),Ut.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,qe()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=qe()){const o=so();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((a=>{let u=$l();return a.forEach(((d,h)=>{u=u.insert(d,h.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const i=so();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,qe())))}populateOverlays(e,n,i){const o=[];return i.forEach((a=>{n.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,i,o){let a=hs();const u=eu(),d=(function(){return eu()})();return n.forEach(((h,p)=>{const v=i.get(p.key);o.has(p.key)&&(v===void 0||v.mutation instanceof po)?a=a.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),tu(v.mutation,p,v.mutation.getFieldMask(),Ut.now())):u.set(p.key,oi.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((p,v)=>u.set(p,v))),n.forEach(((p,v)=>{var E;return d.set(p,new bM(v,(E=u.get(p))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,n){const i=eu();let o=new mt(((u,d)=>u-d)),a=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((h=>{const p=n.get(h);if(p===null)return;let v=i.get(h)||oi.empty();v=d.applyToLocalView(p,v),i.set(h,v);const E=(o.get(d.batchId)||qe()).add(h);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),p=h.key,v=h.value,E=VS();v.forEach((S=>{if(!a.has(S)){const w=GS(n.get(S),i.get(S));w!==null&&E.set(S,w),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,E))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(u){return ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-a.size):se.resolve(so());let d=-1,h=a;return u.next((p=>se.forEach(p,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{h=h.insert(v,S)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,h,p,qe()))).next((v=>({batchId:d,changes:LS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((i=>{let o=$l();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const a=n.collectionGroup;let u=$l();return this.indexManager.getCollectionParents(e,a).next((d=>se.forEach(d,(h=>{const p=(function(E,S){return new Pa(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,i,o).next((v=>{v.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,o)))).next((u=>{a.forEach(((h,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,on.newInvalidDocument(v)))}));let d=$l();return u.forEach(((h,p)=>{const v=a.get(h);v!==void 0&&tu(v.mutation,p,oi.empty(),Ut.now()),tf(n,p)&&(d=d.insert(h,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return se.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ii(o.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(o){return{name:o.name,query:xM(o.bundledQuery),readTime:Ii(o.readTime)}})(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this.overlays=new mt(ve.comparator),this.Ir=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const i=so();return se.forEach(n,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,a)=>{this.ht(e,n,a)})),se.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(i)),se.resolve()}getOverlaysForCollection(e,n,i){const o=so(),a=n.length+1,u=new ve(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const h=d.getNext().value,p=h.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&h.largestBatchId>i&&o.set(h.getKey(),h)}return se.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let a=new mt(((p,v)=>p-v));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let v=a.get(p.largestBatchId);v===null&&(v=so(),a=a.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=so(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=o)););return se.resolve(d)}ht(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new eM(n,i));let a=this.Ir.get(n);a===void 0&&(a=qe(),this.Ir.set(n,a)),this.Ir.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.Tr=new Xt(Bt.Er),this.dr=new Xt(Bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Bt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Vr(new Bt(e,n))}mr(e,n){e.forEach((i=>this.removeReference(i,n)))}gr(e){const n=new ve(new dt([])),i=new Bt(n,e),o=new Bt(n,e+1),a=[];return this.dr.forEachInRange([i,o],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ve(new dt([])),i=new Bt(n,e),o=new Bt(n,e+1);let a=qe();return this.dr.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const n=new Bt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Bt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ve.comparator(e.key,n.key)||Je(e.wr,n.wr)}static Ar(e,n){return Je(e.wr,n.wr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xt(Bt.Er)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Z2(a,n,i,o);this.mutationQueue.push(u);for(const d of o)this.br=this.br.add(new Bt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,n){return se.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.vr(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Bt(n,0),o=new Bt(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([i,o],(u=>{const d=this.Dr(u.wr);a.push(d)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Xt(Je);return n.forEach((o=>{const a=new Bt(o,0),u=new Bt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(d=>{i=i.add(d.wr)}))})),se.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let a=i;ve.isDocumentKey(a)||(a=a.child(""));const u=new Bt(new ve(a),0);let d=new Xt(Je);return this.br.forEachWhile((h=>{const p=h.key.path;return!!i.isPrefixOf(p)&&(p.length===o&&(d=d.add(h.wr)),!0)}),u),se.resolve(this.Cr(d))}Cr(e){const n=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){tt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return se.forEach(n.mutations,(o=>{const a=new Bt(o.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,n){const i=new Bt(n,0),o=this.br.firstAfterOrEqual(i);return se.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e){this.Mr=e,this.docs=(function(){return new mt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),a=o?o.size:0,u=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return se.resolve(i?i.document.mutableCopy():on.newInvalidDocument(n))}getEntries(e,n){let i=hs();return n.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():on.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let a=hs();const u=n.path,d=new ve(u.child("")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:p,value:{document:v}}=h.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||y2(g2(v),i)<=0||(o.has(v.key)||tf(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,n,i,o){we()}Or(e,n){return se.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new UM(this)}getSize(e){return se.resolve(this.size)}}class UM extends IM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),se.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.persistence=e,this.Nr=new ka((n=>Gp(n)),Hp),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $p,this.targetCount=0,this.kr=wa.Bn()}forEachTarget(e,n){return this.Nr.forEach(((i,o)=>n(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),se.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new wa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Kn(n),se.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,i){let o=0;const a=[];return this.Nr.forEach(((u,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return se.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),se.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const o=this.persistence.referenceDelegate,a=[];return o&&n.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return se.resolve(i)}containsKey(e,n){return se.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,n){this.qr={},this.overlays={},this.Qr=new qp(0),this.Kr=!1,this.Kr=!0,this.$r=new DM,this.referenceDelegate=e(this),this.Ur=new LM(this),this.indexManager=new CM,this.remoteDocumentCache=(function(o){return new kM(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new SM(n),this.Gr=new NM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new PM(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){pe("MemoryPersistence","Starting transaction:",e);const o=new OM(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((a=>this.referenceDelegate.jr(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Hr(e,n){return se.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,n))))}}class OM extends v2{constructor(e){super(),this.currentSequenceNumber=e}}class Qp{constructor(e){this.persistence=e,this.Jr=new $p,this.Yr=null}static Zr(e){return new Qp(e)}get Xr(){if(this.Yr)return this.Yr;throw we()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),se.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),se.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((a=>this.Xr.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Xr,(i=>{const o=ve.fromPath(i);return this.ei(e,o).next((a=>{a||n.removeEntry(o,be.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return se.or([()=>se.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=o}static Wi(e,n){let i=qe(),o=qe();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Wp(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return pb()?8:T2(ln())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,o){const a={result:null};return this.Yi(e,n).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,n,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new qM;return this.Xi(e,n,u).next((d=>{if(a.result=d,this.zi)return this.es(e,n,u,d.size)}))})).next((()=>a.result))}es(e,n,i,o){return i.documentReadCount<this.ji?(zl()<=Oe.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",la(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),se.resolve()):(zl()<=Oe.DEBUG&&pe("QueryEngine","Query:",la(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(zl()<=Oe.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",la(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wi(n))):se.resolve())}Yi(e,n){if(Q0(n))return se.resolve(null);let i=wi(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=np(n,null,"F"),i=wi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=qe(...a);return this.Ji.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((h=>{const p=this.ts(n,d);return this.ns(n,p,u,h.readTime)?this.Yi(e,np(n,null,"F")):this.rs(e,p,n,h)}))))})))))}Zi(e,n,i,o){return Q0(n)||o.isEqual(be.min())?se.resolve(null):this.Ji.getDocuments(e,i).next((a=>{const u=this.ts(n,a);return this.ns(n,u,i,o)?se.resolve(null):(zl()<=Oe.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),la(n)),this.rs(e,u,n,p2(o,-1)).next((d=>d)))}))}ts(e,n){let i=new Xt(kS(e));return n.forEach(((o,a)=>{tf(e,a)&&(i=i.add(a))})),i}ns(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,n,i){return zl()<=Oe.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",la(n)),this.Ji.getDocumentsMatchingQuery(e,n,_r.min(),i)}rs(e,n,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((a=>(n.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,n,i,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new mt(Je),this._s=new ka((a=>Gp(a)),Hp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function zM(t,e,n,i){return new BM(t,e,n,i)}async function nx(t,e){const n=Re(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,n.ls(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let h=qe();for(const p of o){u.push(p.batchId);for(const v of p.mutations)h=h.add(v.key)}for(const p of a){d.push(p.batchId);for(const v of p.mutations)h=h.add(v.key)}return n.localDocuments.getDocuments(i,h).next((p=>({hs:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function GM(t,e){const n=Re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return(function(d,h,p,v){const E=p.batch,S=E.keys();let w=se.resolve();return S.forEach((V=>{w=w.next((()=>v.getEntry(h,V))).next((F=>{const z=p.docVersions.get(V);tt(z!==null),F.version.compareTo(z)<0&&(E.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),v.addEntry(F)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(h,E)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let h=qe();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(h=h.add(d.batch.mutations[p].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function ix(t){const e=Re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function HM(t,e){const n=Re(t),i=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const d=[];e.targetChanges.forEach(((v,E)=>{const S=o.get(E);if(!S)return;d.push(n.Ur.removeMatchingKeys(a,v.removedDocuments,E).next((()=>n.Ur.addMatchingKeys(a,v.addedDocuments,E))));let w=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(Zt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):v.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(v.resumeToken,i)),o=o.insert(E,w),(function(F,z,X){return F.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(S,w,v)&&d.push(n.Ur.updateTargetData(a,w))}));let h=hs(),p=qe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(KM(a,u,e.documentUpdates).next((v=>{h=v.Ps,p=v.Is}))),!i.isEqual(be.min())){const v=n.Ur.getLastRemoteSnapshotVersion(a).next((E=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return se.waitFor(d).next((()=>u.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,h,p))).next((()=>h))})).then((a=>(n.os=o,a)))}function KM(t,e,n){let i=qe(),o=qe();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let u=hs();return n.forEach(((d,h)=>{const p=a.get(d);h.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(d)),h.isNoDocument()&&h.version.isEqual(be.min())?(e.removeEntry(d,h.readTime),u=u.insert(d,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),u=u.insert(d,h)):pe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",h.version)})),{Ps:u,Is:o}}))}function YM(t,e){const n=Re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function jM(t,e){const n=Re(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Ur.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):n.Ur.allocateTargetId(i).next((u=>(o=new fr(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i}))}async function ap(t,e,n){const i=Re(t),o=i.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Eu(u))throw u;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function aT(t,e,n){const i=Re(t);let o=be.min(),a=qe();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(h,p,v){const E=Re(h),S=E._s.get(v);return S!==void 0?se.resolve(E.os.get(S)):E.Ur.getTargetData(p,v)})(i,u,wi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(u,d.targetId).next((h=>{a=h}))})).next((()=>i.ss.getDocumentsMatchingQuery(u,e,n?o:be.min(),n?a:qe()))).next((d=>(JM(i,O2(e),d),{documents:d,Ts:a})))))}function JM(t,e,n){let i=t.us.get(e)||be.min();n.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.us.set(e,i)}class lT{constructor(){this.activeTargetIds=H2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $M{constructor(){this.so=new lT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new lT,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rd=null;function Lm(){return rd===null?rd=(function(){return 268435456+Math.round(2147483648*Math.random())})():rd++,"0x"+rd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class ZM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(n,i,o,a,u){const d=Lm(),h=this.xo(n,i.toUriEncodedString());pe("RestConnection",`Sending RPC '${n}' ${d}:`,h,o);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,a,u),this.No(n,h,p,o).then((v=>(pe("RestConnection",`Received RPC '${n}' ${d}: `,v),v)),(v=>{throw Aa("RestConnection",`RPC '${n}' ${d} failed with error: `,v,"url: ",h,"request:",o),v}))}Lo(n,i,o,a,u,d){return this.Mo(n,i,o,a,u)}Oo(n,i,o){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ma})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((a,u)=>n[u]=a)),o&&o.headers.forEach(((a,u)=>n[u]=a))}xo(n,i){const o=WM[n];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,o){const a=Lm();return new Promise(((u,d)=>{const h=new pS;h.setWithCredentials(!0),h.listenOnce(gS.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case hd.NO_ERROR:const v=h.getResponseJson();pe(sn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),u(v);break;case hd.TIMEOUT:pe(sn,`RPC '${e}' ${a} timed out`),d(new he(ie.DEADLINE_EXCEEDED,"Request time out"));break;case hd.HTTP_ERROR:const E=h.getStatus();if(pe(sn,`RPC '${e}' ${a} failed with status:`,E,"response text:",h.getResponseText()),E>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const w=S==null?void 0:S.error;if(w&&w.status&&w.message){const V=(function(z){const X=z.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(X)>=0?X:ie.UNKNOWN})(w.status);d(new he(V,w.message))}else d(new he(ie.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new he(ie.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{pe(sn,`RPC '${e}' ${a} completed.`)}}));const p=JSON.stringify(o);pe(sn,`RPC '${e}' ${a} sending request:`,o),h.send(n,"POST",p,i,15)}))}Bo(e,n,i){const o=Lm(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=vS(),d=_S(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const v=a.join("");pe(sn,`Creating RPC '${e}' stream ${o}: ${v}`,h);const E=u.createWebChannel(v,h);let S=!1,w=!1;const V=new XM({Io:z=>{w?pe(sn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(S||(pe(sn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),pe(sn,`RPC '${e}' stream ${o} sending:`,z),E.send(z))},To:()=>E.close()}),F=(z,X,ne)=>{z.listen(X,(Q=>{try{ne(Q)}catch(re){setTimeout((()=>{throw re}),0)}}))};return F(E,Jl.EventType.OPEN,(()=>{w||(pe(sn,`RPC '${e}' stream ${o} transport opened.`),V.yo())})),F(E,Jl.EventType.CLOSE,(()=>{w||(w=!0,pe(sn,`RPC '${e}' stream ${o} transport closed`),V.So())})),F(E,Jl.EventType.ERROR,(z=>{w||(w=!0,Aa(sn,`RPC '${e}' stream ${o} transport errored:`,z),V.So(new he(ie.UNAVAILABLE,"The operation could not be completed")))})),F(E,Jl.EventType.MESSAGE,(z=>{var X;if(!w){const ne=z.data[0];tt(!!ne);const Q=ne,re=Q.error||((X=Q[0])===null||X===void 0?void 0:X.error);if(re){pe(sn,`RPC '${e}' stream ${o} received error:`,re);const ce=re.status;let oe=(function(N){const k=Nt[N];if(k!==void 0)return YS(k)})(ce),M=re.message;oe===void 0&&(oe=ie.INTERNAL,M="Unknown error status: "+ce+" with message "+re.message),w=!0,V.So(new he(oe,M)),E.close()}else pe(sn,`RPC '${e}' stream ${o} received:`,ne),V.bo(ne)}})),F(d,yS.STAT_EVENT,(z=>{z.stat===Qm.PROXY?pe(sn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Qm.NOPROXY&&pe(sn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.wo()}),0),V}}function Vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t){return new uM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,i=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n,i,o,a,u,d,h){this.ui=e,this.Ho=i,this.Jo=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new sx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(fs(n.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===n&&this.P_(i,o)}),(i=>{e((()=>{const o=new he(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eD extends rx{constructor(e,n,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,u),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=fM(this.serializer,e),i=(function(a){if(!("targetChange"in a))return be.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?Ii(u.readTime):be.min()})(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=op(this.serializer),n.addTarget=(function(a,u){let d;const h=u.target;if(d=ep(h)?{documents:pM(a,h)}:{query:gM(a,h)._t},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=$S(a,u.resumeToken);const p=ip(a,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(be.min())>0){d.readTime=Vd(a,u.snapshotVersion.toTimestamp());const p=ip(a,u.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const i=_M(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=op(this.serializer),n.removeTarget=e,this.a_(n)}}class tD extends rx{constructor(e,n,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return tt(!!e.streamToken),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=mM(e.writeResults,e.commitTime),i=Ii(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=op(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>hM(this.serializer,i)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD extends class{}{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new he(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,sp(n,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(ie.UNKNOWN,a.toString())}))}Lo(e,n,i,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Lo(e,sp(n,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(ie.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class iD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fs(n),this.D_=!1):pe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,i,o,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{i.enqueueAndForget((async()=>{go(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await(async function(h){const p=Re(h);p.L_.add(4),await xu(p),p.q_.set("Unknown"),p.L_.delete(4),await af(p)})(this))}))})),this.q_=new iD(i,o)}}async function af(t){if(go(t))for(const e of t.B_)await e(!0)}async function xu(t){for(const e of t.B_)await e(!1)}function ox(t,e){const n=Re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),tg(n)?eg(n):Ua(n).r_()&&Zp(n,e))}function Xp(t,e){const n=Re(t),i=Ua(n);n.N_.delete(e),i.r_()&&ax(n,e),n.N_.size===0&&(i.r_()?i.o_():go(n)&&n.q_.set("Unknown"))}function Zp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ua(t).A_(e)}function ax(t,e){t.Q_.xe(e),Ua(t).R_(e)}function eg(t){t.Q_=new rM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ua(t).start(),t.q_.v_()}function tg(t){return go(t)&&!Ua(t).n_()&&t.N_.size>0}function go(t){return Re(t).L_.size===0}function lx(t){t.Q_=void 0}async function rD(t){t.q_.set("Online")}async function oD(t){t.N_.forEach(((e,n)=>{Zp(t,e)}))}async function aD(t,e){lx(t),tg(t)?(t.q_.M_(e),eg(t)):t.q_.set("Unknown")}async function lD(t,e,n){if(t.q_.set("Online"),e instanceof JS&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.N_.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.N_.delete(d),o.Q_.removeTarget(d))})(t,e)}catch(i){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Od(t,i)}else if(e instanceof gd?t.Q_.Ke(e):e instanceof jS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(be.min()))try{const i=await ix(t.localStore);n.compareTo(i)>=0&&await(function(a,u){const d=a.Q_.rt(u);return d.targetChanges.forEach(((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const v=a.N_.get(p);v&&a.N_.set(p,v.withResumeToken(h.resumeToken,u))}})),d.targetMismatches.forEach(((h,p)=>{const v=a.N_.get(h);if(!v)return;a.N_.set(h,v.withResumeToken(Zt.EMPTY_BYTE_STRING,v.snapshotVersion)),ax(a,h);const E=new fr(v.target,h,p,v.sequenceNumber);Zp(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(i){pe("RemoteStore","Failed to raise snapshot:",i),await Od(t,i)}}async function Od(t,e,n){if(!Eu(e))throw e;t.L_.add(1),await xu(t),t.q_.set("Offline"),n||(n=()=>ix(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{pe("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await af(t)}))}function ux(t,e){return e().catch((n=>Od(t,n,e)))}async function lf(t){const e=Re(t),n=Tr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;uD(e);)try{const o=await YM(e.localStore,i);if(o===null){e.O_.length===0&&n.o_();break}i=o.batchId,cD(e,o)}catch(o){await Od(e,o)}cx(e)&&dx(e)}function uD(t){return go(t)&&t.O_.length<10}function cD(t,e){t.O_.push(e);const n=Tr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function cx(t){return go(t)&&!Tr(t).n_()&&t.O_.length>0}function dx(t){Tr(t).start()}async function dD(t){Tr(t).p_()}async function fD(t){const e=Tr(t);for(const n of t.O_)e.m_(n.mutations)}async function hD(t,e,n){const i=t.O_.shift(),o=Yp.from(i,e,n);await ux(t,(()=>t.remoteSyncer.applySuccessfulWrite(o))),await lf(t)}async function mD(t,e){e&&Tr(t).V_&&await(async function(i,o){if((function(u){return nM(u)&&u!==ie.ABORTED})(o.code)){const a=i.O_.shift();Tr(i).s_(),await ux(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await lf(i)}})(t,e),cx(t)&&dx(t)}async function cT(t,e){const n=Re(t);n.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const i=go(n);n.L_.add(3),await xu(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await af(n)}async function pD(t,e){const n=Re(t);e?(n.L_.delete(2),await af(n)):e||(n.L_.add(2),await xu(n),n.q_.set("Unknown"))}function Ua(t){return t.K_||(t.K_=(function(n,i,o){const a=Re(n);return a.w_(),new eD(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(t.datastore,t.asyncQueue,{Eo:rD.bind(null,t),Ro:oD.bind(null,t),mo:aD.bind(null,t),d_:lD.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),tg(t)?eg(t):t.q_.set("Unknown")):(await t.K_.stop(),lx(t))}))),t.K_}function Tr(t){return t.U_||(t.U_=(function(n,i,o){const a=Re(n);return a.w_(),new tD(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:dD.bind(null,t),mo:mD.bind(null,t),f_:fD.bind(null,t),g_:hD.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await lf(t)):(await t.U_.stop(),t.O_.length>0&&(pe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n,i,o,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,a){const u=Date.now()+i,d=new ng(e,n,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ig(t,e){if(fs("AsyncQueue",`${e}: ${t}`),Eu(t))return new he(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ve.comparator(n.key,i.key):(n,i)=>ve.comparator(n.key,i.key),this.keyedMap=$l(),this.sortedSet=new mt(this.comparator)}static emptySet(e){return new pa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new pa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.W_=new mt(ve.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):we():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Ia{constructor(e,n,i,o,a,u,d,h,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,o,a){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new Ia(e,n,pa.emptySet(n),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class yD{constructor(){this.queries=fT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const o=Re(n),a=o.queries;o.queries=fT(),a.forEach(((u,d)=>{for(const h of d.j_)h.onError(i)}))})(this,new he(ie.ABORTED,"Firestore shutting down"))}}function fT(){return new ka((t=>PS(t)),ef)}async function _D(t,e){const n=Re(t);let i=3;const o=e.query;let a=n.queries.get(o);a?!a.H_()&&e.J_()&&(i=2):(a=new gD,i=e.J_()?0:1);try{switch(i){case 0:a.z_=await n.onListen(o,!0);break;case 1:a.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(u){const d=ig(u,`Initialization of query '${la(e.query)}' failed`);return void e.onError(d)}n.queries.set(o,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&sg(n)}async function vD(t,e){const n=Re(t),i=e.query;let o=3;const a=n.queries.get(i);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function TD(t,e){const n=Re(t);let i=!1;for(const o of e){const a=o.query,u=n.queries.get(a);if(u){for(const d of u.j_)d.X_(o)&&(i=!0);u.z_=o}}i&&sg(n)}function ED(t,e,n){const i=Re(t),o=i.queries.get(e);if(o)for(const a of o.j_)a.onError(n);i.queries.delete(e)}function sg(t){t.Y_.forEach((e=>{e.next()}))}var lp,hT;(hT=lp||(lp={})).ea="default",hT.Cache="cache";class AD{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ia(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.key=e}}class hx{constructor(e){this.key=e}}class SD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=qe(),this.mutatedKeys=qe(),this.Aa=kS(e),this.Ra=new pa(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new dT,o=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,u=o,d=!1;const h=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const S=o.get(v),w=tf(this.query,E)?E:null,V=!!S&&this.mutatedKeys.has(S.key),F=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let z=!1;S&&w?S.data.isEqual(w.data)?V!==F&&(i.track({type:3,doc:w}),z=!0):this.ga(S,w)||(i.track({type:2,doc:w}),z=!0,(h&&this.Aa(w,h)>0||p&&this.Aa(w,p)<0)&&(d=!0)):!S&&w?(i.track({type:0,doc:w}),z=!0):S&&!w&&(i.track({type:1,doc:S}),z=!0,(h||p)&&(d=!0)),z&&(w?(u=u.add(w),a=F?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{Ra:u,fa:i,ns:d,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((v,E)=>(function(w,V){const F=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return F(w)-F(V)})(v.type,E.type)||this.Aa(v.doc,E.doc))),this.pa(i),o=o!=null&&o;const d=n&&!o?this.ya():[],h=this.da.size===0&&this.current&&!o?1:0,p=h!==this.Ea;return this.Ea=h,u.length!==0||p?{snapshot:new Ia(this.query,e.Ra,a,u,e.mutatedKeys,h===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new dT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=qe(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const n=[];return e.forEach((i=>{this.da.has(i)||n.push(new hx(i))})),this.da.forEach((i=>{e.has(i)||n.push(new fx(i))})),n}ba(e){this.Ta=e.Ts,this.da=qe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ia.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class xD{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class CD{constructor(e){this.key=e,this.va=!1}}class wD{constructor(e,n,i,o,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new ka((d=>PS(d)),ef),this.Ma=new Map,this.xa=new Set,this.Oa=new mt(ve.comparator),this.Na=new Map,this.La=new $p,this.Ba={},this.ka=new Map,this.qa=wa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ID(t,e,n=!0){const i=vx(t);let o;const a=i.Fa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await mx(i,e,n,!0),o}async function bD(t,e){const n=vx(t);await mx(n,e,!0,!1)}async function mx(t,e,n,i){const o=await jM(t.localStore,wi(e)),a=o.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let d;return i&&(d=await RD(t,e,a,u==="current",o.resumeToken)),t.isPrimaryClient&&n&&ox(t.remoteStore,o),d}async function RD(t,e,n,i,o){t.Ka=(E,S,w)=>(async function(F,z,X,ne){let Q=z.view.ma(X);Q.ns&&(Q=await aT(F.localStore,z.query,!1).then((({documents:M})=>z.view.ma(M,Q))));const re=ne&&ne.targetChanges.get(z.targetId),ce=ne&&ne.targetMismatches.get(z.targetId)!=null,oe=z.view.applyChanges(Q,F.isPrimaryClient,re,ce);return pT(F,z.targetId,oe.wa),oe.snapshot})(t,E,S,w);const a=await aT(t.localStore,e,!0),u=new SD(e,a.Ts),d=u.ma(a.documents),h=Su.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",o),p=u.applyChanges(d,t.isPrimaryClient,h);pT(t,n,p.wa);const v=new xD(e,n,u);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function ND(t,e,n){const i=Re(t),o=i.Fa.get(e),a=i.Ma.get(o.targetId);if(a.length>1)return i.Ma.set(o.targetId,a.filter((u=>!ef(u,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await ap(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Xp(i.remoteStore,o.targetId),up(i,o.targetId)})).catch(Tu)):(up(i,o.targetId),await ap(i.localStore,o.targetId,!0))}async function MD(t,e){const n=Re(t),i=n.Fa.get(e),o=n.Ma.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Xp(n.remoteStore,i.targetId))}async function DD(t,e,n){const i=qD(t);try{const o=await(function(u,d){const h=Re(u),p=Ut.now(),v=d.reduce(((w,V)=>w.add(V.key)),qe());let E,S;return h.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let V=hs(),F=qe();return h.cs.getEntries(w,v).next((z=>{V=z,V.forEach(((X,ne)=>{ne.isValidDocument()||(F=F.add(X))}))})).next((()=>h.localDocuments.getOverlayedDocuments(w,V))).next((z=>{E=z;const X=[];for(const ne of d){const Q=W2(ne,E.get(ne.key).overlayedDocument);Q!=null&&X.push(new po(ne.key,Q,xS(Q.value.mapValue),as.exists(!0)))}return h.mutationQueue.addMutationBatch(w,p,X,d)})).next((z=>{S=z;const X=z.applyToLocalDocumentSet(E,F);return h.documentOverlayCache.saveOverlays(w,z.batchId,X)}))})).then((()=>({batchId:S.batchId,changes:LS(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,h){let p=u.Ba[u.currentUser.toKey()];p||(p=new mt(Je)),p=p.insert(d,h),u.Ba[u.currentUser.toKey()]=p})(i,o.batchId,n),await Cu(i,o.changes),await lf(i.remoteStore)}catch(o){const a=ig(o,"Failed to persist write");n.reject(a)}}async function px(t,e){const n=Re(t);try{const i=await HM(n.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=n.Na.get(a);u&&(tt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.va=!0:o.modifiedDocuments.size>0?tt(u.va):o.removedDocuments.size>0&&(tt(u.va),u.va=!1))})),await Cu(n,i,e)}catch(i){await Tu(i)}}function mT(t,e,n){const i=Re(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Fa.forEach(((a,u)=>{const d=u.view.Z_(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const h=Re(u);h.onlineState=d;let p=!1;h.queries.forEach(((v,E)=>{for(const S of E.j_)S.Z_(d)&&(p=!0)})),p&&sg(h)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function PD(t,e,n){const i=Re(t);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Na.get(e),a=o&&o.key;if(a){let u=new mt(ve.comparator);u=u.insert(a,on.newNoDocument(a,be.min()));const d=qe().add(a),h=new rf(be.min(),new Map,new mt(Je),u,d);await px(i,h),i.Oa=i.Oa.remove(a),i.Na.delete(e),rg(i)}else await ap(i.localStore,e,!1).then((()=>up(i,e,n))).catch(Tu)}async function kD(t,e){const n=Re(t),i=e.batch.batchId;try{const o=await GM(n.localStore,e);yx(n,i,null),gx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Cu(n,o)}catch(o){await Tu(o)}}async function UD(t,e,n){const i=Re(t);try{const o=await(function(u,d){const h=Re(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return h.mutationQueue.lookupMutationBatch(p,d).next((E=>(tt(E!==null),v=E.keys(),h.mutationQueue.removeMutationBatch(p,E)))).next((()=>h.mutationQueue.performConsistencyCheck(p))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>h.localDocuments.getDocuments(p,v)))}))})(i.localStore,e);yx(i,e,n),gx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Cu(i,o)}catch(o){await Tu(o)}}function gx(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function yx(t,e,n){const i=Re(t);let o=i.Ba[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(n?a.reject(n):a.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function up(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((i=>{t.La.containsKey(i)||_x(t,i)}))}function _x(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Xp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),rg(t))}function pT(t,e,n){for(const i of n)i instanceof fx?(t.La.addReference(i.key,e),LD(t,i)):i instanceof hx?(pe("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||_x(t,i.key)):we()}function LD(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(pe("SyncEngine","New document in limbo: "+n),t.xa.add(i),rg(t))}function rg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ve(dt.fromString(e)),i=t.qa.next();t.Na.set(i,new CD(n)),t.Oa=t.Oa.insert(n,i),ox(t.remoteStore,new fr(wi(MS(n.path)),i,"TargetPurposeLimboResolution",qp.oe))}}async function Cu(t,e,n){const i=Re(t),o=[],a=[],u=[];i.Fa.isEmpty()||(i.Fa.forEach(((d,h)=>{u.push(i.Ka(h,e,n).then((p=>{var v;if((p||n)&&i.isPrimaryClient){const E=p?!p.fromCache:(v=n==null?void 0:n.targetChanges.get(h.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(h.targetId,E?"current":"not-current")}if(p){o.push(p);const E=Wp.Wi(h.targetId,p);a.push(E)}})))})),await Promise.all(u),i.Ca.d_(o),await(async function(h,p){const v=Re(h);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(p,(S=>se.forEach(S.$i,(w=>v.persistence.referenceDelegate.addReference(E,S.targetId,w))).next((()=>se.forEach(S.Ui,(w=>v.persistence.referenceDelegate.removeReference(E,S.targetId,w)))))))))}catch(E){if(!Eu(E))throw E;pe("LocalStore","Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const w=v.os.get(S),V=w.snapshotVersion,F=w.withLastLimboFreeSnapshotVersion(V);v.os=v.os.insert(S,F)}}})(i.localStore,a))}async function VD(t,e){const n=Re(t);if(!n.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const i=await nx(n.localStore,e);n.currentUser=e,(function(a,u){a.ka.forEach((d=>{d.forEach((h=>{h.reject(new he(ie.CANCELLED,u))}))})),a.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cu(n,i.hs)}}function OD(t,e){const n=Re(t),i=n.Na.get(e);if(i&&i.va)return qe().add(i.key);{let o=qe();const a=n.Ma.get(e);if(!a)return o;for(const u of a){const d=n.Fa.get(u);o=o.unionWith(d.view.Va)}return o}}function vx(t){const e=Re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=px.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PD.bind(null,e),e.Ca.d_=TD.bind(null,e.eventManager),e.Ca.$a=ED.bind(null,e.eventManager),e}function qD(t){const e=Re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UD.bind(null,e),e}class qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=of(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return zM(this.persistence,new FM,e.initialUser,this.serializer)}Ga(e){return new VM(Qp.Zr,this.serializer)}Wa(e){return new $M}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qd.provider={build:()=>new qd};class cp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=VD.bind(null,this.syncEngine),await pD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yD})()}createDatastore(e){const n=of(e.databaseInfo.databaseId),i=(function(a){return new ZM(a)})(e.databaseInfo);return(function(a,u,d,h){return new nD(a,u,d,h)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,a,u,d){return new sD(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>mT(this.syncEngine,n,0)),(function(){return uT.D()?new uT:new QM})())}createSyncEngine(e,n){return(function(o,a,u,d,h,p,v){const E=new wD(o,a,u,d,h,p);return v&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const a=Re(o);pe("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await xu(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}cp.provider={build:()=>new cp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n,i,o,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=ES.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{pe("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(pe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ig(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Om(t,e){t.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async o=>{i.isEqual(o)||(await nx(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function gT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zD(t);pe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>cT(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,o)=>cT(e.remoteStore,o))),t._onlineComponents=e}async function zD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Om(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Aa("Error using user provided cache. Falling back to memory cache: "+n),await Om(t,new qd)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),await Om(t,new qd);return t._offlineComponents}async function Tx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),await gT(t,t._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),await gT(t,new cp))),t._onlineComponents}function GD(t){return Tx(t).then((e=>e.syncEngine))}async function HD(t){const e=await Tx(t),n=e.eventManager;return n.onListen=ID.bind(null,e.syncEngine),n.onUnlisten=ND.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MD.bind(null,e.syncEngine),n}function KD(t,e,n={}){const i=new mr;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,h,p){const v=new FD({next:S=>{v.Za(),u.enqueueAndForget((()=>vD(a,E))),S.fromCache&&h.source==="server"?p.reject(new he(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new AD(d,v,{includeMetadataChanges:!0,_a:!0});return _D(a,E)})(await HD(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t,e,n){if(!n)throw new he(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YD(t,e,n,i){if(e===!0&&i===!0)throw new he(ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _T(t){if(!ve.isDocumentKey(t))throw new he(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vT(t){if(ve.isDocumentKey(t))throw new he(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we()}function Fd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uf(t);throw new he(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new he(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ex((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new he(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new he(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new he(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cf{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TT(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new o2;switch(i.type){case"firstParty":return new c2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=yT.get(n);i&&(pe("ComponentProvider","Removing Datastore"),yT.delete(n),i.terminate())})(this),Promise.resolve()}}function jD(t,e,n,i={}){var o;const a=(t=Fd(t,cf))._getSettings(),u=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Aa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),i.mockUserToken){let d,h;if(typeof i.mockUserToken=="string")d=i.mockUserToken,h=rn.MOCK_USER;else{d=vA(i.mockUserToken,(o=t._app)===null||o===void 0?void 0:o.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new he(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new rn(p)}t._authCredentials=new a2(new TS(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new yo(this.firestore,e,this._query)}}class Qn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class pr extends yo{constructor(e,n,i){super(e,n,MS(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new ve(e))}withConverter(e){return new pr(this.firestore,e,this._path)}}function df(t,e,...n){if(t=Dt(t),Ax("collection","path",e),t instanceof cf){const i=dt.fromString(e,...n);return vT(i),new pr(t,null,i)}{if(!(t instanceof Qn||t instanceof pr))throw new he(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(dt.fromString(e,...n));return vT(i),new pr(t.firestore,null,i)}}function JD(t,e,...n){if(t=Dt(t),arguments.length===1&&(e=ES.newId()),Ax("doc","path",e),t instanceof cf){const i=dt.fromString(e,...n);return _T(i),new Qn(t,null,new ve(i))}{if(!(t instanceof Qn||t instanceof pr))throw new he(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(dt.fromString(e,...n));return _T(i),new Qn(t.firestore,t instanceof pr?t.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new sx(this,"async_queue_retry"),this.Vu=()=>{const i=Vm();i&&pe("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new mr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Eu(e))throw e;pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d})(i);throw fs("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=ng.createAndSchedule(this,e,n,i,(a=>this.yu(a)));return this.Tu.push(o),o}fu(){this.Eu&&we()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class og extends cf{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new ET,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ET(e),this._firestoreClient=void 0,await e}}}function $D(t,e){const n=typeof t=="object"?t:$d(),i=typeof t=="string"?t:"(default)",o=Ra(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=gA("firestore");a&&jD(o,...a)}return o}function Sx(t){if(t._terminated)throw new he(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||QD(t),t._firestoreClient}function QD(t){var e,n,i;const o=t._freezeSettings(),a=(function(d,h,p,v){return new S2(d,h,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Ex(v.experimentalLongPollingOptions),v.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,o);t._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),t._firestoreClient=new BD(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ba(Zt.fromBase64String(e))}catch(n){throw new he(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ba(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=/^__.*__$/;class XD{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new po(e,this.data,this.fieldMask,n,this.fieldTransforms):new Au(e,this.data,n,this.fieldTransforms)}}function Cx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class cg{constructor(e,n,i,o,a,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new cg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Bd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Cx(this.Cu)&&WD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ZD{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||of(e)}Qu(e,n,i,o=!1){return new cg({Cu:e,methodName:n,qu:i,path:Wt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wx(t){const e=t._freezeSettings(),n=of(t._databaseId);return new ZD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eP(t,e,n,i,o,a={}){const u=t.Qu(a.merge||a.mergeFields?2:0,e,n,o);Rx("Data must be an object, but it was:",u,i);const d=Ix(i,u);let h,p;if(a.merge)h=new oi(u.fieldMask),p=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const S=nP(e,E,n);if(!u.contains(S))throw new he(ie.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);sP(v,S)||v.push(S)}h=new oi(v),p=u.fieldTransforms.filter((E=>h.covers(E.field)))}else h=null,p=u.fieldTransforms;return new XD(new jn(d),h,p)}function tP(t,e,n,i=!1){return dg(n,t.Qu(i?4:3,e))}function dg(t,e){if(bx(t=Dt(t)))return Rx("Unsupported field value:",e,t),Ix(t,e);if(t instanceof xx)return(function(i,o){if(!Cx(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let h=dg(d,o.Lu(u));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),u++}return{arrayValue:{values:a}}})(t,e)}return(function(i,o){if((i=Dt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return K2(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Ut.fromDate(i);return{timestampValue:Vd(o.serializer,a)}}if(i instanceof Ut){const a=new Ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vd(o.serializer,a)}}if(i instanceof lg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ba)return{bytesValue:$S(o.serializer,i._byteString)};if(i instanceof Qn){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Jp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof ug)return(function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw d.Bu("VectorValues must only contain numeric values.");return Kp(d.serializer,h)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${uf(i)}`)})(t,e)}function Ix(t,e){const n={};return AS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Da(t,((i,o)=>{const a=dg(o,e.Mu(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function bx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ut||t instanceof lg||t instanceof ba||t instanceof Qn||t instanceof xx||t instanceof ug)}function Rx(t,e,n){if(!bx(n)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(n)){const i=uf(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function nP(t,e,n){if((e=Dt(e))instanceof ag)return e._internalPath;if(typeof e=="string")return Nx(t,e);throw Bd("Field path arguments must be of type string or ",t,!1,void 0,n)}const iP=new RegExp("[~\\*/\\[\\]]");function Nx(t,e,n){if(e.search(iP)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ag(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bd(t,e,n,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(a||u)&&(h+=" (found",a&&(h+=` in field ${i}`),u&&(h+=` in document ${o}`),h+=")"),new he(ie.INVALID_ARGUMENT,d+t+h)}function sP(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,n,i,o,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ff("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rP extends Mx{data(){return super.data()}}function ff(t,e){return typeof e=="string"?Nx(t,e):e instanceof ag?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fg{}class Dx extends fg{}function Px(t,e,...n){let i=[];e instanceof fg&&i.push(e),i=i.concat(n),(function(a){const u=a.filter((h=>h instanceof hg)).length,d=a.filter((h=>h instanceof hf)).length;if(u>1||u>0&&d>0)throw new he(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)t=o._apply(t);return t}class hf extends Dx{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new hf(e,n,i)}_apply(e){const n=this._parse(e);return Lx(e._query,n),new yo(e.firestore,e.converter,tp(e._query,n))}_parse(e){const n=wx(e.firestore);return(function(a,u,d,h,p,v,E){let S;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){ST(E,v);const w=[];for(const V of E)w.push(AT(h,a,V));S={arrayValue:{values:w}}}else S=AT(h,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||ST(E,v),S=tP(d,u,E,v==="in"||v==="not-in");return Mt.create(p,v,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function kx(t,e,n){const i=e,o=ff("where",t);return hf._create(o,i,n)}class hg extends fg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:ui.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const h of d)Lx(u,h),u=tp(u,h)})(e._query,n),new yo(e.firestore,e.converter,tp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mg extends Dx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mg(e,n)}_apply(e){const n=(function(o,a,u){if(o.startAt!==null)throw new he(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fu(a,u)})(e._query,this._field,this._direction);return new yo(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new Pa(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Ux(t,e="asc"){const n=e,i=ff("orderBy",t);return mg._create(i,n)}function AT(t,e,n){if(typeof(n=Dt(n))=="string"){if(n==="")throw new he(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DS(e)&&n.indexOf("/")!==-1)throw new he(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(dt.fromString(n));if(!ve.isDocumentKey(i))throw new he(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return H0(t,new ve(i))}if(n instanceof Qn)return H0(t,n._key);throw new he(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uf(n)}.`)}function ST(t,e){if(!Array.isArray(t)||t.length===0)throw new he(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Lx(t,e){const n=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new he(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aP{convertValue(e,n="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Da(e,((o,a)=>{i[o]=this.convertValue(a,n)})),i}convertVectorValue(e){var n,i,o;const a=(o=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>xt(u.doubleValue)));return new ug(a)}convertGeoPoint(e){return new lg(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Bp(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const n=vr(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=dt.fromString(e);tt(tx(i));const o=new cu(i.get(1),i.get(3)),a=new ve(i.popFirst(5));return o.isEqual(n)||fs(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uP extends Mx{constructor(e,n,i,o,a,u){super(e,n,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ff("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class yd extends uP{data(e={}){return super.data(e)}}class cP{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new od(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new yd(this._firestore,this._userDataWriter,i.key,i,new od(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const h=new yd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new od(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const h=new yd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new od(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,v=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:dP(d.type),doc:h,oldIndex:p,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function dP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}class fP extends aP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,n)}}function Vx(t){t=Fd(t,yo);const e=Fd(t.firestore,og),n=Sx(e),i=new fP(e);return oP(t._query),KD(n,t._query).then((o=>new cP(e,i,t,o)))}function Ox(t,e){const n=Fd(t.firestore,og),i=JD(t),o=lP(t.converter,e);return hP(n,[eP(wx(t.firestore),"addDoc",i._key,o,t.converter!==null,{}).toMutation(i._key,as.exists(!1))]).then((()=>i))}function hP(t,e){return(function(i,o){const a=new mr;return i.asyncQueue.enqueueAndForget((async()=>DD(await GD(i),o,a))),a.promise})(Sx(t),e)}(function(e,n=!0){(function(o){Ma=o})(ps),cs(new ls("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new og(new l2(i.getProvider("auth-internal")),new f2(i.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new he(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(p.options.projectId,v)})(u,o),u);return a=Object.assign({useFetchStreams:n},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),kn(q0,"4.7.3",e),kn(q0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="firebasestorage.googleapis.com",Fx="storageBucket",mP=120*1e3,pP=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt extends ci{constructor(e,n,i=0){super(qm(e),`Firebase Storage: ${n} (${qm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vt||(vt={}));function qm(t){return"storage/"+t}function pg(){const t="An unknown error occurred, please check the error payload for server response.";return new Tt(vt.UNKNOWN,t)}function gP(t){return new Tt(vt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function yP(t){return new Tt(vt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _P(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tt(vt.UNAUTHENTICATED,t)}function vP(){return new Tt(vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function TP(t){return new Tt(vt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function EP(){return new Tt(vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function AP(){return new Tt(vt.CANCELED,"User canceled the upload/download.")}function SP(t){return new Tt(vt.INVALID_URL,"Invalid URL '"+t+"'.")}function xP(t){return new Tt(vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function CP(){return new Tt(vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Fx+"' property when initializing the app?")}function wP(){return new Tt(vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function IP(){return new Tt(vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function bP(t){return new Tt(vt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function dp(t){return new Tt(vt.INVALID_ARGUMENT,t)}function Bx(){return new Tt(vt.APP_DELETED,"The Firebase app was deleted.")}function RP(t){return new Tt(vt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nu(t,e){return new Tt(vt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Gl(t){throw new Tt(vt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Pn.makeFromUrl(e,n)}catch{return new Pn(e,"")}if(i.path==="")return i;throw xP(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),h={bucket:1,path:3};function p(re){re.path_=decodeURIComponent(re.path)}const v="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",w=new RegExp(`^https?://${E}/${v}/b/${o}/o${S}`,"i"),V={bucket:1,path:3},F=n===qx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,z="([^?#]*)",X=new RegExp(`^https?://${F}/${o}/${z}`,"i"),Q=[{regex:d,indices:h,postModify:a},{regex:w,indices:V,postModify:p},{regex:X,indices:{bucket:1,path:2},postModify:p}];for(let re=0;re<Q.length;re++){const ce=Q[re],oe=ce.regex.exec(e);if(oe){const M=oe[ce.indices.bucket];let R=oe[ce.indices.path];R||(R=""),i=new Pn(M,R),ce.postModify(i);break}}if(i==null)throw SP(e);return i}}class NP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t,e,n){let i=1,o=null,a=null,u=!1,d=0;function h(){return d===2}let p=!1;function v(...z){p||(p=!0,e.apply(null,z))}function E(z){o=setTimeout(()=>{o=null,t(w,h())},z)}function S(){a&&clearTimeout(a)}function w(z,...X){if(p){S();return}if(z){S(),v.call(null,z,...X);return}if(h()||u){S(),v.call(null,z,...X);return}i<64&&(i*=2);let Q;d===1?(d=2,Q=0):Q=(i+Math.random())*1e3,E(Q)}let V=!1;function F(z){V||(V=!0,S(),!p&&(o!==null?(z||(d=2),clearTimeout(o),E(0)):z||(d=1)))}return E(0),a=setTimeout(()=>{u=!0,F(!0)},n),F}function DP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t){return t!==void 0}function kP(t){return typeof t=="object"&&!Array.isArray(t)}function gg(t){return typeof t=="string"||t instanceof String}function xT(t){return yg()&&t instanceof Blob}function yg(){return typeof Blob<"u"}function CT(t,e,n,i){if(i<e)throw dp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw dp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function zx(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const o=e(i)+"="+e(t[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var oo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(oo||(oo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t,e){const n=t>=500&&t<600,o=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n,i,o,a,u,d,h,p,v,E,S=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=v,this.connectionFactory_=E,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,V)=>{this.resolve_=w,this.reject_=V,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new ad(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const h=d.loaded,p=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===oo.NO_ERROR,h=a.getStatus();if(!d||UP(h,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===oo.ABORT;i(!1,new ad(!1,null,v));return}const p=this.successCodes_.indexOf(h)!==-1;i(!0,new ad(p,a))})},n=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const h=this.callback_(d,d.getResponse());PP(h)?a(h):a()}catch(h){u(h)}else if(d!==null){const h=pg();h.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,h)):u(h)}else if(o.canceled){const h=this.appDelete_?Bx():AP();u(h)}else{const h=EP();u(h)}};this.canceled_?n(!1,new ad(!1,null,!0)):this.backoffId_=MP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&DP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ad{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function VP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function OP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function FP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function BP(t,e,n,i,o,a,u=!0){const d=zx(t.urlParams),h=t.url+d,p=Object.assign({},t.headers);return qP(p,e),VP(p,n),OP(p,a),FP(p,i),new LP(h,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function GP(...t){const e=zP();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(yg())return new Blob(t);throw new Tt(vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function HP(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t){if(typeof atob>"u")throw bP("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Fm{constructor(e,n){this.data=e,this.contentType=n||null}}function Gx(t,e){switch(t){case ai.RAW:return new Fm(Hx(e));case ai.BASE64:case ai.BASE64URL:return new Fm(Kx(t,e));case ai.DATA_URL:return new Fm(jP(e),JP(e))}throw pg()}function Hx(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=i,u=t.charCodeAt(++n);i=65536|(a&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function YP(t){let e;try{e=decodeURIComponent(t)}catch{throw nu(ai.DATA_URL,"Malformed data URL.")}return Hx(e)}function Kx(t,e){switch(t){case ai.BASE64:{const o=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(o||a)throw nu(t,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case ai.BASE64URL:{const o=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(o||a)throw nu(t,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=KP(e)}catch(o){throw o.message.includes("polyfill")?o:nu(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}class Yx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw nu(ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=$P(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function jP(t){const e=new Yx(t);return e.base64?Kx(ai.BASE64,e.rest):YP(e.rest)}function JP(t){return new Yx(t).contentType}function $P(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n){let i=0,o="";xT(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(xT(this.data_)){const i=this.data_,o=HP(i,e,n);return o===null?null:new dr(o)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new dr(i,!0)}}static getBlob(...e){if(yg()){const n=e.map(i=>i instanceof dr?i.data_:i);return new dr(GP.apply(null,n))}else{const n=e.map(u=>gg(u)?Gx(ai.RAW,u).data:u.data_);let i=0;n.forEach(u=>{i+=u.byteLength});const o=new Uint8Array(i);let a=0;return n.forEach(u=>{for(let d=0;d<u.length;d++)o[a++]=u[d]}),new dr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t){let e;try{e=JSON.parse(t)}catch{return null}return kP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function WP(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function Jx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t,e){return e}class pn{constructor(e,n,i,o){this.server=e,this.local=n||e,this.writable=!!i,this.xform=o||XP}}let ld=null;function ZP(t){return!gg(t)||t.length<2?t:Jx(t)}function $x(){if(ld)return ld;const t=[];t.push(new pn("bucket")),t.push(new pn("generation")),t.push(new pn("metageneration")),t.push(new pn("name","fullPath",!0));function e(a,u){return ZP(u)}const n=new pn("name");n.xform=e,t.push(n);function i(a,u){return u!==void 0?Number(u):u}const o=new pn("size");return o.xform=i,t.push(o),t.push(new pn("timeCreated")),t.push(new pn("updated")),t.push(new pn("md5Hash",null,!0)),t.push(new pn("cacheControl",null,!0)),t.push(new pn("contentDisposition",null,!0)),t.push(new pn("contentEncoding",null,!0)),t.push(new pn("contentLanguage",null,!0)),t.push(new pn("contentType",null,!0)),t.push(new pn("metadata","customMetadata",!0)),ld=t,ld}function ek(t,e){function n(){const i=t.bucket,o=t.fullPath,a=new Pn(i,o);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function tk(t,e,n){const i={};i.type="file";const o=n.length;for(let a=0;a<o;a++){const u=n[a];i[u.local]=u.xform(i,e[u.server])}return ek(i,t),i}function Qx(t,e,n){const i=jx(e);return i===null?null:tk(t,i,n)}function nk(t,e,n,i){const o=jx(e);if(o===null||!gg(o.downloadTokens))return null;const a=o.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(p=>{const v=t.bucket,E=t.fullPath,S="/b/"+u(v)+"/o/"+u(E),w=_g(S,n,i),V=zx({alt:"media",token:p});return w+V})[0]}function ik(t,e){const n={},i=e.length;for(let o=0;o<i;o++){const a=e[o];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class Wx{constructor(e,n,i,o){this.url=e,this.method=n,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t){if(!t)throw pg()}function sk(t,e){function n(i,o){const a=Qx(t,o,e);return Xx(a!==null),a}return n}function rk(t,e){function n(i,o){const a=Qx(t,o,e);return Xx(a!==null),nk(a,o,t.host,t._protocol)}return n}function Zx(t){function e(n,i){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=vP():o=_P():n.getStatus()===402?o=yP(t.bucket):n.getStatus()===403?o=TP(t.path):o=i,o.status=n.getStatus(),o.serverResponse=i.serverResponse,o}return e}function ok(t){const e=Zx(t);function n(i,o){let a=e(i,o);return i.getStatus()===404&&(a=gP(t.path)),a.serverResponse=o.serverResponse,a}return n}function ak(t,e,n){const i=e.fullServerUrl(),o=_g(i,t.host,t._protocol),a="GET",u=t.maxOperationRetryTime,d=new Wx(o,a,rk(t,n),u);return d.errorHandler=ok(e),d}function lk(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function uk(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=lk(null,e)),i}function ck(t,e,n,i,o){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let Q="";for(let re=0;re<2;re++)Q=Q+Math.random().toString().slice(2);return Q}const h=d();u["Content-Type"]="multipart/related; boundary="+h;const p=uk(e,i,o),v=ik(p,n),E="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+h+`\r
Content-Type: `+p.contentType+`\r
\r
`,S=`\r
--`+h+"--",w=dr.getBlob(E,i,S);if(w===null)throw wP();const V={name:p.fullPath},F=_g(a,t.host,t._protocol),z="POST",X=t.maxUploadRetryTime,ne=new Wx(F,z,sk(t,n),X);return ne.urlParams=V,ne.headers=u,ne.body=w.uploadData(),ne.errorHandler=Zx(e),ne}class dk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,o){if(this.sent_)throw Gl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class fk extends dk{initXhr(){this.xhr_.responseType="text"}}function eC(){return new fk}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this._service=e,n instanceof Pn?this._location=n:this._location=Pn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ho(e,n)}get root(){const e=new Pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Jx(this._location.path)}get storage(){return this._service}get parent(){const e=QP(this._location.path);if(e===null)return null;const n=new Pn(this._location.bucket,e);return new ho(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw RP(e)}}function hk(t,e,n){t._throwIfRoot("uploadBytes");const i=ck(t.storage,t._location,$x(),new dr(e,!0),n);return t.storage.makeRequestWithTokens(i,eC).then(o=>({metadata:o,ref:t}))}function mk(t,e,n=ai.RAW,i){t._throwIfRoot("uploadString");const o=Gx(n,e),a=Object.assign({},i);return a.contentType==null&&o.contentType!=null&&(a.contentType=o.contentType),hk(t,o.data,a)}function pk(t){t._throwIfRoot("getDownloadURL");const e=ak(t.storage,t._location,$x());return t.storage.makeRequestWithTokens(e,eC).then(n=>{if(n===null)throw IP();return n})}function gk(t,e){const n=WP(t._location.path,e),i=new Pn(t._location.bucket,n);return new ho(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t){return/^[A-Za-z]+:\/\//.test(t)}function _k(t,e){return new ho(t,e)}function tC(t,e){if(t instanceof vg){const n=t;if(n._bucket==null)throw CP();const i=new ho(n,n._bucket);return e!=null?tC(i,e):i}else return e!==void 0?gk(t,e):t}function vk(t,e){if(e&&yk(e)){if(t instanceof vg)return _k(t,e);throw dp("To use ref(service, url), the first argument must be a Storage instance.")}else return tC(t,e)}function wT(t,e){const n=e==null?void 0:e[Fx];return n==null?null:Pn.makeFromBucketSpec(n,t)}function Tk(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:vA(o,t.app.options.projectId))}class vg{constructor(e,n,i,o,a){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._bucket=null,this._host=qx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mP,this._maxUploadRetryTime=pP,this._requests=new Set,o!=null?this._bucket=Pn.makeFromBucketSpec(o,this._host):this._bucket=wT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pn.makeFromBucketSpec(this._url,e):this._bucket=wT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){CT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){CT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ho(this,e)}_makeRequest(e,n,i,o,a=!0){if(this._deleted)return new NP(Bx());{const u=BP(e,this._appId,i,o,n,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const IT="@firebase/storage",bT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="storage";function Ek(t,e,n,i){return t=Dt(t),mk(t,e,n,i)}function Ak(t){return t=Dt(t),pk(t)}function Sk(t,e){return t=Dt(t),vk(t,e)}function xk(t=$d(),e){t=Dt(t);const i=Ra(t,nC).getImmediate({identifier:e}),o=gA("storage");return o&&Ck(i,...o),i}function Ck(t,e,n,i={}){Tk(t,e,n,i)}function wk(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new vg(n,i,o,e,ps)}function Ik(){cs(new ls(nC,wk,"PUBLIC").setMultipleInstances(!0)),kn(IT,bT,""),kn(IT,bT,"esm2017")}Ik();const bk={apiKey:"AIzaSyBKSZaUmAnmgVGf8CPCRveLwkN8TFzeNuY",authDomain:"kidzyaiapp.firebaseapp.com",projectId:"kidzyaiapp",storageBucket:"kidzyaiapp.firebasestorage.app",messagingSenderId:"840750221854",appId:"1:840750221854:web:d10ce565505bfa68f6bc0f"},Tg=hS.initializeApp(bk),wu=$1(Tg),Rk=new ns,mf=$D(Tg),Nk=xk(Tg),Eg=t=>{var e;return{id:t.uid,name:t.displayName||((e=t.email)==null?void 0:e.split("@")[0])||"User",email:t.email||"",avatarUrl:t.photoURL||`https://ui-avatars.com/api/?name=${t.email}&background=0ea5e9&color=fff`}},Mk=async(t,e)=>{const n=await DN(wu,t,e);return Eg(n.user)},Dk=async(t,e,n)=>{const i=await MN(wu,e,n);return await kN(i.user,{displayName:t}),Eg(i.user)},iC=async()=>{try{const t=await s1(wu,Rk);return Eg(t.user)}catch(t){throw console.error("Google Sign In Error",t),t}},sC=async()=>{await ON(wu)},Pk=({setAppState:t,user:e,onLogout:n})=>{const[i,o]=Se.useState(!1),a=({label:u,onClick:d,mobile:h=!1})=>T.jsx("button",{onClick:()=>{d(),o(!1)},className:`font-display font-bold transition ${h?"w-full text-left py-3 text-xl text-slate-800 border-b border-slate-100":"text-slate-600 hover:text-brand-600 text-base"}`,children:u});return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-slate-50/90 backdrop-blur-md border-b border-slate-200 transition-all duration-300",children:T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 h-24 flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center space-x-3 cursor-pointer group",onClick:()=>t(Ce.LANDING),children:[T.jsx("div",{className:"bg-gradient-to-br from-brand-500 to-magic-500 text-white p-2.5 rounded-xl shadow-lg group-hover:rotate-12 transition transform",children:T.jsx(Td,{size:28,strokeWidth:2.5})}),T.jsxs("span",{className:"text-2xl md:text-3xl font-display font-bold text-slate-900 tracking-tight",children:["Kidzy",T.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-brand-500 to-magic-500",children:"Color"})]})]}),T.jsxs("nav",{className:"hidden md:flex items-center space-x-10",children:[T.jsx(a,{label:"How it Works",onClick:()=>t(Ce.LANDING)}),T.jsx(a,{label:"Pricing",onClick:()=>t(Ce.PRICING)}),T.jsx(a,{label:"Templates",onClick:()=>{}})]}),T.jsx("div",{className:"hidden md:flex items-center space-x-4",children:e?T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center space-x-3 bg-white rounded-full pl-1.5 pr-4 py-1.5 border border-slate-200 shadow-sm hover:shadow-md transition",children:[T.jsx("img",{src:e.avatarUrl,alt:"avatar",className:"w-10 h-10 rounded-full border-2 border-slate-100 cursor-pointer",onClick:()=>t(Ce.DASHBOARD)}),T.jsxs("div",{className:"flex flex-col leading-tight cursor-pointer",onClick:()=>t(Ce.DASHBOARD),children:[T.jsx("span",{className:"text-sm font-bold text-slate-800",children:e.name.split(" ")[0]}),T.jsx("span",{className:"text-[10px] uppercase tracking-wider text-brand-600 font-bold",children:"My Library"})]}),T.jsx("button",{onClick:n,className:"ml-2 text-slate-400 hover:text-red-500 transition p-1.5 hover:bg-slate-100 rounded-full",title:"Log Out",children:T.jsx(KI,{size:16})})]}),T.jsxs("button",{onClick:()=>t(Ce.CONFIG),className:"bg-slate-900 hover:bg-brand-600 text-white px-6 py-3 rounded-full font-bold shadow-lg shadow-brand-900/20 transition-all transform hover:scale-105 flex items-center space-x-2 text-sm",children:[T.jsx("span",{children:"Start Creating"}),T.jsx(OI,{size:16,className:"text-yellow-300"})]})]}):T.jsx("div",{className:"flex items-center space-x-3",children:T.jsx("button",{onClick:()=>t(Ce.LOGIN),className:"text-slate-600 font-bold px-5 py-2.5 hover:bg-slate-100 rounded-full transition text-sm",children:"Log In"})})}),T.jsx("button",{className:"md:hidden p-2 text-slate-800 hover:bg-slate-100 rounded-lg transition",onClick:()=>o(!i),children:i?T.jsx(cA,{size:28}):T.jsx(YI,{size:28})})]})}),i&&T.jsx("div",{className:"fixed inset-0 z-[90] bg-white/95 backdrop-blur-xl pt-28 px-6 animate-fade-in md:hidden",children:T.jsxs("div",{className:"flex flex-col space-y-2",children:[T.jsx(a,{label:"Home",onClick:()=>t(Ce.LANDING),mobile:!0}),T.jsx(a,{label:"How it Works",onClick:()=>t(Ce.LANDING),mobile:!0}),T.jsx(a,{label:"Pricing",onClick:()=>t(Ce.PRICING),mobile:!0}),T.jsx("div",{className:"pt-8 space-y-4",children:e?T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center space-x-4 mb-4 bg-slate-50 p-4 rounded-2xl",children:[T.jsx("img",{src:e.avatarUrl,className:"w-12 h-12 rounded-full"}),T.jsxs("div",{children:[T.jsx("p",{className:"font-bold text-xl",children:e.name}),T.jsx("button",{onClick:()=>t(Ce.DASHBOARD),className:"text-brand-600 text-sm font-bold",children:"Go to Dashboard"})]})]}),T.jsx("button",{onClick:()=>{t(Ce.CONFIG),o(!1)},className:"w-full bg-brand-600 text-white font-bold py-4 rounded-2xl shadow-xl shadow-brand-200",children:"Create Story"}),T.jsx("button",{onClick:()=>{sC(),n(),o(!1)},className:"w-full bg-slate-100 text-slate-700 font-bold py-4 rounded-2xl",children:"Log Out"})]}):T.jsx(T.Fragment,{children:T.jsx("button",{onClick:()=>{t(Ce.LOGIN),o(!1)},className:"w-full bg-white border-2 border-slate-200 text-slate-800 font-bold py-4 rounded-2xl",children:"Log In"})})})]})})]})},kk=({onStart:t,user:e})=>{const n=Object.values(iA).flat(),i=Se.useRef(null),[o,a]=Se.useState(null);Se.useEffect(()=>(i.current=new IntersectionObserver(v=>{v.forEach(E=>{E.isIntersecting&&E.target.classList.add("is-visible")})},{threshold:.1}),document.querySelectorAll(".reveal-on-scroll").forEach(v=>{var E;return(E=i.current)==null?void 0:E.observe(v)}),()=>{var v;return(v=i.current)==null?void 0:v.disconnect()}),[]);const u=p=>{a(o===p?null:p)},d=[{q:"Is my child's photo safe?",a:"Absolutely. We take privacy seriously. Photos are processed securely by our AI engine solely to generate your story and are deleted from our processing servers within 24 hours. We are a compliant SaaS provider under Wayne Creative Alliance Pvt Ltd."},{q:"Can I print the coloring books?",a:"Yes! Our Premium Digital Pack (99) gives you a high-resolution PDF specifically designed for printing on standard A4 paper at home or your local print shop."},{q:"What kind of photo should I upload?",a:"A clear, front-facing photo works best. Avoid sunglasses, heavy shadows, or photos where the face is obstructed. Our AI is smart, but a good input ensures the best likeness!"},{q:"Do I need a subscription?",a:"No! You can pay per story (99). However, if you want to create many stories, our Kidzy Club subscription offers unlimited access at a huge discount."}],h=[{name:"Priya S.",role:"Mom of 2",text:"My 5-year-old hates taking photos but loves Spiderman. When he saw himself as a superhero in a coloring book, he actually screamed with joy! Best 99 I've ever spent.",avatar:"https://ui-avatars.com/api/?name=Priya+S&background=fce7f3&color=db2777"},{name:"Rahul M.",role:"Dad & Engineer",text:"I was skeptical about the 'likeness' claims, but it actually looks like my daughter. Saved me a fortune on a professional photoshoot for her birthday invites.",avatar:"https://ui-avatars.com/api/?name=Rahul+M&background=dbeafe&color=2563eb"},{name:"Sarah J.",role:"Teacher",text:"Used this for my kindergarten class 'Student of the Week'. The parents went absolutely crazy for it. It's such a unique, personalized gift.",avatar:"https://ui-avatars.com/api/?name=Sarah+J&background=dcfce7&color=16a34a"}];return T.jsxs("div",{className:"relative w-full overflow-hidden bg-slate-50",children:[T.jsxs("div",{className:"relative min-h-[85vh] md:min-h-screen pt-24 md:pt-32 pb-8 md:pb-12 flex flex-col justify-center",style:{backgroundImage:"linear-gradient(to bottom, rgba(248, 250, 252, 0.9), rgba(248, 250, 252, 0.9)), url('/images/bg_1.jpg')",backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[T.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 pointer-events-none",children:[T.jsx("div",{className:"absolute -top-[10%] -left-[10%] w-[80vw] h-[80vw] bg-brand-200/30 rounded-full blur-3xl animate-pulse-slow"}),T.jsx("div",{className:"absolute top-[20%] -right-[10%] w-[60vw] h-[60vw] bg-magic-200/30 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"1s"}}),T.jsx("div",{className:"absolute bottom-0 left-[20%] w-[50vw] h-[50vw] bg-joy-200/30 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"2s"}})]}),T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 w-full relative z-10 grid lg:grid-cols-2 gap-8 lg:gap-16 items-center",children:[T.jsxs("div",{className:"text-center lg:text-left reveal-on-scroll",children:[T.jsxs("div",{className:"inline-flex items-center space-x-2 bg-white border border-slate-200 rounded-full px-3 py-1 mb-4 md:mb-8 shadow-sm animate-float scale-90 md:scale-100",children:[T.jsx("span",{className:"flex h-2 w-2 rounded-full bg-magic-500 animate-pulse"}),T.jsx("span",{className:"text-[10px] md:text-xs font-bold text-slate-600 uppercase tracking-widest",children:"AI Storyteller for Kids"})]}),T.jsxs("h1",{className:"text-3xl sm:text-5xl md:text-7xl font-display font-bold text-slate-900 leading-tight md:leading-[1.1] mb-4 md:mb-6",children:["Turn ",T.jsxs("span",{className:"relative inline-block",children:[T.jsx("span",{className:"relative z-10 text-transparent bg-clip-text bg-gradient-to-r from-brand-600 to-magic-500",children:"Photos"}),T.jsx("svg",{className:"absolute -bottom-1 md:-bottom-2 left-0 w-full h-2 md:h-3 text-joy-400 z-0",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:T.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),T.jsx("br",{}),"into Adventures."]}),T.jsx("p",{className:"text-base md:text-xl text-slate-600 mb-6 md:mb-10 leading-relaxed max-w-lg mx-auto lg:mx-0 px-2 md:px-0",children:"Upload a photo and watch as we transform your child into an Astronaut, a Wizard, or a Superhero in their very own coloring book!"}),T.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4",children:[T.jsxs("button",{onClick:t,className:"w-full sm:w-auto bg-gradient-to-r from-brand-600 to-magic-500 hover:from-brand-700 hover:to-magic-600 text-white text-lg md:text-xl px-8 py-3 md:py-5 rounded-full font-bold shadow-xl hover:shadow-2xl hover:shadow-brand-500/30 transition-all transform hover:-translate-y-1 flex items-center justify-center space-x-3 group relative overflow-hidden",children:[T.jsx("div",{className:"absolute inset-0 bg-white/20 group-hover:translate-x-full transition-transform duration-700 ease-in-out -skew-x-12 -translate-x-full"}),T.jsx(zm,{size:20,className:"text-white md:w-7 md:h-7 group-hover:rotate-12 transition-transform"}),T.jsx("span",{className:"relative",children:"Upload a Pic"})]}),T.jsxs("button",{onClick:()=>{var p;return(p=document.getElementById("how-it-works"))==null?void 0:p.scrollIntoView({behavior:"smooth"})},className:"w-full sm:w-auto text-slate-500 hover:text-slate-800 font-bold text-sm md:text-base px-6 py-3 rounded-full hover:bg-slate-100 transition-all flex items-center justify-center space-x-2",children:[T.jsx(kI,{size:18,className:"md:w-5 md:h-5"}),T.jsx("span",{children:"See How It Works"})]})]}),T.jsxs("div",{className:"mt-6 md:mt-10 flex items-center justify-center lg:justify-start space-x-4 md:space-x-6 text-xs md:text-sm font-bold text-slate-400",children:[T.jsxs("span",{className:"flex items-center",children:[T.jsx(Sd,{size:14,className:"text-joy-400 mr-1.5 md:mr-2",fill:"currentColor"})," 4.9/5 Rating"]}),T.jsxs("span",{className:"flex items-center",children:[T.jsx(GI,{size:14,className:"text-magic-400 mr-1.5 md:mr-2",fill:"currentColor"})," 10k+ Stories"]})]})]}),T.jsxs("div",{className:"relative mt-8 lg:mt-0 reveal-on-scroll",style:{transitionDelay:"0.2s"},children:[T.jsxs("div",{className:"relative z-10 grid grid-cols-2 gap-3 md:gap-4 transform md:rotate-[-3deg] hover:rotate-0 transition duration-700 ease-out",children:[T.jsx("div",{className:"bg-white p-2 md:p-3 rounded-2xl md:rounded-3xl shadow-xl md:shadow-2xl transform translate-y-4 md:translate-y-8",children:T.jsxs("div",{className:"aspect-[3/4] rounded-xl md:rounded-2xl overflow-hidden relative",children:[T.jsx("img",{src:"/images/before.jpg",alt:"Child",className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute bottom-2 left-2 md:bottom-3 md:left-3 bg-white/90 backdrop-blur px-2 py-1 md:px-3 rounded-full text-[10px] md:text-xs font-bold text-slate-800 shadow-lg",children:"Original"})]})}),T.jsx("div",{className:"bg-gradient-to-br from-brand-500 to-magic-500 p-1 rounded-2xl md:rounded-3xl shadow-xl md:shadow-2xl transform -translate-y-4 md:-translate-y-8",children:T.jsx("div",{className:"bg-white p-1.5 md:p-2 rounded-[18px] md:rounded-[22px] h-full",children:T.jsxs("div",{className:"aspect-[3/4] rounded-lg md:rounded-xl overflow-hidden relative border-2 border-slate-100",children:[T.jsx("img",{src:"/images/after.png",alt:"Generated",className:"w-full h-full object-cover "}),T.jsxs("div",{className:"absolute bottom-2 right-2 md:bottom-3 md:right-3 bg-brand-600 text-white px-2 py-1 md:px-3 rounded-full text-[10px] md:text-xs font-bold shadow-lg flex items-center",children:[T.jsx(Kl,{size:10,className:"mr-1 text-yellow-300 md:w-3 md:h-3"})," Coloring Page"]})]})})})]}),T.jsx("div",{className:"absolute -top-4 -right-4 md:-top-10 md:-right-10 bg-white p-2 md:p-4 rounded-xl md:rounded-2xl shadow-xl animate-float",style:{animationDelay:"1s"},children:T.jsx(ZI,{size:24,className:"text-joy-500 fill-current md:w-8 md:h-8"})}),T.jsx("div",{className:"absolute bottom-0 -left-4 md:-left-10 bg-white p-2 md:p-4 rounded-xl md:rounded-2xl shadow-xl animate-float",style:{animationDelay:"2s"},children:T.jsx("div",{className:"text-2xl md:text-4xl",children:""})})]})]})]}),T.jsxs("div",{className:"py-8 md:py-12 bg-white border-y border-slate-100 overflow-hidden relative reveal-on-scroll",children:[T.jsx("div",{className:"max-w-7xl mx-auto px-4 mb-6 md:mb-8 text-center",children:T.jsxs("h2",{className:"text-xl md:text-2xl font-display font-bold text-slate-900",children:["Choose from ",T.jsx("span",{className:"text-brand-600",children:"50+ Magical Themes"})]})}),T.jsx("div",{className:"flex w-[200%] animate-scroll",children:[...n,...n].map((p,v)=>T.jsx("div",{className:"flex-shrink-0 mx-2 md:mx-3",children:T.jsxs("div",{className:"bg-slate-50 border border-slate-100 px-4 py-2 md:px-6 md:py-3 rounded-full flex items-center space-x-2 md:space-x-3 shadow-sm whitespace-nowrap",children:[T.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 rounded-full bg-gradient-to-br from-brand-100 to-magic-100 flex items-center justify-center text-sm md:text-lg",children:""}),T.jsx("span",{className:"font-bold text-slate-700 text-xs md:text-sm",children:p})]})},v))}),T.jsx("div",{className:"absolute top-0 left-0 w-16 md:w-32 h-full bg-gradient-to-r from-white to-transparent z-10"}),T.jsx("div",{className:"absolute top-0 right-0 w-16 md:w-32 h-full bg-gradient-to-l from-white to-transparent z-10"})]}),T.jsx("div",{id:"how-it-works",className:"py-16 md:py-24 bg-slate-50",children:T.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[T.jsxs("div",{className:"text-center mb-12 md:mb-16 reveal-on-scroll",children:[T.jsx("span",{className:"text-brand-600 font-bold tracking-wider uppercase text-xs md:text-sm",children:"How it Works"}),T.jsx("h2",{className:"text-3xl md:text-5xl font-display font-bold text-slate-900 mt-2",children:"Simple as 1, 2, 3 Magic!"})]}),T.jsxs("div",{className:"grid grid-cols-3 gap-2 md:gap-6",children:[T.jsxs("div",{className:"bg-white rounded-xl md:rounded-[2rem] p-2 md:p-8 shadow-lg shadow-slate-200/50 border border-slate-100 hover:-translate-y-2 transition duration-500 reveal-on-scroll flex flex-col items-center text-center",style:{transitionDelay:"0.1s"},children:[T.jsx("div",{className:"w-8 h-8 md:w-16 md:h-16 bg-blue-100 rounded-lg md:rounded-2xl flex items-center justify-center mb-2 md:mb-6 text-blue-600",children:T.jsx(XI,{size:14,className:"md:w-8 md:h-8"})}),T.jsx("h3",{className:"text-xs md:text-2xl font-bold text-slate-900 mb-1 md:mb-4",children:"1. Upload"}),T.jsx("p",{className:"text-[10px] md:text-base text-slate-600 leading-tight md:leading-relaxed hidden sm:block",children:'Our smart "Likeness Engine" scans your photo to understand facial features.'})]}),T.jsxs("div",{className:"bg-slate-900 rounded-xl md:rounded-[2rem] p-2 md:p-8 shadow-lg shadow-slate-900/20 text-white relative overflow-hidden hover:-translate-y-2 transition duration-500 reveal-on-scroll flex flex-col items-center text-center",style:{transitionDelay:"0.2s"},children:[T.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-500/20 rounded-full blur-3xl -mr-16 -mt-16"}),T.jsx("div",{className:"w-8 h-8 md:w-16 md:h-16 bg-white/10 backdrop-blur rounded-lg md:rounded-2xl flex items-center justify-center mb-2 md:mb-6 text-yellow-300 relative z-10",children:T.jsx(a0,{size:14,className:"md:w-8 md:h-8"})}),T.jsx("h3",{className:"text-xs md:text-2xl font-bold mb-1 md:mb-4 relative z-10",children:"2. Theme"}),T.jsx("p",{className:"text-[10px] md:text-base text-slate-300 leading-tight md:leading-relaxed relative z-10 hidden sm:block",children:"Pick from Space, Dinosaurs, Princesses, and more."})]}),T.jsxs("div",{className:"bg-white rounded-xl md:rounded-[2rem] p-2 md:p-8 shadow-lg shadow-slate-200/50 border border-slate-100 hover:-translate-y-2 transition duration-500 reveal-on-scroll flex flex-col items-center text-center",style:{transitionDelay:"0.3s"},children:[T.jsx("div",{className:"w-8 h-8 md:w-16 md:h-16 bg-green-100 rounded-lg md:rounded-2xl flex items-center justify-center mb-2 md:mb-6 text-green-600",children:T.jsx(aA,{size:14,className:"md:w-8 md:h-8"})}),T.jsx("h3",{className:"text-xs md:text-2xl font-bold text-slate-900 mb-1 md:mb-4",children:"3. Color"}),T.jsx("p",{className:"text-[10px] md:text-base text-slate-600 leading-tight md:leading-relaxed hidden sm:block",children:"Get a high-quality PDF storybook or order a hardcover keepsake."})]})]})]})}),T.jsxs("div",{className:"py-12 md:py-24 bg-white relative overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 md:w-96 md:h-96 bg-brand-50 rounded-full blur-3xl -mr-10 -mt-10 pointer-events-none"}),T.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 relative z-10",children:[T.jsxs("div",{className:"text-center mb-8 md:mb-16 reveal-on-scroll",children:[T.jsx("span",{className:"text-brand-600 font-bold tracking-wider uppercase text-[10px] md:text-sm",children:"Why Parents Love Us"}),T.jsx("h2",{className:"text-2xl md:text-5xl font-display font-bold text-slate-900 mt-1 md:mt-2",children:"Skip the Studio Struggle"})]}),T.jsxs("div",{className:"grid md:grid-cols-2 gap-4 md:gap-8 items-center reveal-on-scroll",children:[T.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-2xl md:rounded-3xl p-5 md:p-10 grayscale-[0.8] opacity-80 hover:grayscale-0 hover:opacity-100 transition duration-500",children:[T.jsxs("h3",{className:"text-lg md:text-2xl font-bold text-slate-600 mb-4 md:mb-6 flex items-center",children:[T.jsx(UI,{className:"mr-2 md:mr-3 text-slate-400 w-5 h-5 md:w-auto md:h-auto"})," Traditional Shoot"]}),T.jsxs("ul",{className:"space-y-3 md:space-y-4",children:[T.jsxs("li",{className:"flex items-center text-slate-500 text-sm md:text-base",children:[T.jsx(o0,{className:"mr-2 md:mr-3 w-4 h-4 md:w-5 md:h-5"})," Expensive (15,000+)"]}),T.jsxs("li",{className:"flex items-center text-slate-500 text-sm md:text-base",children:[T.jsx(s0,{className:"mr-2 md:mr-3 w-4 h-4 md:w-5 md:h-5"})," Takes hours (travel + shoot)"]}),T.jsxs("li",{className:"flex items-center text-slate-500 text-sm md:text-base",children:[T.jsx(r0,{className:"mr-2 md:mr-3 w-4 h-4 md:w-5 md:h-5"})," Buying/Renting costly costumes"]})]})]}),T.jsxs("div",{className:"bg-gradient-to-br from-brand-500 to-purple-600 text-white rounded-2xl md:rounded-3xl p-5 md:p-10 shadow-2xl shadow-brand-500/20 transform md:scale-105 relative",children:[T.jsx("div",{className:"absolute top-0 right-0 bg-yellow-400 text-yellow-900 text-[10px] md:text-xs font-bold px-2 py-0.5 md:px-3 md:py-1 rounded-bl-xl rounded-tr-xl md:rounded-tr-3xl",children:"WINNER"}),T.jsxs("h3",{className:"text-lg md:text-2xl font-bold mb-4 md:mb-6 flex items-center",children:[T.jsx(DI,{className:"mr-2 md:mr-3 text-yellow-300 w-5 h-5 md:w-auto md:h-auto"})," KidzyColor Magic"]}),T.jsxs("ul",{className:"space-y-3 md:space-y-4 font-medium",children:[T.jsxs("li",{className:"flex items-center text-sm md:text-base",children:[T.jsx(o0,{className:"mr-2 md:mr-3 w-4 h-4 md:w-5 md:h-5 text-brand-200"})," Affordable (Free to try)"]}),T.jsxs("li",{className:"flex items-center text-sm md:text-base",children:[T.jsx(s0,{className:"mr-2 md:mr-3 w-4 h-4 md:w-5 md:h-5 text-brand-200"})," Ready in seconds from home"]}),T.jsxs("li",{className:"flex items-center text-sm md:text-base",children:[T.jsx(r0,{className:"mr-2 md:mr-3 w-4 h-4 md:w-5 md:h-5 text-brand-200"})," Any costume you can imagine"]})]})]})]})]})]}),T.jsx("div",{className:"py-12 md:py-24 bg-slate-50",children:T.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[T.jsxs("div",{className:"text-center mb-8 md:mb-12 reveal-on-scroll",children:[T.jsx("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[1,2,3,4,5].map(p=>T.jsx(Sd,{size:14,className:"fill-yellow-400 text-yellow-400 md:w-4 md:h-4"},p))}),T.jsx("h2",{className:"text-2xl md:text-5xl font-display font-bold text-slate-900",children:"Loved by 10,000+ Parents"})]}),T.jsx("div",{className:"flex md:grid md:grid-cols-3 gap-4 md:gap-6 overflow-x-auto snap-x snap-mandatory pb-6 md:pb-0 -mx-4 px-4 md:mx-0 md:px-0 no-scrollbar reveal-on-scroll",children:h.map((p,v)=>T.jsxs("div",{className:"min-w-[85vw] md:min-w-0 snap-center bg-white p-5 md:p-8 rounded-2xl shadow-lg shadow-slate-200/50 border border-slate-100 flex flex-col h-full",children:[T.jsxs("div",{className:"flex items-center mb-3 md:mb-4",children:[T.jsx("img",{src:p.avatar,alt:p.name,className:"w-8 h-8 md:w-10 md:h-10 rounded-full mr-3"}),T.jsxs("div",{children:[T.jsx("p",{className:"font-bold text-slate-900 text-sm",children:p.name}),T.jsx("p",{className:"text-xs text-slate-500",children:p.role})]}),T.jsx(lA,{className:"ml-auto text-green-500 w-4 h-4"})]}),T.jsxs("p",{className:"text-slate-600 text-sm md:text-base leading-relaxed flex-1",children:['"',p.text,'"']})]},v))})]})}),T.jsx("div",{className:"py-12 md:py-24 bg-white",children:T.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6",children:[T.jsxs("div",{className:"text-center mb-8 md:mb-12 reveal-on-scroll",children:[T.jsx("span",{className:"text-brand-600 font-bold tracking-wider uppercase text-[10px] md:text-sm",children:"Got Questions?"}),T.jsx("h2",{className:"text-2xl md:text-5xl font-display font-bold text-slate-900 mt-1 md:mt-2",children:"Frequently Asked"})]}),T.jsx("div",{className:"space-y-3 md:space-y-4 reveal-on-scroll",children:d.map((p,v)=>T.jsxs("div",{className:"border border-slate-200 rounded-xl md:rounded-2xl overflow-hidden",children:[T.jsxs("button",{onClick:()=>u(v),className:"w-full flex items-center justify-between p-4 md:p-6 bg-slate-50 hover:bg-slate-100 transition text-left",children:[T.jsx("span",{className:"font-bold text-slate-900 text-sm md:text-lg pr-4",children:p.q}),o===v?T.jsx(NI,{className:"text-slate-500 flex-shrink-0"}):T.jsx(II,{className:"text-slate-500 flex-shrink-0"})]}),o===v&&T.jsx("div",{className:"p-4 md:p-6 bg-white border-t border-slate-100 text-slate-600 text-xs md:text-base leading-relaxed",children:p.a})]},v))})]})}),T.jsxs("div",{className:"py-12 md:py-24 bg-slate-900 text-white relative overflow-hidden",children:[T.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),T.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-brand-900 to-slate-900 opacity-90"}),T.jsxs("div",{className:"max-w-4xl mx-auto px-4 relative z-10 text-center reveal-on-scroll",children:[T.jsx("h2",{className:"text-3xl md:text-6xl font-display font-bold mb-4 md:mb-6",children:"Ready to create magic?"}),T.jsx("p",{className:"text-slate-300 text-base md:text-xl mb-6 md:mb-10 max-w-2xl mx-auto",children:"Join thousands of happy parents making storytime unforgettable. No credit card required to start."}),e?T.jsxs("button",{onClick:t,className:"bg-brand-500 hover:bg-brand-600 text-white text-lg md:text-xl px-10 py-4 md:py-5 rounded-full font-bold shadow-xl shadow-brand-500/30 transition transform hover:-translate-y-1 inline-flex items-center space-x-2",children:[T.jsx(a0,{className:"text-yellow-300"}),T.jsx("span",{children:"Create Your Story Now"})]}):T.jsx("button",{onClick:t,className:"bg-white text-slate-900 hover:bg-slate-100 text-lg md:text-xl px-10 py-4 md:py-5 rounded-full font-bold shadow-xl transition transform hover:-translate-y-1 inline-flex items-center space-x-2",children:T.jsx("span",{children:"Start for Free"})}),T.jsx("p",{className:"mt-6 text-xs md:text-sm text-slate-500 font-medium",children:"Secure  Private  Satisfaction Guaranteed"})]})]})]})},Uk=({onNavigate:t,setAppState:e})=>T.jsxs("footer",{className:"bg-slate-900 text-slate-400 py-6 md:py-12 mt-8 md:mt-12 border-t border-slate-800",children:[T.jsxs("div",{className:"max-w-6xl mx-auto px-4 flex flex-col md:flex-row gap-8 md:gap-12",children:[T.jsxs("div",{className:"md:w-1/4",children:[T.jsx("h4",{className:"text-white font-display font-bold text-xl mb-3 md:mb-4",children:"KidzyColor"}),T.jsx("p",{className:"text-sm leading-relaxed max-w-xs",children:"Making every child the hero of their own imagination through the power of AI."})]}),T.jsxs("div",{className:"md:w-3/4 grid grid-cols-3 gap-2 md:gap-8 text-left",children:[T.jsxs("div",{children:[T.jsx("h5",{className:"text-white font-bold mb-3 text-sm md:text-base",children:"Product"}),T.jsxs("ul",{className:"space-y-2 text-xs md:text-sm",children:[T.jsx("li",{children:T.jsx("button",{onClick:()=>e(Ce.LANDING),className:"hover:text-white transition text-left",children:"Features"})}),T.jsx("li",{children:T.jsx("button",{onClick:()=>e(Ce.PRICING),className:"hover:text-white transition text-left",children:"Pricing"})}),T.jsx("li",{children:T.jsx("button",{onClick:()=>t("schools"),className:"hover:text-white transition text-left",children:"For Schools"})})]})]}),T.jsxs("div",{children:[T.jsx("h5",{className:"text-white font-bold mb-3 text-sm md:text-base",children:"Support"}),T.jsxs("ul",{className:"space-y-2 text-xs md:text-sm",children:[T.jsx("li",{children:T.jsx("button",{onClick:()=>t("help"),className:"hover:text-white transition text-left",children:"Help Center"})}),T.jsx("li",{children:T.jsx("button",{onClick:()=>t("privacy"),className:"hover:text-white transition text-left",children:"Privacy Policy"})}),T.jsx("li",{children:T.jsx("button",{onClick:()=>t("terms"),className:"hover:text-white transition text-left",children:"Terms of Service"})})]})]}),T.jsxs("div",{children:[T.jsx("h5",{className:"text-white font-bold mb-3 text-sm md:text-base",children:"Connect"}),T.jsxs("ul",{className:"space-y-2 text-xs md:text-sm",children:[T.jsx("li",{children:T.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noreferrer",className:"hover:text-white transition block",children:"Instagram"})}),T.jsx("li",{children:T.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noreferrer",className:"hover:text-white transition block",children:"Twitter"})}),T.jsx("li",{children:T.jsx("button",{onClick:()=>t("contact"),className:"hover:text-white transition text-left",children:"Contact Us"})})]})]})]})]}),T.jsxs("div",{className:"max-w-6xl mx-auto px-4 mt-8 md:mt-12 pt-8 border-t border-slate-800 text-center text-[10px] md:text-xs opacity-60",children:[" ",new Date().getFullYear()," KidzyColor AI. All rights reserved by Wayne Creative Alliance Pvt Ltd."]})]});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Lk,Vk;function Ok(){return{geminiUrl:Lk,vertexUrl:Vk}}function qk(t,e,n,i){var o,a;if(!(t!=null&&t.baseUrl)){const u=Ok();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:n:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ys{}function de(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const h=t[d];if(Array.isArray(n))for(let p=0;p<h.length;p++){const v=h[p];g(v,e.slice(a+1),n[p])}else for(const p of h)g(p,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const h=t[d];g(h[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),n)):n}else return n}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function Fk(t,e){for(const[n,i]of Object.entries(e)){const o=n.split("."),a=i.split("."),u=new Set;let d=-1;for(let h=0;h<o.length;h++)if(o[h]==="*"){d=h;break}if(d!==-1&&a.length>d)for(let h=d;h<a.length;h++){const p=a[h];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}fp(t,o,a,0,u)}}function fp(t,e,n,i,o){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const h of d[u])fp(h,e,n,i+1,o)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(p=>!p.startsWith("_")&&!o.has(p)),h={};for(const p of d)h[p]=u[p];for(const[p,v]of Object.entries(h)){const E=[];for(const S of n.slice(i))S==="*"?E.push(p):E.push(S);g(u,E,v)}for(const p of d)delete u[p]}}else{const u=t;a in u&&fp(u[a],e,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ag(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bk(t){const e={},n=f(t,["operationName"]);n!=null&&g(e,["operationName"],n);const i=f(t,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function zk(t){const e={},n=f(t,["name"]);n!=null&&g(e,["name"],n);const i=f(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(t,["done"]);o!=null&&g(e,["done"],o);const a=f(t,["error"]);a!=null&&g(e,["error"],a);const u=f(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],Hk(u)),e}function Gk(t){const e={},n=f(t,["name"]);n!=null&&g(e,["name"],n);const i=f(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(t,["done"]);o!=null&&g(e,["done"],o);const a=f(t,["error"]);a!=null&&g(e,["error"],a);const u=f(t,["response"]);return u!=null&&g(e,["response"],Kk(u)),e}function Hk(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Yk(u))),g(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(t,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function Kk(t){const e={},n=f(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>jk(u))),g(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(t,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function Yk(t){const e={},n=f(t,["video"]);return n!=null&&g(e,["video"],Zk(n)),e}function jk(t){const e={},n=f(t,["_self"]);return n!=null&&g(e,["video"],eU(n)),e}function Jk(t){const e={},n=f(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function $k(t){const e={},n=f(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function Qk(t){const e={},n=f(t,["name"]);n!=null&&g(e,["name"],n);const i=f(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(t,["done"]);o!=null&&g(e,["done"],o);const a=f(t,["error"]);a!=null&&g(e,["error"],a);const u=f(t,["response"]);return u!=null&&g(e,["response"],Wk(u)),e}function Wk(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&g(e,["parent"],i);const o=f(t,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function rC(t){const e={},n=f(t,["name"]);n!=null&&g(e,["name"],n);const i=f(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(t,["done"]);o!=null&&g(e,["done"],o);const a=f(t,["error"]);a!=null&&g(e,["error"],a);const u=f(t,["response"]);return u!=null&&g(e,["response"],Xk(u)),e}function Xk(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&g(e,["parent"],i);const o=f(t,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function Zk(t){const e={},n=f(t,["uri"]);n!=null&&g(e,["uri"],n);const i=f(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Ag(i));const o=f(t,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function eU(t){const e={},n=f(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Ag(i));const o=f(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var RT;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(RT||(RT={}));var NT;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(NT||(NT={}));var MT;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(MT||(MT={}));var gn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(gn||(gn={}));var DT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(DT||(DT={}));var PT;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(PT||(PT={}));var kT;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(kT||(kT={}));var UT;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(UT||(UT={}));var LT;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(LT||(LT={}));var VT;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(VT||(VT={}));var OT;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(OT||(OT={}));var qT;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(qT||(qT={}));var FT;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(FT||(FT={}));var BT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(BT||(BT={}));var zT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(zT||(zT={}));var GT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(GT||(GT={}));var HT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(HT||(HT={}));var KT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(KT||(KT={}));var YT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(YT||(YT={}));var zd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(zd||(zd={}));var jT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(jT||(jT={}));var JT;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(JT||(JT={}));var $T;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})($T||($T={}));var hp;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(hp||(hp={}));var QT;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(QT||(QT={}));var WT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(WT||(WT={}));var XT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(XT||(XT={}));var ZT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ZT||(ZT={}));var eE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(eE||(eE={}));var tE;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tE||(tE={}));var nE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(nE||(nE={}));var iE;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(iE||(iE={}));var sE;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(sE||(sE={}));var rE;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(rE||(rE={}));var oE;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(oE||(oE={}));var aE;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(aE||(aE={}));var lE;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lE||(lE={}));var uE;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(uE||(uE={}));var cE;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(cE||(cE={}));var dE;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(dE||(dE={}));var fE;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(fE||(fE={}));var hE;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(hE||(hE={}));var mE;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(mE||(mE={}));var pE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(pE||(pE={}));var gE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(gE||(gE={}));var yE;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(yE||(yE={}));var _E;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(_E||(_E={}));var vE;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(vE||(vE={}));var TE;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(TE||(TE={}));var EE;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(EE||(EE={}));var AE;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(AE||(AE={}));var SE;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(SE||(SE={}));var xE;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(xE||(xE={}));var CE;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(CE||(CE={}));var da;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(da||(da={}));class mp{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Hl{get text(){var e,n,i,o,a,u,d,h;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const E=[];for(const S of(h=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[w,V]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(V!==null||V!==void 0)&&E.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,n,i,o,a,u,d,h;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const E of(h=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[S,w]of Object.entries(E))S!=="inlineData"&&(w!==null||w!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,i,o,a,u,d,h;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(h=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,i,o,a,u,d,h,p;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(h=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,i,o,a,u,d,h,p;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(h=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class wE{}class IE{}class tU{}class nU{}class iU{}class sU{}class bE{}class RE{}class NE{}class rU{}class Gd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Gd;let o;const a=e;return n?o=Gk(a):o=zk(a),Object.assign(i,o),i}}class ME{}class DE{}class PE{}class kE{}class oU{}class aU{}class lU{}class Sg{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Sg,a=Qk(e);return Object.assign(i,a),i}}class uU{}class cU{}class dU{}class UE{}class fU{get text(){var e,n,i;let o="",a=!1;const u=[];for(const d of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[h,p]of Object.entries(d))h!=="text"&&h!=="thought"&&p!==null&&u.push(h);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,n,i;let o="";const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(u))d!=="inlineData"&&h!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class hU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class xg{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new xg,a=rC(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $e(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function oC(t,e){const n=$e(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function aC(t){return Array.isArray(t)?t.map(e=>Hd(e)):[Hd(t)]}function Hd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function lC(t){const e=Hd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function uC(t){const e=Hd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function LE(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function cC(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>LE(e)):[LE(t)]}function pp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function VE(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function OE(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function an(t){if(t==null)throw new Error("ContentUnion is required");return pp(t)?t:{role:"user",parts:cC(t)}}function Cg(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=an(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=an(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>an(n)):[an(e)]}function Wn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(VE(t)||OE(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[an(t)]}const e=[],n=[],i=pp(t[0]);for(const o of t){const a=pp(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(VE(o)||OE(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:cC(n)}),e}function mU(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(gn).includes(n[0].toUpperCase())?n[0].toUpperCase():gn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(gn).includes(i.toUpperCase())?i.toUpperCase():gn.TYPE_UNSPECIFIED})}}function ga(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&mU(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(gn).includes(d.toUpperCase())?d.toUpperCase():gn.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=ga(d);else if(i.includes(u)){const h=[];for(const p of d){if(p.type=="null"){e.nullable=!0;continue}h.push(ga(p))}e[u]=h}else if(o.includes(u)){const h={};for(const[p,v]of Object.entries(d))h[p]=ga(v);e[u]=h}else{if(u==="additionalProperties")continue;e[u]=d}return e}function wg(t){return ga(t)}function Ig(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function bg(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function La(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ga(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ga(e.response));return t}function Va(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function pU(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function _s(t,e){if(typeof e!="string")throw new Error("name must be a string");return pU(t,e,"cachedContents")}function dC(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function xr(t){return Ag(t)}function gU(t){return t!=null&&typeof t=="object"&&"name"in t}function yU(t){return t!=null&&typeof t=="object"&&"video"in t}function _U(t){return t!=null&&typeof t=="object"&&"uri"in t}function fC(t){var e;let n;if(gU(t)&&(n=t.name),!(_U(t)&&(n=t.uri,n===void 0))&&!(yU(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function hC(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function mC(t){for(const e of["models","tunedModels","publisherModels"])if(vU(t,e))return t[e];return[]}function vU(t,e){return t!==null&&typeof t=="object"&&e in t}function TU(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function EU(t,e={}){const n=[],i=new Set;for(const o of t){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=TU(o,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function pC(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function AU(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function gC(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const h=u.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Oa(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function yC(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SU(t){const e={},n=f(t,["responsesFile"]);n!=null&&g(e,["fileName"],n);const i=f(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>iL(u))),g(e,["inlinedResponses"],a)}const o=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["inlinedEmbedContentResponses"],a)}return e}function xU(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&g(e,["format"],n);const i=f(t,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const o=f(t,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function CU(t){const e={},n=f(t,["format"]);n!=null&&g(e,["predictionsFormat"],n);const i=f(t,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const o=f(t,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function _d(t){const e={},n=f(t,["name"]);n!=null&&g(e,["name"],n);const i=f(t,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const o=f(t,["metadata","state"]);o!=null&&g(e,["state"],yC(o));const a=f(t,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const u=f(t,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const d=f(t,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const h=f(t,["metadata","model"]);h!=null&&g(e,["model"],h);const p=f(t,["metadata","output"]);return p!=null&&g(e,["dest"],SU(gC(p))),e}function gp(t){const e={},n=f(t,["name"]);n!=null&&g(e,["name"],n);const i=f(t,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(t,["state"]);o!=null&&g(e,["state"],yC(o));const a=f(t,["error"]);a!=null&&g(e,["error"],a);const u=f(t,["createTime"]);u!=null&&g(e,["createTime"],u);const d=f(t,["startTime"]);d!=null&&g(e,["startTime"],d);const h=f(t,["endTime"]);h!=null&&g(e,["endTime"],h);const p=f(t,["updateTime"]);p!=null&&g(e,["updateTime"],p);const v=f(t,["model"]);v!=null&&g(e,["model"],v);const E=f(t,["inputConfig"]);E!=null&&g(e,["src"],wU(E));const S=f(t,["outputConfig"]);S!=null&&g(e,["dest"],xU(gC(S)));const w=f(t,["completionStats"]);return w!=null&&g(e,["completionStats"],w),e}function wU(t){const e={},n=f(t,["instancesFormat"]);n!=null&&g(e,["format"],n);const i=f(t,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const o=f(t,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function IU(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&g(n,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>nL(t,u))),g(n,["requests","requests"],a)}return n}function bU(t){const e={},n=f(t,["format"]);n!=null&&g(e,["instancesFormat"],n);const i=f(t,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const o=f(t,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function RU(t){const e={},n=f(t,["data"]);if(n!=null&&g(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function NU(t,e){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],Oa(t,i)),n}function MU(t,e){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],Oa(t,i)),n}function DU(t){const e={},n=f(t,["content"]);n!=null&&g(e,["content"],n);const i=f(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],PU(i));const o=f(t,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=f(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=f(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const h=f(t,["index"]);h!=null&&g(e,["index"],h);const p=f(t,["logprobsResult"]);p!=null&&g(e,["logprobsResult"],p);const v=f(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),g(e,["safetyRatings"],S)}const E=f(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function PU(t){const e={},n=f(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function _C(t){const e={},n=f(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>cL(a))),g(e,["parts"],o)}const i=f(t,["role"]);return i!=null&&g(e,["role"],i),e}function kU(t,e){const n={},i=f(t,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function UU(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(t,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],CU(AU(o))),n}function qE(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["src"]);o!=null&&g(n,["batch","inputConfig"],IU(t,pC(t,o)));const a=f(e,["config"]);return a!=null&&kU(a,n),n}function LU(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["model"],$e(t,i));const o=f(e,["src"]);o!=null&&g(n,["inputConfig"],bU(pC(t,o)));const a=f(e,["config"]);return a!=null&&UU(a,n),n}function VU(t,e){const n={},i=f(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),n}function OU(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["src"]);o!=null&&g(n,["batch","inputConfig"],KU(t,o));const a=f(e,["config"]);return a!=null&&VU(a,n),n}function qU(t,e){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],Oa(t,i)),n}function FU(t,e){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],Oa(t,i)),n}function BU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&g(e,["name"],i);const o=f(t,["done"]);o!=null&&g(e,["done"],o);const a=f(t,["error"]);return a!=null&&g(e,["error"],a),e}function zU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&g(e,["name"],i);const o=f(t,["done"]);o!=null&&g(e,["done"],o);const a=f(t,["error"]);return a!=null&&g(e,["error"],a),e}function GU(t,e){const n={},i=f(e,["contents"]);if(i!=null){let a=Cg(t,i);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(g(n,["_self"],HU(o,n)),Fk(n,{"requests[].*":"requests[].request.*"})),n}function HU(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(t,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function KU(t,e){const n={},i=f(e,["fileName"]);i!=null&&g(n,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&g(n,["requests"],GU(t,o)),n}function YU(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function jU(t){const e={},n=f(t,["id"]);n!=null&&g(e,["id"],n);const i=f(t,["args"]);i!=null&&g(e,["args"],i);const o=f(t,["name"]);if(o!=null&&g(e,["name"],o),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function JU(t){const e={},n=f(t,["mode"]);n!=null&&g(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function $U(t,e,n){const i={},o=f(e,["systemInstruction"]);n!==void 0&&o!=null&&g(n,["systemInstruction"],_C(an(o)));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const h=f(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const p=f(e,["maxOutputTokens"]);p!=null&&g(i,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const V=f(e,["frequencyPenalty"]);V!=null&&g(i,["frequencyPenalty"],V);const F=f(e,["seed"]);F!=null&&g(i,["seed"],F);const z=f(e,["responseMimeType"]);z!=null&&g(i,["responseMimeType"],z);const X=f(e,["responseSchema"]);X!=null&&g(i,["responseSchema"],wg(X));const ne=f(e,["responseJsonSchema"]);if(ne!=null&&g(i,["responseJsonSchema"],ne),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=f(e,["safetySettings"]);if(n!==void 0&&Q!=null){let L=Q;Array.isArray(L)&&(L=L.map(D=>dL(D))),g(n,["safetySettings"],L)}const re=f(e,["tools"]);if(n!==void 0&&re!=null){let L=Va(re);Array.isArray(L)&&(L=L.map(D=>hL(La(D)))),g(n,["tools"],L)}const ce=f(e,["toolConfig"]);if(n!==void 0&&ce!=null&&g(n,["toolConfig"],fL(ce)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=f(e,["cachedContent"]);n!==void 0&&oe!=null&&g(n,["cachedContent"],_s(t,oe));const M=f(e,["responseModalities"]);M!=null&&g(i,["responseModalities"],M);const R=f(e,["mediaResolution"]);R!=null&&g(i,["mediaResolution"],R);const N=f(e,["speechConfig"]);if(N!=null&&g(i,["speechConfig"],Ig(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=f(e,["thinkingConfig"]);k!=null&&g(i,["thinkingConfig"],k);const U=f(e,["imageConfig"]);return U!=null&&g(i,["imageConfig"],tL(U)),i}function QU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(p=>DU(p))),g(e,["candidates"],h)}const o=f(t,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=f(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=f(t,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function WU(t,e){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],Oa(t,i)),n}function XU(t,e){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],Oa(t,i)),n}function ZU(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function eL(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function tL(t){const e={},n=f(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=f(t,["imageSize"]);if(i!=null&&g(e,["imageSize"],i),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function nL(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["request","model"],$e(t,i));const o=f(e,["contents"]);if(o!=null){let d=Wn(o);Array.isArray(d)&&(d=d.map(h=>_C(h))),g(n,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&g(n,["metadata"],a);const u=f(e,["config"]);return u!=null&&g(n,["request","generationConfig"],$U(t,u,f(n,["request"],{}))),n}function iL(t){const e={},n=f(t,["response"]);n!=null&&g(e,["response"],QU(n));const i=f(t,["error"]);return i!=null&&g(e,["error"],i),e}function sL(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function rL(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const a=f(t,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),n}function oL(t){const e={},n=f(t,["config"]);return n!=null&&sL(n,e),e}function aL(t){const e={},n=f(t,["config"]);return n!=null&&rL(n,e),e}function lL(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(t,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>_d(u))),g(e,["batchJobs"],a)}return e}function uL(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(t,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>gp(u))),g(e,["batchJobs"],a)}return e}function cL(t){const e={},n=f(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(t,["fileData"]);a!=null&&g(e,["fileData"],YU(a));const u=f(t,["functionCall"]);u!=null&&g(e,["functionCall"],jU(u));const d=f(t,["functionResponse"]);d!=null&&g(e,["functionResponse"],d);const h=f(t,["inlineData"]);h!=null&&g(e,["inlineData"],RU(h));const p=f(t,["text"]);p!=null&&g(e,["text"],p);const v=f(t,["thought"]);v!=null&&g(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function dL(t){const e={},n=f(t,["category"]);if(n!=null&&g(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function fL(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],JU(n));const i=f(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function hL(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],ZU(d));const h=f(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],eL(h));const p=f(t,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ms;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ms||(ms={}));class _o{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mL extends ys{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _o(ms.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=qE(this.apiClient,e),i=n._url,o=de("{model}:batchGenerateContent",i),d=n.batch.inputConfig.requests,h=d.requests,p=[];for(const v of h){const E=Object.assign({},v);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=S,E.request=w}p.push(E)}return d.requests=p,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=LU(this.apiClient,e);return d=de("batchPredictionJobs",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>gp(v))}else{const p=qE(this.apiClient,e);return d=de("{model}:batchGenerateContent",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>_d(v))}}async createEmbeddingsInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=OU(this.apiClient,e);return a=de("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>_d(h))}}async get(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=XU(this.apiClient,e);return d=de("batchPredictionJobs/{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>gp(v))}else{const p=WU(this.apiClient,e);return d=de("batches/{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>_d(v))}}async cancel(e){var n,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const h=MU(this.apiClient,e);u=de("batchPredictionJobs/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=NU(this.apiClient,e);u=de("batches/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=aL(e);return d=de("batchPredictionJobs",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=uL(v),S=new UE;return Object.assign(S,E),S})}else{const p=oL(e);return d=de("batches",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=lL(v),S=new UE;return Object.assign(S,E),S})}}async delete(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=FU(this.apiClient,e);return d=de("batchPredictionJobs/{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>zU(v))}else{const p=qU(this.apiClient,e);return d=de("batches/{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>BU(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pL(t){const e={},n=f(t,["data"]);if(n!=null&&g(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function FE(t){const e={},n=f(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>OL(a))),g(e,["parts"],o)}const i=f(t,["role"]);return i!=null&&g(e,["role"],i),e}function gL(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(t,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=f(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let v=Wn(u);Array.isArray(v)&&(v=v.map(E=>FE(E))),g(e,["contents"],v)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],FE(an(d)));const h=f(t,["tools"]);if(e!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(E=>FL(E))),g(e,["tools"],v)}const p=f(t,["toolConfig"]);if(e!==void 0&&p!=null&&g(e,["toolConfig"],qL(p)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function yL(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(t,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=f(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let E=Wn(u);Array.isArray(E)&&(E=E.map(S=>S)),g(e,["contents"],E)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],an(d));const h=f(t,["tools"]);if(e!==void 0&&h!=null){let E=h;Array.isArray(E)&&(E=E.map(S=>BL(S))),g(e,["tools"],E)}const p=f(t,["toolConfig"]);e!==void 0&&p!=null&&g(e,["toolConfig"],p);const v=f(t,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),n}function _L(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["model"],oC(t,i));const o=f(e,["config"]);return o!=null&&gL(o,n),n}function vL(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["model"],oC(t,i));const o=f(e,["config"]);return o!=null&&yL(o,n),n}function TL(t,e){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],_s(t,i)),n}function EL(t,e){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],_s(t,i)),n}function AL(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function SL(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function xL(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function CL(t){const e={},n=f(t,["id"]);n!=null&&g(e,["id"],n);const i=f(t,["args"]);i!=null&&g(e,["args"],i);const o=f(t,["name"]);if(o!=null&&g(e,["name"],o),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wL(t){const e={},n=f(t,["mode"]);n!=null&&g(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function IL(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&g(e,["description"],n);const i=f(t,["name"]);i!=null&&g(e,["name"],i);const o=f(t,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&g(e,["response"],u);const d=f(t,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function bL(t,e){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],_s(t,i)),n}function RL(t,e){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],_s(t,i)),n}function NL(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function ML(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function DL(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function PL(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function kL(t){const e={},n=f(t,["config"]);return n!=null&&DL(n,e),e}function UL(t){const e={},n=f(t,["config"]);return n!=null&&PL(n,e),e}function LL(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function VL(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function OL(t){const e={},n=f(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(t,["fileData"]);a!=null&&g(e,["fileData"],xL(a));const u=f(t,["functionCall"]);u!=null&&g(e,["functionCall"],CL(u));const d=f(t,["functionResponse"]);d!=null&&g(e,["functionResponse"],d);const h=f(t,["inlineData"]);h!=null&&g(e,["inlineData"],pL(h));const p=f(t,["text"]);p!=null&&g(e,["text"],p);const v=f(t,["thought"]);v!=null&&g(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function qL(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],wL(n));const i=f(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function FL(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],NL(d));const h=f(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],ML(h));const p=f(t,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function BL(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>IL(S))),g(e,["functionDeclarations"],E)}const i=f(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(t,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const h=f(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const p=f(t,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const v=f(t,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function zL(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(t,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),n}function GL(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(t,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),n}function HL(t,e){const n={},i=f(e,["name"]);i!=null&&g(n,["_url","name"],_s(t,i));const o=f(e,["config"]);return o!=null&&zL(o,n),n}function KL(t,e){const n={},i=f(e,["name"]);i!=null&&g(n,["_url","name"],_s(t,i));const o=f(e,["config"]);return o!=null&&GL(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YL extends ys{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _o(ms.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=vL(this.apiClient,e);return d=de("cachedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=_L(this.apiClient,e);return d=de("cachedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=RL(this.apiClient,e);return d=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=bL(this.apiClient,e);return d=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=EL(this.apiClient,e);return d=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=SL(v),S=new PE;return Object.assign(S,E),S})}else{const p=TL(this.apiClient,e);return d=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=AL(v),S=new PE;return Object.assign(S,E),S})}}async update(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=KL(this.apiClient,e);return d=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=HL(this.apiClient,e);return d=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=UL(e);return d=de("cachedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=VL(v),S=new kE;return Object.assign(S,E),S})}else{const p=kL(e);return d=de("cachedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=LL(v),S=new kE;return Object.assign(S,E),S})}}}function BE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ct(t){return this instanceof ct?(this.v=t,this):new ct(t)}function ya(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(V){return Promise.resolve(V).then(w,E)}}function d(w,V){i[w]&&(o[w]=function(F){return new Promise(function(z,X){a.push([w,F,z,X])>1||h(w,F)})},V&&(o[w]=V(o[w])))}function h(w,V){try{p(i[w](V))}catch(F){S(a[0][3],F)}}function p(w){w.value instanceof ct?Promise.resolve(w.value.v).then(v,E):S(a[0][2],w)}function v(w){h("next",w)}function E(w){h("throw",w)}function S(w,V){w(V),a.shift(),a.length&&h(a[0][0],a[0][1])}}function iu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof BE=="function"?BE(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(u){return new Promise(function(d,h){u=t[a](u),o(d,h,u.done,u.value)})}}function o(a,u,d,h){Promise.resolve(h).then(function(p){a({value:p,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jL(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:vC(n)}function vC(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function JL(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function zE(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let a=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),a&&!vC(t[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class $L{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new QL(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class QL{constructor(e,n,i,o={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),JL(a)}async sendMessage(e){var n;await this.sendPromise;const i=an(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,d;const h=await o,p=(u=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=h.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(E))!==null&&d!==void 0?d:[]);const w=p?[p]:[];this.recordHistory(i,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=an(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?zE(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,o;return ya(this,arguments,function*(){var u,d,h,p;const v=[];try{for(var E=!0,S=iu(e),w;w=yield ct(S.next()),u=w.done,!u;E=!0){p=w.value,E=!1;const V=p;if(jL(V)){const F=(o=(i=V.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;F!==void 0&&v.push(F)}yield yield ct(V)}}catch(V){d={error:V}}finally{try{!E&&!u&&(h=S.return)&&(yield ct(h.call(S)))}finally{if(d)throw d.error}}this.recordHistory(n,v)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(a=>a.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...zE(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,pf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WL(t){const e={},n=f(t,["file"]);return n!=null&&g(e,["file"],n),e}function XL(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function ZL(t){const e={},n=f(t,["name"]);return n!=null&&g(e,["_url","file"],fC(n)),e}function eV(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function tV(t){const e={},n=f(t,["name"]);return n!=null&&g(e,["_url","file"],fC(n)),e}function nV(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function iV(t){const e={},n=f(t,["config"]);return n!=null&&nV(n,e),e}function sV(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(t,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rV extends ys{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _o(ms.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iV(e);return a=de("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const p=sV(h),v=new uU;return Object.assign(v,p),v})}}async createInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=WL(e);return a=de("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=XL(h),v=new cU;return Object.assign(v,p),v})}}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tV(e);return a=de("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ZL(e);return a=de("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const p=eV(h),v=new dU;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vd(t){const e={},n=f(t,["data"]);if(n!=null&&g(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function oV(t){const e={},n=f(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>AV(a))),g(e,["parts"],o)}const i=f(t,["role"]);return i!=null&&g(e,["role"],i),e}function aV(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function lV(t){const e={},n=f(t,["id"]);n!=null&&g(e,["id"],n);const i=f(t,["args"]);i!=null&&g(e,["args"],i);const o=f(t,["name"]);if(o!=null&&g(e,["name"],o),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uV(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&g(e,["description"],n);const i=f(t,["name"]);i!=null&&g(e,["name"],i);const o=f(t,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&g(e,["response"],u);const d=f(t,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function cV(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=f(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(t,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=f(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=f(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const h=f(t,["logprobs"]);h!=null&&g(e,["logprobs"],h);const p=f(t,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const v=f(t,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const E=f(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const S=f(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const w=f(t,["responseMimeType"]);w!=null&&g(e,["responseMimeType"],w);const V=f(t,["responseModalities"]);V!=null&&g(e,["responseModalities"],V);const F=f(t,["responseSchema"]);F!=null&&g(e,["responseSchema"],F);const z=f(t,["routingConfig"]);z!=null&&g(e,["routingConfig"],z);const X=f(t,["seed"]);X!=null&&g(e,["seed"],X);const ne=f(t,["speechConfig"]);ne!=null&&g(e,["speechConfig"],TC(ne));const Q=f(t,["stopSequences"]);Q!=null&&g(e,["stopSequences"],Q);const re=f(t,["temperature"]);re!=null&&g(e,["temperature"],re);const ce=f(t,["thinkingConfig"]);ce!=null&&g(e,["thinkingConfig"],ce);const oe=f(t,["topK"]);oe!=null&&g(e,["topK"],oe);const M=f(t,["topP"]);if(M!=null&&g(e,["topP"],M),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function dV(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function fV(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function hV(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(t,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const h=f(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const p=f(t,["mediaResolution"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","mediaResolution"],p);const v=f(t,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],bg(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const w=f(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=f(t,["systemInstruction"]);e!==void 0&&V!=null&&g(e,["setup","systemInstruction"],oV(an(V)));const F=f(t,["tools"]);if(e!==void 0&&F!=null){let oe=Va(F);Array.isArray(oe)&&(oe=oe.map(M=>xV(La(M)))),g(e,["setup","tools"],oe)}const z=f(t,["sessionResumption"]);e!==void 0&&z!=null&&g(e,["setup","sessionResumption"],SV(z));const X=f(t,["inputAudioTranscription"]);e!==void 0&&X!=null&&g(e,["setup","inputAudioTranscription"],X);const ne=f(t,["outputAudioTranscription"]);e!==void 0&&ne!=null&&g(e,["setup","outputAudioTranscription"],ne);const Q=f(t,["realtimeInputConfig"]);e!==void 0&&Q!=null&&g(e,["setup","realtimeInputConfig"],Q);const re=f(t,["contextWindowCompression"]);e!==void 0&&re!=null&&g(e,["setup","contextWindowCompression"],re);const ce=f(t,["proactivity"]);return e!==void 0&&ce!=null&&g(e,["setup","proactivity"],ce),n}function mV(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],cV(i));const o=f(t,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const h=f(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const p=f(t,["mediaResolution"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","mediaResolution"],p);const v=f(t,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],TC(bg(E)));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const w=f(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=f(t,["systemInstruction"]);e!==void 0&&V!=null&&g(e,["setup","systemInstruction"],an(V));const F=f(t,["tools"]);if(e!==void 0&&F!=null){let oe=Va(F);Array.isArray(oe)&&(oe=oe.map(M=>CV(La(M)))),g(e,["setup","tools"],oe)}const z=f(t,["sessionResumption"]);e!==void 0&&z!=null&&g(e,["setup","sessionResumption"],z);const X=f(t,["inputAudioTranscription"]);e!==void 0&&X!=null&&g(e,["setup","inputAudioTranscription"],X);const ne=f(t,["outputAudioTranscription"]);e!==void 0&&ne!=null&&g(e,["setup","outputAudioTranscription"],ne);const Q=f(t,["realtimeInputConfig"]);e!==void 0&&Q!=null&&g(e,["setup","realtimeInputConfig"],Q);const re=f(t,["contextWindowCompression"]);e!==void 0&&re!=null&&g(e,["setup","contextWindowCompression"],re);const ce=f(t,["proactivity"]);return e!==void 0&&ce!=null&&g(e,["setup","proactivity"],ce),n}function pV(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["setup","model"],$e(t,i));const o=f(e,["config"]);return o!=null&&g(n,["config"],hV(o,n)),n}function gV(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["setup","model"],$e(t,i));const o=f(e,["config"]);return o!=null&&g(n,["config"],mV(o,n)),n}function yV(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],n),e}function _V(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["weightedPrompts"],i)}return e}function vV(t){const e={},n=f(t,["media"]);if(n!=null){let p=aC(n);Array.isArray(p)&&(p=p.map(v=>vd(v))),g(e,["mediaChunks"],p)}const i=f(t,["audio"]);i!=null&&g(e,["audio"],vd(uC(i)));const o=f(t,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=f(t,["video"]);a!=null&&g(e,["video"],vd(lC(a)));const u=f(t,["text"]);u!=null&&g(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&g(e,["activityStart"],d);const h=f(t,["activityEnd"]);return h!=null&&g(e,["activityEnd"],h),e}function TV(t){const e={},n=f(t,["media"]);if(n!=null){let p=aC(n);Array.isArray(p)&&(p=p.map(v=>v)),g(e,["mediaChunks"],p)}const i=f(t,["audio"]);i!=null&&g(e,["audio"],uC(i));const o=f(t,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=f(t,["video"]);a!=null&&g(e,["video"],lC(a));const u=f(t,["text"]);u!=null&&g(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&g(e,["activityStart"],d);const h=f(t,["activityEnd"]);return h!=null&&g(e,["activityEnd"],h),e}function EV(t){const e={},n=f(t,["setupComplete"]);n!=null&&g(e,["setupComplete"],n);const i=f(t,["serverContent"]);i!=null&&g(e,["serverContent"],i);const o=f(t,["toolCall"]);o!=null&&g(e,["toolCall"],o);const a=f(t,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const u=f(t,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],wV(u));const d=f(t,["goAway"]);d!=null&&g(e,["goAway"],d);const h=f(t,["sessionResumptionUpdate"]);return h!=null&&g(e,["sessionResumptionUpdate"],h),e}function AV(t){const e={},n=f(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(t,["fileData"]);a!=null&&g(e,["fileData"],aV(a));const u=f(t,["functionCall"]);u!=null&&g(e,["functionCall"],lV(u));const d=f(t,["functionResponse"]);d!=null&&g(e,["functionResponse"],d);const h=f(t,["inlineData"]);h!=null&&g(e,["inlineData"],vd(h));const p=f(t,["text"]);p!=null&&g(e,["text"],p);const v=f(t,["thought"]);v!=null&&g(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function SV(t){const e={},n=f(t,["handle"]);if(n!=null&&g(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function TC(t){const e={},n=f(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=f(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function xV(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],dV(d));const h=f(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],fV(h));const p=f(t,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function CV(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>uV(S))),g(e,["functionDeclarations"],E)}const i=f(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(t,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const h=f(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const p=f(t,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const v=f(t,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function wV(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const i=f(t,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const o=f(t,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const a=f(t,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const u=f(t,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const d=f(t,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const h=f(t,["promptTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(V=>V)),g(e,["promptTokensDetails"],w)}const p=f(t,["cacheTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(V=>V)),g(e,["cacheTokensDetails"],w)}const v=f(t,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(V=>V)),g(e,["responseTokensDetails"],w)}const E=f(t,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(V=>V)),g(e,["toolUsePromptTokensDetails"],w)}const S=f(t,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IV(t){const e={},n=f(t,["data"]);if(n!=null&&g(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function bV(t){const e={},n=f(t,["content"]);n!=null&&g(e,["content"],n);const i=f(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],RV(i));const o=f(t,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=f(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=f(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const h=f(t,["index"]);h!=null&&g(e,["index"],h);const p=f(t,["logprobsResult"]);p!=null&&g(e,["logprobsResult"],p);const v=f(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),g(e,["safetyRatings"],S)}const E=f(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function RV(t){const e={},n=f(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function NV(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["contents"]);if(o!=null){let a=Wn(o);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["contents"],a)}return n}function MV(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["tokensInfo"],o)}return e}function DV(t){const e={},n=f(t,["values"]);n!=null&&g(e,["values"],n);const i=f(t,["statistics"]);return i!=null&&g(e,["statistics"],PV(i)),e}function PV(t){const e={},n=f(t,["truncated"]);n!=null&&g(e,["truncated"],n);const i=f(t,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function gf(t){const e={},n=f(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>z4(a))),g(e,["parts"],o)}const i=f(t,["role"]);return i!=null&&g(e,["role"],i),e}function kV(t){const e={},n=f(t,["controlType"]);n!=null&&g(e,["controlType"],n);const i=f(t,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function UV(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function LV(t,e){const n={},i=f(t,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],an(i));const o=f(t,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>CC(d))),g(e,["tools"],u)}const a=f(t,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],I4(a)),n}function VV(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(d=>gf(d))),g(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&UV(a),n}function OV(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(d=>d)),g(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&LV(a,n),n}function qV(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const o=f(t,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function FV(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function BV(t,e){const n={},i=f(e,["model"]);return i!=null&&g(n,["_url","name"],$e(t,i)),n}function zV(t,e){const n={},i=f(e,["model"]);return i!=null&&g(n,["_url","name"],$e(t,i)),n}function GV(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function HV(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function KV(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(t,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const h=f(t,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const p=f(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&g(e,["parameters","safetySetting"],p);const v=f(t,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=f(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const w=f(t,["language"]);e!==void 0&&w!=null&&g(e,["parameters","language"],w);const V=f(t,["outputMimeType"]);e!==void 0&&V!=null&&g(e,["parameters","outputOptions","mimeType"],V);const F=f(t,["outputCompressionQuality"]);e!==void 0&&F!=null&&g(e,["parameters","outputOptions","compressionQuality"],F);const z=f(t,["addWatermark"]);e!==void 0&&z!=null&&g(e,["parameters","addWatermark"],z);const X=f(t,["labels"]);e!==void 0&&X!=null&&g(e,["labels"],X);const ne=f(t,["editMode"]);e!==void 0&&ne!=null&&g(e,["parameters","editMode"],ne);const Q=f(t,["baseSteps"]);return e!==void 0&&Q!=null&&g(e,["parameters","editConfig","baseSteps"],Q),n}function YV(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>J4(h))),g(n,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&KV(u,n),n}function jV(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>yf(a))),g(e,["generatedImages"],o)}return e}function JV(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(t,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function $V(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const o=f(t,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const a=f(t,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const u=f(t,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const d=f(t,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),n}function QV(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["contents"]);if(o!=null){let d=Cg(t,o);Array.isArray(d)&&(d=d.map(h=>h)),g(n,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&JV(a,n);const u=f(e,["model"]);return u!==void 0&&g(n,["requests[]","model"],$e(t,u)),n}function WV(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["contents"]);if(o!=null){let u=Cg(t,o);Array.isArray(u)&&(u=u.map(d=>d)),g(n,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&$V(a,n),n}function XV(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["embeddings"],a)}const o=f(t,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function ZV(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>DV(u))),g(e,["embeddings"],a)}const o=f(t,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function e4(t){const e={},n=f(t,["endpoint"]);n!=null&&g(e,["name"],n);const i=f(t,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function t4(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function n4(t){const e={},n=f(t,["id"]);n!=null&&g(e,["id"],n);const i=f(t,["args"]);i!=null&&g(e,["args"],i);const o=f(t,["name"]);if(o!=null&&g(e,["name"],o),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function i4(t){const e={},n=f(t,["mode"]);n!=null&&g(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function s4(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&g(e,["description"],n);const i=f(t,["name"]);i!=null&&g(e,["name"],i);const o=f(t,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&g(e,["response"],u);const d=f(t,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function r4(t,e,n){const i={},o=f(e,["systemInstruction"]);n!==void 0&&o!=null&&g(n,["systemInstruction"],gf(an(o)));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const h=f(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const p=f(e,["maxOutputTokens"]);p!=null&&g(i,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const V=f(e,["frequencyPenalty"]);V!=null&&g(i,["frequencyPenalty"],V);const F=f(e,["seed"]);F!=null&&g(i,["seed"],F);const z=f(e,["responseMimeType"]);z!=null&&g(i,["responseMimeType"],z);const X=f(e,["responseSchema"]);X!=null&&g(i,["responseSchema"],wg(X));const ne=f(e,["responseJsonSchema"]);if(ne!=null&&g(i,["responseJsonSchema"],ne),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=f(e,["safetySettings"]);if(n!==void 0&&Q!=null){let L=Q;Array.isArray(L)&&(L=L.map(D=>$4(D))),g(n,["safetySettings"],L)}const re=f(e,["tools"]);if(n!==void 0&&re!=null){let L=Va(re);Array.isArray(L)&&(L=L.map(D=>nO(La(D)))),g(n,["tools"],L)}const ce=f(e,["toolConfig"]);if(n!==void 0&&ce!=null&&g(n,["toolConfig"],tO(ce)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=f(e,["cachedContent"]);n!==void 0&&oe!=null&&g(n,["cachedContent"],_s(t,oe));const M=f(e,["responseModalities"]);M!=null&&g(i,["responseModalities"],M);const R=f(e,["mediaResolution"]);R!=null&&g(i,["mediaResolution"],R);const N=f(e,["speechConfig"]);if(N!=null&&g(i,["speechConfig"],Ig(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=f(e,["thinkingConfig"]);k!=null&&g(i,["thinkingConfig"],k);const U=f(e,["imageConfig"]);return U!=null&&g(i,["imageConfig"],D4(U)),i}function o4(t,e,n){const i={},o=f(e,["systemInstruction"]);n!==void 0&&o!=null&&g(n,["systemInstruction"],an(o));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const h=f(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const p=f(e,["maxOutputTokens"]);p!=null&&g(i,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const V=f(e,["frequencyPenalty"]);V!=null&&g(i,["frequencyPenalty"],V);const F=f(e,["seed"]);F!=null&&g(i,["seed"],F);const z=f(e,["responseMimeType"]);z!=null&&g(i,["responseMimeType"],z);const X=f(e,["responseSchema"]);X!=null&&g(i,["responseSchema"],wg(X));const ne=f(e,["responseJsonSchema"]);ne!=null&&g(i,["responseJsonSchema"],ne);const Q=f(e,["routingConfig"]);Q!=null&&g(i,["routingConfig"],Q);const re=f(e,["modelSelectionConfig"]);re!=null&&g(i,["modelConfig"],re);const ce=f(e,["safetySettings"]);if(n!==void 0&&ce!=null){let J=ce;Array.isArray(J)&&(J=J.map(le=>le)),g(n,["safetySettings"],J)}const oe=f(e,["tools"]);if(n!==void 0&&oe!=null){let J=Va(oe);Array.isArray(J)&&(J=J.map(le=>CC(La(le)))),g(n,["tools"],J)}const M=f(e,["toolConfig"]);n!==void 0&&M!=null&&g(n,["toolConfig"],M);const R=f(e,["labels"]);n!==void 0&&R!=null&&g(n,["labels"],R);const N=f(e,["cachedContent"]);n!==void 0&&N!=null&&g(n,["cachedContent"],_s(t,N));const k=f(e,["responseModalities"]);k!=null&&g(i,["responseModalities"],k);const U=f(e,["mediaResolution"]);U!=null&&g(i,["mediaResolution"],U);const L=f(e,["speechConfig"]);L!=null&&g(i,["speechConfig"],xC(Ig(L)));const D=f(e,["audioTimestamp"]);D!=null&&g(i,["audioTimestamp"],D);const Ge=f(e,["thinkingConfig"]);Ge!=null&&g(i,["thinkingConfig"],Ge);const nt=f(e,["imageConfig"]);return nt!=null&&g(i,["imageConfig"],P4(nt)),i}function GE(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(d=>gf(d))),g(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&g(n,["generationConfig"],r4(t,a,n)),n}function HE(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(d=>d)),g(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&g(n,["generationConfig"],o4(t,a,n)),n}function KE(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(p=>bV(p))),g(e,["candidates"],h)}const o=f(t,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=f(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=f(t,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function YE(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(v=>v)),g(e,["candidates"],p)}const o=f(t,["createTime"]);o!=null&&g(e,["createTime"],o);const a=f(t,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const u=f(t,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const d=f(t,["responseId"]);d!=null&&g(e,["responseId"],d);const h=f(t,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function a4(t,e){const n={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(t,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const a=f(t,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const d=f(t,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const h=f(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&g(e,["parameters","includeSafetyAttributes"],h);const p=f(t,["includeRaiReason"]);e!==void 0&&p!=null&&g(e,["parameters","includeRaiReason"],p);const v=f(t,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const E=f(t,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const S=f(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=f(t,["imageSize"]);if(e!==void 0&&w!=null&&g(e,["parameters","sampleImageSize"],w),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function l4(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(t,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const h=f(t,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const p=f(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&g(e,["parameters","safetySetting"],p);const v=f(t,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=f(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const w=f(t,["language"]);e!==void 0&&w!=null&&g(e,["parameters","language"],w);const V=f(t,["outputMimeType"]);e!==void 0&&V!=null&&g(e,["parameters","outputOptions","mimeType"],V);const F=f(t,["outputCompressionQuality"]);e!==void 0&&F!=null&&g(e,["parameters","outputOptions","compressionQuality"],F);const z=f(t,["addWatermark"]);e!==void 0&&z!=null&&g(e,["parameters","addWatermark"],z);const X=f(t,["labels"]);e!==void 0&&X!=null&&g(e,["labels"],X);const ne=f(t,["imageSize"]);e!==void 0&&ne!=null&&g(e,["parameters","sampleImageSize"],ne);const Q=f(t,["enhancePrompt"]);return e!==void 0&&Q!=null&&g(e,["parameters","enhancePrompt"],Q),n}function u4(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&a4(a,n),n}function c4(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&l4(a,n),n}function d4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>S4(u))),g(e,["generatedImages"],a)}const o=f(t,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],AC(o)),e}function f4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>yf(u))),g(e,["generatedImages"],a)}const o=f(t,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],SC(o)),e}function h4(t,e){const n={},i=f(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(t,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const u=f(t,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const d=f(t,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=f(t,["negativePrompt"]);e!==void 0&&h!=null&&g(e,["parameters","negativePrompt"],h);const p=f(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&g(e,["parameters","enhancePrompt"],p),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(t,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],_f(v));const E=f(t,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(w=>pO(w))),g(e,["instances[0]","referenceImages"],S)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function m4(t,e){const n={},i=f(t,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const a=f(t,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const u=f(t,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const d=f(t,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const h=f(t,["aspectRatio"]);e!==void 0&&h!=null&&g(e,["parameters","aspectRatio"],h);const p=f(t,["resolution"]);e!==void 0&&p!=null&&g(e,["parameters","resolution"],p);const v=f(t,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(t,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const S=f(t,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const w=f(t,["enhancePrompt"]);e!==void 0&&w!=null&&g(e,["parameters","enhancePrompt"],w);const V=f(t,["generateAudio"]);e!==void 0&&V!=null&&g(e,["parameters","generateAudio"],V);const F=f(t,["lastFrame"]);e!==void 0&&F!=null&&g(e,["instances[0]","lastFrame"],di(F));const z=f(t,["referenceImages"]);if(e!==void 0&&z!=null){let Q=z;Array.isArray(Q)&&(Q=Q.map(re=>gO(re))),g(e,["instances[0]","referenceImages"],Q)}const X=f(t,["mask"]);e!==void 0&&X!=null&&g(e,["instances[0]","mask"],mO(X));const ne=f(t,["compressionQuality"]);return e!==void 0&&ne!=null&&g(e,["parameters","compressionQuality"],ne),n}function p4(t){const e={},n=f(t,["name"]);n!=null&&g(e,["name"],n);const i=f(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(t,["done"]);o!=null&&g(e,["done"],o);const a=f(t,["error"]);a!=null&&g(e,["error"],a);const u=f(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],v4(u)),e}function g4(t){const e={},n=f(t,["name"]);n!=null&&g(e,["name"],n);const i=f(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(t,["done"]);o!=null&&g(e,["done"],o);const a=f(t,["error"]);a!=null&&g(e,["error"],a);const u=f(t,["response"]);return u!=null&&g(e,["response"],T4(u)),e}function y4(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&g(n,["instances[0]","image"],_f(a));const u=f(e,["video"]);u!=null&&g(n,["instances[0]","video"],wC(u));const d=f(e,["source"]);d!=null&&E4(d,n);const h=f(e,["config"]);return h!=null&&h4(h,n),n}function _4(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&g(n,["instances[0]","image"],di(a));const u=f(e,["video"]);u!=null&&g(n,["instances[0]","video"],IC(u));const d=f(e,["source"]);d!=null&&A4(d,n);const h=f(e,["config"]);return h!=null&&m4(h,n),n}function v4(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>C4(u))),g(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(t,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function T4(t){const e={},n=f(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>w4(u))),g(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(t,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function E4(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(t,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],_f(o));const a=f(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],wC(a)),n}function A4(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(t,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],di(o));const a=f(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],IC(a)),n}function S4(t){const e={},n=f(t,["_self"]);n!=null&&g(e,["image"],k4(n));const i=f(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(t,["_self"]);return o!=null&&g(e,["safetyAttributes"],AC(o)),e}function yf(t){const e={},n=f(t,["_self"]);n!=null&&g(e,["image"],EC(n));const i=f(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(t,["_self"]);o!=null&&g(e,["safetyAttributes"],SC(o));const a=f(t,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function x4(t){const e={},n=f(t,["_self"]);n!=null&&g(e,["mask"],EC(n));const i=f(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["labels"],o)}return e}function C4(t){const e={},n=f(t,["video"]);return n!=null&&g(e,["video"],fO(n)),e}function w4(t){const e={},n=f(t,["_self"]);return n!=null&&g(e,["video"],hO(n)),e}function I4(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=f(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(t,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=f(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=f(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const h=f(t,["logprobs"]);h!=null&&g(e,["logprobs"],h);const p=f(t,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const v=f(t,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const E=f(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const S=f(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const w=f(t,["responseMimeType"]);w!=null&&g(e,["responseMimeType"],w);const V=f(t,["responseModalities"]);V!=null&&g(e,["responseModalities"],V);const F=f(t,["responseSchema"]);F!=null&&g(e,["responseSchema"],F);const z=f(t,["routingConfig"]);z!=null&&g(e,["routingConfig"],z);const X=f(t,["seed"]);X!=null&&g(e,["seed"],X);const ne=f(t,["speechConfig"]);ne!=null&&g(e,["speechConfig"],xC(ne));const Q=f(t,["stopSequences"]);Q!=null&&g(e,["stopSequences"],Q);const re=f(t,["temperature"]);re!=null&&g(e,["temperature"],re);const ce=f(t,["thinkingConfig"]);ce!=null&&g(e,["thinkingConfig"],ce);const oe=f(t,["topK"]);oe!=null&&g(e,["topK"],oe);const M=f(t,["topP"]);if(M!=null&&g(e,["topP"],M),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function b4(t,e){const n={},i=f(e,["model"]);return i!=null&&g(n,["_url","name"],$e(t,i)),n}function R4(t,e){const n={},i=f(e,["model"]);return i!=null&&g(n,["_url","name"],$e(t,i)),n}function N4(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function M4(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function D4(t){const e={},n=f(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=f(t,["imageSize"]);if(i!=null&&g(e,["imageSize"],i),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function P4(t){const e={},n=f(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=f(t,["imageSize"]);i!=null&&g(e,["imageSize"],i);const o=f(t,["outputMimeType"]);o!=null&&g(e,["imageOutputOptions","mimeType"],o);const a=f(t,["outputCompressionQuality"]);return a!=null&&g(e,["imageOutputOptions","compressionQuality"],a),e}function k4(t){const e={},n=f(t,["bytesBase64Encoded"]);n!=null&&g(e,["imageBytes"],xr(n));const i=f(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function EC(t){const e={},n=f(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],xr(i));const o=f(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function _f(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(t,["imageBytes"]);n!=null&&g(e,["bytesBase64Encoded"],xr(n));const i=f(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function di(t){const e={},n=f(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=f(t,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],xr(i));const o=f(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function U4(t,e,n){const i={},o=f(e,["pageSize"]);n!==void 0&&o!=null&&g(n,["_query","pageSize"],o);const a=f(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=f(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const d=f(e,["queryBase"]);return n!==void 0&&d!=null&&g(n,["_url","models_url"],hC(t,d)),i}function L4(t,e,n){const i={},o=f(e,["pageSize"]);n!==void 0&&o!=null&&g(n,["_query","pageSize"],o);const a=f(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=f(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const d=f(e,["queryBase"]);return n!==void 0&&d!=null&&g(n,["_url","models_url"],hC(t,d)),i}function V4(t,e){const n={},i=f(e,["config"]);return i!=null&&U4(t,i,n),n}function O4(t,e){const n={},i=f(e,["config"]);return i!=null&&L4(t,i,n),n}function q4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(t,["_self"]);if(o!=null){let a=mC(o);Array.isArray(a)&&(a=a.map(u=>yp(u))),g(e,["models"],a)}return e}function F4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(t,["_self"]);if(o!=null){let a=mC(o);Array.isArray(a)&&(a=a.map(u=>_p(u))),g(e,["models"],a)}return e}function B4(t){const e={},n=f(t,["maskMode"]);n!=null&&g(e,["maskMode"],n);const i=f(t,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const o=f(t,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function yp(t){const e={},n=f(t,["name"]);n!=null&&g(e,["name"],n);const i=f(t,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(t,["description"]);o!=null&&g(e,["description"],o);const a=f(t,["version"]);a!=null&&g(e,["version"],a);const u=f(t,["_self"]);u!=null&&g(e,["tunedModelInfo"],iO(u));const d=f(t,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const h=f(t,["outputTokenLimit"]);h!=null&&g(e,["outputTokenLimit"],h);const p=f(t,["supportedGenerationMethods"]);p!=null&&g(e,["supportedActions"],p);const v=f(t,["temperature"]);v!=null&&g(e,["temperature"],v);const E=f(t,["maxTemperature"]);E!=null&&g(e,["maxTemperature"],E);const S=f(t,["topP"]);S!=null&&g(e,["topP"],S);const w=f(t,["topK"]);w!=null&&g(e,["topK"],w);const V=f(t,["thinking"]);return V!=null&&g(e,["thinking"],V),e}function _p(t){const e={},n=f(t,["name"]);n!=null&&g(e,["name"],n);const i=f(t,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(t,["description"]);o!=null&&g(e,["description"],o);const a=f(t,["versionId"]);a!=null&&g(e,["version"],a);const u=f(t,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>e4(S))),g(e,["endpoints"],E)}const d=f(t,["labels"]);d!=null&&g(e,["labels"],d);const h=f(t,["_self"]);h!=null&&g(e,["tunedModelInfo"],sO(h));const p=f(t,["defaultCheckpointId"]);p!=null&&g(e,["defaultCheckpointId"],p);const v=f(t,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>S)),g(e,["checkpoints"],E)}return e}function z4(t){const e={},n=f(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(t,["fileData"]);a!=null&&g(e,["fileData"],t4(a));const u=f(t,["functionCall"]);u!=null&&g(e,["functionCall"],n4(u));const d=f(t,["functionResponse"]);d!=null&&g(e,["functionResponse"],d);const h=f(t,["inlineData"]);h!=null&&g(e,["inlineData"],IV(h));const p=f(t,["text"]);p!=null&&g(e,["text"],p);const v=f(t,["thought"]);v!=null&&g(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function G4(t){const e={},n=f(t,["productImage"]);return n!=null&&g(e,["image"],di(n)),e}function H4(t,e){const n={},i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(t,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","baseSteps"],o);const a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const u=f(t,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const h=f(t,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const p=f(t,["addWatermark"]);e!==void 0&&p!=null&&g(e,["parameters","addWatermark"],p);const v=f(t,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const E=f(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const S=f(t,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const w=f(t,["labels"]);return e!==void 0&&w!=null&&g(e,["labels"],w),n}function K4(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["source"]);o!=null&&j4(o,n);const a=f(e,["config"]);return a!=null&&H4(a,n),n}function Y4(t){const e={},n=f(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>yf(o))),g(e,["generatedImages"],i)}return e}function j4(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(t,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],di(o));const a=f(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>G4(d))),g(e,["instances[0]","productImages"],u)}return n}function J4(t){const e={},n=f(t,["referenceImage"]);n!=null&&g(e,["referenceImage"],di(n));const i=f(t,["referenceId"]);i!=null&&g(e,["referenceId"],i);const o=f(t,["referenceType"]);o!=null&&g(e,["referenceType"],o);const a=f(t,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],B4(a));const u=f(t,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],kV(u));const d=f(t,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const h=f(t,["subjectImageConfig"]);return h!=null&&g(e,["subjectImageConfig"],h),e}function AC(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=f(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(t,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function SC(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=f(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(t,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function $4(t){const e={},n=f(t,["category"]);if(n!=null&&g(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function Q4(t){const e={},n=f(t,["image"]);return n!=null&&g(e,["image"],di(n)),e}function W4(t,e){const n={},i=f(t,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const o=f(t,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const a=f(t,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const u=f(t,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const d=f(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const h=f(t,["labels"]);return e!==void 0&&h!=null&&g(e,["labels"],h),n}function X4(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["source"]);o!=null&&eO(o,n);const a=f(e,["config"]);return a!=null&&W4(a,n),n}function Z4(t){const e={},n=f(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>x4(o))),g(e,["generatedMasks"],i)}return e}function eO(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(t,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],di(o));const a=f(t,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],Q4(a)),n}function xC(t){const e={},n=f(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=f(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function tO(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],i4(n));const i=f(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function nO(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],N4(d));const h=f(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],M4(h));const p=f(t,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function CC(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>s4(S))),g(e,["functionDeclarations"],E)}const i=f(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(t,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const h=f(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const p=f(t,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const v=f(t,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function iO(t){const e={},n=f(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const i=f(t,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(t,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function sO(t){const e={},n=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(e,["baseModel"],n);const i=f(t,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(t,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function rO(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(t,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function oO(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(t,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function aO(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","name"],$e(t,i));const o=f(e,["config"]);return o!=null&&rO(o,n),n}function lO(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["config"]);return o!=null&&oO(o,n),n}function uO(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const a=f(t,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const u=f(t,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const h=f(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","compressionQuality"],h);const p=f(t,["enhanceInputImage"]);e!==void 0&&p!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=f(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=f(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=f(t,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const w=f(t,["mode"]);return e!==void 0&&w!=null&&g(e,["parameters","mode"],w),n}function cO(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["_url","model"],$e(t,i));const o=f(e,["image"]);o!=null&&g(n,["instances[0]","image"],di(o));const a=f(e,["upscaleFactor"]);a!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&uO(u,n),n}function dO(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>yf(a))),g(e,["generatedImages"],o)}return e}function fO(t){const e={},n=f(t,["uri"]);n!=null&&g(e,["uri"],n);const i=f(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],xr(i));const o=f(t,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function hO(t){const e={},n=f(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],xr(i));const o=f(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function mO(t){const e={},n=f(t,["image"]);n!=null&&g(e,["_self"],di(n));const i=f(t,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function pO(t){const e={},n=f(t,["image"]);n!=null&&g(e,["image"],_f(n));const i=f(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function gO(t){const e={},n=f(t,["image"]);n!=null&&g(e,["image"],di(n));const i=f(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function wC(t){const e={},n=f(t,["uri"]);n!=null&&g(e,["uri"],n);const i=f(t,["videoBytes"]);i!=null&&g(e,["encodedVideo"],xr(i));const o=f(t,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function IC(t){const e={},n=f(t,["uri"]);n!=null&&g(e,["gcsUri"],n);const i=f(t,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],xr(i));const o=f(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yO(t,e){const n={},i=f(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),n}function _O(t){const e={},n=f(t,["config"]);return n!=null&&yO(n,e),e}function vO(t,e){const n={},i=f(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function TO(t){const e={},n=f(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=f(t,["config"]);return i!=null&&vO(i,e),e}function EO(t){const e={},n=f(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function AO(t,e){const n={},i=f(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}const o=f(t,["chunkingConfig"]);return e!==void 0&&o!=null&&g(e,["chunkingConfig"],o),n}function SO(t){const e={},n=f(t,["name"]);n!=null&&g(e,["name"],n);const i=f(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(t,["done"]);o!=null&&g(e,["done"],o);const a=f(t,["error"]);a!=null&&g(e,["error"],a);const u=f(t,["response"]);return u!=null&&g(e,["response"],CO(u)),e}function xO(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=f(t,["fileName"]);i!=null&&g(e,["fileName"],i);const o=f(t,["config"]);return o!=null&&AO(o,e),e}function CO(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&g(e,["parent"],i);const o=f(t,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function wO(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function IO(t){const e={},n=f(t,["config"]);return n!=null&&wO(n,e),e}function bO(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(t,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["fileSearchStores"],a)}return e}function bC(t,e){const n={},i=f(t,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const o=f(t,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const a=f(t,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>h)),g(e,["customMetadata"],d)}const u=f(t,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),n}function RO(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=f(t,["config"]);return i!=null&&bC(i,e),e}function NO(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MO="Content-Type",DO="X-Server-Timeout",PO="User-Agent",vp="x-goog-api-client",kO="1.31.0",UO=`google-genai-sdk/${kO}`,LO="v1beta1",VO="v1beta",jE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class OO{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:LO,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:VO,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(n))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,o){if(n&&n.timeout||o){const a=new AbortController,u=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>a.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&qO(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await JE(o),new mp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await JE(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return ya(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:h}=yield ct(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=a.decode(h,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),w=S.status,V=S.code,F=`got status: ${w}. ${JSON.stringify(E)}`;if(V>=400&&V<600)throw new pf({message:F,status:V})}}catch(E){if(E.name==="ApiError")throw E}u+=p;let v=u.match(jE);for(;v;){const E=v[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ct(new mp(S)),u=u.slice(v[0].length),v=u.match(jE)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=UO+" "+this.clientOptions.userAgentExtra;return e[PO]=n,e[vp]=n,e[MO]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(DO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const h={file:o},p=this.getFileName(e),v=de("upload/v1beta/files",h._url),E=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,p,h,n==null?void 0:n.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,i){var o;const a=this.clientOptions.uploader,u=await a.stat(n),d=String(u.size),h=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),E={};i!=null&&bC(i,E);const S=await this.fetchUploadUrl(p,d,h,v,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,o,a,u){var d;let h={};u?h=u:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const p=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=p==null?void 0:p.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function JE(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new pf({message:o,status:n}):new Error(o)}}function qO(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const p=u[h],v=d[h];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?d[h]=i(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),d[h]=p)}return d}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FO="mcp_used/unknown";let BO=!1;function RC(t){for(const e of t)if(zO(e)||typeof e=="object"&&"inputSchema"in e)return!0;return BO}function NC(t){var e;const n=(e=t[vp])!==null&&e!==void 0?e:"";t[vp]=(n+` ${FO}`).trimStart()}function zO(t){return t!==null&&typeof t=="object"&&t instanceof Rg}function GO(t,e=100){return ya(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield ct(t.listTools({cursor:i}));for(const u of a.tools)yield yield ct(u),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class Rg{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Rg(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,h=(n=void 0,iu(GO(v))),p;p=await h.next(),e=p.done,!e;d=!0){o=p.value,d=!1;const E=o;u.push(E);const S=E.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(E){n={error:E}}finally{try{!d&&!e&&(i=h.return)&&await i.call(h)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),EU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function HO(t,e,n){const i=new hU;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),e(i)}class KO{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=JO(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),h=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let p=()=>{};const v=new Promise(Q=>{p=Q}),E=e.callbacks,S=function(){p({})},w=this.apiClient,V={onopen:S,onmessage:Q=>{HO(w,E.onmessage,Q)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(Q){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(Q){}},F=this.webSocketFactory.create(h,jO(u),V);F.connect(),await v;const ne={setup:{model:$e(this.apiClient,e.model)}};return F.send(JSON.stringify(ne)),new YO(F,this.apiClient)}}class YO{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=_V(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=yV(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(da.PLAY)}pause(){this.sendPlaybackControl(da.PAUSE)}stop(){this.sendPlaybackControl(da.STOP)}resetContext(){this.sendPlaybackControl(da.RESET_CONTEXT)}close(){this.conn.close()}}function jO(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function JO(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $O="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function QO(t,e,n){const i=new fU;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const a=JSON.parse(o);if(t.isVertexAI()){const u=EV(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class WO{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new KO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&RC(e.config.tools)&&NC(E);const S=t3(E);if(this.apiClient.isVertexAI())v=`${h}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const N=this.apiClient.getApiKey();let k="BidiGenerateContent",U="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",U="access_token"),v=`${h}/ws/google.ai.generativelanguage.${p}.GenerativeService.${k}?${U}=${N}`}let w=()=>{};const V=new Promise(N=>{w=N}),F=e.callbacks,z=function(){var N;(N=F==null?void 0:F.onopen)===null||N===void 0||N.call(F),w({})},X=this.apiClient,ne={onopen:z,onmessage:N=>{QO(X,F.onmessage,N)},onerror:(n=F==null?void 0:F.onerror)!==null&&n!==void 0?n:function(N){},onclose:(i=F==null?void 0:F.onclose)!==null&&i!==void 0?i:function(N){}},Q=this.webSocketFactory.create(v,e3(S),ne);Q.connect(),await V;let re=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const N=this.apiClient.getProject(),k=this.apiClient.getLocation();re=`projects/${N}/locations/${k}/`+re}let ce={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[zd.AUDIO]}:e.config.responseModalities=[zd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const oe=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const N of oe)if(this.isCallableTool(N)){const k=N;M.push(await k.tool())}else M.push(N);M.length>0&&(e.config.tools=M);const R={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ce=gV(this.apiClient,R):ce=pV(this.apiClient,R),delete ce.config,Q.send(JSON.stringify(ce)),new ZO(Q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const XO={turnComplete:!0};class ZO{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Wn(n.turns),e.isVertexAI()||(i=i.map(o=>gf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error($O)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},XO),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:TV(e)}:n={realtimeInput:vV(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function e3(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function t3(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $E=10;function QE(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(_a(u)){o=!0;break}if(!o)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function _a(t){return"callTool"in t&&typeof t.callTool=="function"}function n3(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>_a(o)))!==null&&i!==void 0?i:!1}function WE(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,o)=>{if(_a(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(o)}),n}function XE(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i3 extends ys{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,a,u,d;const h=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!n3(n)||QE(n.config))return await this.generateContentInternal(h);const p=WE(n);if(p.length>0){const F=p.map(z=>`tools[${z}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${F}.`)}let v,E;const S=Wn(h.contents),w=(a=(o=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:$E;let V=0;for(;V<w&&(v=await this.generateContentInternal(h),!(!v.functionCalls||v.functionCalls.length===0));){const F=v.candidates[0].content,z=[];for(const X of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(_a(X)){const Q=await X.callTool(v.functionCalls);z.push(...Q)}V++,E={role:"user",parts:z},h.contents=Wn(h.contents),h.contents.push(F),h.contents.push(E),XE(h.config)&&(S.push(F),S.push(E))}return XE(h.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async n=>{var i,o,a,u,d;if(this.maybeMoveToResponseJsonSchem(n),QE(n.config)){const E=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(E)}const h=WE(n);if(h.length>0){const E=h.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(a=(o=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(d=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const h of i.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((o=h==null?void 0:h.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=h==null?void 0:h.safetyAttributes:u.push(h);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new _o(ms.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,a,u,d,h;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((h=(d=n.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async h=>_a(h)?await h.tool():h)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&RC(e.config.tools)){const h=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let p=Object.assign({},h);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),NC(p),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return d}async initAfcToolsMap(e){var n,i,o;const a=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(_a(u)){const d=u,h=await d.tool();for(const p of(o=h.functionDeclarations)!==null&&o!==void 0?o:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,d)}}return a}async processAfcStream(e){var n,i,o;const a=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:$E;let u=!1,d=0;const h=await this.initAfcToolsMap(e);return(function(p,v,E){var S,w;return ya(this,arguments,function*(){for(var V,F,z,X;d<a;){u&&(d++,u=!1);const ce=yield ct(p.processParamsMaybeAddMcpUsage(E)),oe=yield ct(p.generateContentStreamInternal(ce)),M=[],R=[];try{for(var ne=!0,Q=(F=void 0,iu(oe)),re;re=yield ct(Q.next()),V=re.done,!V;ne=!0){X=re.value,ne=!1;const N=X;if(yield yield ct(N),N.candidates&&(!((S=N.candidates[0])===null||S===void 0)&&S.content)){R.push(N.candidates[0].content);for(const k of(w=N.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(d<a&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(k.functionCall.name)){const U=yield ct(v.get(k.functionCall.name).callTool([k.functionCall]));M.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(N){F={error:N}}finally{try{!ne&&!V&&(z=Q.return)&&(yield ct(z.call(Q)))}finally{if(F)throw F.error}}if(M.length>0){u=!0;const N=new Hl;N.candidates=[{content:{role:"user",parts:M}}],yield yield ct(N);const k=[];k.push(...R),k.push({role:"user",parts:M});const U=Wn(E.contents).concat(k);E.contents=U}else break}})})(this,h,e)}async generateContentInternal(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=HE(this.apiClient,e);return d=de("{model}:generateContent",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=YE(v),S=new Hl;return Object.assign(S,E),S})}else{const p=GE(this.apiClient,e);return d=de("{model}:generateContent",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=KE(v),S=new Hl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=HE(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return ya(this,arguments,function*(){var S,w,V,F;try{for(var z=!0,X=iu(E),ne;ne=yield ct(X.next()),S=ne.done,!S;z=!0){F=ne.value,z=!1;const Q=F,re=YE(yield ct(Q.json()));re.sdkHttpResponse={headers:Q.headers};const ce=new Hl;Object.assign(ce,re),yield yield ct(ce)}}catch(Q){w={error:Q}}finally{try{!z&&!S&&(V=X.return)&&(yield ct(V.call(X)))}finally{if(w)throw w.error}}})})}else{const p=GE(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return ya(this,arguments,function*(){var S,w,V,F;try{for(var z=!0,X=iu(E),ne;ne=yield ct(X.next()),S=ne.done,!S;z=!0){F=ne.value,z=!1;const Q=F,re=KE(yield ct(Q.json()));re.sdkHttpResponse={headers:Q.headers};const ce=new Hl;Object.assign(ce,re),yield yield ct(ce)}}catch(Q){w={error:Q}}finally{try{!z&&!S&&(V=X.return)&&(yield ct(V.call(X)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=WV(this.apiClient,e);return d=de("{model}:predict",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=ZV(v),S=new wE;return Object.assign(S,E),S})}else{const p=QV(this.apiClient,e);return d=de("{model}:batchEmbedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=XV(v),S=new wE;return Object.assign(S,E),S})}}async generateImagesInternal(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=c4(this.apiClient,e);return d=de("{model}:predict",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=f4(v),S=new IE;return Object.assign(S,E),S})}else{const p=u4(this.apiClient,e);return d=de("{model}:predict",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=d4(v),S=new IE;return Object.assign(S,E),S})}}async editImageInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=YV(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const p=jV(h),v=new tU;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=cO(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const p=dO(h),v=new nU;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=K4(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=Y4(h),v=new iU;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=X4(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=Z4(h),v=new sU;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=R4(this.apiClient,e);return d=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>_p(v))}else{const p=b4(this.apiClient,e);return d=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>yp(v))}}async listInternal(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=O4(this.apiClient,e);return d=de("{models_url}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=F4(v),S=new bE;return Object.assign(S,E),S})}else{const p=V4(this.apiClient,e);return d=de("{models_url}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=q4(v),S=new bE;return Object.assign(S,E),S})}}async update(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=lO(this.apiClient,e);return d=de("{model}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>_p(v))}else{const p=aO(this.apiClient,e);return d=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>yp(v))}}async delete(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=zV(this.apiClient,e);return d=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=HV(v),S=new RE;return Object.assign(S,E),S})}else{const p=BV(this.apiClient,e);return d=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=GV(v),S=new RE;return Object.assign(S,E),S})}}async countTokens(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=OV(this.apiClient,e);return d=de("{model}:countTokens",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=FV(v),S=new NE;return Object.assign(S,E),S})}else{const p=VV(this.apiClient,e);return d=de("{model}:countTokens",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=qV(v),S=new NE;return Object.assign(S,E),S})}}async computeTokens(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=NV(this.apiClient,e);return a=de("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const p=MV(h),v=new rU;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=_4(this.apiClient,e);return d=de("{model}:predictLongRunning",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=g4(v),S=new Gd;return Object.assign(S,E),S})}else{const p=y4(this.apiClient,e);return d=de("{model}:predictLongRunning",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=p4(v),S=new Gd;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s3 extends ys{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=$k(e);return d=de("{operationName}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const p=Jk(e);return d=de("{operationName}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=Bk(e);return a=de("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r3(t){const e={},n=f(t,["data"]);if(n!=null&&g(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function o3(t){const e={},n=f(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>p3(a))),g(e,["parts"],o)}const i=f(t,["role"]);return i!=null&&g(e,["role"],i),e}function a3(t,e,n){const i={},o=f(e,["expireTime"]);n!==void 0&&o!=null&&g(n,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&g(n,["newSessionExpireTime"],a);const u=f(e,["uses"]);n!==void 0&&u!=null&&g(n,["uses"],u);const d=f(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&g(n,["bidiGenerateContentSetup"],m3(t,d));const h=f(e,["lockAdditionalFields"]);return n!==void 0&&h!=null&&g(n,["fieldMask"],h),i}function l3(t,e){const n={},i=f(e,["config"]);return i!=null&&g(n,["config"],a3(t,i,n)),n}function u3(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function c3(t){const e={},n=f(t,["id"]);n!=null&&g(e,["id"],n);const i=f(t,["args"]);i!=null&&g(e,["args"],i);const o=f(t,["name"]);if(o!=null&&g(e,["name"],o),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function d3(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function f3(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function h3(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(t,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const h=f(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const p=f(t,["mediaResolution"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","mediaResolution"],p);const v=f(t,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],bg(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const w=f(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=f(t,["systemInstruction"]);e!==void 0&&V!=null&&g(e,["setup","systemInstruction"],o3(an(V)));const F=f(t,["tools"]);if(e!==void 0&&F!=null){let oe=Va(F);Array.isArray(oe)&&(oe=oe.map(M=>y3(La(M)))),g(e,["setup","tools"],oe)}const z=f(t,["sessionResumption"]);e!==void 0&&z!=null&&g(e,["setup","sessionResumption"],g3(z));const X=f(t,["inputAudioTranscription"]);e!==void 0&&X!=null&&g(e,["setup","inputAudioTranscription"],X);const ne=f(t,["outputAudioTranscription"]);e!==void 0&&ne!=null&&g(e,["setup","outputAudioTranscription"],ne);const Q=f(t,["realtimeInputConfig"]);e!==void 0&&Q!=null&&g(e,["setup","realtimeInputConfig"],Q);const re=f(t,["contextWindowCompression"]);e!==void 0&&re!=null&&g(e,["setup","contextWindowCompression"],re);const ce=f(t,["proactivity"]);return e!==void 0&&ce!=null&&g(e,["setup","proactivity"],ce),n}function m3(t,e){const n={},i=f(e,["model"]);i!=null&&g(n,["setup","model"],$e(t,i));const o=f(e,["config"]);return o!=null&&g(n,["config"],h3(o,n)),n}function p3(t){const e={},n=f(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(t,["fileData"]);a!=null&&g(e,["fileData"],u3(a));const u=f(t,["functionCall"]);u!=null&&g(e,["functionCall"],c3(u));const d=f(t,["functionResponse"]);d!=null&&g(e,["functionResponse"],d);const h=f(t,["inlineData"]);h!=null&&g(e,["inlineData"],r3(h));const p=f(t,["text"]);p!=null&&g(e,["text"],p);const v=f(t,["thought"]);v!=null&&g(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function g3(t){const e={},n=f(t,["handle"]);if(n!=null&&g(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function y3(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],d3(d));const h=f(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],f3(h));const p=f(t,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _3(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${n}.${a}`);e.push(...o)}else e.push(n)}return e.join(",")}function v3(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const a=_3(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(p=>u.includes(p)?`generationConfig.${p}`:p));const h=[];a&&h.push(a),d.length>0&&h.push(...d),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class T3 extends ys{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=l3(this.apiClient,e);a=de("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const h=v3(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E3(t,e){const n={},i=f(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function A3(t){const e={},n=f(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=f(t,["config"]);return i!=null&&E3(i,e),e}function S3(t){const e={},n=f(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function x3(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function C3(t){const e={},n=f(t,["parent"]);n!=null&&g(e,["_url","parent"],n);const i=f(t,["config"]);return i!=null&&x3(i,e),e}function w3(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(t,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class I3 extends ys{constructor(e){super(),this.apiClient=e,this.list=async n=>new _o(ms.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=S3(e);return a=de("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var n,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=A3(e);o=de("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=C3(e);return a=de("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=w3(h),v=new oU;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b3 extends ys{constructor(e,n=new I3(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new _o(ms.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_O(e);return a=de("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=EO(e);return a=de("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var n,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=TO(e);o=de("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=IO(e);return a=de("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=bO(h),v=new aU;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RO(e);return a=de("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=NO(h),v=new lU;return Object.assign(v,p),v})}}async importFile(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xO(e);return a=de("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=SO(h),v=new Sg;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R3(t,e){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function N3(t,e){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function M3(t,e){const n={},i=f(t,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function D3(t,e){const n={},i=f(t,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function P3(t,e,n){const i={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&g(e,["displayName"],o),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(t,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(t,["learningRateMultiplier"]);if(u!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","batchSize"],d);const h=f(t,["learningRate"]);if(e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","learningRate"],h),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function k3(t,e,n){const i={};let o=f(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const w=f(t,["validationDataset"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec"],ZE(w))}else if(o==="PREFERENCE_TUNING"){const w=f(t,["validationDataset"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec"],ZE(w))}const a=f(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const u=f(t,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let d=f(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=f(t,["epochCount"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(d==="PREFERENCE_TUNING"){const w=f(t,["epochCount"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let h=f(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=f(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(h==="PREFERENCE_TUNING"){const w=f(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let p=f(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=f(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(p==="PREFERENCE_TUNING"){const w=f(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let v=f(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const w=f(t,["adapterSize"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(v==="PREFERENCE_TUNING"){const w=f(t,["adapterSize"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=f(t,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function U3(t,e){const n={},i=f(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const o=f(t,["preTunedModel"]);o!=null&&g(n,["preTunedModel"],o);const a=f(t,["trainingDataset"]);a!=null&&Y3(a);const u=f(t,["config"]);return u!=null&&P3(u,n),n}function L3(t,e){const n={},i=f(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const o=f(t,["preTunedModel"]);o!=null&&g(n,["preTunedModel"],o);const a=f(t,["trainingDataset"]);a!=null&&j3(a,n,e);const u=f(t,["config"]);return u!=null&&k3(u,n,e),n}function V3(t,e){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function O3(t,e){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function q3(t,e,n){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=f(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function F3(t,e,n){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=f(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function B3(t,e){const n={},i=f(t,["config"]);return i!=null&&q3(i,n),n}function z3(t,e){const n={},i=f(t,["config"]);return i!=null&&F3(i,n),n}function G3(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&g(n,["nextPageToken"],o);const a=f(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>MC(d))),g(n,["tuningJobs"],u)}return n}function H3(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&g(n,["nextPageToken"],o);const a=f(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Tp(d))),g(n,["tuningJobs"],u)}return n}function K3(t,e){const n={},i=f(t,["name"]);i!=null&&g(n,["model"],i);const o=f(t,["name"]);return o!=null&&g(n,["endpoint"],o),n}function Y3(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(n,["examples","examples"],o)}return n}function j3(t,e,n){const i={};let o=f(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function MC(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&g(n,["name"],o);const a=f(t,["state"]);a!=null&&g(n,["state"],dC(a));const u=f(t,["createTime"]);u!=null&&g(n,["createTime"],u);const d=f(t,["tuningTask","startTime"]);d!=null&&g(n,["startTime"],d);const h=f(t,["tuningTask","completeTime"]);h!=null&&g(n,["endTime"],h);const p=f(t,["updateTime"]);p!=null&&g(n,["updateTime"],p);const v=f(t,["description"]);v!=null&&g(n,["description"],v);const E=f(t,["baseModel"]);E!=null&&g(n,["baseModel"],E);const S=f(t,["_self"]);return S!=null&&g(n,["tunedModel"],K3(S)),n}function Tp(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&g(n,["name"],o);const a=f(t,["state"]);a!=null&&g(n,["state"],dC(a));const u=f(t,["createTime"]);u!=null&&g(n,["createTime"],u);const d=f(t,["startTime"]);d!=null&&g(n,["startTime"],d);const h=f(t,["endTime"]);h!=null&&g(n,["endTime"],h);const p=f(t,["updateTime"]);p!=null&&g(n,["updateTime"],p);const v=f(t,["error"]);v!=null&&g(n,["error"],v);const E=f(t,["description"]);E!=null&&g(n,["description"],E);const S=f(t,["baseModel"]);S!=null&&g(n,["baseModel"],S);const w=f(t,["tunedModel"]);w!=null&&g(n,["tunedModel"],w);const V=f(t,["preTunedModel"]);V!=null&&g(n,["preTunedModel"],V);const F=f(t,["supervisedTuningSpec"]);F!=null&&g(n,["supervisedTuningSpec"],F);const z=f(t,["preferenceOptimizationSpec"]);z!=null&&g(n,["preferenceOptimizationSpec"],z);const X=f(t,["tuningDataStats"]);X!=null&&g(n,["tuningDataStats"],X);const ne=f(t,["encryptionSpec"]);ne!=null&&g(n,["encryptionSpec"],ne);const Q=f(t,["partnerModelTuningSpec"]);Q!=null&&g(n,["partnerModelTuningSpec"],Q);const re=f(t,["customBaseModel"]);re!=null&&g(n,["customBaseModel"],re);const ce=f(t,["experiment"]);ce!=null&&g(n,["experiment"],ce);const oe=f(t,["labels"]);oe!=null&&g(n,["labels"],oe);const M=f(t,["outputUri"]);M!=null&&g(n,["outputUri"],M);const R=f(t,["pipelineJob"]);R!=null&&g(n,["pipelineJob"],R);const N=f(t,["serviceAccount"]);N!=null&&g(n,["serviceAccount"],N);const k=f(t,["tunedModelDisplayName"]);k!=null&&g(n,["tunedModelDisplayName"],k);const U=f(t,["veoTuningSpec"]);return U!=null&&g(n,["veoTuningSpec"],U),n}function J3(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&g(n,["name"],o);const a=f(t,["metadata"]);a!=null&&g(n,["metadata"],a);const u=f(t,["done"]);u!=null&&g(n,["done"],u);const d=f(t,["error"]);return d!=null&&g(n,["error"],d),n}function ZE(t,e){const n={},i=f(t,["gcsUri"]);i!=null&&g(n,["validationDatasetUri"],i);const o=f(t,["vertexDatasetResource"]);return o!=null&&g(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $3 extends ys{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _o(ms.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:hp.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=O3(e);return d=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Tp(v))}else{const p=V3(e);return d=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>MC(v))}}async listInternal(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=z3(e);return d=de("tuningJobs",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=H3(v),S=new ME;return Object.assign(S,E),S})}else{const p=B3(e);return d=de("tunedModels",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=G3(v),S=new ME;return Object.assign(S,E),S})}}async cancel(e){var n,i,o,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const p=N3(e);return d=de("{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=D3(v),S=new DE;return Object.assign(S,E),S})}else{const p=R3(e);return d=de("{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=M3(v),S=new DE;return Object.assign(S,E),S})}}async tuneInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=L3(e,e);return a=de("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>Tp(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=U3(e);return a=de("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>J3(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q3{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const W3=1024*1024*8,X3=3,Z3=1e3,e6=2,Kd="x-goog-upload-status";async function t6(t,e,n){var i;const o=await DC(t,e,n),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Kd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function n6(t,e,n){var i;const o=await DC(t,e,n),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Kd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=rC(a),d=new xg;return Object.assign(d,u),d}async function DC(t,e,n){var i,o;let a=0,u=0,d=new mp(new Response),h="upload";for(a=t.size;u<a;){const p=Math.min(W3,a-u),v=t.slice(u,u+p);u+p>=a&&(h+=", finalize");let E=0,S=Z3;for(;E<X3&&(d=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[Kd]));)E++,await s6(S),S=S*e6;if(u+=p,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Kd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function i6(t){return{size:t.size,type:t.type}}function s6(t){return new Promise(e=>setTimeout(e,t))}class r6{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await t6(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await n6(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await i6(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o6{create(e,n,i){return new a6(e,n,i)}}class a6{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eA="x-goog-api-key";class l6{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(eA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(eA,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u6="gl-node/";class c6{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=qk(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new l6(this.apiKey);this.apiClient=new OO({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:u6+"web",uploader:new r6,downloader:new Q3}),this.models=new i3(this.apiClient),this.live=new WO(this.apiClient,o,new o6),this.batches=new mL(this.apiClient),this.chats=new $L(this.models,this.apiClient),this.caches=new YL(this.apiClient),this.files=new rV(this.apiClient),this.operations=new s3(this.apiClient),this.authTokens=new T3(this.apiClient),this.tunings=new $3(this.apiClient),this.fileSearchStores=new b3(this.apiClient)}}const Er=new c6({apiKey:"AIzaSyD4Hk_B_Q59XWm-Ke2yEooDtvp6mxchQVs"}),d6=t=>{switch(t){case no.A4_PORTRAIT:return"3:4";case no.A4_LANDSCAPE:return"4:3";case no.MOBILE_STORY:return"9:16";case no.SQUARE:default:return"1:1"}},PC=t=>{const e=t.match(/^data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+);base64,(.+)$/);return e&&e.length===3?{mimeType:e[1],data:e[2]}:{mimeType:"image/jpeg",data:t.replace(/^data:image\/\w+;base64,/,"")}},f6=async(t,e)=>{try{return(await Er.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:e,data:t}},{text:"Analyze this image of a child. Describe their physical appearance in detail to help an artist draw a portrait. Focus on: Hair style/color, Eye color, Skin tone, Facial structure, and distinct features. Return a concise comma-separated list of traits."}]}})).text||"A happy child"}catch(n){return console.warn("Analysis failed",n),"A happy child"}},h6=async t=>{var d,h,p,v,E,S;if(!t.photoBase64)throw new Error("Photo required for magic photoshoot");const{mimeType:e,data:n}=PC(t.photoBase64),i=await f6(n,e);try{const w=`
        Transform this photo into a hyper-realistic, cinematic photoshoot.
        Subject: A ${t.age} year old ${t.gender}.
        Physical Description: ${i}.
        Costume/Theme: ${t.theme}.
        Style: High-end photography, 8k resolution, perfect lighting, highly detailed texture.
        IMPORTANT: You must strictly maintain the facial features and likeness of the child in the input image. 
        The output must look exactly like the child, but dressed as a ${t.theme}.
      `,V=await Er.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:e,data:n}},{text:w}]},config:{imageConfig:{aspectRatio:"1:1"}}});let F="";for(const z of((p=(h=(d=V.candidates)==null?void 0:d[0])==null?void 0:h.content)==null?void 0:p.parts)||[])if(z.inlineData){F=`data:${z.inlineData.mimeType};base64,${z.inlineData.data}`;break}if(F)return{imageUrl:F,description:i};console.warn("Gemini returned no image (likely safety block). Switching to fallback.")}catch(w){console.warn("Image-to-image generation failed. Switching to fallback.",w)}console.log("Attempting fallback generation with description:",i);const o=`
    Cinematic studio photoshoot of a ${t.age} year old ${t.gender}.
    Character Description: ${i}.
    Costume: ${t.theme}.
    Style: High-end photography, 8k resolution, cinematic lighting, photorealistic, highly detailed, Disney-Pixar realism.
    Pose: Confident and heroic.
  `,a=await Er.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:o}]},config:{imageConfig:{aspectRatio:"1:1"}}});let u="";for(const w of((S=(E=(v=a.candidates)==null?void 0:v[0])==null?void 0:E.content)==null?void 0:S.parts)||[])if(w.inlineData){u=`data:${w.inlineData.mimeType};base64,${w.inlineData.data}`;break}if(!u)throw new Error("Failed to generate avatar image (Both primary and fallback methods failed).");return{imageUrl:u,description:i}},m6=async t=>{const e=`
    Create a fun, engaging children's story (5 pages) for a ${t.age} year old ${t.gender} named ${t.childName}.
    Theme: ${t.theme}.
    Buddy: ${t.buddyName?`Sidekick named ${t.buddyName} (${t.buddyType})`:"A magical friend"}.
    
    For each page, provide:
    1. The story text (2-3 sentences).
    2. A detailed image generation prompt for an artist to draw a coloring page scene.
    
    Structure the response as a valid JSON object matching the schema.
    `,n=await Er.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{responseMimeType:"application/json",responseSchema:{type:gn.OBJECT,properties:{title:{type:gn.STRING},pages:{type:gn.ARRAY,items:{type:gn.OBJECT,properties:{id:{type:gn.INTEGER},text:{type:gn.STRING},imagePrompt:{type:gn.STRING}},required:["id","text","imagePrompt"]}}},required:["title","pages"]}}}),i=JSON.parse(n.text||"{}"),o={id:0,text:i.title,imagePrompt:`Cover art for a children's book titled "${i.title}". Theme: ${t.theme}. Character: ${t.description}. Style: Vibrant, colorful, Disney-Pixar style.`,imageUrl:t.avatarUrl,isLoadingImage:!1,isCover:!0},a=(i.pages||[]).map((u,d)=>({id:d+1,text:u.text,imagePrompt:`Black and white coloring page line art. ${u.imagePrompt}. Character details: ${t.description}. Style: Clean outlines, no shading, kids coloring book style.`,isLoadingImage:!0,isCover:!1}));return{title:i.title,pages:[o,...a]}},tA=async(t,e,n)=>{const i=d6(e),o=`${t} Character Description: ${n}. STYLE: Black and white line art, kids coloring book page, clean thick lines, no shading, white background, high contrast.`,a=`${t} Character Description: ${n}. STYLE: Vibrant 3D animated movie style, Pixar style, high quality, detailed, colorful.`,[u,d]=await Promise.all([Er.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:o}]},config:{imageConfig:{aspectRatio:i}}}),Er.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:a}]},config:{imageConfig:{aspectRatio:i}}})]),h=p=>{var v,E,S;for(const w of((S=(E=(v=p.candidates)==null?void 0:v[0])==null?void 0:E.content)==null?void 0:S.parts)||[])if(w.inlineData)return`data:${w.inlineData.mimeType};base64,${w.inlineData.data}`;return""};return{lineArt:h(u),coloredReference:h(d)}},p6=async(t,e)=>{var u,d,h,p,v,E;if(!t.photoBase64)throw new Error("Photo required");const{mimeType:n,data:i}=PC(t.photoBase64),o=`
      Photoshoot session continued.
      Subject: A ${t.age} year old ${t.gender}, described as ${t.description}.
      Theme: ${t.theme}.
      Specific Shot: ${e}.
      Style: High-end photography, 8k resolution, cinematic lighting, photorealistic.
    `;try{const S=await Er.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:n,data:i}},{text:o}]},config:{imageConfig:{aspectRatio:"1:1"}}});for(const w of((h=(d=(u=S.candidates)==null?void 0:u[0])==null?void 0:d.content)==null?void 0:h.parts)||[])if(w.inlineData)return`data:${w.inlineData.mimeType};base64,${w.inlineData.data}`}catch{console.warn("Variation generation failed with image. Trying text-only fallback.")}const a=await Er.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:o}]},config:{imageConfig:{aspectRatio:"1:1"}}});for(const S of((E=(v=(p=a.candidates)==null?void 0:p[0])==null?void 0:v.content)==null?void 0:E.parts)||[])if(S.inlineData)return`data:${S.inlineData.mimeType};base64,${S.inlineData.data}`;throw new Error("Failed to generate image variation")},g6=({onSubmit:t,onPhotoshootMode:e,isGenerating:n})=>{const[i,o]=Se.useState(1),[a,u]=Se.useState(!1),[d,h]=Se.useState({childName:"",age:5,gender:"Boy",theme:"",paperSize:no.SQUARE,buddyName:"",buddyType:"",description:"",photoBase64:void 0,avatarUrl:void 0}),p=Se.useRef(null),v=w=>{var F;const V=(F=w.target.files)==null?void 0:F[0];if(V){const z=new FileReader;z.onloadend=()=>{h(X=>({...X,photoBase64:z.result}))},z.readAsDataURL(V)}},E=async()=>{if(!(!d.photoBase64||!d.theme)){u(!0);try{const{imageUrl:w,description:V}=await h6(d);h(F=>({...F,avatarUrl:w,description:V})),o(2)}catch(w){console.error("Photoshoot generation error details:",w),alert("Failed to create magic photoshoot. Please ensure the photo is clear.")}finally{u(!1)}}},S=()=>{if(d.avatarUrl){const w=document.createElement("a");w.href=d.avatarUrl,w.download=`${d.childName}-${d.theme}-photoshoot.png`,document.body.appendChild(w),w.click(),document.body.removeChild(w)}};return i===1?T.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6 md:py-16 animate-fade-in-up",children:T.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl shadow-brand-900/5 border border-slate-100 overflow-hidden",children:[T.jsxs("div",{className:"bg-gradient-to-r from-brand-600 via-purple-600 to-magic-500 p-6 md:p-10 text-white relative overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-32"}),T.jsxs("div",{className:"relative z-10",children:[T.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[T.jsx("div",{className:"bg-white/20 p-2 rounded-xl backdrop-blur-md",children:T.jsx(zm,{size:24,className:"text-white md:w-7 md:h-7"})}),T.jsx("h2",{className:"text-xl md:text-3xl font-display font-bold",children:"Step 1: The Magic Photoshoot"})]}),T.jsx("p",{className:"opacity-90 text-sm md:text-lg font-medium pl-12 md:pl-14",children:"Let's turn your child into their dream character."})]})]}),T.jsxs("div",{className:"p-4 md:p-10 space-y-6 md:space-y-12",children:[T.jsxs("div",{className:"flex flex-row md:grid md:grid-cols-12 gap-4 md:gap-12 items-start",children:[T.jsxs("div",{className:"w-[35%] md:w-auto md:col-span-4 shrink-0 space-y-2 md:space-y-3",children:[T.jsxs("label",{className:"text-[10px] md:text-sm font-bold text-slate-700 ml-1 flex items-center whitespace-nowrap",children:[T.jsx(LI,{size:12,className:"mr-1 md:mr-2 text-brand-500 md:w-4 md:h-4"}),T.jsx("span",{className:"md:hidden",children:"Photo"}),T.jsx("span",{className:"hidden md:inline",children:"Upload Photo"})]}),T.jsxs("div",{onClick:()=>{var w;return(w=p.current)==null?void 0:w.click()},className:`aspect-square rounded-2xl md:rounded-3xl border-2 border-dashed transition-all duration-300 relative overflow-hidden group cursor-pointer ${d.photoBase64?"border-brand-500 p-0.5 md:p-1 bg-white shadow-lg shadow-brand-100":"border-slate-300 hover:border-brand-400 hover:bg-slate-50"}`,children:[d.photoBase64?T.jsxs("div",{className:"relative w-full h-full rounded-xl md:rounded-2xl overflow-hidden group-hover:opacity-90 transition",children:[T.jsx("img",{src:d.photoBase64,alt:"Upload",className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 group-hover:opacity-100 transition",children:T.jsx("span",{className:"text-white font-bold text-[10px] md:text-sm bg-black/20 backdrop-blur px-2 py-1 rounded-full",children:"Change"})})]}):T.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400 group-hover:text-brand-500 transition",children:[T.jsx("div",{className:"bg-slate-100 group-hover:bg-brand-50 p-3 md:p-5 rounded-full mb-2 md:mb-3 transition",children:T.jsx(zm,{size:20,className:"md:w-8 md:h-8"})}),T.jsxs("span",{className:"text-[10px] md:text-sm font-bold text-center leading-tight",children:["Click to",T.jsx("br",{className:"md:hidden"})," Upload"]})]}),T.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:v,className:"hidden"})]}),T.jsx("p",{className:"hidden md:block text-xs text-center text-slate-400 font-medium",children:"Use a clear, front-facing photo."})]}),T.jsxs("div",{className:"flex-1 md:col-span-8 space-y-3 md:space-y-6",children:[T.jsxs("div",{className:"space-y-1 md:space-y-2",children:[T.jsx("label",{className:"text-[10px] md:text-sm font-bold text-slate-700 ml-1",children:"Name"}),T.jsx("input",{type:"text",value:d.childName,onChange:w=>h({...d,childName:w.target.value}),className:"w-full px-3 py-2 md:px-5 md:py-3.5 rounded-xl md:rounded-2xl bg-slate-50 border border-slate-200 focus:border-brand-500 focus:bg-white focus:ring-2 md:focus:ring-4 focus:ring-brand-500/10 outline-none transition font-medium text-sm md:text-base",placeholder:"e.g. Aarav"})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-5",children:[T.jsxs("div",{className:"space-y-1 md:space-y-2",children:[T.jsx("label",{className:"text-[10px] md:text-sm font-bold text-slate-700 ml-1",children:"Age"}),T.jsx("input",{type:"number",value:d.age,onChange:w=>h({...d,age:parseInt(w.target.value)}),className:"w-full px-3 py-2 md:px-5 md:py-3.5 rounded-xl md:rounded-2xl bg-slate-50 border border-slate-200 focus:border-brand-500 focus:bg-white focus:ring-2 md:focus:ring-4 focus:ring-brand-500/10 outline-none transition font-medium text-sm md:text-base"})]}),T.jsxs("div",{className:"space-y-1 md:space-y-2",children:[T.jsx("label",{className:"text-[10px] md:text-sm font-bold text-slate-700 ml-1",children:"Gender"}),T.jsxs("div",{className:"relative",children:[T.jsxs("select",{value:d.gender,onChange:w=>h({...d,gender:w.target.value}),className:"w-full px-3 py-2 md:px-5 md:py-3.5 rounded-xl md:rounded-2xl bg-slate-50 border border-slate-200 focus:border-brand-500 focus:bg-white focus:ring-2 md:focus:ring-4 focus:ring-brand-500/10 outline-none transition appearance-none font-medium cursor-pointer text-sm md:text-base",children:[T.jsx("option",{value:"Boy",children:"Boy"}),T.jsx("option",{value:"Girl",children:"Girl"})]}),T.jsx(uA,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none w-3 h-3 md:w-4 md:h-4"})]})]})]}),T.jsxs("div",{className:"space-y-1 md:space-y-2",children:[T.jsx("label",{className:"text-[10px] md:text-sm font-bold text-slate-700 ml-1",children:"Book Size"}),T.jsxs("div",{className:"relative",children:[T.jsx("select",{value:d.paperSize,onChange:w=>h({...d,paperSize:w.target.value}),className:"w-full px-3 py-2 md:px-5 md:py-3.5 rounded-xl md:rounded-2xl bg-slate-50 border border-slate-200 focus:border-brand-500 focus:bg-white focus:ring-2 md:focus:ring-4 focus:ring-brand-500/10 outline-none transition appearance-none font-medium cursor-pointer text-sm md:text-base",children:Object.values(no).map(w=>T.jsx("option",{value:w,children:w},w))}),T.jsx(Td,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none w-3 h-3 md:w-4 md:h-4"})]})]}),T.jsxs("div",{className:"hidden md:flex bg-sky-50 border border-sky-100 p-5 rounded-2xl items-start gap-4",children:[T.jsx("div",{className:"bg-sky-100 p-2 rounded-lg text-sky-600 shrink-0",children:T.jsx(Kl,{size:20})}),T.jsxs("p",{className:"text-sm text-sky-900 leading-relaxed pt-1",children:[T.jsx("span",{className:"font-bold",children:"Magic Analysis:"})," Our AI will automatically analyze your photo to capture facial features like hair color, eye shape, and smile to keep the character consistent!"]})]})]})]}),T.jsx("div",{className:"border-t border-slate-100 my-6 md:my-8"}),T.jsxs("div",{className:"space-y-4 md:space-y-6",children:[T.jsxs("label",{className:"text-lg md:text-xl font-display font-bold text-slate-900 flex items-center",children:[T.jsx(jI,{className:"mr-2 text-magic-500 w-5 h-5 md:w-6 md:h-6"}),"Choose a Theme"]}),T.jsx("div",{className:"h-80 md:h-96 overflow-y-auto pr-2 custom-scrollbar",children:T.jsx("div",{className:"space-y-6 md:space-y-8",children:Object.entries(iA).map(([w,V])=>T.jsxs("div",{children:[T.jsxs("h3",{className:"text-[10px] md:text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 md:mb-4 flex items-center",children:[T.jsx("span",{className:"w-1 h-1 bg-slate-400 rounded-full mr-2"}),w]}),T.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2 md:gap-3",children:V.map(F=>T.jsxs("button",{onClick:()=>h({...d,theme:F}),className:`px-3 py-2 md:px-4 md:py-3 rounded-xl text-xs md:text-sm font-medium text-left transition-all duration-200 relative overflow-hidden group ${d.theme===F?"bg-gradient-to-br from-brand-500 to-magic-500 text-white shadow-lg shadow-brand-500/30 scale-105 ring-offset-2 ring-offset-white":"bg-slate-50 text-slate-600 hover:bg-white hover:shadow-md border border-transparent hover:border-slate-100"}`,children:[T.jsx("span",{className:"relative z-10",children:F}),d.theme===F&&T.jsx(Kl,{className:"absolute top-1 right-1 opacity-20 text-white w-6 h-6 md:w-8 md:h-8"})]},F))})]},w))})})]}),T.jsxs("div",{className:"pt-4 md:pt-6",children:[T.jsx("button",{onClick:E,disabled:a||!d.photoBase64||!d.theme||!d.childName,className:"w-full bg-slate-900 hover:bg-brand-600 disabled:bg-slate-200 disabled:text-slate-400 disabled:cursor-not-allowed text-white text-base md:text-xl font-bold py-4 md:py-5 rounded-2xl shadow-xl shadow-slate-900/20 hover:shadow-brand-500/30 transition-all transform hover:-translate-y-1 flex items-center justify-center space-x-3 group",children:a?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"animate-spin rounded-full h-5 w-5 md:h-6 md:w-6 border-b-2 border-white/50 border-r-2 border-r-white"}),T.jsx("span",{children:"Casting Magic Spell..."})]}):T.jsxs(T.Fragment,{children:[T.jsx(Kl,{size:20,className:"text-yellow-300 group-hover:animate-pulse md:w-6 md:h-6"}),T.jsx("span",{children:"Generate Magic Photoshoot"})]})}),!d.photoBase64&&T.jsx("p",{className:"text-center text-red-400/80 text-xs md:text-sm mt-3 md:mt-4 font-medium animate-pulse",children:"* Please upload a photo to start the magic"})]})]})]})}):T.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12 animate-fade-in",children:T.jsxs("div",{className:"bg-white rounded-[2rem] md:rounded-[2.5rem] shadow-2xl shadow-slate-200/50 border border-white/50 overflow-hidden relative",children:[T.jsx("div",{className:"absolute top-0 inset-x-0 h-48 md:h-64 bg-slate-900"}),T.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-brand-500/20 rounded-full blur-3xl pointer-events-none"}),T.jsxs("div",{className:"relative z-10 px-6 md:px-12 pt-8 md:pt-12 pb-12 md:pb-16",children:[T.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 md:mb-12 text-white",children:[T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center space-x-2 mb-2 text-brand-300 font-bold uppercase tracking-wider text-xs md:text-sm",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-brand-400 animate-pulse"}),T.jsx("span",{children:"Photoshoot Complete"})]}),T.jsx("h2",{className:"text-3xl md:text-5xl font-display font-bold",children:"The Reveal"}),T.jsxs("p",{className:"opacity-80 text-base md:text-lg mt-2 font-light",children:["Here is ",d.childName," transformed into a ",d.theme,"!"]})]}),T.jsx("button",{onClick:()=>o(1),className:"mt-6 md:mt-0 px-6 py-2 bg-white/10 hover:bg-white/20 backdrop-blur rounded-full text-xs md:text-sm font-bold transition border border-white/10 w-fit",children:"Change Settings"})]}),T.jsxs("div",{className:"grid lg:grid-cols-12 gap-8 md:gap-12",children:[T.jsxs("div",{className:"lg:col-span-5 flex flex-col items-center",children:[T.jsxs("div",{className:"relative group perspective-1000 mb-6 md:mb-8 w-full max-w-[320px] md:max-w-[400px]",children:[T.jsxs("div",{className:"aspect-square bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border-4 md:border-8 border-white ring-1 ring-slate-100 relative transform transition duration-500 group-hover:scale-[1.02]",children:[d.avatarUrl?T.jsx("img",{src:d.avatarUrl,alt:"Generated Avatar",className:"w-full h-full object-cover"}):T.jsx("div",{className:"w-full h-full bg-slate-100 flex items-center justify-center text-slate-300",children:"No Image"}),T.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-6 pt-24",children:T.jsx("p",{className:"text-white font-bold text-xl md:text-2xl font-display tracking-wide",children:d.theme})})]}),T.jsxs("div",{className:"absolute -top-4 -right-4 md:-top-6 md:-right-6 bg-yellow-400 text-yellow-950 font-black px-3 py-1.5 md:px-4 md:py-2 rounded-full shadow-xl rotate-12 border-2 border-white z-20 flex items-center gap-1 text-xs md:text-sm",children:[T.jsx(Kl,{size:14,fill:"currentColor",className:"md:w-4 md:h-4"})," Real AI Magic"]})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full max-w-[320px] md:max-w-[400px]",children:[T.jsxs("button",{onClick:S,className:"bg-slate-100 hover:bg-slate-200 text-slate-700 font-bold py-3 md:py-3.5 rounded-xl flex items-center justify-center gap-2 transition text-sm md:text-base",children:[T.jsx(Ed,{size:16,className:"md:w-[18px]"}),"Download"]}),T.jsxs("button",{onClick:E,disabled:a,className:"bg-slate-100 hover:bg-slate-200 text-slate-700 font-bold py-3 md:py-3.5 rounded-xl flex items-center justify-center gap-2 transition text-sm md:text-base",title:"Regenerate",children:[T.jsx(Ad,{size:16,className:a?"animate-spin md:w-[18px]":"md:w-[18px]"}),"Retake"]})]})]}),T.jsxs("div",{className:"lg:col-span-7 flex flex-col justify-center space-y-4 md:space-y-6 pt-4",children:[T.jsx("h3",{className:"text-xl md:text-2xl font-bold text-slate-900 mb-2",children:"Choose Your Adventure"}),T.jsxs("div",{onClick:()=>!n&&t(d),className:`group relative bg-white border-2 border-slate-100 hover:border-brand-500 rounded-2xl md:rounded-[2rem] p-6 md:p-8 cursor-pointer transition-all duration-300 hover:shadow-2xl hover:shadow-brand-900/10 flex items-center gap-4 md:gap-6 overflow-hidden ${n?"opacity-50 pointer-events-none":""}`,children:[T.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-brand-50 rounded-full blur-3xl -mr-10 -mt-10 group-hover:bg-brand-100 transition-colors"}),T.jsx("div",{className:"bg-brand-50 group-hover:bg-brand-500 group-hover:text-white p-4 md:p-5 rounded-2xl text-brand-600 transition-colors duration-300 relative z-10 shrink-0",children:T.jsx(Td,{size:28,className:"md:w-9 md:h-9"})}),T.jsxs("div",{className:"flex-1 relative z-10",children:[T.jsx("h4",{className:"text-lg md:text-2xl font-bold text-slate-900 group-hover:text-brand-600 transition-colors",children:"Create Color Storybook"}),T.jsx("p",{className:"text-slate-500 mt-1 md:mt-2 font-medium text-xs md:text-base",children:"Generate a 5-page adventure story with custom coloring pages featuring this character."})]}),T.jsx("div",{className:"bg-slate-100 text-slate-400 group-hover:bg-brand-500 group-hover:text-white p-2 md:p-3 rounded-full transition-all duration-300 transform group-hover:translate-x-1 relative z-10 shrink-0",children:n?T.jsx(Ad,{className:"animate-spin",size:20}):T.jsx(Bm,{size:20,className:"md:w-6 md:h-6"})})]}),T.jsxs("div",{onClick:()=>e(d),className:"group relative bg-white border-2 border-slate-100 hover:border-magic-500 rounded-2xl md:rounded-[2rem] p-6 md:p-8 cursor-pointer transition-all duration-300 hover:shadow-2xl hover:shadow-magic-900/10 flex items-center gap-4 md:gap-6 overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-magic-50 rounded-full blur-3xl -mr-10 -mt-10 group-hover:bg-magic-100 transition-colors"}),T.jsx("div",{className:"bg-magic-50 group-hover:bg-magic-500 group-hover:text-white p-4 md:p-5 rounded-2xl text-magic-600 transition-colors duration-300 relative z-10 shrink-0",children:T.jsx(zI,{size:28,className:"md:w-9 md:h-9"})}),T.jsxs("div",{className:"flex-1 relative z-10",children:[T.jsx("h4",{className:"text-lg md:text-2xl font-bold text-slate-900 group-hover:text-magic-600 transition-colors",children:"Enter Magic Gallery"}),T.jsx("p",{className:"text-slate-500 mt-1 md:mt-2 font-medium text-xs md:text-base",children:"Generate 4 more studio portraits: Action shots, close-ups, and playful scenes."})]}),T.jsx("div",{className:"bg-slate-100 text-slate-400 group-hover:bg-magic-500 group-hover:text-white p-2 md:p-3 rounded-full transition-all duration-300 transform group-hover:translate-x-1 relative z-10 shrink-0",children:T.jsx(Bm,{size:20,className:"md:w-6 md:h-6"})})]})]})]})]})]})})},kC=({itemLabel:t,price:e,onClose:n,onSuccess:i})=>{const[o,a]=Se.useState("SUMMARY"),[u,d]=Se.useState(!1),h=()=>{d(!0);const p={key:"rzp_test_Rn2uglCRjaNGD1",amount:e*100,currency:"INR",name:"Wayne Creative Alliance Pvt Ltd",description:t,image:"https://ui-avatars.com/api/?name=Kidzy+Color&background=8b5cf6&color=fff",handler:function(v){console.log("Payment Successful",v),a("SUCCESS"),setTimeout(()=>{i()},1500)},prefill:{name:"",email:"",contact:""},theme:{color:"#8b5cf6"},modal:{ondismiss:function(){d(!1)}}};try{const v=new window.Razorpay(p);v.on("payment.failed",function(E){alert("Payment Failed: "+E.error.description),d(!1)}),v.open()}catch(v){console.error("Razorpay Error",v),alert("Something went wrong initializing payment. Please try again."),d(!1)}};return T.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm animate-fade-in",children:T.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden transform transition-all scale-100",children:[T.jsxs("div",{className:"bg-slate-50 p-4 border-b border-slate-100 flex justify-between items-center",children:[T.jsxs("div",{className:"flex items-center space-x-2 text-slate-700 font-bold",children:[T.jsx(lA,{size:18,className:"text-green-500"}),T.jsx("span",{className:"text-sm",children:"Secure Checkout"})]}),T.jsx("button",{onClick:n,className:"p-1 hover:bg-slate-200 rounded-full transition text-slate-500",children:T.jsx(cA,{size:20})})]}),T.jsxs("div",{className:"p-8",children:[o==="SUMMARY"&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"mb-8 text-center",children:[T.jsx("p",{className:"text-slate-500 text-sm uppercase tracking-wide font-bold mb-1",children:"Purchase Summary"}),T.jsx("h3",{className:"text-2xl font-display font-bold text-slate-900",children:t}),T.jsxs("div",{className:"mt-4 text-4xl font-bold text-brand-600",children:["",e]})]}),T.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 mb-6 border border-slate-100 text-sm text-slate-600",children:[T.jsxs("div",{className:"flex justify-between mb-2",children:[T.jsx("span",{children:"Subtotal"}),T.jsxs("span",{children:["",e]})]}),T.jsxs("div",{className:"flex justify-between font-bold text-slate-900 pt-2 border-t border-slate-200",children:[T.jsx("span",{children:"Total Due"}),T.jsxs("span",{children:["",e]})]})]}),T.jsxs("div",{className:"space-y-4",children:[T.jsx("button",{onClick:h,disabled:u,className:"w-full bg-brand-600 hover:bg-brand-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-brand-200 transition transform active:scale-95 flex justify-center items-center",children:u?T.jsxs(T.Fragment,{children:[T.jsx("span",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Processing..."]}):T.jsxs(T.Fragment,{children:[T.jsx(VI,{className:"mr-2",size:20}),"Pay with Razorpay"]})}),T.jsx("div",{className:"text-center",children:T.jsxs("p",{className:"text-[10px] text-slate-400 flex items-center justify-center",children:[T.jsx(su,{size:10,className:"mr-1"}),"Payments processed securely by Razorpay for Wayne Creative Alliance Pvt Ltd."]})})]})]}),o==="SUCCESS"&&T.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-center animate-fade-in-up",children:[T.jsx("div",{className:"w-20 h-20 bg-green-100 text-green-500 rounded-full flex items-center justify-center mb-6 shadow-lg",children:T.jsx(MI,{size:40,strokeWidth:3})}),T.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Payment Successful!"}),T.jsx("p",{className:"text-slate-500 mt-2",children:"Unlocking your magical content..."})]})]})]})})},y6=({story:t,paperSize:e,characterDescription:n,onBack:i,onSave:o})=>{const[a,u]=Se.useState(t),[d,h]=Se.useState(0),[p,v]=Se.useState(!1),[E,S]=Se.useState(!0),[w,V]=Se.useState(!1),[F,z]=Se.useState(!1),X=a.pages[d],ne=Se.useCallback(async U=>{const L=a.pages[U];if(!(L.isCover||L.imageUrl||!L.isLoadingImage))try{const{lineArt:D,coloredReference:Ge}=await tA(L.imagePrompt,e,n);u(nt=>({...nt,pages:nt.pages.map((J,le)=>le===U?{...J,imageUrl:D,referenceImageUrl:Ge,isLoadingImage:!1}:J)}))}catch{console.error("Failed to load image for page",U),u(Ge=>({...Ge,pages:Ge.pages.map((nt,J)=>J===U?{...nt,isLoadingImage:!1}:nt)}))}},[a.pages,e,n]);Se.useEffect(()=>{a.pages.length>1&&ne(1)},[]),Se.useEffect(()=>{ne(d),d+1<a.pages.length&&setTimeout(()=>ne(d+1),1e3)},[d,ne,a.pages.length]);const Q=()=>{d<a.pages.length-1&&h(U=>U+1)},re=()=>{d>0&&h(U=>U-1)},ce=async()=>{if(!X.isCover){v(!0);try{const{lineArt:U,coloredReference:L}=await tA(X.imagePrompt,e,n);u(D=>({...D,pages:D.pages.map((Ge,nt)=>nt===d?{...Ge,imageUrl:U,referenceImageUrl:L}:Ge)}))}finally{v(!1)}}},oe=U=>{u(L=>({...L,pages:L.pages.map((D,Ge)=>Ge===d?{...D,text:U}:D)}))},M=()=>{F?window.print():V(!0)},R=()=>{V(!1),z(!0),setTimeout(()=>{alert("Payment Successful! Generating High-Res PDF..."),window.print()},500)},N=()=>T.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-brand-600 to-purple-800 text-white flex flex-col items-center justify-center p-8 relative overflow-hidden print:bg-white print:text-black",children:[T.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10 print:hidden"}),T.jsxs("div",{className:"z-10 text-center w-full max-w-2xl flex flex-col items-center h-full justify-between py-4",children:[T.jsxs("div",{children:[T.jsx("h1",{className:"text-4xl md:text-6xl font-display font-bold leading-tight mb-4 text-yellow-300 drop-shadow-lg print:text-black print:drop-shadow-none",children:a.title}),T.jsx("p",{className:"text-xl text-white/90 font-light tracking-widest uppercase print:text-black",children:"A Personalized Coloring Adventure"})]}),T.jsx("div",{className:"relative my-6 w-full flex-1 flex items-center justify-center min-h-0",children:T.jsxs("div",{className:"relative p-2 bg-white/10 rounded-2xl backdrop-blur-sm shadow-2xl inline-block max-h-full print:shadow-none print:border-0",children:[T.jsx("img",{src:X.imageUrl,alt:"Cover",className:"rounded-xl shadow-lg max-h-[50vh] md:max-h-[60vh] w-auto object-contain border-4 border-white/20 print:border-0 print:shadow-none"}),T.jsx("div",{className:"absolute -bottom-6 -right-6 bg-yellow-400 text-yellow-900 p-4 rounded-full shadow-xl rotate-12 transform scale-90 md:scale-100 print:hidden",children:T.jsx(Sd,{fill:"currentColor",size:32})})]})}),T.jsx("div",{className:"bg-white/20 backdrop-blur-md px-8 py-3 rounded-full mt-4 print:hidden",children:T.jsxs("h2",{className:"text-2xl font-bold flex items-center",children:[T.jsx("span",{className:"mr-2",children:""})," ",X.text," ",T.jsx("span",{className:"ml-2",children:""})]})}),T.jsx("div",{className:"hidden print:block text-xl font-bold mt-4",children:X.text})]})]}),k=()=>T.jsxs("div",{className:"flex-1 flex flex-col md:flex-row h-full print:block",children:[T.jsxs("div",{className:"md:w-1/2 bg-slate-100 relative flex items-center justify-center p-4 md:p-8 border-b md:border-b-0 md:border-r border-slate-200 h-1/2 md:h-full print:w-full print:h-[80vh] print:border-0 print:bg-white",children:[X.isLoadingImage||p?T.jsxs("div",{className:"flex flex-col items-center text-slate-400 print:hidden",children:[T.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500 mb-4"}),T.jsx("span",{className:"text-sm font-medium",children:"Drawing Line Art..."})]}):X.imageUrl?T.jsxs("div",{className:"relative inline-block h-full flex items-center justify-center print:h-full print:w-full",children:[T.jsx("img",{src:X.imageUrl,alt:"Coloring Page",className:"max-h-full max-w-full object-contain shadow-lg bg-white p-2 border border-slate-100 print:shadow-none print:border-0"}),X.referenceImageUrl&&E&&T.jsxs("div",{className:"absolute top-4 right-4 w-24 md:w-32 aspect-auto border-4 border-white shadow-xl rounded-lg overflow-hidden transform rotate-3 hover:scale-150 transition-transform duration-300 origin-top-right z-10 bg-white group print:hidden",children:[T.jsx("img",{src:X.referenceImageUrl,alt:"Color Reference",className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[9px] font-bold text-center py-0.5",children:"COLOR GUIDE"})]})]}):T.jsxs("div",{className:"text-red-400 text-center p-4 print:hidden",children:[T.jsx("p",{children:"Failed to load image."}),T.jsx("button",{onClick:ce,className:"text-brand-500 underline mt-2",children:"Retry"})]}),T.jsxs("div",{className:"absolute bottom-4 right-4 flex space-x-2 print:hidden",children:[T.jsx("button",{onClick:()=>S(!E),className:`p-2 rounded-full shadow-md transition hover:scale-110 ${E?"bg-brand-100 text-brand-600":"bg-white/90 text-slate-600"}`,title:"Toggle Color Reference",children:T.jsx(qI,{size:20})}),T.jsx("button",{onClick:ce,className:"bg-white/90 p-2 rounded-full shadow-md text-slate-600 hover:text-brand-600 tooltip transition hover:scale-110",title:"Regenerate Image",children:T.jsx(Ad,{size:20,className:p?"animate-spin":""})}),T.jsx("button",{className:"bg-white/90 p-2 rounded-full shadow-md text-slate-600 hover:text-brand-600 tooltip transition hover:scale-110",title:"Add Sticker",children:T.jsx(WI,{size:20})})]})]}),T.jsxs("div",{className:"md:w-1/2 p-6 md:p-10 flex flex-col justify-center bg-white h-1/2 md:h-full overflow-y-auto print:w-full print:h-[20vh] print:block",children:[T.jsxs("div",{className:"mb-4 flex justify-between items-center print:hidden",children:[T.jsxs("span",{className:"text-xs font-bold tracking-widest text-slate-400 uppercase",children:["Page ",d+1," of ",a.pages.length]}),T.jsx("span",{className:"text-xs bg-slate-100 text-slate-500 px-2 py-1 rounded",children:e})]}),T.jsx("textarea",{value:X.text,onChange:U=>oe(U.target.value),className:"w-full h-full min-h-[200px] text-xl md:text-2xl font-display leading-relaxed text-slate-800 outline-none resize-none border-b-2 border-transparent hover:border-slate-100 focus:border-brand-500 transition bg-transparent print:hidden"}),T.jsx("div",{className:"hidden print:block text-2xl font-display p-4 text-center",children:X.text}),T.jsxs("div",{className:"mt-4 text-slate-400 text-sm flex items-center print:hidden",children:[T.jsx(JI,{size:14,className:"mr-1"}),T.jsx("span",{children:"Click text to edit"})]})]})]});return T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 h-[calc(100vh-64px)] flex flex-col print:h-auto print:w-full print:p-0",children:[w&&T.jsx(kC,{itemLabel:"Digital Storybook PDF",price:99,onClose:()=>V(!1),onSuccess:R}),T.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4 shrink-0 gap-4 print:hidden",children:[T.jsxs("div",{className:"flex items-center space-x-4",children:[T.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-800 font-medium",children:" Library"}),T.jsx("h1",{className:"text-xl md:text-2xl font-display font-bold text-brand-900 truncate max-w-md",children:a.title})]}),T.jsxs("div",{className:"flex items-center space-x-3",children:[T.jsxs("button",{onClick:o,className:"bg-brand-100 hover:bg-brand-200 text-brand-700 px-4 py-2 rounded-xl font-bold flex items-center text-sm transition",children:[T.jsx($I,{size:16,className:"mr-2"}),"Save to Library"]}),T.jsxs("button",{onClick:M,className:"bg-brand-600 hover:bg-brand-700 text-white border border-transparent px-4 py-2 rounded-xl font-bold flex items-center text-sm shadow-lg shadow-brand-200 transition transform hover:scale-105",children:[F?T.jsx(aA,{size:16,className:"mr-2"}):T.jsx(Ed,{size:16,className:"mr-2"}),F?"Print / Download PDF":"Download PDF (99)"]})]})]}),T.jsx("div",{className:"flex-1 flex flex-col min-h-0 print:block print:h-auto",children:T.jsxs("div",{className:"flex-1 bg-white rounded-3xl shadow-2xl border border-slate-200 overflow-hidden flex flex-col relative print:shadow-none print:border-0 print:rounded-none",children:[X.isCover?N():k(),T.jsxs("div",{className:"bg-slate-50 p-4 flex items-center justify-between border-t border-slate-200 shrink-0 z-20 print:hidden",children:[T.jsx("button",{onClick:re,disabled:d===0,className:"p-3 rounded-full hover:bg-white hover:shadow-md disabled:opacity-30 disabled:hover:bg-transparent disabled:hover:shadow-none transition text-slate-700",children:T.jsx(bI,{size:24})}),T.jsx("div",{className:"flex space-x-2 overflow-x-auto px-2",children:a.pages.map((U,L)=>T.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${L===d?"w-8 bg-brand-500":"w-2 bg-slate-300"}`},L))}),T.jsx("button",{onClick:Q,disabled:d===a.pages.length-1,className:"p-3 rounded-full hover:bg-white hover:shadow-md disabled:opacity-30 disabled:hover:bg-transparent disabled:hover:shadow-none transition text-slate-700",children:T.jsx(RI,{size:24})})]})]})})]})},_6=[{label:"Wide Angle Scene",prompt:"Wide angle full body shot, standing confidently in the environment, epic background"},{label:"Close-up Portrait",prompt:"Extreme close up portrait, smiling happily, looking at camera, shallow depth of field"},{label:"Action Shot",prompt:"Dynamic action pose, running or flying or jumping, high energy, motion blur"},{label:"With Companion",prompt:"Interacting with a friendly magical creature or robot or animal relevant to the theme"}],v6=({config:t,onBack:e,onSavePhoto:n})=>{const[i,o]=Se.useState(_6.map((E,S)=>({id:S.toString(),label:E.label,prompt:E.prompt,isLoading:!0,url:void 0}))),[a,u]=Se.useState(!1),[d,h]=Se.useState(!1);Se.useEffect(()=>{(async()=>{for(let S=0;S<i.length;S++){const w=i[S];if(!w.url)try{const V=await p6(t,w.prompt);o(F=>F.map(z=>z.id===w.id?{...z,url:V,isLoading:!1}:z)),n(V,w.prompt)}catch(V){console.error(`Failed to generate ${w.label}`,V),o(F=>F.map(z=>z.id===w.id?{...z,isLoading:!1}:z))}}})()},[]);const p=(E,S)=>{if(!d){u(!0);return}const w=document.createElement("a");w.href=E,w.download=`kidzy-gallery-${S.replace(/\s+/g,"-").toLowerCase()}.png`,document.body.appendChild(w),w.click(),document.body.removeChild(w)},v=()=>{u(!1),h(!0)};return T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a&&T.jsx(kC,{itemLabel:"Unlock High-Res Gallery Pack",price:99,onClose:()=>u(!1),onSuccess:v}),T.jsxs("div",{className:"flex items-center justify-between mb-8",children:[T.jsxs("div",{className:"flex items-center",children:[T.jsx("button",{onClick:e,className:"mr-4 p-2 hover:bg-slate-100 rounded-full transition",children:T.jsx(Yd,{size:24,className:"text-slate-600"})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-display font-bold text-slate-900",children:"Magic Photoshoot Gallery"}),T.jsxs("p",{className:"text-slate-600",children:["Exclusive AI studio shots of ",t.childName," as a ",t.theme]})]})]}),!d&&T.jsx("button",{onClick:()=>u(!0),className:"bg-brand-600 hover:bg-brand-700 text-white px-6 py-3 rounded-full font-bold shadow-xl shadow-brand-200 animate-pulse",children:"Unlock All Downloads (99)"})]}),T.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:i.map(E=>T.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-slate-100 flex flex-col",children:[T.jsxs("div",{className:"relative aspect-[4/3] bg-slate-100 group",children:[E.isLoading?T.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[T.jsx(Ad,{className:"animate-spin mb-2",size:32}),T.jsx("span",{children:"Developing photo..."})]}):E.url?T.jsx("img",{src:E.url,alt:E.label,className:`w-full h-full object-cover ${d?"":"blur-[2px] transition duration-700"}`}):T.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-red-400",children:[T.jsx(oA,{size:32}),T.jsx("span",{className:"ml-2",children:"Generation Failed"})]}),!E.isLoading&&E.url&&T.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:T.jsxs("button",{onClick:()=>p(E.url,E.label),className:`${d?"bg-white text-slate-900":"bg-brand-600 text-white"} px-6 py-3 rounded-full font-bold flex items-center shadow-xl hover:scale-105 transition`,children:[d?T.jsx(Ed,{size:20,className:"mr-2"}):T.jsx(su,{size:20,className:"mr-2"}),d?"Download":"Unlock High-Res"]})})]}),T.jsxs("div",{className:"p-4 border-t border-slate-100 flex justify-between items-center bg-slate-50",children:[T.jsx("span",{className:"font-bold text-slate-700",children:E.label}),!E.isLoading&&E.url&&T.jsxs("button",{onClick:()=>p(E.url,E.label),className:"text-brand-600 text-sm font-medium hover:underline flex items-center",children:[d?T.jsx(Ed,{size:16,className:"mr-1"}):T.jsx(su,{size:16,className:"mr-1"}),"High-Res"]})]})]},E.id))})]})},T6=[{id:"free",name:"Preview",price:"Free",features:['1 Free "Photoshoot" Preview',"Watermarked Portrait","No High-Res Download"],cta:"Try Now"},{id:"pay-per",name:"Digital Pack",price:"99",features:["High-Res PDF Storybook","Unlocks All Gallery Photos","Print-Ready Quality (300 DPI)","No Watermarks"],isPopular:!0,cta:"Buy Now"},{id:"sub",name:"Kidzy Club",price:"499/yr",features:["Unlimited Downloads","Access to All Themes","Priority Fast Processing","Cancel Anytime"],cta:"Join Club"},{id:"print",name:"Hardcover",price:"1,499",features:["Physical Hardcover Book","Delivered to your Door","Includes Digital Copy","Premium Paper"],cta:"Order Print"}],E6=({onBack:t})=>T.jsxs("div",{className:"py-12 px-4 max-w-7xl mx-auto",children:[T.jsxs("div",{className:"text-center mb-12",children:[T.jsx("h2",{className:"text-4xl font-display font-bold text-brand-900 mb-4",children:"Simple, Affordable Pricing"}),T.jsx("p",{className:"text-slate-600 text-lg max-w-2xl mx-auto",children:"Get high-quality, print-ready memories of your child's adventures for less than the cost of a coffee."})]}),T.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:T6.map(e=>T.jsxs("div",{className:`relative rounded-2xl p-6 flex flex-col ${e.isPopular?"bg-white border-2 border-brand-500 shadow-xl scale-105 z-10":"bg-white border border-slate-200 shadow-md"}`,children:[e.isPopular&&T.jsxs("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-brand-500 text-white px-4 py-1 rounded-full text-sm font-bold flex items-center",children:[T.jsx(Sd,{size:14,className:"mr-1 fill-current"})," Best Value"]}),T.jsxs("div",{className:"mb-4",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-900",children:e.name}),T.jsx("div",{className:"mt-2 flex items-baseline",children:T.jsx("span",{className:"text-3xl font-bold text-slate-900",children:e.price})})]}),T.jsx("ul",{className:"space-y-3 mb-8 flex-1",children:e.features.map((n,i)=>T.jsxs("li",{className:"flex items-start text-sm text-slate-600",children:[T.jsx(wI,{size:18,className:"mr-2 text-green-500 shrink-0"}),n]},i))}),T.jsx("button",{className:`w-full py-3 rounded-xl font-bold transition ${e.isPopular?"bg-brand-500 text-white hover:bg-brand-600 shadow-lg shadow-brand-200":"bg-slate-100 text-slate-800 hover:bg-slate-200"}`,children:e.cta})]},e.id))}),T.jsxs("div",{className:"mt-16 grid md:grid-cols-2 gap-8",children:[T.jsxs("div",{className:"bg-indigo-50 rounded-2xl p-8 flex items-start space-x-4",children:[T.jsx("div",{className:"bg-indigo-100 p-3 rounded-xl text-indigo-600",children:T.jsx(rA,{size:24})}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-xl font-bold text-indigo-900 mb-2",children:"Schools & Education"}),T.jsx("p",{className:"text-slate-600 mb-4",children:'Generate "Classroom Hero" coloring sheets for the whole class. Bulk discounts available for teachers.'}),T.jsx("button",{className:"text-indigo-600 font-bold hover:underline",children:"Contact Sales"})]})]}),T.jsxs("div",{className:"bg-purple-50 rounded-2xl p-8 flex items-start space-x-4",children:[T.jsx("div",{className:"bg-purple-100 p-3 rounded-xl text-purple-600",children:T.jsx(BI,{size:24})}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-xl font-bold text-purple-900 mb-2",children:"Birthday Party Packs"}),T.jsx("p",{className:"text-slate-600 mb-4",children:"The ultimate party favor! Personalized 5-page mini-books for 10+ kids."}),T.jsx("button",{className:"text-purple-600 font-bold hover:underline",children:"View Party Packs"})]})]})]}),T.jsx("div",{className:"text-center mt-12",children:T.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700",children:"Back to Home"})})]}),A6=({setAppState:t,onLoginSuccess:e})=>{const[n,i]=Se.useState(""),[o,a]=Se.useState(""),[u,d]=Se.useState(!1),h=async v=>{v.preventDefault(),d(!0);try{const E=await Mk(n,o);e(E)}catch(E){console.error(E),alert(`Login failed: ${E.message}`)}finally{d(!1)}},p=async()=>{d(!0);try{const v=await iC();e(v)}catch(v){console.error(v),v.code==="auth/unauthorized-domain"?alert("Domain not authorized! Please add this domain to your Firebase Console > Authentication > Settings > Authorized Domains."):v.code==="auth/popup-closed-by-user"||alert(`Google Sign In failed: ${v.message}`)}finally{d(!1)}};return T.jsx("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center bg-slate-50 px-4",children:T.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-xl border border-slate-100 p-8 md:p-12",children:[T.jsxs("button",{onClick:()=>t(Ce.LANDING),className:"text-slate-400 hover:text-slate-600 mb-6 flex items-center",children:[T.jsx(Yd,{size:16,className:"mr-1"})," Back"]}),T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("h1",{className:"text-3xl font-display font-bold text-slate-900",children:"Welcome Back!"}),T.jsx("p",{className:"text-slate-500 mt-2",children:"Login to access your magical stories."})]}),T.jsx("button",{type:"button",onClick:p,disabled:u,className:"w-full bg-white border border-slate-300 text-slate-700 font-bold py-3 rounded-xl flex items-center justify-center hover:bg-slate-50 transition mb-6 active:scale-95 transform",children:u?T.jsx("span",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-brand-500"}):T.jsxs(T.Fragment,{children:[T.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[T.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),T.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),T.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),T.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign in with Google"]})}),T.jsxs("div",{className:"flex items-center mb-6",children:[T.jsx("div",{className:"flex-1 h-px bg-slate-200"}),T.jsx("span",{className:"px-3 text-slate-400 text-sm",children:"or with email"}),T.jsx("div",{className:"flex-1 h-px bg-slate-200"})]}),T.jsxs("form",{onSubmit:h,className:"space-y-4",children:[T.jsxs("div",{className:"relative",children:[T.jsx(Ap,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),T.jsx("input",{type:"email",placeholder:"Email Address",value:n,onChange:v=>i(v.target.value),required:!0,className:"w-full pl-12 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 outline-none"})]}),T.jsxs("div",{className:"relative",children:[T.jsx(su,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),T.jsx("input",{type:"password",placeholder:"Password",value:o,onChange:v=>a(v.target.value),required:!0,className:"w-full pl-12 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 outline-none"})]}),T.jsx("button",{type:"submit",disabled:u,className:"w-full bg-brand-600 hover:bg-brand-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-brand-200 transition flex justify-center items-center",children:u?T.jsx("span",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Log In"})]}),T.jsxs("p",{className:"text-center text-slate-600 mt-6",children:["Don't have an account? ",T.jsx("button",{onClick:()=>t(Ce.SIGNUP),className:"text-brand-600 font-bold hover:underline",children:"Sign Up"})]})]})})},S6=({setAppState:t,onLoginSuccess:e})=>{const[n,i]=Se.useState(""),[o,a]=Se.useState(""),[u,d]=Se.useState(""),[h,p]=Se.useState(!1),v=async S=>{S.preventDefault(),p(!0);try{const w=await Dk(n,o,u);e(w)}catch(w){console.error(w)}finally{p(!1)}},E=async()=>{p(!0);try{const S=await iC();e(S)}catch(S){console.error(S),p(!1)}};return T.jsx("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center bg-slate-50 px-4",children:T.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-xl border border-slate-100 p-8 md:p-12",children:[T.jsxs("button",{onClick:()=>t(Ce.LANDING),className:"text-slate-400 hover:text-slate-600 mb-6 flex items-center",children:[T.jsx(Yd,{size:16,className:"mr-1"})," Back"]}),T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("h1",{className:"text-3xl font-display font-bold text-slate-900",children:"Create Account"}),T.jsx("p",{className:"text-slate-500 mt-2",children:"Join KidzyColor to save your stories!"})]}),T.jsxs("form",{onSubmit:v,className:"space-y-4",children:[T.jsxs("div",{className:"relative",children:[T.jsx(uA,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),T.jsx("input",{type:"text",placeholder:"Parent Name",value:n,onChange:S=>i(S.target.value),required:!0,className:"w-full pl-12 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 outline-none"})]}),T.jsxs("div",{className:"relative",children:[T.jsx(Ap,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),T.jsx("input",{type:"email",placeholder:"Email Address",value:o,onChange:S=>a(S.target.value),required:!0,className:"w-full pl-12 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 outline-none"})]}),T.jsxs("div",{className:"relative",children:[T.jsx(su,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),T.jsx("input",{type:"password",placeholder:"Password",value:u,onChange:S=>d(S.target.value),required:!0,className:"w-full pl-12 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 outline-none"})]}),T.jsx("button",{type:"submit",disabled:h,className:"w-full bg-brand-600 hover:bg-brand-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-brand-200 transition flex justify-center items-center",children:h?T.jsx("span",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Create Account"})]}),T.jsxs("div",{className:"flex items-center my-6",children:[T.jsx("div",{className:"flex-1 h-px bg-slate-200"}),T.jsx("span",{className:"px-3 text-slate-400 text-sm",children:"or"}),T.jsx("div",{className:"flex-1 h-px bg-slate-200"})]}),T.jsxs("button",{onClick:E,disabled:h,className:"w-full bg-white border border-slate-300 text-slate-700 font-bold py-3 rounded-xl flex items-center justify-center hover:bg-slate-50 transition",children:[T.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[T.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),T.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),T.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),T.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign up with Google"]}),T.jsxs("p",{className:"text-center text-slate-600 mt-6",children:["Already have an account? ",T.jsx("button",{onClick:()=>t(Ce.LOGIN),className:"text-brand-600 font-bold hover:underline",children:"Log In"})]})]})})},UC=async(t,e,n)=>{const i=`${Date.now()}-${Math.random().toString(36).substr(2,9)}.png`,o=Sk(Nk,`users/${t}/${n}/${i}`),a=await Ek(o,e,"data_url");return await Ak(a.ref)},x6=async(t,e,n)=>{try{let i=e.pages[0].imageUrl||"";i.startsWith("data:")&&(i=await UC(t,i,"stories"));const o={userId:t,title:e.title,coverUrl:i,createdAt:Date.now(),storyData:{...e,pages:e.pages.map(u=>({...u,imageUrl:u.imageUrl}))},paperSize:n};return{id:(await Ox(df(mf,"stories"),o)).id,...o}}catch(i){throw console.error("Error saving story",i),i}},C6=async t=>{const e=Px(df(mf,"stories"),kx("userId","==",t),Ux("createdAt","desc"));return(await Vx(e)).docs.map(i=>({id:i.id,...i.data()}))},w6=async(t,e,n,i)=>{try{const o=await UC(t,e,"photos"),a={userId:t,url:o,prompt:n,theme:i,createdAt:Date.now()};return{id:(await Ox(df(mf,"photos"),a)).id,...a}}catch(o){throw console.error("Error saving photo",o),o}},I6=async t=>{const e=Px(df(mf,"photos"),kx("userId","==",t),Ux("createdAt","desc"));return(await Vx(e)).docs.map(i=>({id:i.id,...i.data()}))},b6=({user:t,setAppState:e})=>{const[n,i]=Se.useState([]),[o,a]=Se.useState([]),[u,d]=Se.useState(!0);return Se.useEffect(()=>{(async()=>{d(!0);try{const[p,v]=await Promise.all([C6(t.id),I6(t.id)]);i(p),a(v)}catch(p){console.error("Failed to load dashboard data",p)}finally{d(!1)}})()},[t.id]),T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[T.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-sm border border-slate-200 mb-12 flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-6",children:[T.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-24 h-24 rounded-full border-4 border-brand-100"}),T.jsxs("div",{className:"text-center md:text-left flex-1",children:[T.jsxs("h1",{className:"text-3xl font-display font-bold text-slate-900",children:["Hello, ",t.name,"!"]}),T.jsxs("p",{className:"text-slate-500",children:["Member since ",new Date().getFullYear()]})]}),T.jsxs("button",{onClick:()=>e(Ce.CONFIG),className:"bg-brand-600 hover:bg-brand-700 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-brand-200 transition flex items-center",children:["Create New Magic ",T.jsx(Bm,{size:18,className:"ml-2"})]})]}),u?T.jsx("div",{className:"flex justify-center py-20",children:T.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-brand-500 border-t-transparent rounded-full"})}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"mb-16",children:[T.jsxs("h2",{className:"text-2xl font-display font-bold text-slate-900 mb-6 flex items-center",children:[T.jsx(Td,{className:"mr-2 text-brand-500"})," My Storybooks"]}),n.length===0?T.jsx("div",{className:"bg-slate-50 rounded-2xl p-8 text-center border border-dashed border-slate-300",children:T.jsx("p",{className:"text-slate-500 mb-4",children:"You haven't created any storybooks yet."})}):T.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:n.map(h=>T.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition border border-slate-100 group",children:[T.jsxs("div",{className:"aspect-[3/4] bg-slate-100 relative overflow-hidden",children:[T.jsx("img",{src:h.coverUrl,alt:h.title,className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/0 transition"})]}),T.jsxs("div",{className:"p-4",children:[T.jsx("h3",{className:"font-bold text-slate-900 truncate",children:h.title}),T.jsxs("div",{className:"flex items-center text-slate-500 text-xs mt-2",children:[T.jsx(CI,{size:12,className:"mr-1"}),new Date(h.createdAt).toLocaleDateString()]}),T.jsx("button",{className:"w-full mt-4 bg-brand-50 text-brand-600 py-2 rounded-lg text-sm font-bold hover:bg-brand-100 transition",children:"Read & Color"})]})]},h.id))})]}),T.jsxs("div",{children:[T.jsxs("h2",{className:"text-2xl font-display font-bold text-slate-900 mb-6 flex items-center",children:[T.jsx(oA,{className:"mr-2 text-purple-500"})," My Photoshoot Gallery"]}),o.length===0?T.jsx("div",{className:"bg-slate-50 rounded-2xl p-8 text-center border border-dashed border-slate-300",children:T.jsx("p",{className:"text-slate-500 mb-4",children:"No photoshoot images saved yet."})}):T.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:o.map(h=>T.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition border border-slate-100 group",children:[T.jsxs("div",{className:"aspect-square bg-slate-100 relative",children:[T.jsx("img",{src:h.url,alt:h.theme,className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3 opacity-0 group-hover:opacity-100 transition",children:T.jsx("a",{href:h.url,download:!0,target:"_blank",rel:"noreferrer",className:"text-white text-xs font-bold hover:underline",children:"Download"})})]}),T.jsxs("div",{className:"p-3",children:[T.jsx("p",{className:"text-xs font-bold text-slate-700 truncate",children:h.theme}),T.jsxs("p",{className:"text-[10px] text-slate-400 truncate",children:[h.prompt.substring(0,20),"..."]})]})]},h.id))})]})]})]})},R6=({pageKey:t,onBack:e})=>{const n=()=>{switch(t){case"privacy":return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[T.jsx(QI,{className:"text-green-500",size:32}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Privacy Policy"}),T.jsx("p",{className:"text-sm text-slate-500",children:"Provided by Wayne Creative Alliance Pvt Ltd"})]})]}),T.jsxs("div",{className:"prose prose-slate max-w-none text-slate-600 text-sm md:text-base",children:[T.jsxs("p",{className:"mb-4",children:[T.jsx("strong",{children:"Effective Date:"})," ",new Date().toLocaleDateString()]}),T.jsxs("p",{children:[T.jsx("strong",{children:"KidzyColor"}),' ("Service") is an AI-powered storybook generation platform operated by ',T.jsx("strong",{children:"Wayne Creative Alliance Pvt Ltd"}),` ("Company", "we", "us", or "our"). We are committed to protecting the privacy of our users ("you"), especially regarding the sensitive nature of children's images.`]}),T.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-6 mb-3",children:"1. Information We Collect"}),T.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"Account Information:"})," Name, email address, and authentication data provided via Google Sign-In."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"User Content:"})," Photos uploaded for processing and text inputs (names, descriptions)."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Generated Content:"})," AI-generated images and stories created through the Service."]})]}),T.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-6 mb-3",children:"2. How We Process Images (AI & Third Parties)"}),T.jsxs("p",{children:["To provide our Service, uploaded photos are processed using advanced Artificial Intelligence models (specifically Google Gemini API).",T.jsx("strong",{children:"Wayne Creative Alliance Pvt Ltd"})," does not use your personal photos to train public AI models. Images are processed ephemerally to generate the requested stylized avatar and story."]}),T.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-6 mb-3",children:"3. Data Retention"}),T.jsxs("p",{children:[T.jsx("strong",{children:"Uploads:"})," Original photos uploaded for generation are automatically deleted from our processing servers within 24 hours after the session is complete.",T.jsx("br",{}),T.jsx("strong",{children:"Library:"})," Generated stories and stylized avatars are stored securely in your private User Library until you choose to delete them or delete your account."]}),T.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-6 mb-3",children:"4. Data Security"}),T.jsx("p",{children:"We implement industry-standard security measures, including encryption in transit and at rest, to protect your data. However, no method of transmission over the Internet is 100% secure."}),T.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-6 mb-3",children:"5. Contact Us"}),T.jsx("p",{children:"For privacy-related inquiries regarding KidzyColor, please contact Wayne Creative Alliance Pvt Ltd."})]})]});case"terms":return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[T.jsx(FI,{className:"text-blue-500",size:32}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Terms of Service"}),T.jsx("p",{className:"text-sm text-slate-500",children:"Legal Agreement with Wayne Creative Alliance Pvt Ltd"})]})]}),T.jsxs("div",{className:"prose prose-slate max-w-none text-slate-600 text-sm md:text-base",children:[T.jsxs("p",{children:['These Terms of Service ("Terms") govern your access to and use of ',T.jsx("strong",{children:"KidzyColor"}),", a SaaS product provided by ",T.jsx("strong",{children:"Wayne Creative Alliance Pvt Ltd"}),"."]}),T.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-6 mb-3",children:"1. AI Technology Disclaimer"}),T.jsx("p",{children:"KidzyColor uses generative artificial intelligence. By using the Service, you acknowledge that:"}),T.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[T.jsx("li",{children:"AI outputs are probabilistic and may occasionally produce inaccurate, unexpected, or offensive results."}),T.jsx("li",{children:"Wayne Creative Alliance Pvt Ltd does not guarantee that the generated likeness will be 100% accurate to the uploaded photo."}),T.jsx("li",{children:"You are responsible for reviewing all generated content before sharing or printing."})]}),T.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-6 mb-3",children:"2. User Conduct & Acceptable Use"}),T.jsx("p",{children:"You agree NOT to:"}),T.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[T.jsx("li",{children:"Upload images of any person for whom you do not have legal rights or parental consent."}),T.jsx("li",{children:"Upload content that is illegal, harmful, threatening, abusive, or sexually explicit."}),T.jsx("li",{children:"Use the generated content for unlawful purposes."})]}),T.jsx("p",{children:"Wayne Creative Alliance Pvt Ltd reserves the right to ban any user found violating these terms without refund."}),T.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-6 mb-3",children:"3. Intellectual Property"}),T.jsxs("p",{children:[T.jsx("strong",{children:"Your Content:"})," You retain ownership of the photos you upload.",T.jsx("br",{}),T.jsx("strong",{children:"Generated Assets:"})," Upon payment (if applicable), Wayne Creative Alliance Pvt Ltd grants you a perpetual, non-exclusive, worldwide license to use, display, and print the AI-generated stories and images for personal, non-commercial use."]}),T.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-6 mb-3",children:"4. Limitation of Liability"}),T.jsx("p",{className:"uppercase text-xs font-bold tracking-wider text-slate-500 mb-2",children:"Read Carefully"}),T.jsx("p",{children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, WAYNE CREATIVE ALLIANCE PVT LTD SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS OR REVENUES, WHETHER INCURRED DIRECTLY OR INDIRECTLY, RESULTING FROM (A) YOUR ACCESS TO OR USE OF OR INABILITY TO ACCESS OR USE THE SERVICE; (B) ANY CONDUCT OR CONTENT OF ANY THIRD PARTY ON THE SERVICE; OR (C) UNAUTHORIZED ACCESS, USE, OR ALTERATION OF YOUR TRANSMISSIONS OR CONTENT."}),T.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-6 mb-3",children:"5. Refund Policy"}),T.jsx("p",{children:"Due to the significant GPU costs associated with AI generation, all sales are final. Refunds are only provided in the event of a proven technical failure where the Service did not deliver the generated output."})]})]});case"schools":return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[T.jsx(rA,{className:"text-indigo-500",size:32}),T.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"For Schools & Educators"})]}),T.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Spark creativity in your classroom with personalized learning materials powered by Wayne Creative Alliance Pvt Ltd."}),T.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[T.jsxs("div",{className:"bg-indigo-50 p-6 rounded-2xl border border-indigo-100",children:[T.jsx("h3",{className:"text-xl font-bold text-indigo-900 mb-2",children:"Bulk Licensing"}),T.jsx("p",{className:"text-slate-600",children:'Get a school-wide license to generate "Classroom Hero" stories for every student. Perfect for end-of-year gifts or creative writing prompts.'})]}),T.jsxs("div",{className:"bg-purple-50 p-6 rounded-2xl border border-purple-100",children:[T.jsx("h3",{className:"text-xl font-bold text-purple-900 mb-2",children:"Privacy First Mode"}),T.jsx("p",{className:"text-slate-600",children:'Our educational plan includes a special "Zero-Retention" mode where no data is saved to servers after generation, ensuring full compliance with educational data standards.'})]})]}),T.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-2xl shadow-sm text-center",children:[T.jsx("h3",{className:"text-lg font-bold mb-2",children:"Interested in a pilot program?"}),T.jsx("p",{className:"text-slate-500 mb-4",children:"Contact our education team for a demo."}),T.jsx("button",{className:"bg-indigo-600 text-white px-6 py-2 rounded-full font-bold hover:bg-indigo-700",children:"Contact Sales"})]})]});case"help":return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[T.jsx(PI,{className:"text-orange-500",size:32}),T.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Help Center"})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6",children:[T.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-2",children:"About KidzyColor"}),T.jsxs("p",{className:"text-slate-600",children:["KidzyColor is an AI-powered SaaS product developed and maintained by ",T.jsx("strong",{children:"Wayne Creative Alliance Pvt Ltd"}),". We combine cutting-edge Generative AI with storytelling to create magical experiences for families."]})]}),T.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6",children:[T.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-2",children:"Why does the generation take time?"}),T.jsx("p",{className:"text-slate-600",children:'We use advanced AI models to analyze features and generate high-resolution images. This "thinking" and "drawing" process typically takes 15-30 seconds to ensure the best quality.'})]}),T.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6",children:[T.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-2",children:"My download didn't start. What do I do?"}),T.jsx("p",{className:"text-slate-600",children:`If you purchased a download but didn't receive the file, check your "My Library" (Dashboard). All unlocked stories and photos are saved there forever.`})]}),T.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6 flex items-start space-x-4 bg-slate-50",children:[T.jsx(HI,{className:"text-slate-400 mt-1 shrink-0"}),T.jsxs("div",{children:[T.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-1",children:"Company Information"}),T.jsxs("p",{className:"text-slate-600 text-sm",children:[T.jsx("strong",{children:"Wayne Creative Alliance Pvt Ltd"}),T.jsx("br",{}),"SaaS & Marketing Agency",T.jsx("br",{}),"For legal inquiries: legal@waynecreative.com"]})]})]})]})]});case"contact":return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[T.jsx(Ap,{className:"text-brand-500",size:32}),T.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Contact Us"})]}),T.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-8 shadow-sm max-w-2xl",children:[T.jsx("p",{className:"text-slate-600 mb-6",children:"Have a question about your order or a feature request? We'd love to hear from you. KidzyColor is a product of Wayne Creative Alliance Pvt Ltd."}),T.jsxs("form",{className:"space-y-4",onSubmit:i=>{i.preventDefault(),alert("Message sent! We will get back to you shortly.")},children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Your Name"}),T.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 outline-none"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Email"}),T.jsx("input",{type:"email",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 outline-none"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Message"}),T.jsx("textarea",{rows:4,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 outline-none"})]}),T.jsx("button",{className:"bg-brand-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-brand-700 w-full",children:"Send Message"})]})]})]});default:return T.jsx("div",{children:"Page not found"})}};return T.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12 min-h-[60vh]",children:[T.jsxs("button",{onClick:e,className:"flex items-center text-slate-500 hover:text-slate-900 font-medium mb-8 transition",children:[T.jsx(Yd,{size:20,className:"mr-2"}),"Back to Home"]}),T.jsx("div",{className:"bg-white/50 backdrop-blur-sm rounded-3xl p-8 md:p-12 shadow-sm border border-slate-200",children:n()})]})},N6=()=>{const[t,e]=Se.useState(Ce.LANDING),[n,i]=Se.useState(null),[o,a]=Se.useState(null),[u,d]=Se.useState(null),[h,p]=Se.useState(!1),[v,E]=Se.useState(""),[S,w]=Se.useState(!1);Se.useEffect(()=>{const oe=VN(wu,M=>{M?(i({id:M.uid,name:M.displayName||"User",email:M.email||"",avatarUrl:M.photoURL||`https://ui-avatars.com/api/?name=${M.email}&background=0ea5e9&color=fff`}),(t===Ce.LOGIN||t===Ce.SIGNUP)&&e(Ce.DASHBOARD)):(i(null),t===Ce.DASHBOARD&&e(Ce.LANDING))});return()=>oe()},[t]);const V=async()=>{await sC(),i(null),e(Ce.LANDING)},F=oe=>{i(oe),e(Ce.DASHBOARD)},z=()=>{e(n?Ce.CONFIG:Ce.LOGIN)},X=async oe=>{p(!0),d(oe);try{const M=await m6(oe);a(M),e(Ce.STORY_VIEW)}catch(M){alert("Something went wrong creating the magic. The AI might be busy (Rate Limit), please try again in a moment."),console.error(M)}finally{p(!1)}},ne=oe=>{d(oe),e(Ce.PHOTOSHOOT_GALLERY)},Q=async()=>{if(n&&o&&u){w(!0);try{await x6(n.id,o,u.paperSize),alert("Story saved to your Library!")}catch(oe){alert("Failed to save story. Please try again."),console.error(oe)}finally{w(!1)}}},re=async(oe,M)=>{n&&u&&w6(n.id,oe,M,u.theme).catch(R=>console.error("Auto-save failed",R))},ce=oe=>{E(oe),e(Ce.INFO_PAGE),window.scrollTo(0,0)};return T.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans text-slate-900 flex flex-col",children:[T.jsx(Pk,{setAppState:e,user:n,onLogout:V}),T.jsxs("main",{className:"flex-1 pt-28",children:[t===Ce.LANDING&&T.jsx(kk,{onStart:z,user:n}),t===Ce.LOGIN&&T.jsx(A6,{setAppState:e,onLoginSuccess:F}),t===Ce.SIGNUP&&T.jsx(S6,{setAppState:e,onLoginSuccess:F}),t===Ce.DASHBOARD&&n&&T.jsx(b6,{user:n,setAppState:e}),t===Ce.CONFIG&&T.jsx(g6,{onSubmit:X,onPhotoshootMode:ne,isGenerating:h}),t===Ce.STORY_VIEW&&o&&u&&T.jsx(y6,{story:o,paperSize:u.paperSize,characterDescription:u.description,onBack:()=>e(Ce.DASHBOARD),onSave:Q}),t===Ce.PHOTOSHOOT_GALLERY&&u&&T.jsx(v6,{config:u,onBack:()=>e(Ce.DASHBOARD),onSavePhoto:re}),t===Ce.PRICING&&T.jsx(E6,{onBack:()=>e(Ce.LANDING)}),t===Ce.INFO_PAGE&&T.jsx(R6,{pageKey:v,onBack:()=>e(Ce.LANDING)})]}),T.jsx(Uk,{onNavigate:ce,setAppState:e}),S&&T.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center backdrop-blur-sm",children:T.jsxs("div",{className:"bg-white p-6 rounded-2xl flex items-center space-x-4",children:[T.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-brand-500 border-t-transparent rounded-full"}),T.jsx("span",{className:"font-bold text-slate-800",children:"Saving to Cloud Library..."})]})})]})},LC=document.getElementById("root");if(!LC)throw new Error("Could not find root element to mount to");const M6=EI.createRoot(LC);M6.render(T.jsx(hI.StrictMode,{children:T.jsx(N6,{})}));
